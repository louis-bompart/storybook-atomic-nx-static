{"version":3,"names":["MIN_VALUES_WHERE_FACET_SEARCH_IMPROVES_UX","FacetSearchInputGuard","withSearch","canShowMoreValues","numberOfDisplayedValues","children","h","Fragment","FacetValue","facetSearchQuery","displayValuesAs","enableExclusion","facetCount","facetState","facetValue","field","i18n","onExclude","onSelect","setRef","displayValue","getFieldValueCaption","isSelected","isExcluded","triStateProps","state","FacetValueCheckbox","numberOfResults","onClick","searchQuery","buttonRef","element","FacetValueLabelHighlight","FacetValueLink","FacetValueBox","FacetSearchValue","props"],"sources":["src/components/common/facets/facet-search/facet-search-input-guard.tsx","src/components/common/facets/facet-value/facet-value.tsx","src/components/common/facets/facet-search/facet-search-value.tsx"],"sourcesContent":["import {Fragment, FunctionalComponent, h} from '@stencil/core';\n\nconst MIN_VALUES_WHERE_FACET_SEARCH_IMPROVES_UX = 9;\n\ninterface FacetSearchInputGuardProps {\n  withSearch: boolean;\n  canShowMoreValues: boolean;\n  numberOfDisplayedValues: number;\n}\n\nexport const FacetSearchInputGuard: FunctionalComponent<\n  FacetSearchInputGuardProps\n> = ({withSearch, canShowMoreValues, numberOfDisplayedValues}, children) => {\n  if (!withSearch) {\n    return;\n  }\n\n  // Hide the input if there are no more values to load from the index and there are less than 8 values to display.\n  // 8 is an arbitrary number, discussed with UX as a good compromise: A list long enough where it's worth searching.\n  if (\n    !canShowMoreValues &&\n    numberOfDisplayedValues < MIN_VALUES_WHERE_FACET_SEARCH_IMPROVES_UX\n  ) {\n    return;\n  }\n\n  return <Fragment>{children}</Fragment>;\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {getFieldValueCaption} from '../../../../utils/field-utils';\nimport {FacetValueBox} from '../facet-value-box/facet-value-box';\nimport {FacetValueCheckbox} from '../facet-value-checkbox/facet-value-checkbox';\nimport {FacetValueLabelHighlight} from '../facet-value-label-highlight/facet-value-label-highlight';\nimport {FacetValueLink} from '../facet-value-link/facet-value-link';\n\nexport interface FacetValueProps {\n  field: string;\n  facetValue: string;\n  facetCount: number;\n  facetState: 'idle' | 'selected' | 'excluded';\n  i18n: i18n;\n  enableExclusion: boolean;\n  onExclude: () => void;\n  onSelect: () => void;\n  displayValuesAs: 'checkbox' | 'link' | 'box';\n  facetSearchQuery: string;\n  setRef?: (btn?: HTMLButtonElement) => void;\n}\n\nexport const FacetValue: FunctionalComponent<FacetValueProps> = ({\n  facetSearchQuery,\n  displayValuesAs,\n  enableExclusion,\n  facetCount,\n  facetState,\n  facetValue,\n  field,\n  i18n,\n  onExclude,\n  onSelect,\n  setRef,\n}) => {\n  const displayValue = getFieldValueCaption(field, facetValue, i18n);\n  const isSelected = facetState === 'selected';\n  const isExcluded = facetState === 'excluded';\n  const triStateProps = enableExclusion\n    ? {\n        onExclude,\n        state: facetState,\n      }\n    : {};\n  switch (displayValuesAs) {\n    case 'checkbox':\n      return (\n        <FacetValueCheckbox\n          {...triStateProps}\n          displayValue={displayValue}\n          numberOfResults={facetCount}\n          isSelected={isSelected}\n          i18n={i18n}\n          onClick={onSelect}\n          searchQuery={facetSearchQuery}\n          buttonRef={(element) => {\n            setRef && setRef(element);\n          }}\n        >\n          <FacetValueLabelHighlight\n            displayValue={displayValue}\n            isSelected={isSelected}\n            isExcluded={isExcluded}\n            searchQuery={facetSearchQuery}\n          ></FacetValueLabelHighlight>\n        </FacetValueCheckbox>\n      );\n    case 'link':\n      return (\n        <FacetValueLink\n          displayValue={displayValue}\n          numberOfResults={facetCount}\n          isSelected={isSelected}\n          i18n={i18n}\n          onClick={onSelect}\n          searchQuery={facetSearchQuery}\n          buttonRef={(element) => {\n            setRef && setRef(element);\n          }}\n        >\n          <FacetValueLabelHighlight\n            displayValue={displayValue}\n            isSelected={isSelected}\n            searchQuery={facetSearchQuery}\n          ></FacetValueLabelHighlight>\n        </FacetValueLink>\n      );\n    case 'box':\n      return (\n        <FacetValueBox\n          displayValue={displayValue}\n          numberOfResults={facetCount}\n          isSelected={isSelected}\n          i18n={i18n}\n          onClick={onSelect}\n          searchQuery={facetSearchQuery}\n          buttonRef={(element) => {\n            setRef && setRef(element);\n          }}\n        >\n          <FacetValueLabelHighlight\n            displayValue={displayValue}\n            isSelected={isSelected}\n            searchQuery={facetSearchQuery}\n          ></FacetValueLabelHighlight>\n        </FacetValueBox>\n      );\n  }\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {FacetValueProps, FacetValue} from '../facet-value/facet-value';\n\nexport const FacetSearchValue: FunctionalComponent<\n  Omit<FacetValueProps, 'facetState' | 'setRef'>\n> = (props) => {\n  return <FacetValue {...props} facetState=\"idle\" />;\n};\n"],"mappings":"+NAEA,MAAMA,EAA4C,E,MAQrCC,EAET,EAAEC,aAAYC,oBAAmBC,2BAA0BC,KAC7D,IAAKH,EAAY,CACf,M,CAKF,IACGC,GACDC,EAA0BJ,EAC1B,CACA,M,CAGF,OAAOM,EAACC,EAAQ,KAAEF,EAAoB,E,MCJ3BG,EAAmD,EAC9DC,mBACAC,kBACAC,kBACAC,aACAC,aACAC,aACAC,QACAC,OACAC,YACAC,WACAC,aAEA,MAAMC,EAAeC,EAAqBN,EAAOD,EAAYE,GAC7D,MAAMM,EAAaT,IAAe,WAClC,MAAMU,EAAaV,IAAe,WAClC,MAAMW,EAAgBb,EAClB,CACEM,YACAQ,MAAOZ,GAET,GACJ,OAAQH,GACN,IAAK,WACH,OACEJ,EAACoB,EAAkB,IACbF,EACJJ,aAAcA,EACdO,gBAAiBf,EACjBU,WAAYA,EACZN,KAAMA,EACNY,QAASV,EACTW,YAAapB,EACbqB,UAAYC,IACVZ,GAAUA,EAAOY,EAAQ,GAG3BzB,EAAC0B,EAAwB,CACvBZ,aAAcA,EACdE,WAAYA,EACZC,WAAYA,EACZM,YAAapB,KAIrB,IAAK,OACH,OACEH,EAAC2B,EAAc,CACbb,aAAcA,EACdO,gBAAiBf,EACjBU,WAAYA,EACZN,KAAMA,EACNY,QAASV,EACTW,YAAapB,EACbqB,UAAYC,IACVZ,GAAUA,EAAOY,EAAQ,GAG3BzB,EAAC0B,EAAwB,CACvBZ,aAAcA,EACdE,WAAYA,EACZO,YAAapB,KAIrB,IAAK,MACH,OACEH,EAAC4B,EAAa,CACZd,aAAcA,EACdO,gBAAiBf,EACjBU,WAAYA,EACZN,KAAMA,EACNY,QAASV,EACTW,YAAapB,EACbqB,UAAYC,IACVZ,GAAUA,EAAOY,EAAQ,GAG3BzB,EAAC0B,EAAwB,CACvBZ,aAAcA,EACdE,WAAYA,EACZO,YAAapB,K,QCpGZ0B,EAERC,GACI9B,EAACE,EAAU,IAAK4B,EAAOvB,WAAW,gB"}