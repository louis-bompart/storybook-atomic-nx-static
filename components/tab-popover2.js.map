{"file":"tab-popover2.js","mappings":"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","names":["ArrowBottomIcon"],"sources":["src/components/common/tabs/tab-popover.pcss?tag=tab-popover&encapsulation=shadow","src/components/common/tabs/tab-popover.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n\n:host {\n  position: absolute;\n}\n\n:host(.visibility-hidden) {\n  visibility: hidden;\n}\n\n[part='overflow-tabs'] {\n  flex-direction: column;\n  max-width: 150px;\n\n  button {\n    text-align: start;\n  }\n}\n","import {\n  createPopperLite as createPopper,\n  preventOverflow,\n  Instance as PopperInstance,\n} from '@popperjs/core';\nimport {\n  Component,\n  h,\n  Listen,\n  State,\n  Element,\n  Host,\n  Method,\n} from '@stencil/core';\nimport ArrowBottomIcon from '../../../images/arrow-bottom-rounded.svg';\nimport {\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {Bindings} from '../../search/atomic-search-interface/atomic-search-interface';\nimport {Button} from '../button';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'tab-popover',\n  shadow: true,\n  styleUrl: 'tab-popover.pcss',\n})\nexport class TabPopover implements InitializableComponent {\n  @Element() private host!: HTMLElement;\n\n  @InitializeBindings() public bindings!: Bindings;\n\n  @State()\n  public show = false;\n\n  @State()\n  public error!: Error;\n\n  @State()\n  private isOpen = false;\n\n  private buttonRef!: HTMLElement;\n  private popupRef!: HTMLElement;\n  private popperInstance?: PopperInstance;\n  public popoverId = 'tab-popover';\n\n  public initialize() {}\n\n  private initializePopover() {\n    this.popupRef.classList.add('popover-nested');\n  }\n\n  @Listen('keydown')\n  public handleKeyDown(e: KeyboardEvent) {\n    if (e.key === 'Escape' && this.isOpen) {\n      this.togglePopover();\n    }\n  }\n\n  get slotElements() {\n    return this.host.children;\n  }\n\n  get hasTabs() {\n    return !!this.popupRef.children.length;\n  }\n\n  @Method()\n  public async togglePopover() {\n    this.isOpen = !this.isOpen;\n  }\n\n  @Method()\n  public async setButtonVisibility(isVisible: boolean) {\n    this.show = isVisible;\n  }\n\n  private renderDropdownButton() {\n    const label = this.bindings?.i18n.t('more');\n    const ariaLabel = this.bindings?.i18n.t('tab-popover', {label});\n    const buttonClasses = ['relative', 'pb-1', 'mt-1', 'mr-6', 'font-semibold'];\n\n    return (\n      <Button\n        ref={(el) => (this.buttonRef = el!)}\n        style=\"text-transparent\"\n        onClick={() => this.togglePopover()}\n        part=\"popover-button\"\n        ariaExpanded={`${this.isOpen}`}\n        ariaLabel={ariaLabel}\n        ariaControls={this.popoverId}\n        class={`${buttonClasses.join(' ')}`}\n      >\n        <span\n          title={label}\n          part=\"value-label\"\n          class={\n            'truncate mr-1.5 group-hover:text-primary-light group-focus:text-primary'\n          }\n        >\n          {label}\n        </span>\n        <atomic-icon\n          part=\"arrow-icon\"\n          class={`w-2 ml-auto group-hover:text-primary-light group-focus:text-primary ${\n            this.isOpen ? 'rotate-180' : ''\n          }`}\n          icon={ArrowBottomIcon}\n        ></atomic-icon>\n      </Button>\n    );\n  }\n\n  private renderBackdrop() {\n    return (\n      <div\n        part=\"backdrop\"\n        class=\"fixed left-0 top-0 right-0 bottom-0 z-[9998] bg-transparent cursor-pointer\"\n        onClick={() => this.togglePopover()}\n      ></div>\n    );\n  }\n\n  private renderPopover() {\n    return (\n      <div class={`relative ${this.isOpen ? 'z-[9999]' : ''}`}>\n        {this.renderDropdownButton()}\n        <div\n          id={this.popoverId}\n          ref={(el) => (this.popupRef = el!)}\n          part=\"overflow-tabs\"\n          class={`absolute py-2 bg-background border-neutral border rounded-lg shadow-lg ${\n            this.isOpen ? 'flex' : 'hidden'\n          }`}\n        >\n          <slot></slot>\n        </div>\n      </div>\n    );\n  }\n\n  public componentDidRender() {\n    if (this.popperInstance || !this.buttonRef || !this.popupRef) {\n      return;\n    }\n\n    this.popperInstance = createPopper(this.buttonRef, this.popupRef, {\n      placement: 'bottom-end',\n      modifiers: [preventOverflow],\n    });\n    this.initializePopover();\n  }\n\n  public componentDidUpdate() {\n    this.popperInstance?.forceUpdate();\n  }\n\n  public render() {\n    return (\n      <Host\n        class={this.show ? '' : 'visibility-hidden'}\n        aria-hidden={!this.show}\n      >\n        <atomic-focus-trap\n          source={this.buttonRef}\n          container={this.popupRef}\n          active={this.isOpen}\n          shouldHideSelf={false}\n          scope={this.bindings?.interfaceElement}\n        >\n          {this.renderPopover()}\n        </atomic-focus-trap>\n        {this.isOpen && this.renderBackdrop()}\n      </Host>\n    );\n  }\n}\n"],"version":3}