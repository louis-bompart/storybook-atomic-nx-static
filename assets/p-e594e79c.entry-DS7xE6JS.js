import{N as u,g as h,O as c}from"./atomic-breadbox.new.stories-D03zBEda.js";import{t as m,n as l}from"./p-ade4f913-C7dNxC6r.js";import{p as d}from"./p-794b93a9-Bwn0XXeG.js";import{m as y}from"./p-6fadd170-Cg3VAl32.js";import{r as g}from"./p-09db0816-BYeymY0o.js";import"./p-9935af75-BsJQUBM3.js";import"./iframe-DTo5wNcQ.js";import"../sb-preview/runtime.js";import"./p-1580513b-De1d4bsn.js";import"./p-231defbf-B5u3bU8V.js";import"./p-e9c4f463-BPmi-3c5.js";const j=class{constructor(t){u(this,t),this.format=(r,o)=>r.toLocaleString(o,{style:"currency",currency:this.currency}),this.error=void 0,this.currency=void 0}componentWillLoad(){try{m((t,r)=>this.format(t,r),this.host)}catch(t){this.error=t}}render(){if(this.error)return h("atomic-component-error",{key:"1c0133dafb59dae6c21d26d83df28dd36f11a150",element:this.host,error:this.error})}get host(){return c(this)}};var p=function(t,r,o,i){var s=arguments.length,e=s<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(t,r,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(e=(s<3?n(e):s>3?n(r,o,e):n(r,o))||e);return s>3&&e&&Object.defineProperty(r,o,e),e};const f=class{constructor(t){u(this,t),this.formatter=l,this.valueToDisplay=null,this.error=void 0,this.field=void 0,this.formatter=l,this.valueToDisplay=null}setFormat(t){t.preventDefault(),t.stopPropagation(),this.formatter=t.detail}parseValue(){const t=d.getProductProperty(this.product,this.field);if(t===null)return null;const r=parseFloat(`${t}`);return Number.isNaN(r)?(this.error=new Error(`Could not parse "${t}" from field "${this.field}" as a number.`),null):r}formatValue(t){try{return this.formatter(t,this.bindings.i18n.languages)}catch(r){return this.error=r,t.toString()}}updateValueToDisplay(){const t=this.parseValue();t!==null&&(this.valueToDisplay=this.formatValue(t))}componentWillRender(){this.updateValueToDisplay()}render(){if(this.valueToDisplay===null){this.host.remove();return}return this.valueToDisplay}get host(){return c(this)}};p([y()],f.prototype,"bindings",void 0);p([g()],f.prototype,"product",void 0);export{j as atomic_format_currency,f as atomic_product_numeric_field_value};
