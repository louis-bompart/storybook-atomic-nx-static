import{N as ai,g as dt}from"./atomic-breadbox.new.stories-D5_t4T0B.js";import"./index-Bqoxw6Vv.js";import"./_commonjsHelpers-BosuxZz1.js";import"./iframe-0V_eukm8.js";import"../sb-preview/runtime.js";/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi=Object.create,Vt=Object.defineProperty,si=Object.getOwnPropertyDescriptor,ui=Object.getOwnPropertyNames,ci=Object.getPrototypeOf,li=Object.prototype.hasOwnProperty,di=(e,t,r)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hi=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pi=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ui(t))!li.call(e,i)&&i!==r&&Vt(e,i,{get:()=>t[i],enumerable:!(n=si(t,i))||n.enumerable});return e},we=(e,t,r)=>(r=e!=null?oi(ci(e)):{},pi(!e||!e.__esModule?Vt(r,"default",{value:e,enumerable:!0}):r,e)),zr=(e,t,r)=>di(e,t+"",r),fi=Y((e,t)=>{t.exports=fetch}),gi=Y(e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var a,o=1,u=arguments.length;o<u;o++){a=arguments[o];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(i){var a=t(t({},r),i);return a.numOfAttempts<1&&(a.numOfAttempts=1),a}e.getSanitizedOptions=n}),mi=Y(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){var n=Math.random()*r;return Math.round(n)}e.fullJitter=t}),vi=Y(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){return r}e.noJitter=t}),yi=Y(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=mi(),r=vi();function n(i){switch(i.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}),Nr=Y(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=yi(),r=function(){function n(i){this.options=i,this.attempt=0}return n.prototype.apply=function(){var i=this;return new Promise(function(a){return setTimeout(a,i.jitteredDelay)})},n.prototype.setAttemptNumber=function(i){this.attempt=i},Object.defineProperty(n.prototype,"jitteredDelay",{get:function(){var i=t.JitterFactory(this.options);return i(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){var i=this.options.startingDelay,a=this.options.timeMultiple,o=this.numOfDelayedAttempts,u=i*Math.pow(a,o);return Math.min(u,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),n}();e.Delay=r}),wi=Y(e=>{var t=e&&e.__extends||function(){var o=function(u,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var f in l)l.hasOwnProperty(f)&&(c[f]=l[f])},o(u,s)};return function(u,s){o(u,s);function c(){this.constructor=u}u.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),r=e&&e.__awaiter||function(o,u,s,c){function l(f){return f instanceof s?f:new s(function(p){p(f)})}return new(s||(s=Promise))(function(f,p){function w(y){try{d(c.next(y))}catch(b){p(b)}}function k(y){try{d(c.throw(y))}catch(b){p(b)}}function d(y){y.done?f(y.value):l(y.value).then(w,k)}d((c=c.apply(o,u||[])).next())})},n=e&&e.__generator||function(o,u){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,l,f,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(d){return function(y){return k([d,y])}}function k(d){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,l&&(f=d[0]&2?l.return:d[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,d[1])).done)return f;switch(l=0,f&&(d=[d[0]&2,f.value]),d[0]){case 0:case 1:f=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,l=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!f||d[1]>f[0]&&d[1]<f[3])){s.label=d[1];break}if(d[0]===6&&s.label<f[1]){s.label=f[1],f=d;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(d);break}f[2]&&s.ops.pop(),s.trys.pop();continue}d=u.call(o,s)}catch(y){d=[6,y],l=0}finally{c=f=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=Nr(),a=function(o){t(u,o);function u(){return o!==null&&o.apply(this,arguments)||this}return u.prototype.apply=function(){return r(this,void 0,void 0,function(){return n(this,function(s){return[2,this.isFirstAttempt?!0:o.prototype.apply.call(this)]})})},Object.defineProperty(u.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),u}(i.Delay);e.SkipFirstDelay=a}),Si=Y(e=>{var t=e&&e.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var c in s)s.hasOwnProperty(c)&&(u[c]=s[c])},i(a,o)};return function(a,o){i(a,o);function u(){this.constructor=a}a.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=Nr(),n=function(i){t(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a}(r.Delay);e.AlwaysDelay=n}),bi=Y(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=wi(),r=Si();function n(a,o){var u=i(a);return u.setAttemptNumber(o),u}e.DelayFactory=n;function i(a){return a.delayFirstAttempt?new r.AlwaysDelay(a):new t.SkipFirstDelay(a)}}),ki=Y(e=>{var t=e&&e.__awaiter||function(u,s,c,l){function f(p){return p instanceof c?p:new c(function(w){w(p)})}return new(c||(c=Promise))(function(p,w){function k(b){try{y(l.next(b))}catch(D){w(D)}}function d(b){try{y(l.throw(b))}catch(D){w(D)}}function y(b){b.done?p(b.value):f(b.value).then(k,d)}y((l=l.apply(u,s||[])).next())})},r=e&&e.__generator||function(u,s){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},l,f,p,w;return w={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function k(y){return function(b){return d([y,b])}}function d(y){if(l)throw new TypeError("Generator is already executing.");for(;c;)try{if(l=1,f&&(p=y[0]&2?f.return:y[0]?f.throw||((p=f.return)&&p.call(f),0):f.next)&&!(p=p.call(f,y[1])).done)return p;switch(f=0,p&&(y=[y[0]&2,p.value]),y[0]){case 0:case 1:p=y;break;case 4:return c.label++,{value:y[1],done:!1};case 5:c.label++,f=y[1],y=[0];continue;case 7:y=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(y[0]===6||y[0]===2)){c=0;continue}if(y[0]===3&&(!p||y[1]>p[0]&&y[1]<p[3])){c.label=y[1];break}if(y[0]===6&&c.label<p[1]){c.label=p[1],p=y;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(y);break}p[2]&&c.ops.pop(),c.trys.pop();continue}y=s.call(u,c)}catch(b){y=[6,b],f=0}finally{l=p=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=gi(),i=bi();function a(u,s){return s===void 0&&(s={}),t(this,void 0,void 0,function(){var c,l;return r(this,function(f){switch(f.label){case 0:return c=n.getSanitizedOptions(s),l=new o(u,c),[4,l.execute()];case 1:return[2,f.sent()]}})})}e.backOff=a;var o=function(){function u(s,c){this.request=s,this.options=c,this.attemptNumber=0}return u.prototype.execute=function(){return t(this,void 0,void 0,function(){var s,c;return r(this,function(l){switch(l.label){case 0:if(this.attemptLimitReached)return[3,7];l.label=1;case 1:return l.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return l.sent(),[4,this.request()];case 3:return[2,l.sent()];case 4:return s=l.sent(),this.attemptNumber++,[4,this.options.retry(s,this.attemptNumber)];case 5:if(c=l.sent(),!c||this.attemptLimitReached)throw s;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(u.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),u.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var s;return r(this,function(c){switch(c.label){case 0:return s=i.DelayFactory(this.options,this.attemptNumber),[4,s.apply()];case 1:return c.sent(),[2]}})})},u}()}),Ii=Y((e,t)=>{function r(a){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(a=`${a}`,a=a.replace(/[ \t\n\f\r]/g,""),a.length%4===0&&(a=a.replace(/==?$/,"")),a.length%4===1||/[^+/0-9A-Za-z]/.test(a))return null;let o="",u=0,s=0;for(let c=0;c<a.length;c++)u<<=6,u|=i(a[c]),s+=6,s===24&&(o+=String.fromCharCode((u&16711680)>>16),o+=String.fromCharCode((u&65280)>>8),o+=String.fromCharCode(u&255),u=s=0);return s===12?(u>>=4,o+=String.fromCharCode(u)):s===18&&(u>>=2,o+=String.fromCharCode((u&65280)>>8),o+=String.fromCharCode(u&255)),o}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(a){let o=n.indexOf(a);return o<0?void 0:o}t.exports=r}),Ci=Y((e,t)=>{function r(a){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let o;for(a=`${a}`,o=0;o<a.length;o++)if(a.charCodeAt(o)>255)return null;let u="";for(o=0;o<a.length;o+=3){let s=[void 0,void 0,void 0,void 0];s[0]=a.charCodeAt(o)>>2,s[1]=(a.charCodeAt(o)&3)<<4,a.length>o+1&&(s[1]|=a.charCodeAt(o+1)>>4,s[2]=(a.charCodeAt(o+1)&15)<<2),a.length>o+2&&(s[2]|=a.charCodeAt(o+2)>>6,s[3]=a.charCodeAt(o+2)&63);for(let c=0;c<s.length;c++)typeof s[c]>"u"?u+="=":u+=i(s[c])}return u}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(a){if(a>=0&&a<64)return n[a]}t.exports=r}),Ei=Y((e,t)=>{var r=Ii(),n=Ci();t.exports={atob:r,btoa:n}}),Oi=Y((e,t)=>{var r=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}),Ai=Y((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>{var n;return((n=r.exec(document.cookie))==null?void 0:n.pop())||null}}),Di=Y((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,function(){var r=1e3,n=6e4,i=36e5,a="millisecond",o="second",u="minute",s="hour",c="day",l="week",f="month",p="quarter",w="year",k="date",d="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var E=["th","st","nd","rd"],I=_%100;return"["+_+(E[(I-20)%10]||E[I]||E[0])+"]"}},$=function(_,E,I){var h=String(_);return!h||h.length>=E?_:""+Array(E+1-h.length).join(I)+_},N={s:$,z:function(_){var E=-_.utcOffset(),I=Math.abs(E),h=Math.floor(I/60),v=I%60;return(E<=0?"+":"-")+$(h,2,"0")+":"+$(v,2,"0")},m:function _(E,I){if(E.date()<I.date())return-_(I,E);var h=12*(I.year()-E.year())+(I.month()-E.month()),v=E.clone().add(h,f),S=I-v<0,C=E.clone().add(h+(S?-1:1),f);return+(-(h+(I-v)/(S?v-C:C-v))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:f,y:w,w:l,d:c,D:k,h:s,m:u,s:o,ms:a,Q:p}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},T="en",H={};H[T]=D;var z="$isDayjsObject",J=function(_){return _ instanceof be||!(!_||!_[z])},K=function _(E,I,h){var v;if(!E)return T;if(typeof E=="string"){var S=E.toLowerCase();H[S]&&(v=S),I&&(H[S]=I,v=S);var C=E.split("-");if(!v&&C.length>1)return _(C[0])}else{var O=E.name;H[O]=E,v=O}return!h&&v&&(T=v),v||!h&&T},L=function(_,E){if(J(_))return _.clone();var I=typeof E=="object"?E:{};return I.date=_,I.args=arguments,new be(I)},U=N;U.l=K,U.i=J,U.w=function(_,E){return L(_,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var be=function(){function _(I){this.$L=K(I.locale,null,!0),this.parse(I),this.$x=this.$x||I.x||{},this[z]=!0}var E=_.prototype;return E.parse=function(I){this.$d=function(h){var v=h.date,S=h.utc;if(v===null)return new Date(NaN);if(U.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var C=v.match(y);if(C){var O=C[2]-1||0,x=(C[7]||"0").substring(0,3);return S?new Date(Date.UTC(C[1],O,C[3]||1,C[4]||0,C[5]||0,C[6]||0,x)):new Date(C[1],O,C[3]||1,C[4]||0,C[5]||0,C[6]||0,x)}}return new Date(v)}(I),this.init()},E.init=function(){var I=this.$d;this.$y=I.getFullYear(),this.$M=I.getMonth(),this.$D=I.getDate(),this.$W=I.getDay(),this.$H=I.getHours(),this.$m=I.getMinutes(),this.$s=I.getSeconds(),this.$ms=I.getMilliseconds()},E.$utils=function(){return U},E.isValid=function(){return this.$d.toString()!==d},E.isSame=function(I,h){var v=L(I);return this.startOf(h)<=v&&v<=this.endOf(h)},E.isAfter=function(I,h){return L(I)<this.startOf(h)},E.isBefore=function(I,h){return this.endOf(h)<L(I)},E.$g=function(I,h,v){return U.u(I)?this[h]:this.set(v,I)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(I,h){var v=this,S=!!U.u(h)||h,C=U.p(I),O=function(de,re){var le=U.w(v.$u?Date.UTC(v.$y,re,de):new Date(v.$y,re,de),v);return S?le:le.endOf(c)},x=function(de,re){return U.w(v.toDate()[de].apply(v.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(re)),v)},M=this.$W,j=this.$M,q=this.$D,A="set"+(this.$u?"UTC":"");switch(C){case w:return S?O(1,0):O(31,11);case f:return S?O(1,j):O(0,j+1);case l:var Q=this.$locale().weekStart||0,oe=(M<Q?M+7:M)-Q;return O(S?q-oe:q+(6-oe),j);case c:case k:return x(A+"Hours",0);case s:return x(A+"Minutes",1);case u:return x(A+"Seconds",2);case o:return x(A+"Milliseconds",3);default:return this.clone()}},E.endOf=function(I){return this.startOf(I,!1)},E.$set=function(I,h){var v,S=U.p(I),C="set"+(this.$u?"UTC":""),O=(v={},v[c]=C+"Date",v[k]=C+"Date",v[f]=C+"Month",v[w]=C+"FullYear",v[s]=C+"Hours",v[u]=C+"Minutes",v[o]=C+"Seconds",v[a]=C+"Milliseconds",v)[S],x=S===c?this.$D+(h-this.$W):h;if(S===f||S===w){var M=this.clone().set(k,1);M.$d[O](x),M.init(),this.$d=M.set(k,Math.min(this.$D,M.daysInMonth())).$d}else O&&this.$d[O](x);return this.init(),this},E.set=function(I,h){return this.clone().$set(I,h)},E.get=function(I){return this[U.p(I)]()},E.add=function(I,h){var v,S=this;I=Number(I);var C=U.p(h),O=function(j){var q=L(S);return U.w(q.date(q.date()+Math.round(j*I)),S)};if(C===f)return this.set(f,this.$M+I);if(C===w)return this.set(w,this.$y+I);if(C===c)return O(1);if(C===l)return O(7);var x=(v={},v[u]=n,v[s]=i,v[o]=r,v)[C]||1,M=this.$d.getTime()+I*x;return U.w(M,this)},E.subtract=function(I,h){return this.add(-1*I,h)},E.format=function(I){var h=this,v=this.$locale();if(!this.isValid())return v.invalidDate||d;var S=I||"YYYY-MM-DDTHH:mm:ssZ",C=U.z(this),O=this.$H,x=this.$m,M=this.$M,j=v.weekdays,q=v.months,A=v.meridiem,Q=function(re,le,W,se){return re&&(re[le]||re(h,S))||W[le].slice(0,se)},oe=function(re){return U.s(O%12||12,re,"0")},de=A||function(re,le,W){var se=re<12?"AM":"PM";return W?se.toLowerCase():se};return S.replace(b,function(re,le){return le||function(W){switch(W){case"YY":return String(h.$y).slice(-2);case"YYYY":return U.s(h.$y,4,"0");case"M":return M+1;case"MM":return U.s(M+1,2,"0");case"MMM":return Q(v.monthsShort,M,q,3);case"MMMM":return Q(q,M);case"D":return h.$D;case"DD":return U.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return Q(v.weekdaysMin,h.$W,j,2);case"ddd":return Q(v.weekdaysShort,h.$W,j,3);case"dddd":return j[h.$W];case"H":return String(O);case"HH":return U.s(O,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return de(O,x,!0);case"A":return de(O,x,!1);case"m":return String(x);case"mm":return U.s(x,2,"0");case"s":return String(h.$s);case"ss":return U.s(h.$s,2,"0");case"SSS":return U.s(h.$ms,3,"0");case"Z":return C}return null}(re)||C.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(I,h,v){var S,C=this,O=U.p(h),x=L(I),M=(x.utcOffset()-this.utcOffset())*n,j=this-x,q=function(){return U.m(C,x)};switch(O){case w:S=q()/12;break;case f:S=q();break;case p:S=q()/3;break;case l:S=(j-M)/6048e5;break;case c:S=(j-M)/864e5;break;case s:S=j/i;break;case u:S=j/n;break;case o:S=j/r;break;default:S=j}return v?S:U.a(S)},E.daysInMonth=function(){return this.endOf(f).$D},E.$locale=function(){return H[this.$L]},E.locale=function(I,h){if(!I)return this.$L;var v=this.clone(),S=K(I,h,!0);return S&&(v.$L=S),v},E.clone=function(){return U.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},_}(),xe=be.prototype;return L.prototype=xe,[["$ms",a],["$s",o],["$m",u],["$H",s],["$W",c],["$M",f],["$y",w],["$D",k]].forEach(function(_){xe[_[1]]=function(E){return this.$g(E,_[0],_[1])}}),L.extend=function(_,E){return _.$i||(_(E,be,L),_.$i=!0),L},L.locale=K,L.isDayjs=J,L.unix=function(_){return L(1e3*_)},L.en=H[T],L.Ls=H,L.p={},L})}),_i=Y((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(i,a,o){var u,s=function(p,w,k){k===void 0&&(k={});var d=new Date(p),y=function(b,D){D===void 0&&(D={});var $=D.timeZoneName||"short",N=b+"|"+$,T=n[N];return T||(T=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:$}),n[N]=T),T}(w,k);return y.formatToParts(d)},c=function(p,w){for(var k=s(p,w),d=[],y=0;y<k.length;y+=1){var b=k[y],D=b.type,$=b.value,N=r[D];N>=0&&(d[N]=parseInt($,10))}var T=d[3],H=T===24?0:T,z=d[0]+"-"+d[1]+"-"+d[2]+" "+H+":"+d[4]+":"+d[5]+":000",J=+p;return(o.utc(z).valueOf()-(J-=J%1e3))/6e4},l=a.prototype;l.tz=function(p,w){p===void 0&&(p=u);var k=this.utcOffset(),d=this.toDate(),y=d.toLocaleString("en-US",{timeZone:p}),b=Math.round((d-new Date(y))/1e3/60),D=o(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(d.getTimezoneOffset()/15)-b,!0);if(w){var $=D.utcOffset();D=D.add(k-$,"minute")}return D.$x.$timezone=p,D},l.offsetName=function(p){var w=this.$x.$timezone||o.tz.guess(),k=s(this.valueOf(),w,{timeZoneName:p}).find(function(d){return d.type.toLowerCase()==="timezonename"});return k&&k.value};var f=l.startOf;l.startOf=function(p,w){if(!this.$x||!this.$x.$timezone)return f.call(this,p,w);var k=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(k,p,w).tz(this.$x.$timezone,!0)},o.tz=function(p,w,k){var d=k&&w,y=k||w||u,b=c(+o(),y);if(typeof p!="string")return o(p).tz(y);var D=function(H,z,J){var K=H-60*z*1e3,L=c(K,J);if(z===L)return[K,z];var U=c(K-=60*(L-z)*1e3,J);return L===U?[K,L]:[H-60*Math.min(L,U)*1e3,Math.max(L,U)]}(o.utc(p,d).valueOf(),b,y),$=D[0],N=D[1],T=o($).utcOffset(N);return T.$x.$timezone=y,T},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(p){u=p}}})}),Ui=Y((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(a,o,u){var s=o.prototype;u.utc=function(d){var y={date:d,utc:!0,args:arguments};return new o(y)},s.utc=function(d){var y=u(this.toDate(),{locale:this.$L,utc:!0});return d?y.add(this.utcOffset(),r):y},s.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var c=s.parse;s.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),c.call(this,d)};var l=s.init;s.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else l.call(this)};var f=s.utcOffset;s.utcOffset=function(d,y){var b=this.$utils().u;if(b(d))return this.$u?0:b(this.$offset)?f.call(this):this.$offset;if(typeof d=="string"&&(d=function(T){T===void 0&&(T="");var H=T.match(n);if(!H)return null;var z=(""+H[0]).match(i)||["-",0,0],J=z[0],K=60*+z[1]+ +z[2];return K===0?0:J==="+"?K:-K}(d),d===null))return this;var D=Math.abs(d)<=16?60*d:d,$=this;if(y)return $.$offset=D,$.$u=d===0,$;if(d!==0){var N=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();($=this.local().add(D+N,r)).$offset=D,$.$x.$localOffset=N}else $=this.utc();return $};var p=s.format;s.format=function(d){var y=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,y)},s.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var w=s.toDate;s.toDate=function(d){return d==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():w.call(this)};var k=s.diff;s.diff=function(d,y,b){if(d&&this.$u===d.$u)return k.call(this,d,y,b);var D=this.local(),$=u(d).local();return k.call(D,$,y,b)}}})}),xi=Y((e,t)=>{function r(i){try{return JSON.stringify(i)}catch{return'"[Circular]"'}}t.exports=n;function n(i,a,o){var u=o&&o.stringify||r,s=1;if(typeof i=="object"&&i!==null){var c=a.length+s;if(c===1)return i;var l=new Array(c);l[0]=u(i);for(var f=1;f<c;f++)l[f]=u(a[f]);return l.join(" ")}if(typeof i!="string")return i;var p=a.length;if(p===0)return i;for(var w="",k=1-s,d=-1,y=i&&i.length||0,b=0;b<y;){if(i.charCodeAt(b)===37&&b+1<y){switch(d=d>-1?d:0,i.charCodeAt(b+1)){case 100:case 102:if(k>=p||a[k]==null)break;d<b&&(w+=i.slice(d,b)),w+=Number(a[k]),d=b+2,b++;break;case 105:if(k>=p||a[k]==null)break;d<b&&(w+=i.slice(d,b)),w+=Math.floor(Number(a[k])),d=b+2,b++;break;case 79:case 111:case 106:if(k>=p||a[k]===void 0)break;d<b&&(w+=i.slice(d,b));var D=typeof a[k];if(D==="string"){w+="'"+a[k]+"'",d=b+2,b++;break}if(D==="function"){w+=a[k].name||"<anonymous>",d=b+2,b++;break}w+=u(a[k]),d=b+2,b++;break;case 115:if(k>=p)break;d<b&&(w+=i.slice(d,b)),w+=String(a[k]),d=b+2,b++;break;case 37:d<b&&(w+=i.slice(d,b)),w+="%",d=b+2,b++,k--;break}++k}++b}return d===-1?i:(d<y&&(w+=i.slice(d)),w)}}),Ri=Y((e,t)=>{var r=xi();t.exports=p;var n=I().console||{},i={mapHttpRequest:K,mapHttpResponse:K,wrapRequestSerializer:L,wrapResponseSerializer:L,wrapErrorSerializer:L,req:K,res:K,err:z,errWithCause:z};function a(h,v){return h==="silent"?1/0:v.levels.values[h]}var o=Symbol("pino.logFuncs"),u=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(h,v){let S={logger:v,parent:h[u]};v[u]=S}function l(h,v,S){let C={};v.forEach(O=>{C[O]=S[O]?S[O]:n[O]||n[s[O]||"log"]||U}),h[o]=C}function f(h,v){return Array.isArray(h)?h.filter(function(S){return S!=="!stdSerializers.err"}):h===!0?Object.keys(v):!1}function p(h){h=h||{},h.browser=h.browser||{};let v=h.browser.transmit;if(v&&typeof v.send!="function")throw Error("pino: transmit option must have a send function");let S=h.browser.write||n;h.browser.write&&(h.browser.asObject=!0);let C=h.serializers||{},O=f(h.browser.serialize,C),x=h.browser.serialize;Array.isArray(h.browser.serialize)&&h.browser.serialize.indexOf("!stdSerializers.err")>-1&&(x=!1);let M=Object.keys(h.customLevels||{}),j=["error","fatal","warn","info","debug","trace"].concat(M);typeof S=="function"&&j.forEach(function(W){S[W]=S}),(h.enabled===!1||h.browser.disabled)&&(h.level="silent");let q=h.level||"info",A=Object.create(S);A.log||(A.log=U),l(A,j,S),c({},A),Object.defineProperty(A,"levelVal",{get:oe}),Object.defineProperty(A,"level",{get:de,set:re});let Q={transmit:v,serialize:O,asObject:h.browser.asObject,formatters:h.browser.formatters,levels:j,timestamp:J(h)};A.levels=w(h),A.level=q,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=U,A.serializers=C,A._serialize=O,A._stdErrSerialize=x,A.child=le,v&&(A._logEvent=H());function oe(){return a(this.level,this)}function de(){return this._level}function re(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,y(this,Q,A,"error"),y(this,Q,A,"fatal"),y(this,Q,A,"warn"),y(this,Q,A,"info"),y(this,Q,A,"debug"),y(this,Q,A,"trace"),M.forEach(se=>{y(this,Q,A,se)})}function le(W,se){if(!W)throw new Error("missing bindings for child Pino");se=se||{},O&&W.serializers&&(se.serializers=W.serializers);let ir=se.serializers;if(O&&ir){var Ve=Object.assign({},C,ir),ar=h.browser.serialize===!0?Object.keys(Ve):O;delete W.serializers,N([W],ar,Ve,this._stdErrSerialize)}function or(sr){this._childLevel=(sr._childLevel|0)+1,this.bindings=W,Ve&&(this.serializers=Ve,this._serialize=ar),v&&(this._logEvent=H([].concat(sr._logEvent.bindings,W)))}or.prototype=this;let lt=new or(this);return c(this,lt),lt.level=this.level,lt}return A}function w(h){let v=h.customLevels||{},S=Object.assign({},p.levels.values,v),C=Object.assign({},p.levels.labels,k(v));return{values:S,labels:C}}function k(h){let v={};return Object.keys(h).forEach(function(S){v[h[S]]=S}),v}p.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},p.stdSerializers=i,p.stdTimeFunctions=Object.assign({},{nullTime:be,epochTime:xe,unixTime:_,isoTime:E});function d(h){let v=[];h.bindings&&v.push(h.bindings);let S=h[u];for(;S.parent;)S=S.parent,S.logger.bindings&&v.push(S.logger.bindings);return v.reverse()}function y(h,v,S,C){if(Object.defineProperty(h,C,{value:a(h.level,S)>a(C,S)?U:S[o][C],writable:!0,enumerable:!0,configurable:!0}),!v.transmit&&h[C]===U)return;h[C]=D(h,v,S,C);let O=d(h);O.length!==0&&(h[C]=b(O,h[C]))}function b(h,v){return function(){return v.apply(this,[...h,...arguments])}}function D(h,v,S,C){return function(O){return function(){let x=v.timestamp(),M=new Array(arguments.length),j=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var q=0;q<M.length;q++)M[q]=arguments[q];if(v.serialize&&!v.asObject&&N(M,this._serialize,this.serializers,this._stdErrSerialize),v.asObject||v.formatters?O.call(j,$(this,C,M,x,v.formatters)):O.apply(j,M),v.transmit){let A=v.transmit.level||h._level,Q=S.levels.values[A],oe=S.levels.values[C];if(oe<Q)return;T(this,{ts:x,methodLevel:C,methodValue:oe,transmitLevel:A,transmitValue:S.levels.values[v.transmit.level||h._level],send:v.transmit.send,val:a(h._level,S)},M)}}}(h[o][C])}function $(h,v,S,C,O={}){let{level:x=()=>h.levels.values[v],log:M=oe=>oe}=O;h._serialize&&N(S,h._serialize,h.serializers,h._stdErrSerialize);let j=S.slice(),q=j[0],A={};C&&(A.time=C),A.level=x(v,h.levels.values[v]);let Q=(h._childLevel|0)+1;if(Q<1&&(Q=1),q!==null&&typeof q=="object"){for(;Q--&&typeof j[0]=="object";)Object.assign(A,j.shift());q=j.length?r(j.shift(),j):void 0}else typeof q=="string"&&(q=r(j.shift(),j));return q!==void 0&&(A.msg=q),M(A)}function N(h,v,S,C){for(let O in h)if(C&&h[O]instanceof Error)h[O]=p.stdSerializers.err(h[O]);else if(typeof h[O]=="object"&&!Array.isArray(h[O]))for(let x in h[O])v&&v.indexOf(x)>-1&&x in S&&(h[O][x]=S[x](h[O][x]))}function T(h,v,S){let C=v.send,O=v.ts,x=v.methodLevel,M=v.methodValue,j=v.val,q=h._logEvent.bindings;N(S,h._serialize||Object.keys(h.serializers),h.serializers,h._stdErrSerialize===void 0?!0:h._stdErrSerialize),h._logEvent.ts=O,h._logEvent.messages=S.filter(function(A){return q.indexOf(A)===-1}),h._logEvent.level.label=x,h._logEvent.level.value=M,C(x,h._logEvent,j),h._logEvent=H(q)}function H(h){return{ts:0,messages:[],bindings:h||[],level:{label:"",value:0}}}function z(h){let v={type:h.constructor.name,msg:h.message,stack:h.stack};for(let S in h)v[S]===void 0&&(v[S]=h[S]);return v}function J(h){return typeof h.timestamp=="function"?h.timestamp:h.timestamp===!1?be:xe}function K(){return{}}function L(h){return h}function U(){}function be(){return!1}function xe(){return Date.now()}function _(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function I(){function h(v){return typeof v<"u"&&v}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return h(self)||h(window)||h(this)||{}}}t.exports.default=p,t.exports.pino=p}),Re=()=>global.crypto,Ti=()=>{typeof window<"u"||(Re()||(global.crypto=hi("crypto")),!Re().getRandomValues&&Re().webcrypto&&(global.crypto.getRandomValues=Re().webcrypto.getRandomValues.bind(Re().webcrypto)))};function ji(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Vr(r)}var Vr=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Le=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let i in this.definition){let a=this.definition[i].validate(r[i]);a&&n.push(`${i}: ${a}`)}if(n.length)throw ji(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},_e=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&V(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Se(e){return e===void 0}function $i(e){return e===null}function V(e){return Se(e)||$i(e)}var Je=class{constructor(e={}){this.config=e,this.value=new _e(e)}validate(e){return this.value.validate(e)||(Pi(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Pi(e){return Se(e)||Br(e)}function Br(e){return typeof e=="number"&&!isNaN(e)}var Ae=class{constructor(e={}){this.value=new _e(e)}validate(e){return this.value.validate(e)||(Fi(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Fi(e){return Se(e)||Hr(e)}function Hr(e){return typeof e=="boolean"}var Mi=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,P=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new _e(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config;return this.value.validate(e)||(Se(e)?null:Bt(e)?!t&&!e.length?"value is an empty string.":r&&!Mi.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Bt(e){return Object.prototype.toString.call(e)==="[object String]"}var te=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Se(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Qr(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&V(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Qr(e){return e!==void 0&&typeof e=="object"}var Ee=class{constructor(e={}){this.config=e,this.value=new _e(this.config)}validate(e){if(!V(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(V(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&V(n)&&(r=`value is null or undefined: ${e.join(",")}`);let i=this.validatePrimitiveValue(n,this.config.each);i!==null&&(r+=" "+i)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Hr(e)||Bt(e)||Br(e)||Qr(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function qi(e){return Array.isArray(e)}var ur=class{constructor(e){this.config=e,this.value=new _e(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Se(e)||Object.values(this.config.enum).find(r=>r===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},Gr=e=>e;function Ct(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function ht(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Ct(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Ct(),extendedResults:{}}}function ke(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...a}=e;return a}var Ie=e=>{let{response:t}=e;return t.body?Li(e):zi(t)},Li=e=>Vi(e)?Bi(e):Ni(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},zi=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function Ni(e){return e.body.statusCode!==void 0}function Vi(e){return e.body.exception!==void 0}var Bi=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Hi=we(fi()),Qi=we(ki()),Wr=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Et=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};we(Ei());var Gi=new Set(["1",1,"yes",!0]);function Yr(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>Gi.has(r))}function Wi(e){let t={};for(let[r,n]of e)t[r]=n;return t}function Ht(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Yi(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function Ji(e){return typeof e!="object"||!e?!1:Object.values(e).every(Ki)}function Ki(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function cr(e){return e===429}var ge=class Jr{static async call(t){let r=Xi(t),{logger:n}=t,i=await Jr.preprocessRequest(r,t);n.info(i,"Platform request");let{url:a,...o}=i,u=async()=>{let s=await(0,Hi.default)(a,o);if(cr(s.status))throw s;return s};try{let s=await(0,Qi.backOff)(u,{retry:c=>{let l=c&&cr(c.status);return l&&n.info("Platform retrying request"),l}});if(s.status===419)throw n.info("Platform renewing token"),new Wr;if(s.status===404)throw new Et(a,s.status);return n.info({response:s,requestInfo:i},"Platform response"),s}catch(s){return s.message==="Failed to fetch"?new Et(a):s}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:i,logger:a,requestMetadata:o}=r,{signal:u,...s}=t,c=Ht(s);try{let l=await i(t,n,o);return{...t,...l}}catch(l){a.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function Kr(e,t){return`https://${e}.cloud.coveo.com`}function Zr(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,o=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:a,admin:o}}function lr(e){return Kr("platform")}function Zi(e){return Kr("analytics")}function Xi(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,u=e.method==="POST"||e.method==="PUT",s=ea(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...u&&{body:s},signal:o}}function ea(e,t){return t==="application/x-www-form-urlencoded"?Ji(e)?Yi(e):"":JSON.stringify(e)}function ta(){if(typeof window>"u"){let{AbortController:e}=Oi();return new e}return typeof AbortController>"u"?null:new AbortController}var Te=class{constructor(){this.currentAbortController=null}async enqueue(e,t){let r=this.currentAbortController,n=this.currentAbortController=ta();r&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),r.abort());try{return await e((n==null?void 0:n.signal)??null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}},ra=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&")}`:this.basePath}},na=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),ia=(e,t)=>{let r=Xr(e);return r&&r.organizationId===t?r:null},Xr=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t!=null&&t.groups?t.groups:null};function aa(e){return((e.headers.get("content-type")||"").split(";").find(t=>t.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var me=(e,t,r,n)=>{let i=new ra(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}},oa=async(e,t)=>{let r=await ge.call({...me(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:ke(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=aa(r),i=await r.arrayBuffer(),a=new TextDecoder(n).decode(i);return sa(a)?{success:a}:{error:Ie({response:r,body:a})}};function sa(e){return typeof e=="string"}function ua(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function ca(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function pt(e,t){if(t&&e.name==="AbortError")return{error:ca(e)};if(e instanceof Et)return{error:ua(e)};throw e}var la=class{constructor(e){this.options=e,this.apiCallsQueues={unknown:new Te,mainSearch:new Te,facetValues:new Te,foldingCollection:new Te,instantResults:new Te}}async plan(e){let t=await ge.call({...me(e,"POST","application/json","/plan"),requestParams:ke(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return pt(t);let r=await t.json();return fa(r)?{success:r}:{error:Ie({response:t,body:r})}}async querySuggest(e){let t=await ge.call({...me(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:ke(e),...this.options});if(t instanceof Error)return pt(t);let r=await t.json(),n={response:t,body:r};return pa(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Ie(n)}}async search(e,t){let r=(t==null?void 0:t.origin)??"unknown",n=await this.apiCallsQueues[r].enqueue(o=>ge.call({...me(e,"POST","application/json",""),requestParams:ke(e),requestMetadata:{method:"search",origin:t==null?void 0:t.origin},...this.options,signal:o??void 0}),{logger:this.options.logger,warnOnAbort:!(t!=null&&t.disableAbortWarning)});if(n instanceof Error)return pt(n,t==null?void 0:t.disableAbortWarning);let i=await n.json(),a={response:n,body:i};return ft(i)?(a.body=ha(i),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:Ie(a)}}async facetSearch(e){let t=await ge.call({...me(e,"POST","application/json","/facet"),requestParams:ke(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await ge.call({...me(e,"POST","application/json",""),requestParams:ke(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return ft(r)?{success:r}:{error:Ie({response:t,body:r})}}async html(e){return oa(e,{...this.options})}async productRecommendations(e){let t=await ge.call({...me(e,"POST","application/json",""),requestParams:ke(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return ft(r)?{success:r}:{error:Ie({response:t,body:r})}}async fieldDescriptions(e){let t=await ge.call({...me(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return ga(r)?{success:r}:{error:Ie({response:t,body:r})}}},da=e=>e.error!==void 0;function ft(e){return e.results!==void 0}function ha(e){let t=Ct();return V(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function pa(e){return e.completions!==void 0}function fa(e){return e.preprocessingOutput!==void 0}function ga(e){return e.fields!==void 0}var ma=e=>e,va=e=>e,ya=e=>e;function ee(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wa=typeof Symbol=="function"&&Symbol.observable||"@@observable",dr=wa,gt=()=>Math.random().toString(36).substring(7).split("").join("."),Sa={INIT:`@@redux/INIT${gt()}`,REPLACE:`@@redux/REPLACE${gt()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gt()}`},Ke=Sa;function Qt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function en(e,t,r){if(typeof e!="function")throw new Error(ee(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ee(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ee(1));return r(en)(e,t)}let n=e,i=t,a=new Map,o=a,u=0,s=!1;function c(){o===a&&(o=new Map,a.forEach((d,y)=>{o.set(y,d)}))}function l(){if(s)throw new Error(ee(3));return i}function f(d){if(typeof d!="function")throw new Error(ee(4));if(s)throw new Error(ee(5));let y=!0;c();let b=u++;return o.set(b,d),function(){if(y){if(s)throw new Error(ee(6));y=!1,c(),o.delete(b),a=null}}}function p(d){if(!Qt(d))throw new Error(ee(7));if(typeof d.type>"u")throw new Error(ee(8));if(typeof d.type!="string")throw new Error(ee(17));if(s)throw new Error(ee(9));try{s=!0,i=n(i,d)}finally{s=!1}return(a=o).forEach(y=>{y()}),d}function w(d){if(typeof d!="function")throw new Error(ee(10));n=d,p({type:Ke.REPLACE})}function k(){let d=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(ee(11));function b(){let D=y;D.next&&D.next(l())}return b(),{unsubscribe:d(b)}},[dr](){return this}}}return p({type:Ke.INIT}),{dispatch:p,subscribe:f,getState:l,replaceReducer:w,[dr]:k}}function ba(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:Ke.INIT})>"u")throw new Error(ee(12));if(typeof r(void 0,{type:Ke.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ee(13))})}function tn(e){let t=Object.keys(e),r={};for(let a=0;a<t.length;a++){let o=t[a];typeof e[o]=="function"&&(r[o]=e[o])}let n=Object.keys(r),i;try{ba(r)}catch(a){i=a}return function(a={},o){if(i)throw i;let u=!1,s={};for(let c=0;c<n.length;c++){let l=n[c],f=r[l],p=a[l],w=f(p,o);if(typeof w>"u")throw new Error(ee(14));s[l]=w,u=u||w!==p}return u=u||n.length!==Object.keys(a).length,u?s:a}}function Ze(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function ka(...e){return t=>(r,n)=>{let i=t(r,n),a=()=>{throw new Error(ee(15))},o={getState:i.getState,dispatch:(s,...c)=>a(s,...c)},u=e.map(s=>s(o));return a=Ze(...u)(i.dispatch),{...i,dispatch:a}}}function Ia(e){return Qt(e)&&"type"in e&&typeof e.type=="string"}var rn=Symbol.for("immer-nothing"),hr=Symbol.for("immer-draftable"),ie=Symbol.for("immer-state");function ue(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var De=Object.getPrototypeOf;function ve(e){return!!e&&!!e[ie]}function fe(e){var t;return e?nn(e)||Array.isArray(e)||!!e[hr]||!!((t=e.constructor)!=null&&t[hr])||ot(e)||st(e):!1}var Ca=Object.prototype.constructor.toString();function nn(e){if(!e||typeof e!="object")return!1;let t=De(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Ca}function Pe(e,t){at(e)===0?Object.entries(e).forEach(([r,n])=>{t(r,n,e)}):e.forEach((r,n)=>t(n,r,e))}function at(e){let t=e[ie];return t?t.type_:Array.isArray(e)?1:ot(e)?2:st(e)?3:0}function Ot(e,t){return at(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function an(e,t,r){let n=at(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ea(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ot(e){return e instanceof Map}function st(e){return e instanceof Set}function Ce(e){return e.copy_||e.base_}function At(e,t){if(ot(e))return new Map(e);if(st(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&nn(e))return De(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[ie];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let a=n[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(De(e),r)}function Gt(e,t=!1){return ut(e)||ve(e)||!fe(e)||(at(e)>1&&(e.set=e.add=e.clear=e.delete=Oa),Object.freeze(e),t&&Pe(e,(r,n)=>Gt(n,!0))),e}function Oa(){ue(2)}function ut(e){return Object.isFrozen(e)}var Aa={};function Oe(e){let t=Aa[e];return t||ue(0,e),t}var Fe;function on(){return Fe}function Da(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pr(e,t){t&&(Oe("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Dt(e){_t(e),e.drafts_.forEach(_a),e.drafts_=null}function _t(e){e===Fe&&(Fe=e.parent_)}function fr(e){return Fe=Da(Fe,e)}function _a(e){let t=e[ie];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gr(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[ie].modified_&&(Dt(t),ue(4)),fe(e)&&(e=Xe(t,e),t.parent_||et(t,e)),t.patches_&&Oe("Patches").generateReplacementPatches_(r[ie].base_,e,t.patches_,t.inversePatches_)):e=Xe(t,r,[]),Dt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==rn?e:void 0}function Xe(e,t,r){if(ut(t))return t;let n=t[ie];if(!n)return Pe(t,(i,a)=>mr(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return et(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),Pe(a,(u,s)=>mr(e,n,i,u,s,r,o)),et(e,i,!1),r&&e.patches_&&Oe("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function mr(e,t,r,n,i,a,o){if(ve(i)){let u=a&&t&&t.type_!==3&&!Ot(t.assigned_,n)?a.concat(n):void 0,s=Xe(e,i,u);if(an(r,n,s),ve(s))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(fe(i)&&!ut(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Xe(e,i),(!t||!t.scope_.parent_)&&et(e,i)}}function et(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Gt(t,r)}function Ua(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:on(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=Wt;r&&(i=[n],a=Me);let{revoke:o,proxy:u}=Proxy.revocable(i,a);return n.draft_=u,n.revoke_=o,u}var Wt={get(e,t){if(t===ie)return e;let r=Ce(e);if(!Ot(r,t))return xa(e,r,t);let n=r[t];return e.finalized_||!fe(n)?n:n===mt(e.base_,t)?(vt(e),e.copy_[t]=xt(n,e)):n},has(e,t){return t in Ce(e)},ownKeys(e){return Reflect.ownKeys(Ce(e))},set(e,t,r){let n=sn(Ce(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let i=mt(Ce(e),t),a=i==null?void 0:i[ie];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ea(r,i)&&(r!==void 0||Ot(e.base_,t)))return!0;vt(e),Ut(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vt(e),Ut(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Ce(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ue(11)},getPrototypeOf(e){return De(e.base_)},setPrototypeOf(){ue(12)}},Me={};Pe(Wt,(e,t)=>{Me[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Me.deleteProperty=function(e,t){return Me.set.call(this,e,t,void 0)};Me.set=function(e,t,r){return Wt.set.call(this,e[0],t,r,e[0])};function mt(e,t){let r=e[ie];return(r?Ce(r):e)[t]}function xa(e,t,r){var i;let n=sn(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function sn(e,t){if(!(t in e))return;let r=De(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=De(r)}}function Ut(e){e.modified_||(e.modified_=!0,e.parent_&&Ut(e.parent_))}function vt(e){e.copy_||(e.copy_=At(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ra=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let o=this;return function(u=a,...s){return o.produce(u,c=>r.call(this,c,...s))}}typeof r!="function"&&ue(6),n!==void 0&&typeof n!="function"&&ue(7);let i;if(fe(t)){let a=fr(this),o=xt(t,void 0),u=!0;try{i=r(o),u=!1}finally{u?Dt(a):_t(a)}return pr(a,n),gr(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===rn&&(i=void 0),this.autoFreeze_&&Gt(i,!0),n){let a=[],o=[];Oe("Patches").generateReplacementPatches_(t,i,a,o),n(a,o)}return i}else ue(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,u=>t(u,...o));let n,i;return[this.produce(t,r,(a,o)=>{n=a,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fe(e)||ue(8),ve(e)&&(e=un(e));let t=fr(this),r=xt(e,void 0);return r[ie].isManual_=!0,_t(t),r}finishDraft(e,t){let r=e&&e[ie];(!r||!r.isManual_)&&ue(9);let{scope_:n}=r;return pr(n,t),gr(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));let n=Oe("Patches").applyPatches_;return ve(e)?n(e,t):this.produce(e,i=>n(i,t))}};function xt(e,t){let r=ot(e)?Oe("MapSet").proxyMap_(e,t):st(e)?Oe("MapSet").proxySet_(e,t):Ua(e,t);return(t?t.scope_:on()).drafts_.push(r),r}function un(e){return ve(e)||ue(10,e),cn(e)}function cn(e){if(!fe(e)||ut(e))return e;let t=e[ie],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=At(e,t.scope_.immer_.useStrictShallowCopy_)}else r=At(e,!0);return Pe(r,(n,i)=>{an(r,n,cn(i))}),t&&(t.finalized_=!1),r}var ae=new Ra,ln=ae.produce;ae.produceWithPatches.bind(ae);ae.setAutoFreeze.bind(ae);ae.setUseStrictShallowCopy.bind(ae);ae.applyPatches.bind(ae);ae.createDraft.bind(ae);ae.finishDraft.bind(ae);function Ta(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ja(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function $a(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var vr=e=>Array.isArray(e)?e:[e];function Pa(e){let t=Array.isArray(e[0])?e[0]:e;return $a(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Fa(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var Ma=class{constructor(e){this.value=e}deref(){return this.value}},qa=typeof WeakRef<"u"?WeakRef:Ma,La=0,yr=1;function Be(){return{s:La,v:void 0,o:null,p:null}}function Yt(e,t={}){let r=Be(),{resultEqualityCheck:n}=t,i,a=0;function o(){var f;let u=r,{length:s}=arguments;for(let p=0,w=s;p<w;p++){let k=arguments[p];if(typeof k=="function"||typeof k=="object"&&k!==null){let d=u.o;d===null&&(u.o=d=new WeakMap);let y=d.get(k);y===void 0?(u=Be(),d.set(k,u)):u=y}else{let d=u.p;d===null&&(u.p=d=new Map);let y=d.get(k);y===void 0?(u=Be(),d.set(k,u)):u=y}}let c=u,l;if(u.s===yr?l=u.v:(l=e.apply(null,arguments),a++),c.s=yr,n){let p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&n(p,l)&&(l=p,a!==0&&a--),i=typeof l=="object"&&l!==null||typeof l=="function"?new qa(l):l}return c.v=l,l}return o.clearCache=()=>{r=Be(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function dn(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,o=0,u,s={},c=i.pop();typeof c=="object"&&(s=c,c=i.pop()),Ta(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);let l={...r,...s},{memoize:f,memoizeOptions:p=[],argsMemoize:w=Yt,argsMemoizeOptions:k=[],devModeChecks:d={}}=l,y=vr(p),b=vr(k),D=Pa(i),$=f(function(){return a++,c.apply(null,arguments)},...y),N=w(function(){o++;let T=Fa(D,arguments);return u=$.apply(null,T),u},...b);return Object.assign(N,{resultFunc:c,memoizedResultFunc:$,dependencies:D,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:w})};return Object.assign(n,{withTypes:()=>n}),n}var Jt=dn(Yt),za=Object.assign((e,t=Jt)=>{ja(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((a,o,u)=>(a[r[u]]=o,a),{}))},{withTypes:()=>za});function hn(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var Na=hn(),Va=hn,Ba=(...e)=>{let t=dn(...e),r=Object.assign((...n)=>{let i=t(...n),a=(o,...u)=>i(ve(o)?un(o):o,...u);return Object.assign(a,i),a},{withTypes:()=>r});return r};Ba(Yt);var Ha=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ze:Ze.apply(null,arguments)},Qa=e=>e&&typeof e.match=="function";function F(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(ye(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Ia(n)&&n.type===e,r}var pn=class je extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,je.prototype)}static get[Symbol.species](){return je}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new je(...t[0].concat(this)):new je(...t.concat(this))}};function wr(e){return fe(e)?ln(e,()=>{}):e}function Ga(e){return typeof e=="boolean"}var Wa=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},a=new pn;return t&&(Ga(t)?a.push(Na):a.push(Va(t.extraArgument))),a},Ya="RTK_autoBatch",fn=e=>t=>{setTimeout(t,e)},Ja=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fn(10),Ka=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,a=!1,o=!1,u=new Set,s=e.type==="tick"?queueMicrotask:e.type==="raf"?Ja:e.type==="callback"?e.queueNotification:fn(e.timeout),c=()=>{o=!1,a&&(a=!1,u.forEach(l=>l()))};return Object.assign({},n,{subscribe(l){let f=()=>i&&l(),p=n.subscribe(f);return u.add(l),()=>{p(),u.delete(l)}},dispatch(l){var f;try{return i=!((f=l==null?void 0:l.meta)!=null&&f[Ya]),a=!i,a&&(o||(o=!0,s(c))),n.dispatch(l)}finally{i=!0}}})},Za=e=>function(t){let{autoBatch:r=!0}=t??{},n=new pn(e);return r&&n.push(Ka(typeof r=="object"?r:void 0)),n},Sr=!0;function Xa(e){let t=Wa(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{},u;if(typeof r=="function")u=r;else if(Qt(r))u=tn(r);else throw new Error(ye(1));let s;typeof n=="function"?s=n(t):s=t();let c=Ze;i&&(c=Ha({trace:!Sr,...typeof i=="object"&&i}));let l=ka(...s),f=Za(l),p=typeof o=="function"?o(f):f(),w=c(...p);return en(u,a,w)}function eo(e){let t={},r=[],n,i={addCase(a,o){let u=typeof a=="string"?a:a.type;if(!u)throw new Error(ye(28));if(u in t)throw new Error(ye(29));return t[u]=o,i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function to(e){return typeof e=="function"}function Ue(e,t){let[r,n,i]=eo(t),a;if(to(e))a=()=>wr(e());else{let u=wr(e);a=()=>u}function o(u=a(),s){let c=[r[s.type],...n.filter(({matcher:l})=>l(s)).map(({reducer:l})=>l)];return c.filter(l=>!!l).length===0&&(c=[i]),c.reduce((l,f)=>{if(f)if(ve(l)){let p=f(l,s);return p===void 0?l:p}else{if(fe(l))return ln(l,p=>f(p,s));{let p=f(l,s);if(p===void 0){if(l===null)return l;throw new Error(ye(9))}return p}}return l},u)}return o.getInitialState=a,o}var ro="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gn=(e=21)=>{let t="",r=e;for(;r--;)t+=ro[Math.random()*64|0];return t},no=(e,t)=>Qa(e)?e.match(t):e(t);function io(...e){return t=>e.some(r=>no(r,t))}var ao=["name","message","stack","code"],yt=class{constructor(e,t){zr(this,"_type"),this.payload=e,this.meta=t}},br=class{constructor(e,t){zr(this,"_type"),this.payload=e,this.meta=t}},oo=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of ao)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},ze=(()=>{function e(t,r,n){let i=F(t+"/fulfilled",(s,c,l,f)=>({payload:s,meta:{...f||{},arg:l,requestId:c,requestStatus:"fulfilled"}})),a=F(t+"/pending",(s,c,l)=>({payload:void 0,meta:{...l||{},arg:c,requestId:s,requestStatus:"pending"}})),o=F(t+"/rejected",(s,c,l,f,p)=>({payload:f,error:(n&&n.serializeError||oo)(s||"Rejected"),meta:{...p||{},arg:l,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(s==null?void 0:s.name)==="AbortError",condition:(s==null?void 0:s.name)==="ConditionError"}}));function u(s){return(c,l,f)=>{let p=n!=null&&n.idGenerator?n.idGenerator(s):gn(),w=new AbortController,k,d;function y(D){d=D,w.abort()}let b=async function(){var $,N;let D;try{let T=($=n==null?void 0:n.condition)==null?void 0:$.call(n,s,{getState:l,extra:f});if(uo(T)&&(T=await T),T===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let H=new Promise((z,J)=>{k=()=>{J({name:"AbortError",message:d||"Aborted"})},w.signal.addEventListener("abort",k)});c(a(p,s,(N=n==null?void 0:n.getPendingMeta)==null?void 0:N.call(n,{requestId:p,arg:s},{getState:l,extra:f}))),D=await Promise.race([H,Promise.resolve(r(s,{dispatch:c,getState:l,extra:f,requestId:p,signal:w.signal,abort:y,rejectWithValue:(z,J)=>new yt(z,J),fulfillWithValue:(z,J)=>new br(z,J)})).then(z=>{if(z instanceof yt)throw z;return z instanceof br?i(z.payload,p,s,z.meta):i(z,p,s)})])}catch(T){D=T instanceof yt?o(null,p,s,T.payload,T.meta):o(T,p,s)}finally{k&&w.signal.removeEventListener("abort",k)}return n&&!n.dispatchConditionRejection&&o.match(D)&&D.meta.condition||c(D),D}();return Object.assign(b,{abort:y,requestId:p,arg:s,unwrap(){return b.then(so)}})}}return Object.assign(u,{pending:a,rejected:o,fulfilled:i,settled:io(o,i),typePrefix:t})}return e.withTypes=()=>e,e})();function so(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function uo(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var co=(e,t)=>{if(typeof e!="function")throw new Error(ye(32))},Kt="listenerMiddleware",lo=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=F(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(ye(21));return co(a),{predicate:i,type:t,effect:a}},ho=Object.assign(e=>{let{type:t,predicate:r,effect:n}=lo(e);return{id:gn(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ye(22))}}},{withTypes:()=>ho}),po=Object.assign(F(`${Kt}/add`),{withTypes:()=>po});F(`${Kt}/removeAll`);var fo=Object.assign(F(`${Kt}/remove`),{withTypes:()=>fo});function ye(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Z=new P({required:!0,emptyAllowed:!1}),G=new P({required:!1,emptyAllowed:!1}),qe=new P({required:!0,emptyAllowed:!0});new P({required:!1,emptyAllowed:!0});var go=new P({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),mo=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),mn=(e,t)=>{if("required"in t)return{payload:new Le({value:t}).validate({value:e}).value};let r=new te({options:{required:!0},values:t}).validate(e);if(r)throw new Vr(r);return{payload:e}},B=(e,t)=>{try{return mn(e,t)}catch(r){return{payload:e,error:mo(r)}}},vn=(e,t,r,n)=>{let i=`Check the options of ${n}`;return vo(e,t,r,i,"Controller initialization error")},vo=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,i),a}},Zt="2.63.3",yo=["@coveo/atomic","@coveo/quantic"],wt=()=>G,yn=()=>Z,Xt=F("configuration/updateBasicConfiguration",e=>B(e,{accessToken:G,organizationId:G,platformUrl:G})),er=F("configuration/updateSearchConfiguration",e=>B(e,{apiBaseUrl:G,pipeline:new P({required:!1,emptyAllowed:!0}),searchHub:G,timezone:G,locale:G,authenticationProviders:new Ee({required:!1,each:Z})})),wo={enabled:new Ae({default:!0}),originContext:wt(),originLevel2:wt(),originLevel3:wt(),apiBaseUrl:G,nextApiBaseUrl:G,runtimeEnvironment:new _e,anonymous:new Ae({default:!1}),deviceId:G,userDisplayName:G,documentLocation:G,trackingId:G,analyticsMode:new P({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new te({options:{required:!1},values:yo.reduce((e,t)=>(e[t]=go,e),{})})},wn=F("configuration/updateAnalyticsConfiguration",e=>(Yr()&&(e.enabled=!1),B(e,wo))),Sn=F("configuration/analytics/disable"),bn=F("configuration/analytics/enable"),So=F("configuration/analytics/originlevel2",e=>B(e,{originLevel2:yn()})),bo=F("configuration/analytics/originlevel3",e=>B(e,{originLevel3:yn()}));function he(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function g(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(l){try{c(n.next(l))}catch(f){o(f)}}function s(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?a(l.value):i(l.value).then(u,s)}c((n=n.apply(e,[])).next())})}var R;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(R||(R={}));function kr(){return typeof window<"u"}function tr(){return typeof navigator<"u"}function Rt(){return typeof document<"u"}function Tt(){try{return typeof localStorage<"u"}catch{return!1}}function ko(){try{return typeof sessionStorage<"u"}catch{return!1}}function kn(){return tr()&&navigator.cookieEnabled}var Io=[R.click,R.custom,R.search,R.view],Co=(e,t)=>Io.indexOf(e)!==-1?Object.assign({language:Rt()?document.documentElement.lang:"unknown",userAgent:tr()?navigator.userAgent:"unknown"},t):t,St=class In{static set(t,r,n){var i,a,o,u;n&&(a=new Date,a.setTime(a.getTime()+n)),u=window.location.hostname,u.indexOf(".")===-1?Ir(t,r,a):(o=u.split("."),i=o[o.length-2]+"."+o[o.length-1],Ir(t,r,a,i))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var a=n[i];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){In.set(t,"",-1)}};function Ir(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Eo(){return Tt()?localStorage:kn()?new rr:ko()?sessionStorage:new ct}var rr=class Ge{getItem(t){return St.get(`${Ge.prefix}${t}`)}removeItem(t){St.erase(`${Ge.prefix}${t}`)}setItem(t,r,n){St.set(`${Ge.prefix}${t}`,r,n)}};rr.prefix="coveo_";var Oo=class{constructor(){this.cookieStorage=new rr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},ct=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},$e="__coveo.analytics.history",Cn=20,En=1e3*60,On=75,tt=class{constructor(e){this.store=e||Eo()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return g(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return g(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem($e);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return g(this,void 0,void 0,function*(){try{let e=yield this.store.getItem($e);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem($e,JSON.stringify(e.slice(0,Cn)))}catch{}}clear(){try{this.store.removeItem($e)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((t,r)=>(r.internalTime||0)-(t.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,On)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>En:!0}stripInternalTime(e){return Array.isArray(e)?e.map(t=>{let{name:r,time:n,value:i}=t;return{name:r,time:n,value:i}}):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(t=>this.stripEmptyQuery(t))}},Ao=Object.freeze({__proto__:null,HistoryStore:tt,MAX_NUMBER_OF_HISTORY_ELEMENTS:Cn,MAX_VALUE_SIZE:On,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:En,STORE_KEY:$e,default:tt}),Do=(e,t)=>g(void 0,void 0,void 0,function*(){return e===R.view?(yield _o(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),_o=e=>g(void 0,void 0,void 0,function*(){let t=new tt,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),He,Uo=new Uint8Array(16);function xo(){if(!He&&(He=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!He))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return He(Uo)}var Ro=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function rt(e){return typeof e=="string"&&Ro.test(e)}var X=[];for(let e=0;e<256;++e)X.push((e+256).toString(16).slice(1));function An(e,t=0){return(X[e[t+0]]+X[e[t+1]]+X[e[t+2]]+X[e[t+3]]+"-"+X[e[t+4]]+X[e[t+5]]+"-"+X[e[t+6]]+X[e[t+7]]+"-"+X[e[t+8]]+X[e[t+9]]+"-"+X[e[t+10]]+X[e[t+11]]+X[e[t+12]]+X[e[t+13]]+X[e[t+14]]+X[e[t+15]]).toLowerCase()}function To(e){if(!rt(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function jo(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var $o="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Po="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Fo(e,t,r){function n(i,a,o,u){var s;if(typeof i=="string"&&(i=jo(i)),typeof a=="string"&&(a=To(a)),((s=a)===null||s===void 0?void 0:s.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){u=u||0;for(let l=0;l<16;++l)o[u+l]=c[l];return o}return An(c)}try{n.name=e}catch{}return n.DNS=$o,n.URL=Po,n}var Mo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cr={randomUUID:Mo};function bt(e,t,r){if(Cr.randomUUID&&!t&&!e)return Cr.randomUUID();e=e||{};let n=e.random||(e.rng||xo)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,An(n)}function qo(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function kt(e,t){return e<<t|e>>>32-t}function Lo(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let o=unescape(encodeURIComponent(e));e=[];for(let u=0;u<o.length;++u)e.push(o.charCodeAt(u))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let o=0;o<i;++o){let u=new Uint32Array(16);for(let s=0;s<16;++s)u[s]=e[o*64+s*4]<<24|e[o*64+s*4+1]<<16|e[o*64+s*4+2]<<8|e[o*64+s*4+3];a[o]=u}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(let o=0;o<i;++o){let u=new Uint32Array(80);for(let w=0;w<16;++w)u[w]=a[o][w];for(let w=16;w<80;++w)u[w]=kt(u[w-3]^u[w-8]^u[w-14]^u[w-16],1);let s=r[0],c=r[1],l=r[2],f=r[3],p=r[4];for(let w=0;w<80;++w){let k=Math.floor(w/20),d=kt(s,5)+qo(k,c,l,f)+p+t[k]+u[w]>>>0;p=f,f=l,l=kt(c,30)>>>0,c=s,s=d}r[0]=r[0]+s>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var zo=Fo("v5",80,Lo),Er=zo,Dn="2.30.2",No={pageview:"pageview",event:"event"},nt=class jt{constructor(t,r){if(!rt(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>jt.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(i=>new RegExp(i.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return rt(a)?new jt(a,Number.parseInt(i)*1e3):null}};nt.cvo_cid="cvo_cid";nt.expirationTime=120;var ce=Object.keys;function Qe(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Or={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Vo=ce(Or).map(e=>Or[e]),Bo=[...Vo].join("|"),Ho=new RegExp(`^(${Bo}$)`),Qo={svcAction:"svc_action",svcActionData:"svc_action_data"},Go=e=>Ho.test(e),Wo=[Go],Ar={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Dr={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ne={action:"pa",list:"pal",listSource:"pls"},it={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Yo=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],$t={id:"quoteId",affiliation:"quoteAffiliation"},Pt={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Jo={add:ne,bookmark_add:ne,bookmark_remove:ne,click:ne,checkout:ne,checkout_option:ne,detail:ne,impression:ne,remove:ne,refund:Object.assign(Object.assign({},ne),it),purchase:Object.assign(Object.assign({},ne),it),quickview:ne,quote:Object.assign(Object.assign({},ne),$t),review:Object.assign(Object.assign({},ne),Pt)},Ko=ce(Ar).map(e=>Ar[e]),Zo=ce(Dr).map(e=>Dr[e]),Xo=ce(ne).map(e=>ne[e]),es=ce(it).map(e=>it[e]),ts=ce(Pt).map(e=>Pt[e]),rs=ce($t).map(e=>$t[e]),ns=[...Ko,"custom"].join("|"),is=[...Zo,"custom"].join("|"),_n="(pr[0-9]+)",Un="(il[0-9]+pi[0-9]+)",as=new RegExp(`^${_n}(${ns})$`),os=new RegExp(`^(${Un}(${is}))|(il[0-9]+nm)$`),ss=new RegExp(`^(${Xo.join("|")})$`),us=new RegExp(`^(${es.join("|")})$`),cs=new RegExp(`^${_n}custom$`),ls=new RegExp(`^${Un}custom$`),ds=new RegExp(`^(${[...Yo,...ts,...rs].join("|")})$`),hs=e=>as.test(e),ps=e=>os.test(e),fs=e=>ss.test(e),gs=e=>us.test(e),ms=e=>ds.test(e),vs=[ps,hs,fs,gs,ms],ys=[cs,ls],ws={anonymizeIp:"aip"},Ss={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},bs={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},ks=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Is=Object.assign(Object.assign(Object.assign(Object.assign({},ws),Ss),bs),ks.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Ft=Object.assign(Object.assign({},Is),Qo),Cs=e=>{let t=!!e.action&&Jo[e.action]||{};return ce(e).reduce((r,n)=>{let i=t[n]||Ft[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})},{})},Es=ce(Ft).map(e=>Ft[e]),Os=e=>Es.indexOf(e)!==-1,As=e=>e==="custom",Ds=e=>[...vs,...Wo,Os,As].some(t=>t(e)),_s=e=>ce(e).reduce((t,r)=>{let n=Us(r);return n?Object.assign(Object.assign({},t),xs(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Us=e=>{let t;return[...ys].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},xs=(e,t)=>ce(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Rs=class{constructor(e){this.opts=e}sendEvent(e,t){return g(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),u=this.encodeForEventType(e,o),s=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,s)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return g(this,void 0,void 0,function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:u}=a;n=o||e;try{i=JSON.parse(u)}catch(s){console.error("Unable to process the request body as a JSON string",s)}}return{payload:i,url:n}})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return g(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(i=>!!i).join("&")})}isEventTypeLegacy(e){return[R.click,R.custom,R.search,R.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},Ts=class{sendEvent(e,t){return g(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return g(this,void 0,void 0,function*(){return Promise.resolve()})}},_r=window.fetch,xn=class{constructor(e){this.opts=e}sendEvent(e,t){return g(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},u=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:s}=u,c=he(u,["url"]),l;try{l=yield _r(s,c)}catch(f){console.error("An error has occured when sending the event.",f);return}if(l.ok){let f=yield l.json();return f.visitorId&&n.setCurrentVisitorId(f.visitorId),f}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return g(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield _r(t,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[R.click,R.custom,R.search,R.view].indexOf(e)!==-1}getVisitorIdParam(){return g(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},js=class{constructor(e,t){Tt()&&kn()?this.storage=new Oo:Tt()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new ct),this.client=new xn(e),this.beaconClient=new Rs(e),window.addEventListener("beforeunload",()=>{let r=t();for(let{eventType:n,payload:i}of r)this.beaconClient.sendEvent(n,i)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},$s=class{constructor(e,t){this.storage=t||new ct,this.client=new xn(e)}getClientDependingOnEventType(e){return this.client}},Rn=class{constructor(){this.storage=new ct,this.client=new Ts}getClientDependingOnEventType(e){return this.client}},Ps="xx",Fs=e=>(e==null?void 0:e.startsWith(Ps))||!1,Ms=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function qs(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Ls=["1",1,"yes",!0];function Mt(){return tr()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Ls.indexOf(e)!==-1)}var Tn="v15",jn={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function zs(e=jn.default,t=Tn,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var Ns="38824e1f-37f5-42d3-8372-a4b8fa9df946",We=class{get defaultOptions(){return{endpoint:jn.default,isCustomEndpoint:!1,token:"",version:Tn,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Dn}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Do,Co].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Mt()?this.runtime=new Rn:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(R.view,{newEventType:R.view,addClientIdParameter:!0}),this.addEventTypeMapping(R.click,{newEventType:R.click,addClientIdParameter:!0}),this.addEventTypeMapping(R.custom,{newEventType:R.custom,addClientIdParameter:!0}),this.addEventTypeMapping(R.search,{newEventType:R.search,addClientIdParameter:!0})}initRuntime(e){return kr()&&Rt()?new js(e,()=>{let t=[...this.bufferedRequests];return this.bufferedRequests=[],t}):(qs()&&console.warn(Ms),new $s(e))}get storage(){return this.runtime.storage}determineVisitorId(){return g(this,void 0,void 0,function*(){try{return kr()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||bt()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),bt()}})}getCurrentVisitorId(){return g(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return g(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,t){return g(this,void 0,void 0,function*(){if(rt(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Er(e,Er(t,Ns)))}})}getParameters(e,...t){return g(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return g(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(bt()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Mt())return null;try{let t=new URL(e).searchParams.get(nt.cvo_cid);if(t==null)return null;let r=nt.fromString(t);return!r||!Rt()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return g(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[o=>r.length>0?this.parseVariableArgumentsPayload(r,o):o[0],o=>g(this,void 0,void 0,function*(){return Object.assign(Object.assign({},o),{visitorId:n?yield this.getCurrentVisitorId():""})}),o=>g(this,void 0,void 0,function*(){return a?Object.assign(Object.assign({},o),{clientId:yield this.getCurrentVisitorId()}):o}),o=>i?this.ensureAnonymousUserWhenUsingApiKey(o):o,o=>this.beforeSendHooks.reduce((u,s)=>g(this,void 0,void 0,function*(){let c=yield u;return yield s(e,c)}),o)].reduce((o,u)=>g(this,void 0,void 0,function*(){let s=yield o;return yield u(s)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return g(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[n=>this.setTrackingIdIfTrackingIdNotPresent(n),n=>this.removeEmptyPayloadValues(n,e),n=>this.validateParams(n,e),n=>r?Cs(n):n,n=>r?this.removeUnknownParameters(n):n,n=>r?this.processCustomParameters(n):this.mapCustomParametersToCustomData(n)].reduce((n,i)=>g(this,void 0,void 0,function*(){let a=yield n;return yield i(a)}),Promise.resolve(t))})}makeEvent(e,...t){return g(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:a=>g(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),a)}),yield Promise.all(this.afterSendHooks.map(o=>o(e,Object.assign(Object.assign({},n),a)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...t){return g(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...t)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return g(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new tt().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return g(this,void 0,void 0,function*(){return this.makeEvent(R.search,e)})}sendSearchEvent(e){var{searchQueryUid:t}=e,r=he(e,["searchQueryUid"]);return g(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})})}makeClickEvent(e){return g(this,void 0,void 0,function*(){return this.makeEvent(R.click,e)})}sendClickEvent(e){var{searchQueryUid:t}=e,r=he(e,["searchQueryUid"]);return g(this,void 0,void 0,function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})})}makeCustomEvent(e){return g(this,void 0,void 0,function*(){return this.makeEvent(R.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=he(e,["lastSearchQueryUid"]);return g(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})})}makeViewEvent(e){return g(this,void 0,void 0,function*(){return this.makeEvent(R.view,e)})}sendViewEvent(e){return g(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return g(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return g(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(t=>typeof t=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let a=t[n];if(typeof a=="string")r[e[n]]=a;else if(typeof a=="object")return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return({[R.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=n=>typeof n<"u"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:e[i]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(t=>{if(Ds(t))return!0;console.log(t,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=he(e,["custom"]),n={};t&&Qe(t)&&(n=this.lowercaseKeys(t));let i=_s(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=he(e,["custom"]);if(t&&Qe(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach(n=>{r[n.toLowerCase()]=e[n]}),r}validateParams(e,t){let{anonymizeIp:r}=e,n=he(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==R.view||t==R.click||t==R.search||t==R.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==R.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=he(e,["userId"]);return Fs(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=he(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Qe(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Qe(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return zs(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},pe;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(pe||(pe={}));var m;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(m||(m={}));var Ur={[m.triggerNotify]:"queryPipelineTriggers",[m.triggerExecute]:"queryPipelineTriggers",[m.triggerQuery]:"queryPipelineTriggers",[m.triggerRedirect]:"queryPipelineTriggers",[m.queryError]:"errors",[m.queryErrorBack]:"errors",[m.queryErrorClear]:"errors",[m.queryErrorRetry]:"errors",[m.pagerNext]:"getMoreResults",[m.pagerPrevious]:"getMoreResults",[m.pagerNumber]:"getMoreResults",[m.pagerResize]:"getMoreResults",[m.pagerScrolling]:"getMoreResults",[m.facetSearch]:"facet",[m.facetShowLess]:"facet",[m.facetShowMore]:"facet",[m.recommendation]:"recommendation",[m.likeSmartSnippet]:"smartSnippet",[m.dislikeSmartSnippet]:"smartSnippet",[m.expandSmartSnippet]:"smartSnippet",[m.collapseSmartSnippet]:"smartSnippet",[m.openSmartSnippetFeedbackModal]:"smartSnippet",[m.closeSmartSnippetFeedbackModal]:"smartSnippet",[m.sendSmartSnippetReason]:"smartSnippet",[m.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[m.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[m.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[m.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[m.clearRecentQueries]:"recentQueries",[m.recentResultClick]:"recentlyClickedDocuments",[m.clearRecentResults]:"recentlyClickedDocuments",[m.showLessFoldedResults]:"folding",[m.caseDetach]:"case",[m.likeGeneratedAnswer]:"generatedAnswer",[m.dislikeGeneratedAnswer]:"generatedAnswer",[m.openGeneratedAnswerSource]:"generatedAnswer",[m.generatedAnswerStreamEnd]:"generatedAnswer",[m.generatedAnswerSourceHover]:"generatedAnswer",[m.generatedAnswerCopyToClipboard]:"generatedAnswer",[m.generatedAnswerHideAnswers]:"generatedAnswer",[m.generatedAnswerShowAnswers]:"generatedAnswer",[m.generatedAnswerExpand]:"generatedAnswer",[m.generatedAnswerCollapse]:"generatedAnswer",[m.generatedAnswerFeedbackSubmit]:"generatedAnswer",[pe.expandToFullUI]:"interface",[pe.openUserActions]:"User Actions",[pe.showPrecedingSessions]:"User Actions",[pe.showFollowingSessions]:"User Actions",[pe.clickViewedDocument]:"User Actions",[pe.clickPageView]:"User Actions",[pe.createArticle]:"createArticle"},xr=class{constructor(){this.runtime=new Rn,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(R.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(R.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(R.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(R.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Dn}};function Vs(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function Bs(e){return e.map(t=>t.replace(/;/g,""))}function $n(e){let t=e.join(";");return t.length<=256?t:$n(e.slice(1))}var Rr=e=>{let t=Bs(e),r=Vs(t);return $n(r)};function Tr(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Rr(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Rr(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Hs=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Mt();this.coveoAnalyticsClient=r?new xr:new We(e)}disable(){this.coveoAnalyticsClient=new xr}enable(){this.coveoAnalyticsClient=new We(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(m.interfaceLoad)}logInterfaceLoad(){return g(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(m.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return g(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(m.recommendation)}logRecommendation(){return g(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,t){return this.makeClickEvent(m.recommendationOpen,e,t)}logRecommendationOpen(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(m.staticFilterClearAll,e)}logStaticFilterClearAll(e){return g(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(m.staticFilterSelect,e)}logStaticFilterSelect(e){return g(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(m.staticFilterDeselect,e)}logStaticFilterDeselect(e){return g(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(m.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return g(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(m.interfaceChange,e)}logInterfaceChange(e){return g(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(m.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return g(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(m.didyoumeanClick)}logDidYouMeanClick(){return g(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(m.resultsSort,e)}logResultsSort(e){return g(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(m.searchboxSubmit)}logSearchboxSubmit(){return g(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(m.searchboxClear)}logSearchboxClear(){return g(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(m.searchboxAsYouType)}logSearchboxAsYouType(){return g(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(m.breadcrumbFacet,e)}logBreadcrumbFacet(e){return g(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(m.breadcrumbResetAll)}logBreadcrumbResetAll(){return g(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,t){return this.makeClickEvent(m.documentQuickview,e,t)}logDocumentQuickview(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,t){return this.makeClickEvent(m.documentOpen,e,t)}logDocumentOpen(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(m.omniboxAnalytics,Tr(e))}logOmniboxAnalytics(e){return g(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(m.omniboxFromLink,Tr(e))}logOmniboxFromLink(e){return g(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(m.searchFromLink)}logSearchFromLink(){return g(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(m.triggerNotify,e)}logTriggerNotify(e){return g(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(m.triggerExecute,e)}logTriggerExecute(e){return g(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(m.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return g(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(m.undoTriggerQuery,e)}logUndoTriggerQuery(e){return g(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(m.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return g(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(m.pagerResize,e)}logPagerResize(e){return g(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(m.pagerNumber,e)}logPagerNumber(e){return g(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(m.pagerNext,e)}logPagerNext(e){return g(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(m.pagerPrevious,e)}logPagerPrevious(e){return g(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(m.pagerScrolling)}logPagerScrolling(){return g(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(m.facetClearAll,e)}logFacetClearAll(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(m.facetSearch,e)}logFacetSearch(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(m.facetSelect,e)}logFacetSelect(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(m.facetDeselect,e)}logFacetDeselect(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(m.facetExclude,e)}logFacetExclude(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(m.facetUnexclude,e)}logFacetUnexclude(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(m.facetSelectAll,e)}logFacetSelectAll(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(m.facetUpdateSort,e)}logFacetUpdateSort(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(m.facetShowMore,e)}logFacetShowMore(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(m.facetShowLess,e)}logFacetShowLess(e){return g(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(m.queryError,e)}logQueryError(e){return g(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return g(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(m.queryErrorBack);return{description:e.description,log:()=>g(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(m.queryErrorBack)})}})}logQueryErrorBack(){return g(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return g(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(m.queryErrorRetry);return{description:e.description,log:()=>g(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(m.queryErrorRetry)})}})}logQueryErrorRetry(){return g(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return g(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(m.queryErrorClear);return{description:e.description,log:()=>g(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(m.queryErrorClear)})}})}logQueryErrorClear(){return g(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(m.likeSmartSnippet)}logLikeSmartSnippet(){return g(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(m.dislikeSmartSnippet)}logDislikeSmartSnippet(){return g(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(m.expandSmartSnippet)}logExpandSmartSnippet(){return g(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(m.collapseSmartSnippet)}logCollapseSmartSnippet(){return g(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(m.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return g(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(m.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return g(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(m.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(m.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return g(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(m.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return g(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(m.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return g(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(m.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return g(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(m.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(m.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(m.copyToClipboard,e,t)}logCopyToClipboard(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(m.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(m.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(m.recentQueryClick)}logRecentQueryClick(){return g(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(m.clearRecentQueries)}logClearRecentQueries(){return g(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,t){return this.makeCustomEvent(m.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(m.clearRecentResults)}logClearRecentResults(){return g(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(m.noResultsBack)}logNoResultsBack(){return g(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(m.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(m.showLessFoldedResults)}logShowLessFoldedResults(){return g(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=Ur[e]){return g(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:o})=>a.log({lastSearchQueryUid:o})}})}logCustomEvent(e,t,r=Ur[e]){return g(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,t,r){return g(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:o})=>a.log({lastSearchQueryUid:o})}})}logCustomEventWithType(e,t,r){return g(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,t){return g(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,t){return g(this,void 0,void 0,function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:i})=>n.log({searchQueryUid:i})}})}makeClickEvent(e,t,r,n){return g(this,void 0,void 0,function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:o})=>a.log({searchQueryUid:o})}})}logClickEvent(e,t,r,n){return g(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){var r,n;return g(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return g(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof We?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(m.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return g(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(m.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return g(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(m.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return g(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(m.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(m.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(m.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(m.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(m.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(m.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(m.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(m.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return g(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(m.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return g(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(m.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return g(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},jr=Object.assign({},No);Object.keys(jr).map(e=>jr[e]);var $r;(function(e){e.click="click",e.flowStart="flowStart"})($r||($r={}));var Pr;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Pr||(Pr={}));var Fr;(function(e){e.quit="Quit",e.solved="Solved"})(Fr||(Fr={}));var Qs=e=>new We(e).getCurrentVisitorId(),Gs=new Ao.HistoryStore,Ws=(e,t)=>typeof t=="function"?(...r)=>{let n=Ht(r[0]);try{return t.apply(t,r)}catch(i){return e.error(i,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Ys=(e,t)=>(...r)=>{let n=Ht(r[1]);try{return t.apply(t,r)}catch(i){return e.error(i,"Error in analytics hook. Returning original request."),n}},Js=["uri","urihash","documentUri","documentUriHash","permanentid","ec_name","ec_brand","ec_category","ec_item_group_id","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"],Pn=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}),Fn=()=>"default",Ks=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Mn=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return Ks(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=(e==null?void 0:e.contextValues)||{},n={};for(let[i,a]of Object.entries(r)){let o=`context_${i}`;n[o]=a}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=Zt),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Fn()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},Zs=class extends Mn{constructor(){super(...arguments),this.initialState=Pn()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.getState().productRecommendations)==null?void 0:e.searchUid)||this.initialState.searchUid}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productRecommendations)==null?void 0:e.recommendations.map(t=>({documentUri:t.documentUri,documentUriHash:t.documentUriHash,permanentid:t.permanentid}))}get responseTime(){var e;return((e=this.state.productRecommendations)==null?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return((e=this.state.productRecommendations)==null?void 0:e.recommendations.length)||this.initialState.recommendations.length}};function Xs({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:a,mode:o}=e;o!=="disabled"&&(n.call(r),t.send(i,a,r))}var eu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function tu(e){return typeof e=="string"&&eu.test(e)}function ru(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),a=i&&tu(i)?i:r.generateUUID();return n.setItem(t,a),a},clear:()=>{e.get().storage.removeItem(t)}}}var qn="0.7.7";function nu(e){let{trackingId:t}=e;return{trackingId:t}}function iu(e){return(e.source||[]).concat([`relay@${qn}`])}function Ln(e,t,r,n){let{getReferrer:i,getLocation:a,getUserAgent:o}=r,u=nu(t),s=n.getClientId();return Object.freeze({type:e,config:u,ts:Date.now(),source:iu(t),clientId:s,userAgent:o(),referrer:i(),location:a()})}function au(e,t,r,n,i){return{...t,meta:Ln(e,r,n,i)}}var ou="*";function su(){let e=[];function t({type:s,callback:c}){return e.findIndex(l=>l.type===s&&l.callback===c)}function r(s,c){return s.type==="*"||c===s.type}function n(s){return t(s)<0&&e.push(s),()=>u(s.type,s.callback)}function i(s){e.forEach(c=>{if(r(c,s.meta.type))try{c.callback(s)}catch(l){console.error(l)}})}function a(s){if(s===ou)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===s&&e.splice(c,1)}function o(s){let c=t(s);c>=0&&e.splice(c,1)}function u(s,c){c?o({type:s,callback:c}):a(s)}return{add:n,call:i,remove:u}}function Mr({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function uu(e){let t=Mr(e);return{get:()=>t,update:r=>{t=Mr({...t,...r})}}}function cu(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var It=lu();function lu(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,i=document.cookie.split(";");for(let a of i){let o=a.replace(/^\s+/,"");if(o.lastIndexOf(n,0)===0)return o.substring(n.length,o.length)}return null},setItem(r,n,i){let a=t(window.location.hostname),o=`;expires=${new Date(new Date().getTime()+i).toUTCString()}`,u=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${o}${u};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function du(){return{getItem(e){return It.getItem(e)||localStorage.getItem(e)},removeItem(e){It.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),It.setItem(e,t,31556952e3)}}}function hu(){let e=document.referrer;return e===""?null:e}function pu(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(cu().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>hu(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:du()}}function fu(){return{getItem(){return null},removeItem(){},setItem(){}}}function gu(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:fu()}}function mu(e){return e.get().mode!=="disabled"&&vu()?pu():gu()}function vu(){try{return typeof window=="object"}catch{return!1}}function yu(e){return{get:()=>Object.freeze(mu(e))}}function wu(e){let t=uu(e),r=su(),n=yu(t),i=ru(n);return{emit:(a,o)=>{let u=t.get(),s=n.get(),c=au(a,o,u,s,i);return Xs({config:u,environment:s,event:c,listenerManager:r})},getMeta:a=>Ln(a,t.get(),n.get(),i),on:(a,o)=>r.add({type:a,callback:o}),off:(a,o)=>r.remove(a,o),updateConfig:a=>t.update(a),version:qn,clearStorage:()=>{i.clear()}}}var Su=Jt(e=>e.source,e=>[`@coveo/headless@${Zt}`].concat(Object.entries(e).map(([t,r])=>`${t}@${r}`))),qt=Jt(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>Su(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>wu({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i}));function bu(){return{desiredCount:5,numberOfValues:8,set:{}}}function ku(e){let{activeValue:t,ancestryMap:r}=Iu(e);return t?Cu(t,r):[]}function Iu(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let i of n.children)r.set(i,n);t.unshift(...n.children)}return{}}function Cu(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}var Eu=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},zn=(e,t)=>{let r=Eu(e,t);return ku((r==null?void 0:r.currentValues)??[])};function Ou(){return{}}function Au(){return{}}function Du(){return{}}function _u(){return{}}function Uu(e){return{facetSet:e.facetSet??_u(),categoryFacetSet:e.categoryFacetSet??Ou(),dateFacetSet:e.dateFacetSet??Au(),numericFacetSet:e.numericFacetSet??Du(),automaticFacetSet:e.automaticFacetSet??bu()}}var xu=e=>{let t=[];return ju(e).forEach((r,n)=>{let i=Nu(e,r.facetId),a=Lu(r,n+1);if(Tu(r)){if(!zn(e,r.facetId).length)return;t.push({...a,...Mu(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach((o,u)=>{if(o.state==="idle")return;let s=qr(o,u+1,i),c=Ru(r)?Lr(o):Pu(o);t.push({...a,...s,...c})})}),$u(e).forEach((r,n)=>{let i=qu(r,n+1);r.values.forEach((a,o)=>{if(a.state==="idle")return;let u=qr(a,o+1,"specific"),s=Lr(a);t.push({...i,...u,...s})})}),t},Ru=e=>e.type==="specific",Tu=e=>e.type==="hierarchical",ju=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),$u=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),qr=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Pu=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Lr=e=>({displayValue:e.value,value:e.value}),Fu=(e,t)=>zn(e,t).map(r=>r.value).join(";"),Mu=(e,t)=>{let r=Fu(e,t);return{value:r,valuePosition:1,displayValue:r}},qu=(e,t)=>({title:Nn(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Lu=(e,t)=>({title:Nn(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Nn=(e,t)=>`${e}_${t}`,zu=(e,t)=>{var r,n,i,a,o;return((r=e.facetSet[t])==null?void 0:r.request)||((n=e.categoryFacetSet[t])==null?void 0:n.request)||((i=e.dateFacetSet[t])==null?void 0:i.request)||((a=e.numericFacetSet[t])==null?void 0:a.request)||((o=e.automaticFacetSet.set[t])==null?void 0:o.response)},Nu=(e,t)=>{let r=zu(e,t);return r?r.type:"specific"},Vu=()=>({q:"",enableQuerySyntax:!1}),Vn=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Vn||{}),Bn=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(Bn||{}),Hn=e=>{if(qi(e))return e.map(t=>Hn(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Bu=()=>({by:"relevancy"});new te({values:{by:new ur({enum:Bn,required:!0}),order:new ur({enum:Vn}),field:new P}});function Hu(){return Hn(Bu())}var Qn=class Lt extends Mn{constructor(){super(...arguments),this.getFacetRequest=t=>{var r,n,i,a,o,u,s,c,l,f;return((n=(r=this.state.facetSet)==null?void 0:r[t])==null?void 0:n.request)||((a=(i=this.state.categoryFacetSet)==null?void 0:i[t])==null?void 0:a.request)||((u=(o=this.state.dateFacetSet)==null?void 0:o[t])==null?void 0:u.request)||((c=(s=this.state.numericFacetSet)==null?void 0:s[t])==null?void 0:c.request)||((f=(l=this.state.automaticFacetSet)==null?void 0:l.set[t])==null?void 0:f.response)}}getFacetState(){return xu(Uu(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||Lt.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,n;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((n=t.search)==null?void 0:n.response.searchUid)||ht().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var n;let t=!!this.getSplitTestRunName(),r=((n=this.state.search)==null?void 0:n.response.pipeline)||this.state.pipeline||Lt.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var i,a,o;let t=this.getState(),r=super.getBaseMetadata(),n=(o=(a=(i=t.search)==null?void 0:i.response)==null?void 0:a.extendedResults)==null?void 0:o.generativeQuestionAnsweringId;return n&&(r.generativeQuestionAnsweringId=n),r}getFacetMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetValue:r,facetTitle:`${n}_${t}`}}getFacetClearAllMetadata(t){var n;let r=((n=this.getFacetRequest(t))==null?void 0:n.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:r,facetTitle:`${r}_${t}`}}getFacetUpdateSortMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:n,criteria:r,facetTitle:`${n}_${t}`}}getRangeBreadcrumbFacetMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${t}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Hu()}}getStaticFilterToggleMetadata(t,r){return{...this.getBaseMetadata(),staticFilterId:t,staticFilterValue:r}}getStaticFilterClearAllMetadata(t){return{...this.getBaseMetadata(),staticFilterId:t}}getUndoTriggerQueryMetadata(t){return{...this.getBaseMetadata(),undoneQuery:t}}getCategoryBreadcrumbFacetMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),categoryFacetId:t,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${t}`}}getOmniboxAnalyticsMetadata(t,r){let n=this.state.querySuggest&&this.state.querySuggest[t],i=n.completions.map(s=>s.expression),a=n.partialQueries.length-1,o=n.partialQueries[a]||"",u=n.responseId;return{...this.getBaseMetadata(),suggestionRanking:i.indexOf(r),partialQuery:o,partialQueries:n.partialQueries.length>0?n.partialQueries:"",suggestions:i.length>0?i:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(t){return{...this.getBaseMetadata(),...t}}getGeneratedAnswerMetadata(){var n;let t=this.getState(),r={};return((n=t.generatedAnswer)==null?void 0:n.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||Vu().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||ht().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||ht().response.totalCountFiltered}};Qn.fallbackPipelineName="default";var Gn=Qn,Qu=({logger:e,getState:t,analyticsClientMiddleware:r=(a,o)=>o,preprocessRequest:n,provider:i=new Gn(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Hs({token:o,endpoint:u,runtimeEnvironment:s,preprocessRequest:Ws(e,n),beforeSendHooks:[Ys(e,r),(f,p)=>(e.info({...p,type:f,endpoint:u,token:o},"Analytics request"),p)]},i);return c||l.disable(),l};function Gu(e){return Object.assign(e,{instantlyCallable:!0})}function Wu(e,t){let r=i=>Gu(ze(e,i)),n=r(async(i,{getState:a,extra:o})=>{let{analyticsClientMiddleware:u,preprocessRequest:s,logger:c}=o;return await(await t({getState:a,analyticsClientMiddleware:u,preprocessRequest:s,logger:c})).log({state:a(),extra:o})});return Object.assign(n,{prepare:async({getState:i,analyticsClientMiddleware:a,preprocessRequest:o,logger:u})=>{let{description:s,log:c}=await t({getState:i,analyticsClientMiddleware:a,preprocessRequest:o,logger:u});return{description:s,action:r(async(l,{getState:f,extra:p})=>await c({state:f(),extra:p}))}}}),n}var Yu=(e,t,r)=>{function n(...i){let a=i.length===1?{...i[0],__legacy__getBuilder:t(i[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:i[0],__legacy__getBuilder:t(i[1]),__legacy__provider:i[2],analyticsConfigurator:e,providerClass:r};return Zu(a)}return n},Ju=e=>e.configuration.analytics.analyticsMode==="legacy",Ku=e=>e.configuration.analytics.analyticsMode==="next",Zu=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:o})=>(r??(r=u=>new o(u)),Wu(e,async({getState:u,analyticsClientMiddleware:s,preprocessRequest:c,logger:l})=>{let f=[],p={log:async({state:b})=>{for(let D of f)await D(b)}},w=u(),k=a({getState:u,logger:l,analyticsClientMiddleware:s,preprocessRequest:c,provider:r(u)}),d=await t(k,u());p.description=d==null?void 0:d.description,f.push(async b=>{Ju(b)&&await Xu(d,r,b,l,k.coveoAnalyticsClient)});let{emit:y}=qt(w);return f.push(async b=>{if(Ku(b)&&i&&n){let D=n(b);await rc(y,i,D)}}),p}));async function Xu(e,t,r,n,i){t(()=>r);let a=await(e==null?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var ec=Yu(Qu,e=>e,Gn),tc={urihash:new P,sourcetype:new P,permanentid:new P};new te({values:tc}),new P({required:!1,emptyAllowed:!0});async function rc(e,t,r){await e(t,r)}var nc=()=>ec("analytics/productRecommendations/load",e=>e.makeRecommendationInterfaceLoad(),e=>new Zs(e));function ic(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var Wn=F("productrecommendations/setId",e=>B(e,{id:Z})),zt=F("productrecommendations/setSku",e=>B(e,{skus:new Ee({required:!0,min:1,each:G})})),ac=F("productrecommendations/setBrand",e=>B(e,{brand:new P({required:!0,emptyAllowed:!0})})),oc=F("productrecommendations/setCategory",e=>B(e,{category:new P({required:!0,emptyAllowed:!0})})),Yn=F("productrecommendations/setAdditionalFields",e=>B(e,{additionalFields:new Ee({required:!0,each:G})})),Jn=F("productrecommendations/setMaxNumberOfRecommendations",e=>B(e,{number:new Je({required:!0,max:50,min:1})})),Ye=ze("productRecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=new Date().getTime(),o=await n.productRecommendations(await sc(i)),u=new Date().getTime()-a;if(da(o))return r(o.error);let s=i.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map(c=>Kn(c,{additionalFields:s})),analyticsAction:nc(),searchUid:o.success.searchUid,duration:u}}),Kn=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,i=e.raw.ec_in_stock,a={documentUri:e.uri,documentUriHash:e.raw.urihash,permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_item_group_id:e.raw.ec_item_group_id,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:i===void 0?void 0:i.toLowerCase()==="yes"||i.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((o,u)=>({...o,[u]:e.raw[u]}),{}),childResults:[],totalNumberOfChildResults:0};return ic(e)&&(a.childResults=e.childResults.map(o=>Kn(o,{additionalFields:t})),a.totalNumberOfChildResults=e.totalNumberOfChildResults),a},sc=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Qs(e.configuration.analytics)},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Js,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?Gs.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}}),Zn=Ue(Pn(),e=>{e.addCase(Wn,(t,r)=>{t.id=r.payload.id}).addCase(zt,(t,r)=>{t.skus=r.payload.skus}).addCase(ac,(t,r)=>{t.filter.brand=r.payload.brand}).addCase(oc,(t,r)=>{t.filter.category=r.payload.category}).addCase(Jn,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number}).addCase(Yn,(t,r)=>{t.additionalFields=r.payload.additionalFields}).addCase(Ye.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Ye.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1}).addCase(Ye.pending,t=>{t.isLoading=!0})}),Xn=F("searchHub/set",e=>B(e,new P({required:!0,emptyAllowed:!0}))),uc=F("history/undo"),cc=F("history/redo");F("history/snapshot");ze("history/back",async(e,{dispatch:t})=>{t(uc()),await t(Ne())});ze("history/forward",async(e,{dispatch:t})=>{t(cc()),await t(Ne())});var Ne=ze("history/change",async(e,{getState:t})=>t().history.present),lc=Ue(Fn(),e=>{e.addCase(Xn,(t,r)=>r.payload).addCase(Ne.fulfilled,(t,r)=>{var n;return((n=r.payload)==null?void 0:n.searchHub)??t}).addCase(er,(t,r)=>r.payload.searchHub||t)}),dc=Ue(Zt,e=>e);function hc(){return typeof window<"u"&&typeof document<"u"}function pc(e){var r;let t=(r=e.payload)==null?void 0:r.analyticsAction;return ei(e)&&!V(t)}function ei(e){return"type"in e}var fc=e=>t=>r=>{let n;pc(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return ei(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i},gc=we(Ai()),mc={q:new P,enableQuerySyntax:new Ae,aq:new P,cq:new P,firstResult:new Je({min:0}),numberOfResults:new Je({min:0}),sortCriteria:new P,f:new te,fExcluded:new te,cf:new te,nf:new te,df:new te,debug:new Ae,sf:new te,tab:new P,af:new te},vc=F("searchParameters/restore",e=>B(e,mc));F("tab/register",e=>{let t=new te({values:{id:Z,expression:qe}});return B(e,t)});var yc=F("tab/updateActiveTab",e=>B(e,Z)),nr=we(Di()),wc=we(_i()),Sc=we(Ui());nr.default.extend(Sc.default);nr.default.extend(wc.default);var ti="/rest/search/v2",ri="/rest/ua",bc=()=>({organizationId:"",accessToken:"",platformUrl:lr(),search:{apiBaseUrl:`${lr()}${ti}`,locale:"en-US",timezone:nr.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Zi()}${ri}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function kc(e,t){if(na(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+ri;let r=ia(e,t);return r?Zr(t,r.environment).analytics:e}var Ic=Ue(bc(),e=>e.addCase(Xt,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${ti}`,t.analytics.apiBaseUrl=kc(r.payload.platformUrl,t.organizationId))}).addCase(er,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(wn,(t,r)=>{V(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),V(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),V(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),V(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),V(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),V(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),V(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),V(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),V(r.payload.source)||(t.analytics.source=r.payload.source);let n=(0,gc.default)();n&&(t.analytics.analyticsMode="next",t.analytics.trackingId=n),V(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),V(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),V(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),V(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),V(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(Sn,t=>{t.analytics.enabled=!1}).addCase(bn,t=>{t.analytics.enabled=!0}).addCase(So,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(bo,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(yc,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(vc,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2})),ni=Ic;function Cc(e){return e.instantlyCallable}var Ec=()=>e=>t=>e(Cc(t)?t():t),Oc=e=>()=>t=>r=>{var a;let n=r;if(!n.error)return t(r);let i=n.error;if((a=n.payload)!=null&&a.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},Ac=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n)),Dc=()=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href}),_c=()=>({referrer:"default",userAgent:"Node.js",location:"default"});function Uc(e,t){let r={...e},n,i=a=>(o,u)=>{let s=a(o,u);return n?n(s,u):s};return{get combinedReducer(){let a=Wi(Object.entries(t).filter(([o])=>!(o in r)).map(([o,u])=>[o,()=>u]));return i(tn({...a,...r}))},containsAll(a){return Object.keys(a).every(o=>o in r)},add(a){Object.keys(a).filter(o=>!(o in r)).forEach(o=>r[o]=a[o])},addCrossReducer(a){n=a}}}function xc(e,t,r){var n,i,a;r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,u=(i=r.callback)!=null&&i,s=r.maxWait,c=Date.now(),l=[];function f(){if(s!==void 0){var w=Date.now()-c;if(w+t>=s)return s-w}return t}var p=function(){var w=[].slice.call(arguments),k=this;return new Promise(function(d,y){var b=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,c=Date.now(),!o){var $=e.apply(k,w);u&&u($),l.forEach(function(N){return(0,N.resolve)($)}),l=[]}},f()),b){var D=e.apply(k,w);return u&&u(D),d(D)}l.push({resolve:d,reject:y})})};return p.cancel=function(w){a!==void 0&&clearTimeout(a),l.forEach(function(k){return(0,k.reject)(w)}),l=[]},p}function Rc(e,t){let r=0,n=xc(()=>r=0,500);return i=>a=>async o=>{if(typeof o!="function")return a(o);let u=await a(o);if(!Tc(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let s=await jc(t);i.dispatch(Xt({accessToken:s})),i.dispatch(o)}}function Tc(e){var t;return((t=e==null?void 0:e.error)==null?void 0:t.name)===new Wr().name}async function jc(e){try{return await e()}catch{return""}}function $c({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return Xa({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:i,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:n}}).prepend(...r).concat(Ac(n.logger))})}var Pc={configuration:ni,version:dc};function Fc(e,t){var o;let r=((o=e.organizationEndpoints)==null?void 0:o.analytics)||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},a={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(Yr())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!i.trackingId)throw new Hc('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function Mc(e,t){var s;let r=qc(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:a}=e.configuration,o=(a==null?void 0:a.platform)||e.configuration.platformUrl;Vc(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Nc(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Bc(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(s=e.configuration.organizationEndpoints)==null?void 0:s.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Xt({accessToken:n,organizationId:i,platformUrl:o}));let u=Fc(e.configuration,r.logger);return u&&r.dispatch(wn(u)),r}function qc(e,t){let{reducers:r}=e,n=Uc({...Pc,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,a=e.navigatorContextProvider??hc()?Dc:_c,o={...t,get relay(){return qt(s.state)},get navigatorContext(){return a()}},u=Lc(e,o,n),s={addReducers(c){n.containsAll(c)||(n.add(c),u.replaceReducer(n.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(bn())},disableAnalytics(){u.dispatch(Sn())},get state(){return u.getState()},get relay(){return qt(this.state)},get navigatorContext(){return a()},logger:i,store:u};return s}function Lc(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=zc(e,t.logger);return $c({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}function zc(e,t){let{renewAccessToken:r}=e.configuration,n=Rc(t,r);return[Ec,n,Oc(t),fc].concat(e.middlewares||[])}function Nc(e){return Se(e.organizationEndpoints)}function Vc(e){var t;return!V(e.platformUrl)||V((t=e.organizationEndpoints)==null?void 0:t.platform)}function Bc(e){let{platform:t}=e.organizationEndpoints;if(Se(t))return!1;let r=Xr(t);return r&&r.organizationId!==e.organizationId}var Hc=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}},Qc=we(Ri());function Gc(e){return(0,Qc.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter}})}function Wc(e,t){let r=Yc(e),n=mn,i=Jc(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function Yc(e){let{analytics:t}=e,r=(n,i)=>i;return(t==null?void 0:t.analyticsClientMiddleware)||r}function Jc(e){return e.preprocessRequest||Gr}new P({required:!1,emptyAllowed:!1}),new P({required:!1,emptyAllowed:!1}),new te({options:{required:!1},values:{enabled:new Ae({required:!1}),originContext:new P({required:!1}),originLevel2:new P({required:!1}),originLevel3:new P({required:!1}),analyticsMode:new P({constrainTo:["legacy","next"],required:!1})}});function Kc(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Zr("searchuisamples")}}var Zc={organizationId:Z,accessToken:Z,platformUrl:new P({required:!1,emptyAllowed:!1}),name:new P({required:!1,emptyAllowed:!1}),analytics:new te({options:{required:!1},values:{enabled:new Ae({required:!1}),originContext:new P({required:!1}),originLevel2:new P({required:!1}),originLevel3:new P({required:!1}),analyticsMode:new P({constrainTo:["legacy"],required:!1})}}),searchHub:G,locale:G,timezone:G},Xc=new Le(Zc);function el(){return{...Kc(),searchHub:"default"}}var tl={searchHub:lc,productRecommendations:Zn};function rl(e){let t=Gc(e.loggerOptions);nl(e.configuration,t);let r=il(e.configuration,t),n={...Wc(e.configuration,t),apiClient:r},i={...e,reducers:tl},a=Mc(i,n),{searchHub:o,timezone:u,locale:s}=e.configuration;return a.dispatch(er({timezone:u,locale:s})),V(o)||a.dispatch(Xn(o)),{...a,get state(){return a.state}}}function nl(e,t){try{Xc.validate(e)}catch(r){throw t.error("Product Recommendation engine configuration error",r),r}}function il(e,t){return new la({logger:t,preprocessRequest:e.preprocessRequest||Gr,postprocessSearchResponseMiddleware:ma,postprocessFacetSearchResponseMiddleware:va,postprocessQuerySuggestResponseMiddleware:ya})}var al=new Ee({each:Z,required:!0}),ii=(e,t)=>(B(e,Z),Bt(t)?B(t,Z):B(t,al),{payload:{contextKey:e,contextValue:t}}),ol=F("context/set",e=>{for(let[t,r]of Object.entries(e))ii(t,r);return{payload:e}}),sl=F("context/add",e=>ii(e.contextKey,e.contextValue)),ul=F("context/remove",e=>B(e,Z));function cl(){return{contextValues:{}}}Ue(cl(),e=>{e.addCase(ol,(t,r)=>{t.contextValues=r.payload}).addCase(sl,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(ul,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Ne.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});var ll=F("dictionaryFieldContext/set",e=>{let t=new te({options:{required:!0}}),r=B(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new Ee({each:qe}),a=B(n,i).error;return a?{payload:e,error:a}:{payload:e}}),dl=F("dictionaryFieldContext/add",e=>{let t=new te({options:{required:!0},values:{field:qe,key:qe}});return B(e,t)}),hl=F("dictionaryFieldContext/remove",e=>B(e,qe));function pl(){return{contextValues:{}}}Ue(pl(),e=>{e.addCase(ll,(t,r)=>{t.contextValues=r.payload}).addCase(dl,(t,r)=>{let{field:n,key:i}=r.payload;t.contextValues[n]=i}).addCase(hl,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Ne.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function fl(e){let t,r=new Map,n=()=>r.size===0,i=a=>{try{let o=JSON.stringify(a),u=t!==o;return t=o,u}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}};return{subscribe(a){a();let o=Symbol(),u;return n()&&(t=JSON.stringify(this.state),u=e.subscribe(()=>{i(this.state)&&r.forEach(s=>s())})),r.set(o,a),()=>{r.delete(o),n()&&u&&u()}},get state(){return{}}}}var Nt={additionalFields:new Ee({required:!1,each:G}),skus:new Ee({required:!1,each:G}),maxNumberOfRecommendations:new Je({required:!1,max:50,min:1,default:5})},gl=new Le({id:Z,...Nt}),ml=(e,t={})=>{vl(e);let r=fl(e),{dispatch:n}=e,i=()=>e.state,a=vn(e,gl,t.options,"buildBaseProductRecommendationsList");return n(Wn({id:a.id})),n(Jn({number:a.maxNumberOfRecommendations})),a.additionalFields&&n(Yn({additionalFields:a.additionalFields})),a.skus&&n(zt({skus:a.skus})),{...r,setSkus(o){n(zt({skus:o}))},refresh(){n(Ye())},get state(){let{skus:o,maxNumberOfRecommendations:u,recommendations:s,error:c,isLoading:l}=i().productRecommendations;return{skus:o,maxNumberOfRecommendations:u,recommendations:s,error:c,isLoading:l}}}};function vl(e){return e.addReducers({productRecommendations:Zn,configuration:ni}),!0}var yl=new Le({sku:new P({required:!0,emptyAllowed:!1}),maxNumberOfRecommendations:Nt.maxNumberOfRecommendations,additionalFields:Nt.additionalFields});function wl(e,t){let r=vn(e,yl,t.options,"buildFrequentlyBoughtTogetherList"),n=ml(e,{...t,options:{maxNumberOfRecommendations:r.maxNumberOfRecommendations,additionalFields:r.additionalFields,skus:[r.sku],id:"frequentBought"}}),{setSkus:i,...a}=n;return{...a,setSku(o){i([o])},get state(){let{skus:o,...u}=n.state;return{...u,sku:o[0]}}}}new Le({values:new te({options:{required:!1}})});Ti();/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=class{constructor(e){ai(this,e),this.unsubscribe=()=>{},this.state=void 0}componentWillLoad(){const e=el();this.engine=rl({configuration:{...e,searchHub:"frequently_bought_recommendations"}}),this.frequentlyBoughtTogether=wl(this.engine,{options:{sku:"abc"}}),this.unsubscribe=this.frequentlyBoughtTogether.subscribe(()=>this.updateState()),this.frequentlyBoughtTogether.refresh()}disconnectedCallback(){this.unsubscribe()}updateState(){this.state=this.frequentlyBoughtTogether.state}render(){return dt("div",{key:"e6d6b54c75f4c22bc4695c36a2b1ca61ff305548"},"FREQUENTLY BOUGHT TOGETHER:",dt("ul",{key:"dcafc685b0c2c1e08d2980d2ae787a197c7fe2df"},this.state.recommendations.map(e=>dt("li",null,e.ec_name))))}};export{El as atomic_frequently_bought_together};
