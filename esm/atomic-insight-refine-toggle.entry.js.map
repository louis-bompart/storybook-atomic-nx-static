{"file":"atomic-insight-refine-toggle.entry.js","mappings":";;;;;;;;;;;;AAAA,MAAM,4BAA4B,GAAG,u+tCAAu+tC,CAAC;AAC7guC,wCAAe,4BAA4B;;;;;;;;;;;;MCwB9B,yBAAyB;;;;;;;IAmBpC,IAAY,mBAAmB;QAC7B,OAAO;YACL,GAAG,IAAI,CAAC,sBAAsB,CAAC,gBAAgB;YAC/C,GAAG,IAAI,CAAC,sBAAsB,CAAC,wBAAwB;YACvD,GAAG,IAAI,CAAC,sBAAsB,CAAC,uBAAuB;YACtD,GAAG,IAAI,CAAC,sBAAsB,CAAC,oBAAoB;YACnD,GAAG,IAAI,CAAC,sBAAsB,CAAC,uBAAuB;SACvD,CAAC,MAAM,CAAC;KACV;IAEM,UAAU;QACf,IAAI,CAAC,iBAAiB,GAAGA,EAA6B,CACpD,IAAI,CAAC,QAAQ,CAAC,MAAM,CACrB,CAAC;QACF,IAAI,CAAC,YAAY,GAAGC,EAAwB,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;KACpE;IAEO,WAAW;QACjB,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;KAChD;IAEO,SAAS;;QACf,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO;SACR;QAED,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,6BAA6B,CAAC,CAAC;QACtE,MAAA,IAAI,CAAC,IAAI,CAAC,aAAa,0CAAE,qBAAqB,CAC5C,aAAa,EACb,IAAI,CAAC,QAAQ,CACd,CAAC;QACF,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;KAC3C;IAEM,MAAM;QACX,QACE,EAAC,UAAU,qDACT,UAAU,EAAC,uBAAuB,EAClC,KAAK,EAAC,iBAAiB,EACvB,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,EACtC,IAAI,EAAE,UAAU,EAChB,QAAQ,EACN,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAEjE,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EACvC,OAAO,EAAE;gBACP,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,kBAAkB,CAAC;oBACrC,IAAI,CAAC,WAAW,EAAE,CAAC;iBACpB,CAAC,CAAC;aACJ,EACD,SAAS,EAAE,CAAC,MAA0B;gBACpC,IAAI,CAAC,MAAM,EAAE;oBACX,OAAO;iBACR;gBACD,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;gBACxB,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB,EACD,KAAK,EACH,IAAI,CAAC,sBAAsB,CAAC,cAAc,IACxC,gBAAO,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,CAAQ,IAChD,SAAS,GAEf,EACF;KACH;;;AAlF4B;IAA5B,kBAAkB,EAAE;2DAAmC;AAOhD;IAFP,qBAAqB,CAAC,mBAAmB,CAAC;yEAEoB;AAIvD;IAFP,qBAAqB,CAAC,cAAc,CAAC;oEAEe;;;;;","names":["buildInsightBreadcrumbManager","buildInsightSearchStatus"],"sources":["src/components/insight/atomic-insight-refine-toggle/atomic-insight-refine-toggle.pcss?tag=atomic-insight-refine-toggle&encapsulation=shadow","src/components/insight/atomic-insight-refine-toggle/atomic-insight-refine-toggle.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n","import {Component, h, State, Element} from '@stencil/core';\nimport {\n  buildInsightBreadcrumbManager,\n  buildInsightSearchStatus,\n  InsightBreadcrumbManager,\n  InsightBreadcrumbManagerState,\n  InsightSearchStatus,\n  InsightSearchStatusState,\n} from '..';\nimport FilterIcon from '../../../images/filter.svg';\nimport {\n  InitializeBindings,\n  BindStateToController,\n} from '../../../utils/initialization-utils';\nimport {IconButton} from '../../common/iconButton';\nimport {InsightBindings} from '../atomic-insight-interface/atomic-insight-interface';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-insight-refine-toggle',\n  styleUrl: 'atomic-insight-refine-toggle.pcss',\n  shadow: true,\n})\nexport class AtomicInsightRefineToggle {\n  @InitializeBindings() public bindings!: InsightBindings;\n  @Element() public host!: HTMLElement;\n\n  @State() public error!: Error;\n\n  @BindStateToController('breadcrumbManager')\n  @State()\n  private breadcrumbManagerState!: InsightBreadcrumbManagerState;\n\n  @BindStateToController('searchStatus')\n  @State()\n  private searchStatusState!: InsightSearchStatusState;\n\n  public breadcrumbManager!: InsightBreadcrumbManager;\n  public searchStatus!: InsightSearchStatus;\n  private modalRef?: HTMLAtomicInsightRefineModalElement;\n  private buttonRef?: HTMLButtonElement;\n\n  private get numberOfBreadcrumbs(): number {\n    return [\n      ...this.breadcrumbManagerState.facetBreadcrumbs,\n      ...this.breadcrumbManagerState.categoryFacetBreadcrumbs,\n      ...this.breadcrumbManagerState.numericFacetBreadcrumbs,\n      ...this.breadcrumbManagerState.dateFacetBreadcrumbs,\n      ...this.breadcrumbManagerState.staticFilterBreadcrumbs,\n    ].length;\n  }\n\n  public initialize() {\n    this.breadcrumbManager = buildInsightBreadcrumbManager(\n      this.bindings.engine\n    );\n    this.searchStatus = buildInsightSearchStatus(this.bindings.engine);\n  }\n\n  private enableModal() {\n    this.modalRef && (this.modalRef.isOpen = true);\n  }\n\n  private loadModal() {\n    if (this.modalRef) {\n      return;\n    }\n\n    this.modalRef = document.createElement('atomic-insight-refine-modal');\n    this.host.parentElement?.insertAdjacentElement(\n      'beforebegin',\n      this.modalRef\n    );\n    this.modalRef.openButton = this.buttonRef;\n  }\n\n  public render() {\n    return (\n      <IconButton\n        partPrefix=\"insight-refine-toggle\"\n        style=\"outline-neutral\"\n        title={this.bindings.i18n.t('filters')}\n        icon={FilterIcon}\n        disabled={\n          !this.searchStatusState.hasResults && !this.numberOfBreadcrumbs\n        }\n        ariaLabel={this.bindings.i18n.t('sort')}\n        onClick={() => {\n          this.bindings.store.waitUntilAppLoaded(() => {\n            this.enableModal();\n          });\n        }}\n        buttonRef={(button?: HTMLButtonElement) => {\n          if (!button) {\n            return;\n          }\n          this.buttonRef = button;\n          this.loadModal();\n        }}\n        badge={\n          this.breadcrumbManagerState.hasBreadcrumbs ? (\n            <slot>{this.numberOfBreadcrumbs.toString()}</slot>\n          ) : undefined\n        }\n      />\n    );\n  }\n}\n"],"version":3}