{"version":3,"names":["atomicLoadMoreChildrenResultsCss","AtomicLoadMoreChildrenResultsStyle0","AtomicLoadMoreChildrenResults","this","label","collection","result","raw","foldingcollection","foldedResultListState","results","find","r","loadFullCollection","host","dispatchEvent","buildCustomEvent","hasMoreResults","_a","moreResultsAvailable","isLoading","Boolean","isLoadingMoreResults","hasChildren","children","length","buttonClass","wrapperClass","getItemDisplayClasses","displayConfig","density","imageSize","join","render","h","class","Button","part","style","onClick","disabled","bindings","i18n","t","__decorate","InitializeBindings","ResultContext","FoldedItemListStateContext","ItemDisplayConfigContext"],"sources":["src/components/search/atomic-load-more-children-results/atomic-load-more-children-results.pcss?tag=atomic-load-more-children-results&encapsulation=shadow","src/components/search/atomic-load-more-children-results/atomic-load-more-children-results.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n@import '../../../global/mixins.pcss';\r\n\r\n@define-mixin display-density $max, $min {\r\n  .btn-text-primary {\r\n    margin-top: $min;\r\n\r\n    &.has-children {\r\n      margin-bottom: $min;\r\n    }\r\n  }\r\n}\r\n\r\n.btn-text-primary {\r\n  @mixin set-font-size var(--atomic-text-sm);\r\n}\r\n.density-compact {\r\n  @mixin display-density 1rem, 0.475rem;\r\n}\r\n.density-normal {\r\n  @mixin display-density 1.5rem, 0.875rem;\r\n}\r\n.density-comfortable {\r\n  @mixin display-density 1.75rem, 0.25rem;\r\n}\r\n","import {Result, FoldedResultListState} from '@coveo/headless';\r\nimport {Component, Element, h, Prop, State} from '@stencil/core';\r\nimport {buildCustomEvent} from '../../../utils/event-utils';\r\nimport {InitializeBindings} from '../../../utils/initialization-utils';\r\nimport {Button} from '../../common/button';\r\nimport {\r\n  DisplayConfig,\r\n  ItemDisplayConfigContext,\r\n} from '../../common/item-list/item-decorators';\r\nimport {FoldedItemListStateContext} from '../../common/item-list/item-list-decorators';\r\nimport {getItemDisplayClasses} from '../../common/layout/display-options';\r\nimport {Bindings} from '../atomic-search-interface/atomic-search-interface';\r\nimport {ResultContext} from '../result-template-components/result-template-decorators';\r\n\r\n/**\r\n * The `atomic-load-more-children-results` component allows to load the full collection for a folded result.\r\n *\r\n * @part button - The button used to load more results.\r\n */\r\n@Component({\r\n  tag: 'atomic-load-more-children-results',\r\n  styleUrl: 'atomic-load-more-children-results.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicLoadMoreChildrenResults {\r\n  @InitializeBindings() public bindings!: Bindings;\r\n  @ResultContext() public result!: Result;\r\n  @State() public error!: Error;\r\n  @Element() host!: HTMLElement;\r\n\r\n  @FoldedItemListStateContext()\r\n  @State()\r\n  private foldedResultListState!: FoldedResultListState;\r\n\r\n  @ItemDisplayConfigContext()\r\n  private displayConfig!: DisplayConfig;\r\n\r\n  /**\r\n   * The non-localized label for the button used to load more results.\r\n   */\r\n  @Prop() public label = 'load-all-results';\r\n\r\n  private get collection() {\r\n    if (!this.result.raw.foldingcollection) {\r\n      return null;\r\n    }\r\n    return this.foldedResultListState.results.find(\r\n      (r) =>\r\n        r.result.raw.foldingcollection === this.result.raw.foldingcollection\r\n    )!;\r\n  }\r\n\r\n  private loadFullCollection() {\r\n    this.host.dispatchEvent(\r\n      buildCustomEvent('atomic/loadCollection', this.collection)\r\n    );\r\n  }\r\n\r\n  private get hasMoreResults() {\r\n    return this.collection?.moreResultsAvailable;\r\n  }\r\n\r\n  private get isLoading() {\r\n    return Boolean(this.collection?.isLoadingMoreResults);\r\n  }\r\n\r\n  private get hasChildren() {\r\n    return Boolean(this.collection?.children.length);\r\n  }\r\n\r\n  private get buttonClass() {\r\n    if (this.hasChildren) {\r\n      return 'has-children';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  private get wrapperClass() {\r\n    return getItemDisplayClasses(\r\n      'list',\r\n      this.displayConfig.density,\r\n      this.displayConfig.imageSize\r\n    ).join(' ');\r\n  }\r\n\r\n  public render() {\r\n    if (!this.foldedResultListState || !this.collection) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div class={this.wrapperClass}>\r\n        {this.hasMoreResults && (\r\n          <Button\r\n            part=\"button\"\r\n            style=\"text-primary\"\r\n            onClick={() => this.loadFullCollection()}\r\n            class={this.buttonClass}\r\n            disabled={this.isLoading}\r\n          >\r\n            {this.bindings.i18n.t(this.label)}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"iaAAA,MAAMA,EAAmC,2hvCACzC,MAAAC,EAAeD,E,iXCuBFE,EAA6B,M,yBAgBzBC,KAAAC,MAAQ,mB,qEAAA,kB,CAEvB,cAAYC,GACV,IAAKF,KAAKG,OAAOC,IAAIC,kBAAmB,CACtC,OAAO,I,CAET,OAAOL,KAAKM,sBAAsBC,QAAQC,MACvCC,GACCA,EAAEN,OAAOC,IAAIC,oBAAsBL,KAAKG,OAAOC,IAAIC,mB,CAIjD,kBAAAK,GACNV,KAAKW,KAAKC,cACRC,EAAiB,wBAAyBb,KAAKE,Y,CAInD,kBAAYY,G,MACV,OAAOC,EAAAf,KAAKE,cAAU,MAAAa,SAAA,SAAAA,EAAEC,oB,CAG1B,aAAYC,G,MACV,OAAOC,SAAQH,EAAAf,KAAKE,cAAU,MAAAa,SAAA,SAAAA,EAAEI,qB,CAGlC,eAAYC,G,MACV,OAAOF,SAAQH,EAAAf,KAAKE,cAAU,MAAAa,SAAA,SAAAA,EAAEM,SAASC,O,CAG3C,eAAYC,GACV,GAAIvB,KAAKoB,YAAa,CACpB,MAAO,c,CAET,MAAO,E,CAGT,gBAAYI,GACV,OAAOC,EACL,OACAzB,KAAK0B,cAAcC,QACnB3B,KAAK0B,cAAcE,WACnBC,KAAK,I,CAGF,MAAAC,GACL,IAAK9B,KAAKM,wBAA0BN,KAAKE,WAAY,CACnD,OAAO,I,CAGT,OACE6B,EAAA,OAAKC,MAAOhC,KAAKwB,cACdxB,KAAKc,gBACJiB,EAACE,EAAM,CACLC,KAAK,SACLC,MAAM,eACNC,QAAS,IAAMpC,KAAKU,qBACpBsB,MAAOhC,KAAKuB,YACZc,SAAUrC,KAAKiB,WAEdjB,KAAKsC,SAASC,KAAKC,EAAExC,KAAKC,Q,6BA3ERwC,EAAA,CAA5BC,K,+BACuBD,EAAA,CAAvBE,K,6BAMOF,EAAA,CAFPG,K,4CAKOH,EAAA,CADPI,K"}