{"version":3,"names":["AtomicFocusDetector","constructor","hostRef","this","focusWasContained","containsFocus","focusedElement","getFocusedElement","isAncestorOf","host","onFocusIn","onFocusChanged","onFocusOut","focusEnter","emit","focusExit","render","h","Host","key","style","display"],"sources":["src/components/common/atomic-focus-detector.tsx"],"sourcesContent":["import {\r\n  h,\r\n  Component,\r\n  Element,\r\n  Event,\r\n  EventEmitter,\r\n  Listen,\r\n  Host,\r\n} from '@stencil/core';\r\nimport {getFocusedElement, isAncestorOf} from '../../utils/utils';\r\n\r\n/**\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-focus-detector',\r\n  shadow: false,\r\n})\r\nexport class AtomicFocusDetector {\r\n  @Element() private host!: HTMLElement;\r\n\r\n  @Event() focusEnter!: EventEmitter;\r\n  @Event() focusExit!: EventEmitter;\r\n\r\n  private focusWasContained = this.containsFocus;\r\n\r\n  private get containsFocus() {\r\n    const focusedElement = getFocusedElement();\r\n\r\n    return !!focusedElement && isAncestorOf(this.host, focusedElement);\r\n  }\r\n\r\n  @Listen('focusin', {target: 'document'})\r\n  onFocusIn() {\r\n    this.onFocusChanged();\r\n  }\r\n\r\n  @Listen('focusout', {target: 'document'})\r\n  onFocusOut() {\r\n    this.onFocusChanged();\r\n  }\r\n\r\n  private onFocusChanged() {\r\n    const containsFocus = this.containsFocus;\r\n    if (containsFocus === this.focusWasContained) {\r\n      return;\r\n    }\r\n\r\n    this.focusWasContained = containsFocus;\r\n    containsFocus ? this.focusEnter.emit() : this.focusExit.emit();\r\n  }\r\n\r\n  render() {\r\n    return <Host style={{display: 'contents'}}></Host>;\r\n  }\r\n}\r\n"],"mappings":"yIAkBaA,EAAmB,MAJhC,WAAAC,CAAAC,G,sFAUUC,KAAAC,kBAAoBD,KAAKE,a,CAEjC,iBAAYA,GACV,MAAMC,EAAiBC,IAEvB,QAASD,GAAkBE,EAAaL,KAAKM,KAAMH,E,CAIrD,SAAAI,GACEP,KAAKQ,gB,CAIP,UAAAC,GACET,KAAKQ,gB,CAGC,cAAAA,GACN,MAAMN,EAAgBF,KAAKE,cAC3B,GAAIA,IAAkBF,KAAKC,kBAAmB,CAC5C,M,CAGFD,KAAKC,kBAAoBC,EACzBA,EAAgBF,KAAKU,WAAWC,OAASX,KAAKY,UAAUD,M,CAG1D,MAAAE,GACE,OAAOC,EAACC,EAAI,CAAAC,IAAA,2CAACC,MAAO,CAACC,QAAS,a"}