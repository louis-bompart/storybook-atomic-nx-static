{"version":3,"names":["atomicResultRatingCss","AtomicResultRatingStyle0","AtomicResultRating","this","maxValueInIndex","icon","Star","numberOfStars","updateNumberOfStars","value","ResultTemplatesHelpers","getResultProperty","result","field","computeNumberOfStars","error","Error","componentWillRender","render","host","remove","h","Rating","i18n","bindings","numberOfTotalIcons","numberOfActiveIcons","iconSize","__decorate","InitializeBindings","ResultContext"],"sources":["src/components/search/result-template-components/atomic-result-rating/atomic-result-rating.pcss?tag=atomic-result-rating&encapsulation=shadow","src/components/search/result-template-components/atomic-result-rating/atomic-result-rating.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\r\n@import '../../../common/atomic-rating/atomic-rating.pcss';\r\n","import {Result, ResultTemplatesHelpers} from '@coveo/headless';\r\nimport {Component, Element, Prop, h, State} from '@stencil/core';\r\nimport Star from '../../../../images/star.svg';\r\nimport {InitializeBindings} from '../../../../utils/initialization-utils';\r\nimport {\r\n  Rating,\r\n  computeNumberOfStars,\r\n} from '../../../common/atomic-rating/atomic-rating';\r\nimport {Bindings} from '../../atomic-search-interface/atomic-search-interface';\r\nimport {ResultContext} from '../result-template-decorators';\r\n\r\n/**\r\n * The `atomic-result-rating` element renders a star rating.\r\n *\r\n *  @part value-rating - The wrapper that contains the row of inactive stars and the row of active stars.\r\n */\r\n@Component({\r\n  tag: 'atomic-result-rating',\r\n  styleUrl: 'atomic-result-rating.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicResultRating {\r\n  @InitializeBindings() public bindings!: Bindings;\r\n  @ResultContext() private result!: Result;\r\n  @Element() host!: HTMLElement;\r\n\r\n  /**\r\n   * The field whose values you want to display as a rating.\r\n   */\r\n  @Prop({reflect: true}) public field!: string;\r\n\r\n  /**\r\n   * The maximum value of the field. This value is also used as the number of icons to be displayed.\r\n   */\r\n  @Prop({reflect: true}) public maxValueInIndex = 5;\r\n\r\n  /**\r\n   * The SVG icon to use to display the rating.\r\n   *\r\n   * - Use a value that starts with `http://`, `https://`, `./`, or `../`, to fetch and display an icon from a given location.\r\n   * - Use a value that starts with `assets://`, to display an icon from the Atomic package.\r\n   * - Use a stringified SVG to display it directly.\r\n   *\r\n   * When using a custom icon, at least part of your icon should have the color set to `fill=\"currentColor\"`.\r\n   * This part of the SVG will take on the colors set in the following [variables](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties):\r\n   *\r\n   * - `--atomic-rating-icon-active-color`\r\n   * - `--atomic-rating-icon-inactive-color`\r\n   */\r\n  @Prop({reflect: true}) public icon = Star;\r\n\r\n  @State() public error!: Error;\r\n\r\n  @State() numberOfStars: number | null = null;\r\n\r\n  private updateNumberOfStars() {\r\n    const value = ResultTemplatesHelpers.getResultProperty(\r\n      this.result,\r\n      this.field\r\n    );\r\n    try {\r\n      this.numberOfStars = computeNumberOfStars(value, this.field);\r\n    } catch (error) {\r\n      this.error = error instanceof Error ? error : new Error(`${error}`);\r\n      this.numberOfStars = null;\r\n    }\r\n  }\r\n\r\n  componentWillRender() {\r\n    this.updateNumberOfStars();\r\n  }\r\n\r\n  render() {\r\n    if (this.numberOfStars === null) {\r\n      this.host.remove();\r\n      return;\r\n    }\r\n    return (\r\n      <Rating\r\n        i18n={this.bindings.i18n}\r\n        icon={this.icon}\r\n        numberOfTotalIcons={this.maxValueInIndex}\r\n        numberOfActiveIcons={this.numberOfStars}\r\n        iconSize={0.875}\r\n      ></Rating>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"2SAAA,MAAMA,EAAwB,6tuCAC9B,MAAAC,EAAeD,E,iXCoBFE,EAAkB,M,yBAaCC,KAAAC,gBAAkB,EAelBD,KAAAE,KAAOC,EAI5BH,KAAAI,cAA+B,K,0CAnBQ,E,UAeXD,E,wCAIG,I,CAEhC,mBAAAE,GACN,MAAMC,EAAQC,EAAuBC,kBACnCR,KAAKS,OACLT,KAAKU,OAEP,IACEV,KAAKI,cAAgBO,EAAqBL,EAAON,KAAKU,M,CACtD,MAAOE,GACPZ,KAAKY,MAAQA,aAAiBC,MAAQD,EAAQ,IAAIC,MAAM,GAAGD,KAC3DZ,KAAKI,cAAgB,I,EAIzB,mBAAAU,GACEd,KAAKK,qB,CAGP,MAAAU,GACE,GAAIf,KAAKI,gBAAkB,KAAM,CAC/BJ,KAAKgB,KAAKC,SACV,M,CAEF,OACEC,EAACC,EAAM,CACLC,KAAMpB,KAAKqB,SAASD,KACpBlB,KAAMF,KAAKE,KACXoB,mBAAoBtB,KAAKC,gBACzBsB,oBAAqBvB,KAAKI,cAC1BoB,SAAU,M,6BA7DaC,EAAA,CAA5BC,K,+BACwBD,EAAA,CAAxBE,K"}