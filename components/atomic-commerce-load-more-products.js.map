{"file":"atomic-commerce-load-more-products.js","mappings":";;;;;;AAAA,MAAM,iCAAiC,GAAG,yvuCAAyvuC,CAAC;AACpyuC,6CAAe,iCAAiC;;;;;;;;;;;;MCqCnC,sBAAsB;;;;;;;;;IAc1B,UAAU;QACf,IAAI,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,KAAK,iBAAiB,EAAE;YAC7D,IAAI,CAAC,eAAe,GAAGA,EAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SAClE;aAAM;YACL,IAAI,CAAC,eAAe,GAAGC,EAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SAC1D;QACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;KACrD;IAED,IAAY,WAAW;QACrB,OAAO,IAAI,CAAC,2BAA2B,CAAC,QAAQ,CAAC,MAAM,CAAC;KACzD;IAEO,MAAM,OAAO;;QACnB,MAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,0CAAE,oBAAoB,EAAE,CAAC;QAC7D,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;KACrC;IAEM,MAAM;QACX,MAAM,EAAC,IAAI,EAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,QACE,EAAC,aAAa,qDACZ,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,CAAC,EACjD,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,IAE3C,EAAC,iBAAiB,uDAChB,EAAC,eAAe,qDACd,IAAI,EAAE,IAAI,CAAC,WAAW,EACtB,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,YAAY,EACrC,IAAI,EAAE,IAAI,GACV,EACF,EAAC,mBAAmB,qDAClB,IAAI,EAAE,IAAI,CAAC,WAAW,EACtB,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,YAAY,GACrC,EACF,EAAC,cAAc,qDACb,IAAI,EAAE,IAAI,EACV,aAAa,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,EACnE,OAAO,EAAE,MAAM,IAAI,CAAC,OAAO,EAAE,GAC7B,CACgB,CACN,EAChB;KACH;;;;;;;AAxD4B;IAA5B,kBAAkB,EAAE;wDAAoC;AAMjD;IAFP,qBAAqB,CAAC,YAAY,CAAC;+DAEM;AAGlC;IAFP,qBAAqB,CAAC,iBAAiB,CAAC;2EAE+B;;;;;;;;;;;;;;;;;;;;;;;;;","names":["buildProductListing","buildSearch"],"sources":["src/components/commerce/atomic-commerce-load-more-products/atomic-commerce-load-more-products.pcss?tag=atomic-commerce-load-more-products&encapsulation=shadow","src/components/commerce/atomic-commerce-load-more-products/atomic-commerce-load-more-products.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n\r\n/**\r\n * @prop --atomic-more-results-progress-bar-color-from: Color of the start of the gradient for the load more results progress bar.\r\n * @prop --atomic-more-results-progress-bar-color-to: Color of the end of the gradient for the load more results progress bar.\r\n */\r\n.progress-bar {\r\n  --tw-gradient-from: var(--atomic-more-results-progress-bar-color-from, var(--atomic-primary-dark));\r\n  --tw-gradient-to: var(--atomic-more-results-progress-bar-color-to, var(--atomic-primary-light));\r\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\r\n}\r\n","import {\r\n  Pagination,\r\n  PaginationState,\r\n  buildSearch,\r\n  buildProductListing,\r\n  ProductListing,\r\n  Search,\r\n  ProductListingState,\r\n  SearchState,\r\n} from '@coveo/headless/commerce';\r\nimport {Component, h, State} from '@stencil/core';\r\nimport {\r\n  BindStateToController,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {LoadMoreButton} from '../../common/load-more/button';\r\nimport {LoadMoreContainer} from '../../common/load-more/container';\r\nimport {LoadMoreGuard} from '../../common/load-more/guard';\r\nimport {LoadMoreProgressBar} from '../../common/load-more/progress-bar';\r\nimport {LoadMoreSummary} from '../../common/load-more/summary';\r\nimport {CommerceBindings} from '../atomic-commerce-interface/atomic-commerce-interface';\r\n\r\n/**\r\n * The `atomic-commerce-load-more-products` component allows the user to load additional products if more are available.\r\n *\r\n * @part container - The container of the component.\r\n * @part showing-results - The summary displaying which products are shown and how many are available.\r\n * @part highlight - The highlighted number of products displayed and number of products available.\r\n * @part progress-bar - The progress bar displaying a percentage of results shown over the total number of products available.\r\n * @part load-more-results-button - The \"Load more products\" button.\r\n *\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-commerce-load-more-products',\r\n  styleUrl: 'atomic-commerce-load-more-products.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicLoadMoreProducts {\r\n  @InitializeBindings() public bindings!: CommerceBindings;\r\n  public pagination!: Pagination;\r\n  public listingOrSearch!: ProductListing | Search;\r\n\r\n  @BindStateToController('pagination')\r\n  @State()\r\n  private paginationState!: PaginationState;\r\n  @BindStateToController('listingOrSearch')\r\n  @State()\r\n  private productListingOrSearchState!: ProductListingState | SearchState;\r\n\r\n  @State() public error!: Error;\r\n\r\n  public initialize() {\r\n    if (this.bindings.interfaceElement.type === 'product-listing') {\r\n      this.listingOrSearch = buildProductListing(this.bindings.engine);\r\n    } else {\r\n      this.listingOrSearch = buildSearch(this.bindings.engine);\r\n    }\r\n    this.pagination = this.listingOrSearch.pagination();\r\n  }\r\n\r\n  private get lastProduct() {\r\n    return this.productListingOrSearchState.products.length;\r\n  }\r\n\r\n  private async onClick() {\r\n    this.bindings.store.state.resultList?.focusOnNextNewResult();\r\n    this.pagination.fetchMoreProducts();\r\n  }\r\n\r\n  public render() {\r\n    const {i18n} = this.bindings;\r\n    return (\r\n      <LoadMoreGuard\r\n        hasResults={this.paginationState.totalEntries > 0}\r\n        isLoaded={this.bindings.store.isAppLoaded()}\r\n      >\r\n        <LoadMoreContainer>\r\n          <LoadMoreSummary\r\n            from={this.lastProduct}\r\n            to={this.paginationState.totalEntries}\r\n            i18n={i18n}\r\n          />\r\n          <LoadMoreProgressBar\r\n            from={this.lastProduct}\r\n            to={this.paginationState.totalEntries}\r\n          />\r\n          <LoadMoreButton\r\n            i18n={i18n}\r\n            moreAvailable={this.lastProduct < this.paginationState.totalEntries}\r\n            onClick={() => this.onClick()}\r\n          />\r\n        </LoadMoreContainer>\r\n      </LoadMoreGuard>\r\n    );\r\n  }\r\n}\r\n"],"version":3}