{"file":"facet-value-label-highlight.js","mappings":"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","names":["escape"],"sources":["../../node_modules/escape-html/index.js","src/components/common/facets/facet-search/facet-search-utils.ts","src/components/common/facets/facet-value-label-highlight/facet-value-label-highlight.tsx"],"sourcesContent":["/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","import escape from 'escape-html';\r\nimport {regexEncode} from '../../../../utils/string-utils';\r\n\r\ninterface FacetSearchState {\r\n  query: string;\r\n  values: unknown[];\r\n  isLoading: boolean;\r\n}\r\n\r\n/**\r\n * Meant to be used inside the `componentShouldUpdate` lifecycle method.\r\n * It prevents updating the facet between two matchless facet searches.\r\n * It also prevents updating the facet until the first search has loaded.\r\n */\r\nexport function shouldUpdateFacetSearchComponent(\r\n  nextFacetSearchState: FacetSearchState,\r\n  prevFacetSearchState: FacetSearchState\r\n) {\r\n  const hasQuery = nextFacetSearchState.query !== '';\r\n  const stillNoValues =\r\n    !nextFacetSearchState.values.length && !prevFacetSearchState.values.length;\r\n  const hasFinishedLoading =\r\n    !nextFacetSearchState.isLoading && prevFacetSearchState.isLoading;\r\n\r\n  if (hasQuery && stillNoValues) {\r\n    return hasFinishedLoading;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nexport function shouldDisplaySearchResults(facetSearchState: FacetSearchState) {\r\n  const hasQuery = facetSearchState.query !== '';\r\n  const isLoading = facetSearchState.isLoading;\r\n  const hasValues = !!facetSearchState.values.length;\r\n\r\n  if (!hasQuery) {\r\n    return false;\r\n  }\r\n\r\n  if (hasValues) {\r\n    return true;\r\n  }\r\n\r\n  return !isLoading;\r\n}\r\n\r\nexport function highlightSearchResult(resultValue: string, searchQuery = '') {\r\n  const sanitizedResult = escape(resultValue);\r\n\r\n  if (searchQuery.trim() === '') {\r\n    return sanitizedResult;\r\n  }\r\n\r\n  const regex = new RegExp(`(${regexEncode(searchQuery)})`, 'i');\r\n  return escape(resultValue).replace(\r\n    regex,\r\n    '<span part=\"search-highlight\" class=\"font-bold\">$1</span>'\r\n  );\r\n}\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {highlightSearchResult} from '../facet-search/facet-search-utils';\r\n\r\ninterface FacetValueLabelHighlightProps {\r\n  displayValue: string;\r\n  searchQuery?: string;\r\n  isSelected: boolean;\r\n  isExcluded?: boolean;\r\n}\r\n\r\nexport const FacetValueLabelHighlight: FunctionalComponent<\r\n  FacetValueLabelHighlightProps\r\n> = (props) => {\r\n  return (\r\n    // deepcode ignore ReactSetInnerHtml: This is not React code\r\n    <span\r\n      title={props.displayValue}\r\n      part=\"value-label\"\r\n      class={`value-label truncate peer-hover:text-error ${\r\n        props.isSelected || !!props.isExcluded ? 'font-bold' : ''\r\n      }`}\r\n      innerHTML={highlightSearchResult(props.displayValue, props.searchQuery)}\r\n    ></span>\r\n  );\r\n};\r\n"],"version":3}