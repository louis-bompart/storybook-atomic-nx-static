import{g as t}from"./atomic-breadbox.new.stories-CUAu_TQj.js";import{r as u}from"./p-16bd4264-BYsvcazQ.js";import{r as g}from"./p-107c3d7f-BhxinPh-.js";import{e as m}from"./p-c58ca89b-Ds5ZgLyE.js";import{t as h}from"./p-14a6f1cd-BR81BKpp.js";const k='<svg fill="none" width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6.5" stroke="currentColor" stroke-linecap="round"/><path d="M4 7.07692L6 9L10 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>',S='<svg fill="none" width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6.5" stroke="currentColor" stroke-linecap="round"/><path d="M5 9L9 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 9L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>',b=r=>{const e="feedback-inquiry-"+r.id,i="feedback-thank-you-"+r.id,s="feedback-options-"+r.id,p=()=>t("span",{id:e,part:"feedback-inquiry",class:"shrink-0"},r.i18n.t("smart-snippet-feedback-inquiry")),n=()=>t("div",{part:"feedback-buttons",class:"flex gap-x-4"},t("label",{part:"feedback-like-button",class:"flex items-center gap-x-1.5 "+(r.liked?"text-success":"cursor-pointer hover:underline")},t("atomic-icon",{icon:k,class:"w-3.5"}),t(h,{groupName:s,text:r.i18n.t("yes"),checked:r.liked,onChecked:()=>r.onLike(),class:"text-inherit cursor-inherit"})),t("label",{part:"feedback-dislike-button",class:"flex items-center gap-x-1.5 "+(r.disliked?"text-error":"cursor-pointer hover:underline")},t("atomic-icon",{icon:S,class:"w-3.5"}),t(h,{groupName:s,text:r.i18n.t("no"),checked:r.disliked,onChecked:()=>r.onDislike(),class:"text-inherit cursor-inherit"}))),a=()=>t("span",{id:i,part:"feedback-thank-you",class:"inline-flex"},r.i18n.t("smart-snippet-feedback-thanks")),o=()=>t(m,{part:"feedback-explain-why-button",style:"text-primary",onClick:()=>r.onPressExplainWhy(),ref:d=>{var c;return(c=r.explainWhyRef)===null||c===void 0?void 0:c.call(r,d)}},r.i18n.t("smart-snippet-feedback-explain-why")),l=({visible:d})=>d?t("div",{part:"feedback-thank-you-wrapper",class:"flex flex-wrap gap-1"},t(a,null),r.disliked&&!r.feedbackSent?t(o,null):[]):[];return t("div",{part:"feedback-banner",class:"flex flex-wrap items-center gap-4 text-sm leading-4"},t("div",{part:"feedback-inquiry-and-buttons",role:"radiogroup","aria-labelledby":e,class:"inline-flex flex-wrap gap-4"},t(p,null),t(n,null)),t(l,{visible:r.liked||r.disliked}))};class C{constructor(e){this.props=e}get style(){var e;const i=(e=this.props.getHost().querySelector("template"))===null||e===void 0?void 0:e.content.querySelector("style");return i?i.innerHTML:this.props.getSnippetStyle()}loadModal(){if(this.props.getModalRef())return;const e=document.createElement(this.props.modalTagName);e.addEventListener("feedbackSent",()=>{this.props.setFeedbackSent(!0)}),this.props.setModalRef(e),this.props.getHost().insertAdjacentElement("beforebegin",e)}renderQuestion(){const e=this.props.getHeadingLevel();return t(u,{level:e?e+1:0,class:"text-xl font-bold",part:"question"},this.props.getSmartSnippetState().question)}canSnippetCollapse(){var e,i;return((i=(e=this.props).getSnippetMaximumHeight)===null||i===void 0?void 0:i.call(e))!==void 0}renderContent(){const e=this.props.getSmartSnippetState();return this.canSnippetCollapse()?t("div",{part:"truncated-answer"},t("atomic-smart-snippet-answer",{exportparts:"answer",part:"body",htmlContent:e.answer,innerStyle:this.style})):t("atomic-smart-snippet-expandable-answer",{exportparts:"answer,show-more-button,show-less-button,truncated-answer",part:"body",htmlContent:e.answer,expanded:e.expanded,maximumHeight:this.props.getMaximumHeight(),collapsedHeight:this.props.getCollapsedHeight(),snippetStyle:this.style,onExpand:()=>this.props.getSmartSnippet().expand(),onCollapse:()=>this.props.getSmartSnippet().collapse()})}renderFeedbackBanner(){const e=this.props.getSmartSnippetState();return t(b,{i18n:this.props.getBindings().i18n,id:this.props.id,liked:e.liked,disliked:e.disliked,feedbackSent:this.props.getFeedbackSent(),onLike:()=>this.props.getSmartSnippet().like(),onDislike:()=>{this.loadModal(),this.props.getSmartSnippet().dislike()},onPressExplainWhy:()=>this.props.getModalRef().isOpen=!0,explainWhyRef:i=>{this.props.getModalRef()&&(this.props.getModalRef().source=i)}})}hideDuringRender(e){const i=this.props.getHost();i.style.visibility=e?"hidden":"",i.style.position=e?"absolute":""}render(){var e,i,s,p,n,a,o;if(!this.props.getSmartSnippetState().answerFound)return t(g,null);this.props.getHost().classList.contains("atomic-hidden")&&this.hideDuringRender(!0);const l=this.props.getSmartSnippetState().source;return t("aside",null,t(u,{level:(e=this.props.getHeadingLevel())!==null&&e!==void 0?e:0,class:"accessibility-only"},this.props.getBindings().i18n.t("smart-snippet")),t("article",{class:"bg-background border border-neutral rounded-lg p-6 pb-4 text-on-background",part:"smart-snippet"},t("atomic-smart-snippet-collapse-wrapper",{maximumHeight:(s=(i=this.props).getSnippetMaximumHeight)===null||s===void 0?void 0:s.call(i),collapsedHeight:(n=(p=this.props).getSnippetCollapsedHeight)===null||n===void 0?void 0:n.call(p)},this.renderQuestion(),this.renderContent(),t("footer",{part:"footer","aria-label":this.props.getBindings().i18n.t("smart-snippet-source")},l&&t("atomic-smart-snippet-source",{anchorAttributes:(o=(a=this.props).getSourceAnchorAttributes)===null||o===void 0?void 0:o.call(a),source:l,onSelectSource:this.props.getSmartSnippet().selectSource,onBeginDelayedSelectSource:this.props.getSmartSnippet().beginDelayedSelectSource,onCancelPendingSelectSource:this.props.getSmartSnippet().cancelPendingSelectSource}),this.renderFeedbackBanner()))))}}export{C as l};
