import { proxyCustomElement, HTMLElement, h } from '@stencil/core/internal/client';

/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vs=Object.create;var Kr=Object.defineProperty;var bs=Object.getOwnPropertyDescriptor;var Cs=Object.getOwnPropertyNames;var ws=Object.getPrototypeOf,Rs=Object.prototype.hasOwnProperty;var As=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var xs=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ps=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Cs(t))!Rs.call(e,o)&&o!==r&&Kr(e,o,{get:()=>t[o],enumerable:!(n=bs(t,o))||n.enumerable});return e};var Oe=(e,t,r)=>(r=e!=null?vs(ws(e)):{},Ps(t||!e||!e.__esModule?Kr(r,"default",{value:e,enumerable:!0}):r,e));var er=(e,t,r)=>As(e,typeof t!="symbol"?t+"":t,r);var So=W((pp,yo)=>{yo.exports=fetch;});var vo=W(It=>{var or=It&&It.__assign||function(){return or=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);}return e},or.apply(this,arguments)};Object.defineProperty(It,"__esModule",{value:!0});var Ms={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return !0},startingDelay:100,timeMultiple:2};function Us(e){var t=or(or({},Ms),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}It.getSanitizedOptions=Us;});var bo=W(Jr=>{Object.defineProperty(Jr,"__esModule",{value:!0});function qs(e){var t=Math.random()*e;return Math.round(t)}Jr.fullJitter=qs;});var Co=W(Xr=>{Object.defineProperty(Xr,"__esModule",{value:!0});function Vs(e){return e}Xr.noJitter=Vs;});var wo=W(Zr=>{Object.defineProperty(Zr,"__esModule",{value:!0});var js=bo(),Bs=Co();function $s(e){switch(e.jitter){case"full":return js.fullJitter;case"none":default:return Bs.noJitter}}Zr.JitterFactory=$s;});var tn=W(en=>{Object.defineProperty(en,"__esModule",{value:!0});var zs=wo(),Hs=function(){function e(t){this.options=t,this.attempt=0;}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t;},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=zs.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();en.Delay=Hs;});var Ro=W(be=>{var Qs=be&&be.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o;}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n);}}(),Ws=be&&be.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i);})}return new(r||(r=Promise))(function(i,a){function c(d){try{s(n.next(d));}catch(m){a(m);}}function u(d){try{s(n.throw(d));}catch(m){a(m);}}function s(d){d.done?i(d.value):o(d.value).then(c,u);}s((n=n.apply(e,t||[])).next());})},Ks=be&&be.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(d){return u([s,d])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r);}catch(d){s=[6,d],o=0;}finally{n=i=0;}if(s[0]&5)throw s[1];return {value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(be,"__esModule",{value:!0});var Gs=tn(),Ys=function(e){Qs(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return Ws(this,void 0,void 0,function(){return Ks(this,function(r){return [2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(Gs.Delay);be.SkipFirstDelay=Ys;});var Ao=W(Ft=>{var Js=Ft&&Ft.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o;}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n);}}();Object.defineProperty(Ft,"__esModule",{value:!0});var Xs=tn(),Zs=function(e){Js(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Xs.Delay);Ft.AlwaysDelay=Zs;});var xo=W(rn=>{Object.defineProperty(rn,"__esModule",{value:!0});var ec=Ro(),tc=Ao();function rc(e,t){var r=nc(e);return r.setAttemptNumber(t),r}rn.DelayFactory=rc;function nc(e){return e.delayFirstAttempt?new tc.AlwaysDelay(e):new ec.SkipFirstDelay(e)}});var Po=W(je=>{var nn=je&&je.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i);})}return new(r||(r=Promise))(function(i,a){function c(d){try{s(n.next(d));}catch(m){a(m);}}function u(d){try{s(n.throw(d));}catch(m){a(m);}}function s(d){d.done?i(d.value):o(d.value).then(c,u);}s((n=n.apply(e,t||[])).next());})},on=je&&je.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(d){return u([s,d])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r);}catch(d){s=[6,d],o=0;}finally{n=i=0;}if(s[0]&5)throw s[1];return {value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(je,"__esModule",{value:!0});var oc=vo(),ic=xo();function ac(e,t){return t===void 0&&(t={}),nn(this,void 0,void 0,function(){var r,n;return on(this,function(o){switch(o.label){case 0:return r=oc.getSanitizedOptions(t),n=new sc(e,r),[4,n.execute()];case 1:return [2,o.sent()]}})})}je.backOff=ac;var sc=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0;}return e.prototype.execute=function(){return nn(this,void 0,void 0,function(){var t,r;return on(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return [3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return [2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return [3,6];case 6:return [3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return nn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:return t=ic.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}();});var ko=W((Ap,Eo)=>{function cc(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=dc(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function dc(e){let t=uc.indexOf(e);return t<0?void 0:t}Eo.exports=cc;});var Io=W((xp,Oo)=>{function lc(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let o=0;o<n.length;o++)typeof n[o]>"u"?r+="=":r+=pc(n[o]);}return r}var mc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function pc(e){if(e>=0&&e<64)return mc[e]}Oo.exports=lc;});var Do=W((Pp,Fo)=>{var fc=ko(),gc=Io();Fo.exports={atob:fc,btoa:gc};});var Bo=W((Tp,jo)=>{var sn=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!sn)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!sn.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');jo.exports.AbortController=sn.AbortController;});var Ta=W((uS,Da)=>{var jl=/(^|; )Coveo-Pendragon=([^;]*)/;Da.exports=()=>jl.exec(document.cookie)?.pop()||null;});var Ma=W((Yn,Jn)=>{(function(e,t){typeof Yn=="object"&&typeof Jn<"u"?Jn.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t();})(Yn,function(){var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",c="day",u="week",s="month",d="quarter",m="year",g="date",l="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(x){var v=["th","st","nd","rd"],y=x%100;return "["+x+(v[(y-20)%10]||v[y]||v[0])+"]"}},R=function(x,v,y){var w=String(x);return !w||w.length>=v?x:""+Array(v+1-w.length).join(y)+x},A={s:R,z:function(x){var v=-x.utcOffset(),y=Math.abs(v),w=Math.floor(y/60),S=y%60;return (v<=0?"+":"-")+R(w,2,"0")+":"+R(S,2,"0")},m:function x(v,y){if(v.date()<y.date())return -x(y,v);var w=12*(y.year()-v.year())+(y.month()-v.month()),S=v.clone().add(w,s),E=y-S<0,k=v.clone().add(w+(E?-1:1),s);return +(-(w+(y-S)/(E?S-k:k-S))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return {M:s,y:m,w:u,d:c,D:g,h:a,m:i,s:o,ms:n,Q:d}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},T="en",F={};F[T]=C;var $="$isDayjsObject",L=function(x){return x instanceof xt||!(!x||!x[$])},z=function x(v,y,w){var S;if(!v)return T;if(typeof v=="string"){var E=v.toLowerCase();F[E]&&(S=E),y&&(F[E]=y,S=E);var k=v.split("-");if(!S&&k.length>1)return x(k[0])}else {var j=v.name;F[j]=v,S=j;}return !w&&S&&(T=S),S||!w&&T},V=function(x,v){if(L(x))return x.clone();var y=typeof v=="object"?v:{};return y.date=x,y.args=arguments,new xt(y)},D=A;D.l=z,D.i=L,D.w=function(x,v){return V(x,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var xt=function(){function x(y){this.$L=z(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[$]=!0;}var v=x.prototype;return v.parse=function(y){this.$d=function(w){var S=w.date,E=w.utc;if(S===null)return new Date(NaN);if(D.u(S))return new Date;if(S instanceof Date)return new Date(S);if(typeof S=="string"&&!/Z$/i.test(S)){var k=S.match(h);if(k){var j=k[2]-1||0,H=(k[7]||"0").substring(0,3);return E?new Date(Date.UTC(k[1],j,k[3]||1,k[4]||0,k[5]||0,k[6]||0,H)):new Date(k[1],j,k[3]||1,k[4]||0,k[5]||0,k[6]||0,H)}}return new Date(S)}(y),this.init();},v.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds();},v.$utils=function(){return D},v.isValid=function(){return this.$d.toString()!==l},v.isSame=function(y,w){var S=V(y);return this.startOf(w)<=S&&S<=this.endOf(w)},v.isAfter=function(y,w){return V(y)<this.startOf(w)},v.isBefore=function(y,w){return this.endOf(w)<V(y)},v.$g=function(y,w,S){return D.u(y)?this[w]:this.set(S,y)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(y,w){var S=this,E=!!D.u(w)||w,k=D.p(y),j=function(Ue,te){var ke=D.w(S.$u?Date.UTC(S.$y,te,Ue):new Date(S.$y,te,Ue),S);return E?ke:ke.endOf(c)},H=function(Ue,te){return D.w(S.toDate()[Ue].apply(S.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(te)),S)},K=this.$W,X=this.$M,ae=this.$D,Ze="set"+(this.$u?"UTC":"");switch(k){case m:return E?j(1,0):j(31,11);case s:return E?j(1,X):j(0,X+1);case u:var Me=this.$locale().weekStart||0,Pt=(K<Me?K+7:K)-Me;return j(E?ae-Pt:ae+(6-Pt),X);case c:case g:return H(Ze+"Hours",0);case a:return H(Ze+"Minutes",1);case i:return H(Ze+"Seconds",2);case o:return H(Ze+"Milliseconds",3);default:return this.clone()}},v.endOf=function(y){return this.startOf(y,!1)},v.$set=function(y,w){var S,E=D.p(y),k="set"+(this.$u?"UTC":""),j=(S={},S[c]=k+"Date",S[g]=k+"Date",S[s]=k+"Month",S[m]=k+"FullYear",S[a]=k+"Hours",S[i]=k+"Minutes",S[o]=k+"Seconds",S[n]=k+"Milliseconds",S)[E],H=E===c?this.$D+(w-this.$W):w;if(E===s||E===m){var K=this.clone().set(g,1);K.$d[j](H),K.init(),this.$d=K.set(g,Math.min(this.$D,K.daysInMonth())).$d;}else j&&this.$d[j](H);return this.init(),this},v.set=function(y,w){return this.clone().$set(y,w)},v.get=function(y){return this[D.p(y)]()},v.add=function(y,w){var S,E=this;y=Number(y);var k=D.p(w),j=function(X){var ae=V(E);return D.w(ae.date(ae.date()+Math.round(X*y)),E)};if(k===s)return this.set(s,this.$M+y);if(k===m)return this.set(m,this.$y+y);if(k===c)return j(1);if(k===u)return j(7);var H=(S={},S[i]=t,S[a]=r,S[o]=e,S)[k]||1,K=this.$d.getTime()+y*H;return D.w(K,this)},v.subtract=function(y,w){return this.add(-1*y,w)},v.format=function(y){var w=this,S=this.$locale();if(!this.isValid())return S.invalidDate||l;var E=y||"YYYY-MM-DDTHH:mm:ssZ",k=D.z(this),j=this.$H,H=this.$m,K=this.$M,X=S.weekdays,ae=S.months,Ze=S.meridiem,Me=function(te,ke,Et,Zt){return te&&(te[ke]||te(w,E))||Et[ke].slice(0,Zt)},Pt=function(te){return D.s(j%12||12,te,"0")},Ue=Ze||function(te,ke,Et){var Zt=te<12?"AM":"PM";return Et?Zt.toLowerCase():Zt};return E.replace(b,function(te,ke){return ke||function(Et){switch(Et){case"YY":return String(w.$y).slice(-2);case"YYYY":return D.s(w.$y,4,"0");case"M":return K+1;case"MM":return D.s(K+1,2,"0");case"MMM":return Me(S.monthsShort,K,ae,3);case"MMMM":return Me(ae,K);case"D":return w.$D;case"DD":return D.s(w.$D,2,"0");case"d":return String(w.$W);case"dd":return Me(S.weekdaysMin,w.$W,X,2);case"ddd":return Me(S.weekdaysShort,w.$W,X,3);case"dddd":return X[w.$W];case"H":return String(j);case"HH":return D.s(j,2,"0");case"h":return Pt(1);case"hh":return Pt(2);case"a":return Ue(j,H,!0);case"A":return Ue(j,H,!1);case"m":return String(H);case"mm":return D.s(H,2,"0");case"s":return String(w.$s);case"ss":return D.s(w.$s,2,"0");case"SSS":return D.s(w.$ms,3,"0");case"Z":return k}return null}(te)||k.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(y,w,S){var E,k=this,j=D.p(w),H=V(y),K=(H.utcOffset()-this.utcOffset())*t,X=this-H,ae=function(){return D.m(k,H)};switch(j){case m:E=ae()/12;break;case s:E=ae();break;case d:E=ae()/3;break;case u:E=(X-K)/6048e5;break;case c:E=(X-K)/864e5;break;case a:E=X/r;break;case i:E=X/t;break;case o:E=X/e;break;default:E=X;}return S?E:D.a(E)},v.daysInMonth=function(){return this.endOf(s).$D},v.$locale=function(){return F[this.$L]},v.locale=function(y,w){if(!y)return this.$L;var S=this.clone(),E=z(y,w,!0);return E&&(S.$L=E),S},v.clone=function(){return D.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},x}(),lo=xt.prototype;return V.prototype=lo,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",c],["$M",s],["$y",m],["$D",g]].forEach(function(x){lo[x[1]]=function(v){return this.$g(v,x[0],x[1])};}),V.extend=function(x,v){return x.$i||(x(v,xt,V),x.$i=!0),V},V.locale=z,V.isDayjs=L,V.unix=function(x){return V(1e3*x)},V.en=F[T],V.Ls=F,V.p={},V});});var Ua=W((Xn,Zn)=>{(function(e,t){typeof Xn=="object"&&typeof Zn<"u"?Zn.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_timezone=t();})(Xn,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var i,a=function(d,m,g){g===void 0&&(g={});var l=new Date(d),h=function(b,C){C===void 0&&(C={});var R=C.timeZoneName||"short",A=b+"|"+R,T=t[A];return T||(T=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:R}),t[A]=T),T}(m,g);return h.formatToParts(l)},c=function(d,m){for(var g=a(d,m),l=[],h=0;h<g.length;h+=1){var b=g[h],C=b.type,R=b.value,A=e[C];A>=0&&(l[A]=parseInt(R,10));}var T=l[3],F=T===24?0:T,$=l[0]+"-"+l[1]+"-"+l[2]+" "+F+":"+l[4]+":"+l[5]+":000",L=+d;return (o.utc($).valueOf()-(L-=L%1e3))/6e4},u=n.prototype;u.tz=function(d,m){d===void 0&&(d=i);var g=this.utcOffset(),l=this.toDate(),h=l.toLocaleString("en-US",{timeZone:d}),b=Math.round((l-new Date(h))/1e3/60),C=o(h,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(l.getTimezoneOffset()/15)-b,!0);if(m){var R=C.utcOffset();C=C.add(g-R,"minute");}return C.$x.$timezone=d,C},u.offsetName=function(d){var m=this.$x.$timezone||o.tz.guess(),g=a(this.valueOf(),m,{timeZoneName:d}).find(function(l){return l.type.toLowerCase()==="timezonename"});return g&&g.value};var s=u.startOf;u.startOf=function(d,m){if(!this.$x||!this.$x.$timezone)return s.call(this,d,m);var g=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return s.call(g,d,m).tz(this.$x.$timezone,!0)},o.tz=function(d,m,g){var l=g&&m,h=g||m||i,b=c(+o(),h);if(typeof d!="string")return o(d).tz(h);var C=function(F,$,L){var z=F-60*$*1e3,V=c(z,L);if($===V)return [z,$];var D=c(z-=60*(V-$)*1e3,L);return V===D?[z,V]:[F-60*Math.min(V,D)*1e3,Math.max(V,D)]}(o.utc(d,l).valueOf(),b,h),R=C[0],A=C[1],T=o(R).utcOffset(A);return T.$x.$timezone=h,T},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){i=d;};}});});var qa=W((eo,to)=>{(function(e,t){typeof eo=="object"&&typeof to<"u"?to.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t();})(eo,function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,i){var a=o.prototype;i.utc=function(l){var h={date:l,utc:!0,args:arguments};return new o(h)},a.utc=function(l){var h=i(this.toDate(),{locale:this.$L,utc:!0});return l?h.add(this.utcOffset(),e):h},a.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var c=a.parse;a.parse=function(l){l.utc&&(this.$u=!0),this.$utils().u(l.$offset)||(this.$offset=l.$offset),c.call(this,l);};var u=a.init;a.init=function(){if(this.$u){var l=this.$d;this.$y=l.getUTCFullYear(),this.$M=l.getUTCMonth(),this.$D=l.getUTCDate(),this.$W=l.getUTCDay(),this.$H=l.getUTCHours(),this.$m=l.getUTCMinutes(),this.$s=l.getUTCSeconds(),this.$ms=l.getUTCMilliseconds();}else u.call(this);};var s=a.utcOffset;a.utcOffset=function(l,h){var b=this.$utils().u;if(b(l))return this.$u?0:b(this.$offset)?s.call(this):this.$offset;if(typeof l=="string"&&(l=function(T){T===void 0&&(T="");var F=T.match(t);if(!F)return null;var $=(""+F[0]).match(r)||["-",0,0],L=$[0],z=60*+$[1]+ +$[2];return z===0?0:L==="+"?z:-z}(l),l===null))return this;var C=Math.abs(l)<=16?60*l:l,R=this;if(h)return R.$offset=C,R.$u=l===0,R;if(l!==0){var A=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(R=this.local().add(C+A,e)).$offset=C,R.$x.$localOffset=A;}else R=this.utc();return R};var d=a.format;a.format=function(l){var h=l||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,h)},a.valueOf=function(){var l=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*l},a.isUTC=function(){return !!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var m=a.toDate;a.toDate=function(l){return l==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var g=a.diff;a.diff=function(l,h,b){if(l&&this.$u===l.$u)return g.call(this,l,h,b);var C=this.local(),R=i(l).local();return g.call(C,R,h,b)};}});});var rs=W((xv,ts)=>{function em(e){try{return JSON.stringify(e)}catch{return '"[Circular]"'}}ts.exports=tm;function tm(e,t,r){var n=r&&r.stringify||em,o=1;if(typeof e=="object"&&e!==null){var i=t.length+o;if(i===1)return e;var a=new Array(i);a[0]=n(e);for(var c=1;c<i;c++)a[c]=n(t[c]);return a.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var s="",d=1-o,m=-1,g=e&&e.length||0,l=0;l<g;){if(e.charCodeAt(l)===37&&l+1<g){switch(m=m>-1?m:0,e.charCodeAt(l+1)){case 100:case 102:if(d>=u||t[d]==null)break;m<l&&(s+=e.slice(m,l)),s+=Number(t[d]),m=l+2,l++;break;case 105:if(d>=u||t[d]==null)break;m<l&&(s+=e.slice(m,l)),s+=Math.floor(Number(t[d])),m=l+2,l++;break;case 79:case 111:case 106:if(d>=u||t[d]===void 0)break;m<l&&(s+=e.slice(m,l));var h=typeof t[d];if(h==="string"){s+="'"+t[d]+"'",m=l+2,l++;break}if(h==="function"){s+=t[d].name||"<anonymous>",m=l+2,l++;break}s+=n(t[d]),m=l+2,l++;break;case 115:if(d>=u)break;m<l&&(s+=e.slice(m,l)),s+=String(t[d]),m=l+2,l++;break;case 37:m<l&&(s+=e.slice(m,l)),s+="%",m=l+2,l++,d--;break}++d;}++l;}return m===-1?e:(m<g&&(s+=e.slice(m)),s)}});var cs=W((Pv,Hr)=>{var ns=rs();Hr.exports=Ee;var Yt=hm().console||{},rm={mapHttpRequest:Br,mapHttpResponse:Br,wrapRequestSerializer:io,wrapResponseSerializer:io,wrapErrorSerializer:io,req:Br,res:Br,err:is,errWithCause:is};function $r(e,t){return e==="silent"?1/0:t.levels.values[e]}var co=Symbol("pino.logFuncs"),ao=Symbol("pino.hierarchy"),nm={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function os(e,t){let r={logger:t,parent:e[ao]};t[ao]=r;}function om(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:Yt[o]||Yt[nm[o]||"log"]||Jt;}),e[co]=n;}function im(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ee(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||Yt;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=im(e.browser.serialize,n),i=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);let a=Object.keys(e.customLevels||{}),c=["error","fatal","warn","info","debug","trace"].concat(a);typeof r=="function"&&c.forEach(function(b){r[b]=r;}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",s=Object.create(r);s.log||(s.log=Jt),om(s,c,r),os({},s),Object.defineProperty(s,"levelVal",{get:m}),Object.defineProperty(s,"level",{get:g,set:l});let d={transmit:t,serialize:o,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:c,timestamp:pm(e)};s.levels=am(e),s.level=u,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=Jt,s.serializers=n,s._serialize=o,s._stdErrSerialize=i,s.child=h,t&&(s._logEvent=so());function m(){return $r(this.level,this)}function g(){return this._level}function l(b){if(b!=="silent"&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,Ke(this,d,s,"error"),Ke(this,d,s,"fatal"),Ke(this,d,s,"warn"),Ke(this,d,s,"info"),Ke(this,d,s,"debug"),Ke(this,d,s,"trace"),a.forEach(C=>{Ke(this,d,s,C);});}function h(b,C){if(!b)throw new Error("missing bindings for child Pino");C=C||{},o&&b.serializers&&(C.serializers=b.serializers);let R=C.serializers;if(o&&R){var A=Object.assign({},n,R),T=e.browser.serialize===!0?Object.keys(A):o;delete b.serializers,zr([b],T,A,this._stdErrSerialize);}function F(L){this._childLevel=(L._childLevel|0)+1,this.bindings=b,A&&(this.serializers=A,this._serialize=T),t&&(this._logEvent=so([].concat(L._logEvent.bindings,b)));}F.prototype=this;let $=new F(this);return os(this,$),$.level=this.level,$}return s}function am(e){let t=e.customLevels||{},r=Object.assign({},Ee.levels.values,t),n=Object.assign({},Ee.levels.labels,sm(t));return {values:r,labels:n}}function sm(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r;}),t}Ee.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ee.stdSerializers=rm;Ee.stdTimeFunctions=Object.assign({},{nullTime:as,epochTime:ss,unixTime:fm,isoTime:gm});function cm(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[ao];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Ke(e,t,r,n){if(Object.defineProperty(e,n,{value:$r(e.level,r)>$r(n,r)?Jt:r[co][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===Jt)return;e[n]=dm(e,t,r,n);let o=cm(e);o.length!==0&&(e[n]=um(o,e[n]));}function um(e,t){return function(){return t.apply(this,[...e,...arguments])}}function dm(e,t,r,n){return function(o){return function(){let a=t.timestamp(),c=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Yt?Yt:this;for(var s=0;s<c.length;s++)c[s]=arguments[s];if(t.serialize&&!t.asObject&&zr(c,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?o.call(u,lm(this,n,c,a,t.formatters)):o.apply(u,c),t.transmit){let d=t.transmit.level||e._level,m=r.levels.values[d],g=r.levels.values[n];if(g<m)return;mm(this,{ts:a,methodLevel:n,methodValue:g,transmitLevel:d,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:$r(e._level,r)},c);}}}(e[co][n])}function lm(e,t,r,n,o={}){let{level:i=()=>e.levels.values[t],log:a=g=>g}=o;e._serialize&&zr(r,e._serialize,e.serializers,e._stdErrSerialize);let c=r.slice(),u=c[0],s={};n&&(s.time=n),s.level=i(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),u!==null&&typeof u=="object"){for(;d--&&typeof c[0]=="object";)Object.assign(s,c.shift());u=c.length?ns(c.shift(),c):void 0;}else typeof u=="string"&&(u=ns(c.shift(),c));return u!==void 0&&(s.msg=u),a(s)}function zr(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=Ee.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(let i in e[o])t&&t.indexOf(i)>-1&&i in r&&(e[o][i]=r[i](e[o][i]));}function mm(e,t,r){let n=t.send,o=t.ts,i=t.methodLevel,a=t.methodValue,c=t.val,u=e._logEvent.bindings;zr(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(s){return u.indexOf(s)===-1}),e._logEvent.level.label=i,e._logEvent.level.value=a,n(i,e._logEvent,c),e._logEvent=so(u);}function so(e){return {ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function is(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function pm(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?as:ss}function Br(){return {}}function io(e){return e}function Jt(){}function as(){return !1}function ss(){return Date.now()}function fm(){return Math.round(Date.now()/1e3)}function gm(){return new Date(Date.now()).toISOString()}function hm(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Hr.exports.default=Ee;Hr.exports.pino=Ee;});var kt=()=>global.crypto,mo=()=>{typeof window<"u"||(kt()||(global.crypto=xs("crypto")),!kt().getRandomValues&&kt().webcrypto&&(global.crypto.getRandomValues=kt().webcrypto.getRandomValues.bind(kt().webcrypto)));};function Es(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Gr(r)}var Gr=class extends Error{constructor(e){super(e),this.name="SchemaValidationError";}},M=class{constructor(e){this.definition=e;}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let i=this.definition[o].validate(r[o]);i&&n.push(`${o}: ${i}`);}if(n.length)throw Es(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r);}return e}},qe=class{constructor(e={}){this.baseConfig=e;}validate(e){return this.baseConfig.required&&N(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ye(e){return e===void 0}function ks(e){return e===null}function N(e){return ye(e)||ks(e)}var Ve=class{constructor(e={}){this.config=e,this.value=new qe(e);}validate(e){let t=this.value.validate(e);return t||(Os(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Os(e){return ye(e)||po(e)}function po(e){return typeof e=="number"&&!isNaN(e)}var fe=class{constructor(e={}){this.value=new qe(e);}validate(e){let t=this.value.validate(e);return t||(Is(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Is(e){return ye(e)||fo(e)}function fo(e){return typeof e=="boolean"}var Fs=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,P=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new qe(this.config);}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o}=this.config,i=this.value.validate(e);return i||(ye(e)?null:tr(e)?!t&&!e.length?"value is an empty string.":r&&!Fs.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function tr(e){return Object.prototype.toString.call(e)==="[object String]"}var U=class{constructor(e={}){this.config={options:{required:!1},values:{},...e};}validate(e){if(ye(e))return this.config.options.required?"value is required and is currently undefined":null;if(!go(e))return "value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&N(e[r]))return `value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],i=n.validate(o);i!==null&&(t+=" "+i);}return t===""?null:t}get default(){}get required(){return !!this.config.options.required}};function go(e){return e!==void 0&&typeof e=="object"}var re=class{constructor(e={}){this.config=e,this.value=new qe(this.config);}validate(e){if(!N(e)&&!Array.isArray(e))return "value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(N(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return `value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return `value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&N(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=" "+o);}),r===""?null:r}return null}validatePrimitiveValue(e,t){return fo(e)||tr(e)||po(e)||go(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function ho(e){return Array.isArray(e)}var Yr=class{constructor(e){this.config=e,this.value=new qe(e);}validate(e){let t=this.value.validate(e);return t!==null?t:ye(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var rr=e=>e;function nr(){return {answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ot(){return {response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:nr(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:nr(),extendedResults:{}}}function Se(e){let{url:t,accessToken:r,organizationId:n,authentication:o,...i}=e;return i}var ve=e=>{let{response:t}=e;return t.body?Ds(e):Ts(t)},Ds=e=>_s(e)?Ls(e):Ns(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Ts=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return {...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function Ns(e){return e.body.statusCode!==void 0}function _s(e){return e.body.exception!==void 0}var Ls=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var Mo=Oe(So()),Uo=Oe(Po());var et=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired.";}},Be=class extends Error{constructor(t,r){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r??0;}};Oe(Do());var yc=new Set(["1",1,"yes",!0]);function ir(){if(typeof navigator>"u"||typeof window>"u")return !1;let e=navigator,t=window;return [e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>yc.has(r))}function To(e){let t={};for(let[r,n]of e)t[r]=n;return t}function Dt(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function No(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`);}return t.join("&")}function _o(e){return typeof e!="object"||!e?!1:Object.values(e).every(Sc)}function Sc(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Lo(e){return e===429}var se=class e{static async call(t){let r=vc(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:i,...a}=o,c=async()=>{let u=await(0, Mo.default)(i,a);if(Lo(u.status))throw u;return u};try{let u=await(0, Uo.backOff)(c,{retry:s=>{let d=s&&Lo(s.status);return d&&n.info("Platform retrying request"),d}});if(u.status===419)throw n.info("Platform renewing token"),new et;if(u.status===404)throw new Be(i,u.status);return n.info({response:u,requestInfo:o},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new Be(i):u}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:i,requestMetadata:a}=r,{signal:c,...u}=t,s=Dt(u);try{let d=await o(t,n,a);return {...t,...d}}catch(d){i.error(d,"Platform request preprocessing failed. Returning default request options.");}return s}};function qo(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return `https://${e}${r}${n}.cloud.coveo.com`}function ar(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,o=`https://${e}.analytics.org${r}.coveo.com`,i=`${n}/rest/search/v2`,a=`https://${e}.admin.org${r}.coveo.com`;return {platform:n,analytics:o,search:i,admin:a}}function an(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:qo("platform",e)}function Vo(e){return qo("analytics",e)}function vc(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:i,signal:a}=e,c=e.method==="POST"||e.method==="PUT",u=bc(n,o);return {url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${i}`,...e.headers},...c&&{body:u},signal:a}}function bc(e,t){return t==="application/x-www-form-urlencoded"?_o(e)?No(e):"":JSON.stringify(e)}function $o(){if(typeof window>"u"){let{AbortController:e}=Bo();return new e}return typeof AbortController>"u"?null:new AbortController}var Ie=class{constructor(){this.currentAbortController=null;}async enqueue(t,r){let n=this.currentAbortController,o=this.currentAbortController=$o();n&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),n.abort());try{return await t(o?.signal??null)}finally{this.currentAbortController===o&&(this.currentAbortController=null);}}};var Tt=class{constructor(t){this._params={};this._basePath=t;}addParam(t,r){this._params={...this.params,[t]:r};}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},zo=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Ho=(e,t)=>{let r=cn(e);return r&&r.organizationId===t?r:null},cn=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};function Qo(e){return ((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var ge=(e,t,r,n)=>{let o=new Tt(`${e.url}${n}`);return o.addParam("organizationId",e.organizationId),e.authentication&&o.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:o.href,origin:"searchApiFetch"}};var Wo=async(e,t)=>{let r=await se.call({...ge(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Se(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=Qo(r),o=await r.arrayBuffer(),a=new TextDecoder(n).decode(o);return Cc(a)?{success:a}:{error:ve({response:r,body:a})}};function Cc(e){return typeof e=="string"}function wc(e){return {statusCode:e.statusCode,type:e.name,message:e.message}}function Rc(e){return {statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function sr(e,t){if(t&&e.name==="AbortError")return {error:Rc(e)};if(e instanceof Be)return {error:wc(e)};throw e}var cr=class{constructor(t){this.options=t;this.apiCallsQueues={unknown:new Ie,mainSearch:new Ie,facetValues:new Ie,foldingCollection:new Ie,instantResults:new Ie};}async plan(t){let r=await se.call({...ge(t,"POST","application/json","/plan"),requestParams:Se(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return sr(r);let n=await r.json();return Pc(n)?{success:n}:{error:ve({response:r,body:n})}}async querySuggest(t){let r=await se.call({...ge(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Se(t),...this.options});if(r instanceof Error)return sr(r);let n=await r.json(),o={response:r,body:n};return xc(n)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(o)).body}:{error:ve(o)}}async search(t,r){let n=r?.origin??"unknown",o=await this.apiCallsQueues[n].enqueue(c=>se.call({...ge(t,"POST","application/json",""),requestParams:Se(t),requestMetadata:{method:"search",origin:r?.origin},...this.options,signal:c??void 0}),{logger:this.options.logger,warnOnAbort:!r?.disableAbortWarning});if(o instanceof Error)return sr(o,r?.disableAbortWarning);let i=await o.json(),a={response:o,body:i};return un(i)?(a.body=Ac(i),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:ve(a)}}async facetSearch(t){let r=await se.call({...ge(t,"POST","application/json","/facet"),requestParams:Se(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let n=await r.json(),o={response:r,body:n};return (await this.options.postprocessFacetSearchResponseMiddleware(o)).body}async recommendations(t){let r=await se.call({...ge(t,"POST","application/json",""),requestParams:Se(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return un(n)?{success:n}:{error:ve({response:r,body:n})}}async html(t){return Wo(t,{...this.options})}async productRecommendations(t){let r=await se.call({...ge(t,"POST","application/json",""),requestParams:Se(t),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return un(n)?{success:n}:{error:ve({response:r,body:n})}}async fieldDescriptions(t){let r=await se.call({...ge(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return Ec(n)?{success:n}:{error:ve({response:r,body:n})}}};var Ko=e=>e.error!==void 0;function un(e){return e.results!==void 0}function Ac(e){let t=nr();return N(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function xc(e){return e.completions!==void 0}function Pc(e){return e.preprocessingOutput!==void 0}function Ec(e){return e.fields!==void 0}var Go=e=>e,Yo=e=>e,Jo=e=>e;function Y(e){return `Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kc=typeof Symbol=="function"&&Symbol.observable||"@@observable",Xo=kc,dn=()=>Math.random().toString(36).substring(7).split("").join("."),Oc={INIT:`@@redux/INIT${dn()}`,REPLACE:`@@redux/REPLACE${dn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dn()}`},ur=Oc;function dr(e){if(typeof e!="object"||e===null)return !1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ln(e,t,r){if(typeof e!="function")throw new Error(Y(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Y(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Y(1));return r(ln)(e,t)}let n=e,o=t,i=new Map,a=i,c=0,u=!1;function s(){a===i&&(a=new Map,i.forEach((C,R)=>{a.set(R,C);}));}function d(){if(u)throw new Error(Y(3));return o}function m(C){if(typeof C!="function")throw new Error(Y(4));if(u)throw new Error(Y(5));let R=!0;s();let A=c++;return a.set(A,C),function(){if(R){if(u)throw new Error(Y(6));R=!1,s(),a.delete(A),i=null;}}}function g(C){if(!dr(C))throw new Error(Y(7));if(typeof C.type>"u")throw new Error(Y(8));if(typeof C.type!="string")throw new Error(Y(17));if(u)throw new Error(Y(9));try{u=!0,o=n(o,C);}finally{u=!1;}return (i=a).forEach(A=>{A();}),C}function l(C){if(typeof C!="function")throw new Error(Y(10));n=C,g({type:ur.REPLACE});}function h(){let C=m;return {subscribe(R){if(typeof R!="object"||R===null)throw new Error(Y(11));function A(){let F=R;F.next&&F.next(d());}return A(),{unsubscribe:C(A)}},[Xo](){return this}}}return g({type:ur.INIT}),{dispatch:g,subscribe:m,getState:d,replaceReducer:l,[Xo]:h}}function Ic(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:ur.INIT})>"u")throw new Error(Y(12));if(typeof r(void 0,{type:ur.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Y(13))});}function lr(e){let t=Object.keys(e),r={};for(let a=0;a<t.length;a++){let c=t[a];typeof e[c]=="function"&&(r[c]=e[c]);}let n=Object.keys(r),i;try{Ic(r);}catch(a){i=a;}return function(c={},u){if(i)throw i;let s=!1,d={};for(let m=0;m<n.length;m++){let g=n[m],l=r[g],h=c[g],b=l(h,u);if(typeof b>"u"){throw new Error(Y(14))}d[g]=b,s=s||b!==h;}return s=s||n.length!==Object.keys(c).length,s?d:c}}function rt(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Zo(...e){return t=>(r,n)=>{let o=t(r,n),i=()=>{throw new Error(Y(15))},a={getState:o.getState,dispatch:(u,...s)=>i(u,...s)},c=e.map(u=>u(a));return i=rt(...c)(o.dispatch),{...o,dispatch:i}}}function ei(e){return dr(e)&&"type"in e&&typeof e.type=="string"}var ai=Symbol.for("immer-nothing"),ti=Symbol.for("immer-draftable"),oe=Symbol.for("immer-state");function de(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nt=Object.getPrototypeOf;function he(e){return !!e&&!!e[oe]}function le(e){return e?si(e)||Array.isArray(e)||!!e[ti]||!!e.constructor?.[ti]||gr(e)||hr(e):!1}var Fc=Object.prototype.constructor.toString();function si(e){if(!e||typeof e!="object")return !1;let t=nt(e);if(t===null)return !0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Fc}function Nt(e,t){fr(e)===0?Object.entries(e).forEach(([r,n])=>{t(r,n,e);}):e.forEach((r,n)=>t(n,r,e));}function fr(e){let t=e[oe];return t?t.type_:Array.isArray(e)?1:gr(e)?2:hr(e)?3:0}function fn(e,t){return fr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ci(e,t,r){let n=fr(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r;}function Dc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function gr(e){return e instanceof Map}function hr(e){return e instanceof Set}function $e(e){return e.copy_||e.base_}function gn(e,t){if(gr(e))return new Map(e);if(hr(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&si(e))return nt(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[oe];let n=Reflect.ownKeys(r);for(let o=0;o<n.length;o++){let i=n[o],a=r[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]});}return Object.create(nt(e),r)}function bn(e,t=!1){return yr(e)||he(e)||!le(e)||(fr(e)>1&&(e.set=e.add=e.clear=e.delete=Tc),Object.freeze(e),t&&Nt(e,(r,n)=>bn(n,!0))),e}function Tc(){de(2);}function yr(e){return Object.isFrozen(e)}var Nc={};function ze(e){let t=Nc[e];return t||de(0,e),t}var _t;function ui(){return _t}function _c(e,t){return {drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ri(e,t){t&&(ze("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t);}function hn(e){yn(e),e.drafts_.forEach(Lc),e.drafts_=null;}function yn(e){e===_t&&(_t=e.parent_);}function ni(e){return _t=_c(_t,e)}function Lc(e){let t=e[oe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0;}function oi(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[oe].modified_&&(hn(t),de(4)),le(e)&&(e=mr(t,e),t.parent_||pr(t,e)),t.patches_&&ze("Patches").generateReplacementPatches_(r[oe].base_,e,t.patches_,t.inversePatches_)):e=mr(t,r,[]),hn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ai?e:void 0}function mr(e,t,r){if(yr(t))return t;let n=t[oe];if(!n)return Nt(t,(o,i)=>ii(e,n,t,o,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return pr(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,i=o,a=!1;n.type_===3&&(i=new Set(o),o.clear(),a=!0),Nt(i,(c,u)=>ii(e,n,o,c,u,r,a)),pr(e,o,!1),r&&e.patches_&&ze("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_);}return n.copy_}function ii(e,t,r,n,o,i,a){if(he(o)){let c=i&&t&&t.type_!==3&&!fn(t.assigned_,n)?i.concat(n):void 0,u=mr(e,o,c);if(ci(r,n,u),he(u))e.canAutoFreeze_=!1;else return}else a&&r.add(o);if(le(o)&&!yr(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;mr(e,o),(!t||!t.scope_.parent_)&&pr(e,o);}}function pr(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bn(t,r);}function Mc(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:ui(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,i=Cn;r&&(o=[n],i=Lt);let{revoke:a,proxy:c}=Proxy.revocable(o,i);return n.draft_=c,n.revoke_=a,c}var Cn={get(e,t){if(t===oe)return e;let r=$e(e);if(!fn(r,t))return Uc(e,r,t);let n=r[t];return e.finalized_||!le(n)?n:n===mn(e.base_,t)?(pn(e),e.copy_[t]=vn(n,e)):n},has(e,t){return t in $e(e)},ownKeys(e){return Reflect.ownKeys($e(e))},set(e,t,r){let n=di($e(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=mn($e(e),t),i=o?.[oe];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Dc(r,o)&&(r!==void 0||fn(e.base_,t)))return !0;pn(e),Sn(e);}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pn(e),Sn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=$e(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){de(11);},getPrototypeOf(e){return nt(e.base_)},setPrototypeOf(){de(12);}},Lt={};Nt(Cn,(e,t)=>{Lt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)};});Lt.deleteProperty=function(e,t){return Lt.set.call(this,e,t,void 0)};Lt.set=function(e,t,r){return Cn.set.call(this,e[0],t,r,e[0])};function mn(e,t){let r=e[oe];return (r?$e(r):e)[t]}function Uc(e,t,r){let n=di(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function di(e,t){if(!(t in e))return;let r=nt(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=nt(r);}}function Sn(e){e.modified_||(e.modified_=!0,e.parent_&&Sn(e.parent_));}function pn(e){e.copy_||(e.copy_=gn(e.base_,e.scope_.immer_.useStrictShallowCopy_));}var qc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let i=r;r=t;let a=this;return function(u=i,...s){return a.produce(u,d=>r.call(this,d,...s))}}typeof r!="function"&&de(6),n!==void 0&&typeof n!="function"&&de(7);let o;if(le(t)){let i=ni(this),a=vn(t,void 0),c=!0;try{o=r(a),c=!1;}finally{c?hn(i):yn(i);}return ri(i,n),oi(o,i)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===ai&&(o=void 0),this.autoFreeze_&&bn(o,!0),n){let i=[],a=[];ze("Patches").generateReplacementPatches_(t,o,i,a),n(i,a);}return o}else de(1,t);},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return (a,...c)=>this.produceWithPatches(a,u=>t(u,...c));let n,o;return [this.produce(t,r,(a,c)=>{n=a,o=c;}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy);}createDraft(e){le(e)||de(8),he(e)&&(e=wn(e));let t=ni(this),r=vn(e,void 0);return r[oe].isManual_=!0,yn(t),r}finishDraft(e,t){let r=e&&e[oe];(!r||!r.isManual_)&&de(9);let{scope_:n}=r;return ri(n,t),oi(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e;}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e;}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=ze("Patches").applyPatches_;return he(e)?n(e,t):this.produce(e,o=>n(o,t))}};function vn(e,t){let r=gr(e)?ze("MapSet").proxyMap_(e,t):hr(e)?ze("MapSet").proxySet_(e,t):Mc(e,t);return (t?t.scope_:ui()).drafts_.push(r),r}function wn(e){return he(e)||de(10,e),li(e)}function li(e){if(!le(e)||yr(e))return e;let t=e[oe],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=gn(e,t.scope_.immer_.useStrictShallowCopy_);}else r=gn(e,!0);return Nt(r,(n,o)=>{ci(r,n,li(o));}),t&&(t.finalized_=!1),r}var ie=new qc,Sr=ie.produce;ie.produceWithPatches.bind(ie);ie.setAutoFreeze.bind(ie);ie.setUseStrictShallowCopy.bind(ie);ie.applyPatches.bind(ie);ie.createDraft.bind(ie);ie.finishDraft.bind(ie);function Vc(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function jc(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Bc(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var mi=e=>Array.isArray(e)?e:[e];function $c(e){let t=Array.isArray(e[0])?e[0]:e;return Bc(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function zc(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var Hc=class{constructor(e){this.value=e;}deref(){return this.value}},Qc=typeof WeakRef<"u"?WeakRef:Hc,Wc=0,pi=1;function vr(){return {s:Wc,v:void 0,o:null,p:null}}function Mt(e,t={}){let r=vr(),{resultEqualityCheck:n}=t,o,i=0;function a(){let c=r,{length:u}=arguments;for(let m=0,g=u;m<g;m++){let l=arguments[m];if(typeof l=="function"||typeof l=="object"&&l!==null){let h=c.o;h===null&&(c.o=h=new WeakMap);let b=h.get(l);b===void 0?(c=vr(),h.set(l,c)):c=b;}else {let h=c.p;h===null&&(c.p=h=new Map);let b=h.get(l);b===void 0?(c=vr(),h.set(l,c)):c=b;}}let s=c,d;if(c.s===pi?d=c.v:(d=e.apply(null,arguments),i++),s.s=pi,n){let m=o?.deref?.()??o;m!=null&&n(m,d)&&(d=m,i!==0&&i--),o=typeof d=="object"&&d!==null||typeof d=="function"?new Qc(d):d;}return s.v=d,d}return a.clearCache=()=>{r=vr(),a.resetResultsCount();},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0;},a}function br(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let i=0,a=0,c,u={},s=o.pop();typeof s=="object"&&(u=s,s=o.pop()),Vc(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);let d={...r,...u},{memoize:m,memoizeOptions:g=[],argsMemoize:l=Mt,argsMemoizeOptions:h=[],devModeChecks:b={}}=d,C=mi(g),R=mi(h),A=$c(o),T=m(function(){return i++,s.apply(null,arguments)},...C),$=l(function(){a++;let z=zc(A,arguments);return c=T.apply(null,z),c},...R);return Object.assign($,{resultFunc:s,memoizedResultFunc:T,dependencies:A,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0;},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0;},memoize:m,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var ot=br(Mt),Kc=Object.assign((e,t=ot)=>{jc(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((a,c,u)=>(a[r[u]]=c,a),{}))},{withTypes:()=>Kc});function fi(e){return ({dispatch:r,getState:n})=>o=>i=>typeof i=="function"?i(r,n,e):o(i)}var gi=fi(),hi=fi;var Gc=(...e)=>{let t=br(...e),r=Object.assign((...n)=>{let o=t(...n),i=(a,...c)=>o(he(a)?wn(a):a,...c);return Object.assign(i,o),i},{withTypes:()=>r});return r};Gc(Mt);var Yc=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rt:rt.apply(null,arguments)},Jc=e=>e&&typeof e.match=="function";function O(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(ne(0));return {type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return {type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>ei(n)&&n.type===e,r}var vi=class Ut extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ut.prototype);}static get[Symbol.species](){return Ut}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ut(...t[0].concat(this)):new Ut(...t.concat(this))}};function yi(e){return le(e)?Sr(e,()=>{}):e}function Xc(e){return typeof e=="boolean"}var Zc=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:i=!0}=t??{},a=new vi;return r&&(Xc(r)?a.push(gi):a.push(hi(r.extraArgument))),a},eu="RTK_autoBatch";var bi=e=>t=>{setTimeout(t,e);},tu=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bi(10),ru=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,i=!1,a=!1,c=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?tu:e.type==="callback"?e.queueNotification:bi(e.timeout),s=()=>{a=!1,i&&(i=!1,c.forEach(d=>d()));};return Object.assign({},n,{subscribe(d){let m=()=>o&&d(),g=n.subscribe(m);return c.add(d),()=>{g(),c.delete(d);}},dispatch(d){try{return o=!d?.meta?.[eu],i=!o,i&&(a||(a=!0,u(s))),n.dispatch(d)}finally{o=!0;}}})},nu=e=>function(r){let{autoBatch:n=!0}=r??{},o=new vi(e);return n&&o.push(ru(typeof n=="object"?n:void 0)),o},Fe=!0;function Ci(e){let t=Zc(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{},c;if(typeof r=="function")c=r;else if(dr(r))c=lr(r);else throw new Error(ne(1));let u;if(typeof n=="function"){if(u=n(t),!Fe);}else u=t();let s=rt;o&&(s=Yc({trace:!Fe,...typeof o=="object"&&o}));let d=Zo(...u),m=nu(d);let g=typeof a=="function"?a(m):m();let l=s(...g);return ln(c,i,l)}function ou(e){let t={},r=[],n,o={addCase(i,a){let c=typeof i=="string"?i:i.type;if(!c)throw new Error(ne(28));if(c in t)throw new Error(ne(29));return t[c]=a,o},addMatcher(i,a){return r.push({matcher:i,reducer:a}),o},addDefaultCase(i){return n=i,o}};return e(o),[t,r,n]}function iu(e){return typeof e=="function"}function ce(e,t){let[r,n,o]=ou(t),i;if(iu(e))i=()=>yi(e());else {let c=yi(e);i=()=>c;}function a(c=i(),u){let s=[r[u.type],...n.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return s.filter(d=>!!d).length===0&&(s=[o]),s.reduce((d,m)=>{if(m)if(he(d)){let l=m(d,u);return l===void 0?d:l}else {if(le(d))return Sr(d,g=>m(g,u));{let g=m(d,u);if(g===void 0){if(d===null)return d;throw new Error(ne(9))}return g}}return d},c)}return a.getInitialState=i,a}var au="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",wi=(e=21)=>{let t="",r=e;for(;r--;)t+=au[Math.random()*64|0];return t},su=(e,t)=>Jc(e)?e.match(t):e(t);function cu(...e){return t=>e.some(r=>su(r,t))}var uu=["name","message","stack","code"],Rn=class{constructor(e,t){er(this,"_type");this.payload=e,this.meta=t;}},Si=class{constructor(e,t){er(this,"_type");this.payload=e,this.meta=t;}},du=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of uu)typeof e[r]=="string"&&(t[r]=e[r]);return t}return {message:String(e)}},Ce=(()=>{function e(t,r,n){let o=O(t+"/fulfilled",(u,s,d,m)=>({payload:u,meta:{...m||{},arg:d,requestId:s,requestStatus:"fulfilled"}})),i=O(t+"/pending",(u,s,d)=>({payload:void 0,meta:{...d||{},arg:s,requestId:u,requestStatus:"pending"}})),a=O(t+"/rejected",(u,s,d,m,g)=>({payload:m,error:(n&&n.serializeError||du)(u||"Rejected"),meta:{...g||{},arg:d,requestId:s,rejectedWithValue:!!m,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"}}));function c(u){return (s,d,m)=>{let g=n?.idGenerator?n.idGenerator(u):wi(),l=new AbortController,h,b;function C(A){b=A,l.abort();}let R=async function(){let A;try{let F=n?.condition?.(u,{getState:d,extra:m});if(mu(F)&&(F=await F),F===!1||l.signal.aborted)throw {name:"ConditionError",message:"Aborted due to condition callback returning false."};let $=new Promise((L,z)=>{h=()=>{z({name:"AbortError",message:b||"Aborted"});},l.signal.addEventListener("abort",h);});s(i(g,u,n?.getPendingMeta?.({requestId:g,arg:u},{getState:d,extra:m}))),A=await Promise.race([$,Promise.resolve(r(u,{dispatch:s,getState:d,extra:m,requestId:g,signal:l.signal,abort:C,rejectWithValue:(L,z)=>new Rn(L,z),fulfillWithValue:(L,z)=>new Si(L,z)})).then(L=>{if(L instanceof Rn)throw L;return L instanceof Si?o(L.payload,g,u,L.meta):o(L,g,u)})]);}catch(F){A=F instanceof Rn?a(null,g,u,F.payload,F.meta):a(F,g,u);}finally{h&&l.signal.removeEventListener("abort",h);}return n&&!n.dispatchConditionRejection&&a.match(A)&&A.meta.condition||s(A),A}();return Object.assign(R,{abort:C,requestId:g,arg:u,unwrap(){return R.then(lu)}})}}return Object.assign(c,{pending:i,rejected:a,fulfilled:o,settled:cu(a,o),typePrefix:t})}return e.withTypes=()=>e,e})();function lu(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function mu(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var fu=(e,t)=>{if(typeof e!="function")throw new Error(ne(32))};var An="listenerMiddleware";var gu=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:i}=e;if(t)o=O(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error(ne(21));return fu(i),{predicate:o,type:t,effect:i}},hu=Object.assign(e=>{let{type:t,predicate:r,effect:n}=gu(e);return {id:wi(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ne(22))}}},{withTypes:()=>hu});var yu=Object.assign(O(`${An}/add`),{withTypes:()=>yu});O(`${An}/removeAll`);var Su=Object.assign(O(`${An}/remove`),{withTypes:()=>Su});function ne(e){return `Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var q=new P({required:!0,emptyAllowed:!1}),B=new P({required:!1,emptyAllowed:!1}),He=new P({required:!0,emptyAllowed:!0});new P({required:!1,emptyAllowed:!0});new re({each:q,required:!0});var Pi=new P({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),vu=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),xn=(e,t)=>{if("required"in t)return {payload:new M({value:t}).validate({value:e}).value};let o=new U({options:{required:!0},values:t}).validate(e);if(o)throw new Gr(o);return {payload:e}},_=(e,t)=>{try{return xn(e,t)}catch(r){return {payload:e,error:vu(r)}}},G=(e,t,r,n)=>{let o=`Check the options of ${n}`;return ki(e,t,r,o,"Controller initialization error")},ki=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(i){throw e.logger.error(i,o),i}};var it="2.63.3",Oi=["@coveo/atomic","@coveo/quantic"];var Pn=()=>B,Ii=()=>q,De=O("configuration/updateBasicConfiguration",e=>_(e,{accessToken:B,organizationId:B,platformUrl:B})),at=O("configuration/updateSearchConfiguration",e=>_(e,{apiBaseUrl:B,pipeline:new P({required:!1,emptyAllowed:!0}),searchHub:B,timezone:B,locale:B,authenticationProviders:new re({required:!1,each:q})})),bu={enabled:new fe({default:!0}),originContext:Pn(),originLevel2:Pn(),originLevel3:Pn(),apiBaseUrl:B,nextApiBaseUrl:B,runtimeEnvironment:new qe,anonymous:new fe({default:!1}),deviceId:B,userDisplayName:B,documentLocation:B,trackingId:B,analyticsMode:new P({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new U({options:{required:!1},values:Oi.reduce((e,t)=>(e[t]=Pi,e),{})})},st=O("configuration/updateAnalyticsConfiguration",e=>(ir()&&(e.enabled=!1),_(e,bu))),ct=O("configuration/analytics/disable"),ut=O("configuration/analytics/enable"),Cr=O("configuration/analytics/originlevel2",e=>_(e,{originLevel2:Ii()})),wr=O("configuration/analytics/originlevel3",e=>_(e,{originLevel3:Ii()}));function we(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function p(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i);})}return new(r||(r=Promise))(function(i,a){function c(d){try{s(n.next(d));}catch(m){a(m);}}function u(d){try{s(n.throw(d));}catch(m){a(m);}}function s(d){d.done?i(d.value):o(d.value).then(c,u);}s((n=n.apply(e,t||[])).next());})}var I;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect";})(I||(I={}));function Fi(){return typeof window<"u"}function Vn(){return typeof navigator<"u"}function dt(){return typeof document<"u"}function kn(){try{return typeof localStorage<"u"}catch{return !1}}function Cu(){try{return typeof sessionStorage<"u"}catch{return !1}}function $i(){return Vn()&&navigator.cookieEnabled}var wu=[I.click,I.custom,I.search,I.view],Ru=(e,t)=>wu.indexOf(e)!==-1?Object.assign({language:dt()?document.documentElement.lang:"unknown",userAgent:Vn()?navigator.userAgent:"unknown"},t):t,jt=class e{static set(t,r,n){var o,i,a,c;n&&(i=new Date,i.setTime(i.getTime()+n)),c=window.location.hostname,c.indexOf(".")===-1?Di(t,r,i):(a=c.split("."),o=a[a.length-2]+"."+a[a.length-1],Di(t,r,i,o));}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var i=n[o];if(i=i.replace(/^\s+/,""),i.lastIndexOf(r,0)===0)return i.substring(r.length,i.length)}return null}static erase(t){e.set(t,"",-1);}};function Di(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax";}function Au(){return kn()?localStorage:$i()?new Bt:Cu()?sessionStorage:new mt}var Bt=class e{getItem(t){return jt.get(`${e.prefix}${t}`)}removeItem(t){jt.erase(`${e.prefix}${t}`);}setItem(t,r,n){jt.set(`${e.prefix}${t}`,r,n);}};Bt.prefix="coveo_";var On=class{constructor(){this.cookieStorage=new Bt;}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t);}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3);}},mt=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},qt="__coveo.analytics.history",zi=20,Hi=1e3*60,Qi=75,pt=class{constructor(t){this.store=t||Au();}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t]);}addElementAsync(t){return p(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t]);})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return p(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(qt);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return []}}getHistoryWithInternalTimeAsync(){return p(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(qt);return t?JSON.parse(t):[]}catch{return []}})}setHistory(t){try{this.store.setItem(qt,JSON.stringify(t.slice(0,zi)));}catch{}}clear(){try{this.store.removeItem(qt);}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Qi)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>Hi:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:i}=r;return {name:n,time:o,value:i}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},Wi=Object.freeze({__proto__:null,HistoryStore:pt,MAX_NUMBER_OF_HISTORY_ELEMENTS:zi,MAX_VALUE_SIZE:Qi,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Hi,STORE_KEY:qt,default:pt}),xu=(e,t)=>p(void 0,void 0,void 0,function*(){return e===I.view?(yield Pu(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),Pu=e=>p(void 0,void 0,void 0,function*(){let t=new pt,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r);}),Rr,Eu=new Uint8Array(16);function ku(){if(!Rr&&(Rr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rr(Eu)}var Ou=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function xr(e){return typeof e=="string"&&Ou.test(e)}var J=[];for(let e=0;e<256;++e)J.push((e+256).toString(16).slice(1));function Ki(e,t=0){return (J[e[t+0]]+J[e[t+1]]+J[e[t+2]]+J[e[t+3]]+"-"+J[e[t+4]]+J[e[t+5]]+"-"+J[e[t+6]]+J[e[t+7]]+"-"+J[e[t+8]]+J[e[t+9]]+"-"+J[e[t+10]]+J[e[t+11]]+J[e[t+12]]+J[e[t+13]]+J[e[t+14]]+J[e[t+15]]).toLowerCase()}function Iu(e){if(!xr(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Fu(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Du="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Tu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Nu(e,t,r){function n(o,i,a,c){var u;if(typeof o=="string"&&(o=Fu(o)),typeof i=="string"&&(i=Iu(i)),((u=i)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+o.length);if(s.set(i),s.set(o,i.length),s=r(s),s[6]=s[6]&15|t,s[8]=s[8]&63|128,a){c=c||0;for(let d=0;d<16;++d)a[c+d]=s[d];return a}return Ki(s)}try{n.name=e;}catch{}return n.DNS=Du,n.URL=Tu,n}var _u=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ti={randomUUID:_u};function Qe(e,t,r){if(Ti.randomUUID&&!t&&!e)return Ti.randomUUID();e=e||{};let n=e.random||(e.rng||ku)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Ki(n)}function Lu(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function En(e,t){return e<<t|e>>>32-t}function Mu(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let a=unescape(encodeURIComponent(e));e=[];for(let c=0;c<a.length;++c)e.push(a.charCodeAt(c));}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),i=new Array(o);for(let a=0;a<o;++a){let c=new Uint32Array(16);for(let u=0;u<16;++u)c[u]=e[a*64+u*4]<<24|e[a*64+u*4+1]<<16|e[a*64+u*4+2]<<8|e[a*64+u*4+3];i[a]=c;}i[o-1][14]=(e.length-1)*8/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<o;++a){let c=new Uint32Array(80);for(let l=0;l<16;++l)c[l]=i[a][l];for(let l=16;l<80;++l)c[l]=En(c[l-3]^c[l-8]^c[l-14]^c[l-16],1);let u=r[0],s=r[1],d=r[2],m=r[3],g=r[4];for(let l=0;l<80;++l){let h=Math.floor(l/20),b=En(u,5)+Lu(h,s,d,m)+g+t[h]+c[l]>>>0;g=m,m=d,d=En(s,30)>>>0,s=u,u=b;}r[0]=r[0]+u>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+g>>>0;}return [r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Uu=Nu("v5",80,Mu),Ni=Uu,Gi="2.30.2",Vt={pageview:"pageview",event:"event"},Te=class e{constructor(t,r){if(!xr(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3);}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return !this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return !1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let i=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return xr(i)?new e(i,Number.parseInt(o)*1e3):null}};Te.cvo_cid="cvo_cid";Te.expirationTime=120;var ue=Object.keys;function Ar(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Dn={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},qu=ue(Dn).map(e=>Dn[e]),Vu=[...qu].join("|"),ju=new RegExp(`^(${Vu}$)`),Bu={svcAction:"svc_action",svcActionData:"svc_action_data"},zu=e=>ju.test(e),Hu=[zu],Li={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Mi={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Z={action:"pa",list:"pal",listSource:"pls"},Er={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Qu=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Tn={id:"quoteId",affiliation:"quoteAffiliation"},Nn={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Wu={add:Z,bookmark_add:Z,bookmark_remove:Z,click:Z,checkout:Z,checkout_option:Z,detail:Z,impression:Z,remove:Z,refund:Object.assign(Object.assign({},Z),Er),purchase:Object.assign(Object.assign({},Z),Er),quickview:Z,quote:Object.assign(Object.assign({},Z),Tn),review:Object.assign(Object.assign({},Z),Nn)},Ku=ue(Li).map(e=>Li[e]),Gu=ue(Mi).map(e=>Mi[e]),Yu=ue(Z).map(e=>Z[e]),Ju=ue(Er).map(e=>Er[e]),Xu=ue(Nn).map(e=>Nn[e]),Zu=ue(Tn).map(e=>Tn[e]),ed=[...Ku,"custom"].join("|"),td=[...Gu,"custom"].join("|"),Yi="(pr[0-9]+)",Ji="(il[0-9]+pi[0-9]+)",rd=new RegExp(`^${Yi}(${ed})$`),nd=new RegExp(`^(${Ji}(${td}))|(il[0-9]+nm)$`),od=new RegExp(`^(${Yu.join("|")})$`),id=new RegExp(`^(${Ju.join("|")})$`),ad=new RegExp(`^${Yi}custom$`),sd=new RegExp(`^${Ji}custom$`),cd=new RegExp(`^(${[...Qu,...Xu,...Zu].join("|")})$`),ud=e=>rd.test(e),dd=e=>nd.test(e),ld=e=>od.test(e),md=e=>id.test(e),pd=e=>cd.test(e),fd=[dd,ud,ld,md,pd],gd=[ad,sd],hd={anonymizeIp:"aip"},yd={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Sd={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},vd=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],bd=Object.assign(Object.assign(Object.assign(Object.assign({},hd),yd),Sd),vd.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),_n=Object.assign(Object.assign({},bd),Bu),Cd=e=>{let t=!!e.action&&Wu[e.action]||{};return ue(e).reduce((r,n)=>{let o=t[n]||_n[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},wd=ue(_n).map(e=>_n[e]),Rd=e=>wd.indexOf(e)!==-1,Ad=e=>e==="custom",xd=e=>[...fd,...Hu,Rd,Ad].some(t=>t(e)),Pd=e=>ue(e).reduce((t,r)=>{let n=Ed(r);return n?Object.assign(Object.assign({},t),kd(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Ed=e=>{let t;return [...gd].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},kd=(e,t)=>ue(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Ln=class{constructor(t){this.opts=t;}sendEvent(t,r){return p(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,i=yield this.getQueryParamsForEventType(t),{url:a,payload:c}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${i}`,r,o),u=this.encodeForEventType(t,c),s=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,s);})}isAvailable(){return "sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return p(this,void 0,void 0,function*(){let o=t,i=r;if(n){let a=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:c,body:u}=a;o=c||t;try{i=JSON.parse(u);}catch(s){console.error("Unable to process the request body as a JSON string",s);}}return {payload:i,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return p(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return [r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(i=>!!i).join("&")})}isEventTypeLegacy(t){return [I.click,I.custom,I.search,I.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},Mn=class{sendEvent(t,r){return p(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return p(this,void 0,void 0,function*(){return Promise.resolve()})}},Ui=window.fetch,kr=class{constructor(t){this.opts=t;}sendEvent(t,r){return p(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",c={url:`${n}/analytics/${t}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},c),i?yield i(c,"analyticsFetch"):{}),{url:s}=u,d=we(u,["url"]),m;try{m=yield Ui(s,d);}catch(g){console.error("An error has occured when sending the event.",g);return}if(m.ok){let g=yield m.json();return g.visitorId&&o.setCurrentVisitorId(g.visitorId),g}else {try{m.json();}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,m,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return p(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Ui(r,{headers:this.getHeaders(),method:"DELETE"});})}shouldAppendVisitorId(t){return [I.click,I.custom,I.search,I.view].indexOf(t)!==-1}getVisitorIdParam(){return p(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Un=class{constructor(t,r){kn()&&$i()?this.storage=new On:kn()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new mt),this.client=new kr(t),this.beaconClient=new Ln(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:i}of n)this.beaconClient.sendEvent(o,i);});}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},qn=class{constructor(t,r){this.storage=r||new mt,this.client=new kr(t);}getClientDependingOnEventType(t){return this.client}},Or=class{constructor(){this.storage=new mt,this.client=new Mn;}getClientDependingOnEventType(t){return this.client}},Od="xx",Id=e=>e?.startsWith(Od)||!1,Fd=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Dd(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Td=["1",1,"yes",!0];function Ir(){return Vn()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Td.indexOf(e)!==-1)}var Xi="v15",Zi={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Nd(e=Zi.default,t=Xi,r=!1){if(e=e.replace(/\/$/,""),r)return `${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return `${e}${n?"":"/rest"}/${t}`}var _d="38824e1f-37f5-42d3-8372-a4b8fa9df946",Ae=class{get defaultOptions(){return {endpoint:Zi.default,isCustomEndpoint:!1,token:"",version:Xi,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Gi}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[xu,Ru].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Ir()?this.runtime=new Or:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(I.view,{newEventType:I.view,addClientIdParameter:!0}),this.addEventTypeMapping(I.click,{newEventType:I.click,addClientIdParameter:!0}),this.addEventTypeMapping(I.custom,{newEventType:I.custom,addClientIdParameter:!0}),this.addEventTypeMapping(I.search,{newEventType:I.search,addClientIdParameter:!0});}initRuntime(t){return Fi()&&dt()?new Un(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Dd()&&console.warn(Fd),new qn(t))}get storage(){return this.runtime.storage}determineVisitorId(){return p(this,void 0,void 0,function*(){try{return Fi()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Qe()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),Qe()}})}getCurrentVisitorId(){return p(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t);}return this.visitorId})}setCurrentVisitorId(t){return p(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t);})}setClientId(t,r){return p(this,void 0,void 0,function*(){if(xr(t))this.setCurrentVisitorId(t.toLowerCase());else {if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Ni(t,Ni(r,_d)));}})}getParameters(t,...r){return p(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return p(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Qe()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t);}extractClientIdFromLink(t){if(Ir())return null;try{let r=new URL(t).searchParams.get(Te.cvo_cid);if(r==null)return null;let n=Te.fromString(r);return !n||!dt()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return p(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[t]||{};return yield [l=>n.length>0?this.parseVariableArgumentsPayload(n,l):l[0],l=>p(this,void 0,void 0,function*(){return Object.assign(Object.assign({},l),{visitorId:o?yield this.getCurrentVisitorId():""})}),l=>p(this,void 0,void 0,function*(){return a?Object.assign(Object.assign({},l),{clientId:yield this.getCurrentVisitorId()}):l}),l=>i?this.ensureAnonymousUserWhenUsingApiKey(l):l,l=>this.beforeSendHooks.reduce((h,b)=>p(this,void 0,void 0,function*(){let C=yield h;return yield b(t,C)}),l)].reduce((l,h)=>p(this,void 0,void 0,function*(){let b=yield l;return yield h(b)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return p(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield [m=>this.setTrackingIdIfTrackingIdNotPresent(m),m=>this.removeEmptyPayloadValues(m,t),m=>this.validateParams(m,t),m=>n?Cd(m):m,m=>n?this.removeUnknownParameters(m):m,m=>n?this.processCustomParameters(m):this.mapCustomParametersToCustomData(m)].reduce((m,g)=>p(this,void 0,void 0,function*(){let l=yield m;return yield g(l)}),Promise.resolve(r))})}makeEvent(t,...r){return p(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),i=yield this.resolvePayloadForParameters(t,o);return {eventType:n,payload:i,log:a=>p(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},i),a)}),yield Promise.all(this.afterSendHooks.map(c=>c(t,Object.assign(Object.assign({},o),a)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return p(this,void 0,void 0,function*(){return (yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return p(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new pt().clear();}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId();}makeSearchEvent(t){return p(this,void 0,void 0,function*(){return this.makeEvent(I.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,n=we(t,["searchQueryUid"]);return p(this,void 0,void 0,function*(){return (yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return p(this,void 0,void 0,function*(){return this.makeEvent(I.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,n=we(t,["searchQueryUid"]);return p(this,void 0,void 0,function*(){return (yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return p(this,void 0,void 0,function*(){return this.makeEvent(I.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,n=we(t,["lastSearchQueryUid"]);return p(this,void 0,void 0,function*(){return (yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return p(this,void 0,void 0,function*(){return this.makeEvent(I.view,t)})}sendViewEvent(t){return p(this,void 0,void 0,function*(){return (yield this.makeViewEvent(t)).log({})})}getVisit(){return p(this,void 0,void 0,function*(){let r=yield (yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return p(this,void 0,void 0,function*(){return yield (yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t);}registerAfterSendEventHook(t){this.afterSendHooks.push(t);}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r;}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,i=r.length;o<i;o++){let a=r[o];if(typeof a=="string")n[t[o]]=a;else if(typeof a=="object")return Object.assign(Object.assign({},n),a)}return n}isKeyAllowedEmpty(t,r){return ({[I.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,i)=>Object.assign(Object.assign({},o),{[i]:t[i]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(xd(n))return !0;console.log(n,"is not processed by coveoua");}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=we(t,["custom"]),o={};r&&Ar(r)&&(o=this.lowercaseKeys(r));let i=Pd(n);return Object.assign(Object.assign({},o),i)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=we(t,["custom"]);if(r&&Ar(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o];}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=we(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==I.view||r==I.click||r==I.search||r==I.custom)&&(o.originLevel3=this.limit(o.originLevel3,128)),r==I.view&&(o.location=this.limit(o.location,128)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=we(t,["userId"]);return Id(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=we(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&Ar(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&Ar(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t!="string"?t:t.substring(0,r)}get baseUrl(){return Nd(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Re;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle";})(Re||(Re={}));var f;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer";})(f||(f={}));var qi={[f.triggerNotify]:"queryPipelineTriggers",[f.triggerExecute]:"queryPipelineTriggers",[f.triggerQuery]:"queryPipelineTriggers",[f.triggerRedirect]:"queryPipelineTriggers",[f.queryError]:"errors",[f.queryErrorBack]:"errors",[f.queryErrorClear]:"errors",[f.queryErrorRetry]:"errors",[f.pagerNext]:"getMoreResults",[f.pagerPrevious]:"getMoreResults",[f.pagerNumber]:"getMoreResults",[f.pagerResize]:"getMoreResults",[f.pagerScrolling]:"getMoreResults",[f.facetSearch]:"facet",[f.facetShowLess]:"facet",[f.facetShowMore]:"facet",[f.recommendation]:"recommendation",[f.likeSmartSnippet]:"smartSnippet",[f.dislikeSmartSnippet]:"smartSnippet",[f.expandSmartSnippet]:"smartSnippet",[f.collapseSmartSnippet]:"smartSnippet",[f.openSmartSnippetFeedbackModal]:"smartSnippet",[f.closeSmartSnippetFeedbackModal]:"smartSnippet",[f.sendSmartSnippetReason]:"smartSnippet",[f.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.clearRecentQueries]:"recentQueries",[f.recentResultClick]:"recentlyClickedDocuments",[f.clearRecentResults]:"recentlyClickedDocuments",[f.showLessFoldedResults]:"folding",[f.caseDetach]:"case",[f.likeGeneratedAnswer]:"generatedAnswer",[f.dislikeGeneratedAnswer]:"generatedAnswer",[f.openGeneratedAnswerSource]:"generatedAnswer",[f.generatedAnswerStreamEnd]:"generatedAnswer",[f.generatedAnswerSourceHover]:"generatedAnswer",[f.generatedAnswerCopyToClipboard]:"generatedAnswer",[f.generatedAnswerHideAnswers]:"generatedAnswer",[f.generatedAnswerShowAnswers]:"generatedAnswer",[f.generatedAnswerExpand]:"generatedAnswer",[f.generatedAnswerCollapse]:"generatedAnswer",[f.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Re.expandToFullUI]:"interface",[Re.openUserActions]:"User Actions",[Re.showPrecedingSessions]:"User Actions",[Re.showFollowingSessions]:"User Actions",[Re.clickViewedDocument]:"User Actions",[Re.clickPageView]:"User Actions",[Re.createArticle]:"createArticle"},ft=class{constructor(){this.runtime=new Or,this.currentVisitorId="";}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(I.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(I.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(I.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(I.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Gi}};function Ld(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function Md(e){return e.map(t=>t.replace(/;/g,""))}function ea(e){let r=e.join(";");return r.length<=256?r:ea(e.slice(1))}var Vi=e=>{let t=Md(e),r=Ld(t);return ea(r)};function ji(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Vi(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Vi(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ne=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Ir();this.coveoAnalyticsClient=n?new ft:new Ae(t);}disable(){this.coveoAnalyticsClient=new ft;}enable(){this.coveoAnalyticsClient=new Ae(this.opts);}makeInterfaceLoad(){return this.makeSearchEvent(f.interfaceLoad)}logInterfaceLoad(){return p(this,void 0,void 0,function*(){return (yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(f.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return p(this,void 0,void 0,function*(){return (yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(f.recommendation)}logRecommendation(){return p(this,void 0,void 0,function*(){return (yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(f.recommendationOpen,t,r)}logRecommendationOpen(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(f.staticFilterClearAll,t)}logStaticFilterClearAll(t){return p(this,void 0,void 0,function*(){return (yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(f.staticFilterSelect,t)}logStaticFilterSelect(t){return p(this,void 0,void 0,function*(){return (yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(f.staticFilterDeselect,t)}logStaticFilterDeselect(t){return p(this,void 0,void 0,function*(){return (yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return p(this,void 0,void 0,function*(){return (yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(f.interfaceChange,t)}logInterfaceChange(t){return p(this,void 0,void 0,function*(){return (yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return p(this,void 0,void 0,function*(){return (yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(f.didyoumeanClick)}logDidYouMeanClick(){return p(this,void 0,void 0,function*(){return (yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(f.resultsSort,t)}logResultsSort(t){return p(this,void 0,void 0,function*(){return (yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(f.searchboxSubmit)}logSearchboxSubmit(){return p(this,void 0,void 0,function*(){return (yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(f.searchboxClear)}logSearchboxClear(){return p(this,void 0,void 0,function*(){return (yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(f.searchboxAsYouType)}logSearchboxAsYouType(){return p(this,void 0,void 0,function*(){return (yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(f.breadcrumbFacet,t)}logBreadcrumbFacet(t){return p(this,void 0,void 0,function*(){return (yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(f.breadcrumbResetAll)}logBreadcrumbResetAll(){return p(this,void 0,void 0,function*(){return (yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(f.documentQuickview,t,r)}logDocumentQuickview(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(f.documentOpen,t,r)}logDocumentOpen(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(f.omniboxAnalytics,ji(t))}logOmniboxAnalytics(t){return p(this,void 0,void 0,function*(){return (yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(f.omniboxFromLink,ji(t))}logOmniboxFromLink(t){return p(this,void 0,void 0,function*(){return (yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(f.searchFromLink)}logSearchFromLink(){return p(this,void 0,void 0,function*(){return (yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(f.triggerNotify,t)}logTriggerNotify(t){return p(this,void 0,void 0,function*(){return (yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(f.triggerExecute,t)}logTriggerExecute(t){return p(this,void 0,void 0,function*(){return (yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(f.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return p(this,void 0,void 0,function*(){return (yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(f.undoTriggerQuery,t)}logUndoTriggerQuery(t){return p(this,void 0,void 0,function*(){return (yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(f.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return p(this,void 0,void 0,function*(){return (yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(f.pagerResize,t)}logPagerResize(t){return p(this,void 0,void 0,function*(){return (yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(f.pagerNumber,t)}logPagerNumber(t){return p(this,void 0,void 0,function*(){return (yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(f.pagerNext,t)}logPagerNext(t){return p(this,void 0,void 0,function*(){return (yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(f.pagerPrevious,t)}logPagerPrevious(t){return p(this,void 0,void 0,function*(){return (yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(f.pagerScrolling)}logPagerScrolling(){return p(this,void 0,void 0,function*(){return (yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(f.facetClearAll,t)}logFacetClearAll(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(f.facetSearch,t)}logFacetSearch(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(f.facetSelect,t)}logFacetSelect(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(f.facetDeselect,t)}logFacetDeselect(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(f.facetExclude,t)}logFacetExclude(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(f.facetUnexclude,t)}logFacetUnexclude(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(f.facetSelectAll,t)}logFacetSelectAll(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(f.facetUpdateSort,t)}logFacetUpdateSort(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(f.facetShowMore,t)}logFacetShowMore(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(f.facetShowLess,t)}logFacetShowLess(t){return p(this,void 0,void 0,function*(){return (yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(f.queryError,t)}logQueryError(t){return p(this,void 0,void 0,function*(){return (yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return p(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(f.queryErrorBack);return {description:t.description,log:()=>p(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorBack)})}})}logQueryErrorBack(){return p(this,void 0,void 0,function*(){return (yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return p(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(f.queryErrorRetry);return {description:t.description,log:()=>p(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorRetry)})}})}logQueryErrorRetry(){return p(this,void 0,void 0,function*(){return (yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return p(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(f.queryErrorClear);return {description:t.description,log:()=>p(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorClear)})}})}logQueryErrorClear(){return p(this,void 0,void 0,function*(){return (yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(f.likeSmartSnippet)}logLikeSmartSnippet(){return p(this,void 0,void 0,function*(){return (yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(f.dislikeSmartSnippet)}logDislikeSmartSnippet(){return p(this,void 0,void 0,function*(){return (yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(f.expandSmartSnippet)}logExpandSmartSnippet(){return p(this,void 0,void 0,function*(){return (yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(f.collapseSmartSnippet)}logCollapseSmartSnippet(){return p(this,void 0,void 0,function*(){return (yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return p(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return p(this,void 0,void 0,function*(){return (yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(f.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(f.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return p(this,void 0,void 0,function*(){return (yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(f.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return p(this,void 0,void 0,function*(){return (yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(f.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return p(this,void 0,void 0,function*(){return (yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(f.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return p(this,void 0,void 0,function*(){return (yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(f.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(f.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(f.copyToClipboard,t,r)}logCopyToClipboard(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(f.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(f.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(f.recentQueryClick)}logRecentQueryClick(){return p(this,void 0,void 0,function*(){return (yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(f.clearRecentQueries)}logClearRecentQueries(){return p(this,void 0,void 0,function*(){return (yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(f.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(f.clearRecentResults)}logClearRecentResults(){return p(this,void 0,void 0,function*(){return (yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(f.noResultsBack)}logNoResultsBack(){return p(this,void 0,void 0,function*(){return (yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(f.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(f.showLessFoldedResults)}logShowLessFoldedResults(){return p(this,void 0,void 0,function*(){return (yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return {actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r,n=qi[t]){return p(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:n,eventValue:t}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return {description:this.makeEventDescription(a,t),log:({searchUID:c})=>a.log({lastSearchQueryUid:c})}})}logCustomEvent(t,r,n=qi[t]){return p(this,void 0,void 0,function*(){return (yield this.makeCustomEvent(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return p(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return {description:this.makeEventDescription(a,t),log:({searchUID:c})=>a.log({lastSearchQueryUid:c})}})}logCustomEventWithType(t,r,n){return p(this,void 0,void 0,function*(){return (yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return p(this,void 0,void 0,function*(){return (yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return p(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return {description:this.makeEventDescription(o,t),log:({searchUID:i})=>o.log({searchQueryUid:i})}})}makeClickEvent(t,r,n,o){return p(this,void 0,void 0,function*(){let i=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return {description:this.makeEventDescription(a,t),log:({searchUID:c})=>a.log({searchQueryUid:c})}})}logClickEvent(t,r,n,o){return p(this,void 0,void 0,function*(){return (yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var n,o;return p(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return p(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return {originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ae?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(f.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return p(this,void 0,void 0,function*(){return (yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(f.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return p(this,void 0,void 0,function*(){return (yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(f.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return p(this,void 0,void 0,function*(){return (yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(f.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(f.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(f.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(f.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(f.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(f.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(f.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(f.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return p(this,void 0,void 0,function*(){return (yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(f.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return p(this,void 0,void 0,function*(){return (yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(f.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return p(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},Fr=Object.assign({},Vt);Object.keys(Fr).map(e=>Fr[e]);var Dr;(function(e){e.click="click",e.flowStart="flowStart";})(Dr||(Dr={}));var me;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create";})(me||(me={}));var Tr;(function(e){e.quit="Quit",e.solved="Solved";})(Tr||(Tr={}));var ta=e=>new Ae(e).getCurrentVisitorId(),jn=new Wi.HistoryStore,xe=(e,t)=>typeof t=="function"?(...r)=>{let n=Dt(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Pe=(e,t)=>(...r)=>{let n=Dt(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};var ra=["uri","urihash","documentUri","documentUriHash","permanentid","ec_name","ec_brand","ec_category","ec_item_group_id","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"];var _r=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0});var gt=()=>"default";var Ud=e=>{let t=e.configuration.search.locale.split("-")[0];return !t||t.length!==2?"en":t},pe=class{constructor(t){this.getState=t;this.state=t();}getLanguage(){return Ud(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[i,a]of Object.entries(n)){let c=`context_${i}`;o[c]=a;}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=it),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||gt()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var $t=class extends pe{constructor(){super(...arguments);this.initialState=_r();}getPipeline(){return ""}getSearchEventRequestPayload(){return {queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productRecommendations?.searchUid||this.initialState.searchUid}mapResultsToAnalyticsDocument(){return this.state.productRecommendations?.recommendations.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get responseTime(){return this.state.productRecommendations?.duration||this.initialState.duration}get numberOfResults(){return this.state.productRecommendations?.recommendations.length||this.initialState.recommendations.length}};function qd({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:i,mode:a}=e;a!=="disabled"&&(n.call(r),t.send(o,i,r));}var Vd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jd(e){return typeof e=="string"&&Vd.test(e)}function Bd(e){let t="visitorId";return {getClientId:()=>{let r=e.get(),n=r.storage,o=n.getItem(t),i=o&&jd(o)?o:r.generateUUID();return n.setItem(t,i),i},clear:()=>{e.get().storage.removeItem(t);}}}var oa="0.7.7";function $d(e){let{trackingId:t}=e;return {trackingId:t}}function zd(e){return (e.source||[]).concat([`relay@${oa}`])}function ia(e,t,r,n){let{getReferrer:o,getLocation:i,getUserAgent:a}=r,c=$d(t),u=n.getClientId();return Object.freeze({type:e,config:c,ts:Date.now(),source:zd(t),clientId:u,userAgent:a(),referrer:o(),location:i()})}function Hd(e,t,r,n,o){return {...t,meta:ia(e,r,n,o)}}var Qd="*";function Wd(){let e=[];function t({type:u,callback:s}){return e.findIndex(d=>d.type===u&&d.callback===s)}function r(u,s){return u.type==="*"||s===u.type}function n(u){return t(u)<0&&e.push(u),()=>c(u.type,u.callback)}function o(u){e.forEach(s=>{if(r(s,u.meta.type))try{s.callback(u);}catch(d){console.error(d);}});}function i(u){if(u===Qd)e.length=0;else for(let s=e.length-1;s>=0;s--)e[s].type===u&&e.splice(s,1);}function a(u){let s=t(u);s>=0&&e.splice(s,1);}function c(u,s){s?a({type:u,callback:s}):i(u);}return {add:n,call:o,remove:c}}function na({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function Kd(e){let t=na(e);return {get:()=>t,update:r=>{t=na({...t,...r});}}}function Gd(){let e=typeof window<"u";return {sendMessage(t){e&&window.postMessage(t,"*");}}}var Bn=Yd();function Yd(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return {getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let i of o){let a=i.replace(/^\s+/,"");if(a.lastIndexOf(n,0)===0)return a.substring(n.length,a.length)}return null},setItem(r,n,o){let i=t(window.location.hostname),a=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,c=i?`;domain=${i}`:"";document.cookie=`${e}${r}=${n}${a}${c};path=/;SameSite=Lax`;},removeItem(r){this.setItem(r,"",-1);}}}function Jd(){return {getItem(e){return Bn.getItem(e)||localStorage.getItem(e)},removeItem(e){Bn.removeItem(e),localStorage.removeItem(e);},setItem(e,t){localStorage.setItem(e,t),Bn.setItem(e,t,31556952e3);}}}function Xd(){let e=document.referrer;return e===""?null:e}function Zd(){return {runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(Gd().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>Xd(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:Jd()}}function el(){return {getItem(){return null},removeItem(){},setItem(){}}}function tl(){return {runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:el()}}function rl(e){return e.get().mode!=="disabled"&&nl()?Zd():tl()}function nl(){try{return typeof window=="object"}catch{return !1}}function ol(e){return {get:()=>Object.freeze(rl(e))}}function aa(e){let t=Kd(e),r=Wd(),n=ol(t),o=Bd(n);return {emit:(i,a)=>{let c=t.get(),u=n.get(),s=Hd(i,a,c,u,o);return qd({config:c,environment:u,event:s,listenerManager:r})},getMeta:i=>ia(i,t.get(),n.get(),o),on:(i,a)=>r.add({type:i,callback:a}),off:(i,a)=>r.remove(i,a),updateConfig:i=>t.update(i),version:oa,clearStorage:()=>{o.clear();}}}var sa=ot(e=>e.source,e=>[`@coveo/headless@${it}`].concat(Object.entries(e).map(([t,r])=>`${t}@${r}`)));var zt=ot(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>sa(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r,enabled:n},o)=>aa({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:o}));function da(){return {desiredCount:5,numberOfValues:8,set:{}}}function la(e){let{activeValue:t,ancestryMap:r}=sl(e);return t?cl(t,r):[]}function sl(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return {activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children);}return {}}function cl(e,t){let r=[];if(!e)return [];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}var ul=(e,t)=>e.categoryFacetSet[t]?.request;var $n=(e,t)=>{let r=ul(e,t);return la(r?.currentValues??[])};function ma(){return {}}function pa(){return {}}function fa(){return {}}function ga(){return {}}function zn(e){return {facetSet:e.facetSet??ga(),categoryFacetSet:e.categoryFacetSet??ma(),dateFacetSet:e.dateFacetSet??pa(),numericFacetSet:e.numericFacetSet??fa(),automaticFacetSet:e.automaticFacetSet??da()}}var Hn=e=>{let t=[];return ml(e).forEach((r,n)=>{let o=bl(e,r.facetId),i=Sl(r,n+1);if(ll(r)){if(!!!$n(e,r.facetId).length)return;t.push({...i,...hl(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((a,c)=>{if(a.state==="idle")return;let u=ha(a,c+1,o),s=dl(r)?ya(a):fl(a);t.push({...i,...u,...s});});}),pl(e).forEach((r,n)=>{let o=yl(r,n+1);r.values.forEach((i,a)=>{if(i.state==="idle")return;let c=ha(i,a+1,"specific"),u=ya(i);t.push({...o,...c,...u});});}),t},dl=e=>e.type==="specific",ll=e=>e.type==="hierarchical",ml=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),pl=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),ha=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),fl=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),ya=e=>({displayValue:e.value,value:e.value}),gl=(e,t)=>$n(e,t).map(n=>n.value).join(";"),hl=(e,t)=>{let n=gl(e,t);return {value:n,valuePosition:1,displayValue:n}},yl=(e,t)=>({title:Sa(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Sl=(e,t)=>({title:Sa(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Sa=(e,t)=>`${e}_${t}`,vl=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,bl=(e,t)=>{let r=vl(e,t);return r?r.type:"specific"};var Qn=()=>({q:"",enableQuerySyntax:!1});var ba=(r=>(r.Ascending="ascending",r.Descending="descending",r))(ba||{}),Ca=(i=>(i.Relevancy="relevancy",i.QRE="qre",i.Date="date",i.Field="field",i.NoSort="nosort",i))(Ca||{}),Wn=e=>{if(ho(e))return e.map(t=>Wn(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return `date ${e.order}`;case"field":return `@${e.field} ${e.order}`;default:return ""}},wa=()=>({by:"relevancy"});new U({values:{by:new Yr({enum:Ca,required:!0}),order:new Yr({enum:ba}),field:new P}});function Ra(){return Wn(wa())}var Kt=class Kt extends pe{constructor(){super(...arguments);this.getFacetRequest=r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response;}getFacetState(){return Hn(zn(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||Kt.fallbackPipelineName}getSearchEventRequestPayload(){return {queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||Ot().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||Kt.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=r.search?.response?.extendedResults?.generativeQuestionAnsweringId;return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:i,facetValue:n,facetTitle:`${i}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:i,criteria:n,facetTitle:`${i}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:i,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${i}_${r}`}}getResultSortMetadata(){return {...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Ra()}}getStaticFilterToggleMetadata(r,n){return {...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return {...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return {...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let i=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:i,categoryFacetPath:n,categoryFacetTitle:`${i}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest&&this.state.querySuggest[r],i=o.completions.map(s=>s.expression),a=o.partialQueries.length-1,c=o.partialQueries[a]||"",u=o.responseId;return {...this.getBaseMetadata(),suggestionRanking:i.indexOf(n),partialQuery:c,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:i.length>0?i:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return {...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return {...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Qn().q}get responseTime(){return this.state.search?.duration||Ot().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||Ot().response.totalCountFiltered}};Kt.fallbackPipelineName="default";var Gt=Kt,Aa=({logger:e,getState:t,analyticsClientMiddleware:r=(i,a)=>a,preprocessRequest:n,provider:o=new Gt(t)})=>{let i=t(),a=i.configuration.accessToken,c=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,s=i.configuration.analytics.enabled,d=new Ne({token:a,endpoint:c,runtimeEnvironment:u,preprocessRequest:xe(e,n),beforeSendHooks:[Pe(e,r),(m,g)=>(e.info({...g,type:m,endpoint:c,token:a},"Analytics request"),g)]},o);return s||d.disable(),d};function Cl(e){return Object.assign(e,{instantlyCallable:!0})}function wl(e,t){let r=i=>Cl(Ce(e,i)),n=r(async(i,{getState:a,extra:c})=>{let{analyticsClientMiddleware:u,preprocessRequest:s,logger:d}=c;return await(await t({getState:a,analyticsClientMiddleware:u,preprocessRequest:s,logger:d})).log({state:a(),extra:c})});return Object.assign(n,{prepare:async({getState:i,analyticsClientMiddleware:a,preprocessRequest:c,logger:u})=>{let{description:s,log:d}=await t({getState:i,analyticsClientMiddleware:a,preprocessRequest:c,logger:u});return {description:s,action:r(async(m,{getState:g,extra:l})=>await d({state:g(),extra:l}))}}}),n}var Mr=(e,t,r)=>{function n(...o){let i=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return xl(i)}return n},Rl=e=>e.configuration.analytics.analyticsMode==="legacy",Al=e=>e.configuration.analytics.analyticsMode==="next",xl=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:i,providerClass:a})=>(r??(r=c=>new a(c)),wl(e,async({getState:c,analyticsClientMiddleware:u,preprocessRequest:s,logger:d})=>{let m=[],g={log:async({state:R})=>{for(let A of m)await A(R);}},l=c(),h=i({getState:c,logger:d,analyticsClientMiddleware:u,preprocessRequest:s,provider:r(c)}),b=await t(h,c());g.description=b?.description,m.push(async R=>{Rl(R)&&await Pl(b,r,R,d,h.coveoAnalyticsClient);});let{emit:C}=zt(l);return m.push(async R=>{if(Al(R)&&o&&n){let A=n(R);await Ol(C,o,A);}}),g}));async function Pl(e,t,r,n,o){t(()=>r);let i=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:i},"Analytics response");}var Kn=Mr(Aa,e=>e,Gt);var kl={urihash:new P,sourcetype:new P,permanentid:new P};({uniqueId:q,raw:new U({values:kl}),title:q,uri:q,clickUri:q,rankingModifier:new P({required:!1,emptyAllowed:!0})});async function Ol(e,t,r){await e(t,r);}var xa=()=>Kn("analytics/productRecommendations/load",e=>e.makeRecommendationInterfaceLoad(),e=>new $t(e));function Ll(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var ht=O("productrecommendations/setId",e=>_(e,{id:q})),We=O("productrecommendations/setSku",e=>_(e,{skus:new re({required:!0,min:1,each:B})})),Ur=O("productrecommendations/setBrand",e=>_(e,{brand:new P({required:!0,emptyAllowed:!0})})),qr=O("productrecommendations/setCategory",e=>_(e,{category:new P({required:!0,emptyAllowed:!0})})),yt=O("productrecommendations/setAdditionalFields",e=>_(e,{additionalFields:new re({required:!0,each:B})})),St=O("productrecommendations/setMaxNumberOfRecommendations",e=>_(e,{number:new Ve({required:!0,max:50,min:1})})),_e=Ce("productRecommendations/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),i=new Date().getTime(),a=await n.productRecommendations(await Ml(o)),c=new Date().getTime()-i;if(Ko(a))return r(a.error);let u=o.productRecommendations.additionalFields||[];return {recommendations:a.success.results.map(s=>Ea(s,{additionalFields:u})),analyticsAction:xa(),searchUid:a.success.searchUid,duration:c}}),Ea=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,o=e.raw.ec_in_stock,i={documentUri:e.uri,documentUriHash:e.raw.urihash,permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_item_group_id:e.raw.ec_item_group_id,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:o===void 0?void 0:o.toLowerCase()==="yes"||o.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce((a,c)=>({...a,[c]:e.raw[c]}),{}),childResults:[],totalNumberOfChildResults:0};return Ll(e)&&(i.childResults=e.childResults.map(a=>Ea(a,{additionalFields:t})),i.totalNumberOfChildResults=e.totalNumberOfChildResults),i},Ml=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await ta(e.configuration.analytics)},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...ra,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?jn.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}});var vt=ce(_r(),e=>{e.addCase(ht,(t,r)=>{t.id=r.payload.id;}).addCase(We,(t,r)=>{t.skus=r.payload.skus;}).addCase(Ur,(t,r)=>{t.filter.brand=r.payload.brand;}).addCase(qr,(t,r)=>{t.filter.category=r.payload.category;}).addCase(St,(t,r)=>{t.maxNumberOfRecommendations=r.payload.number;}).addCase(yt,(t,r)=>{t.additionalFields=r.payload.additionalFields;}).addCase(_e.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1;}).addCase(_e.fulfilled,(t,r)=>{t.error=null,t.searchUid=r.payload.searchUid,t.recommendations=r.payload.recommendations,t.isLoading=!1;}).addCase(_e.pending,t=>{t.isLoading=!0;});});var bt=O("searchHub/set",e=>_(e,new P({required:!0,emptyAllowed:!0})));var Ul=O("history/undo"),ql=O("history/redo");O("history/snapshot");Ce("history/back",async(e,{dispatch:t})=>{t(Ul()),await t(Le());});Ce("history/forward",async(e,{dispatch:t})=>{t(ql()),await t(Le());});var Le=Ce("history/change",async(e,{getState:t})=>t().history.present);var Vr=ce(gt(),e=>{e.addCase(bt,(t,r)=>r.payload).addCase(Le.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(at,(t,r)=>r.payload.searchHub||t);});var ka=ce(it,e=>e);function Oa(){return typeof window<"u"&&typeof document<"u"}function Vl(e){let t=e.payload?.analyticsAction;return Ia(e)&&!N(t)}function Ia(e){return "type"in e}var Fa=e=>t=>r=>{let n;Vl(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return Ia(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};var $a=Oe(Ta());var Na={q:new P,enableQuerySyntax:new fe,aq:new P,cq:new P,firstResult:new Ve({min:0}),numberOfResults:new Ve({min:0}),sortCriteria:new P,f:new U,fExcluded:new U,cf:new U,nf:new U,df:new U,debug:new fe,sf:new U,tab:new P,af:new U};var _a=O("searchParameters/restore",e=>_(e,Na));O("tab/register",e=>{let t=new U({values:{id:q,expression:He}});return _(e,t)});var La=O("tab/updateActiveTab",e=>_(e,q));var jr=Oe(Ma()),Va=Oe(Ua()),ja=Oe(qa());jr.default.extend(ja.default);jr.default.extend(Va.default);var ro="/rest/search/v2",no="/rest/ua",Ba=()=>({organizationId:"",accessToken:"",platformUrl:an(),search:{apiBaseUrl:`${an()}${ro}`,locale:"en-US",timezone:jr.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Vo()}${no}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function Bl(e,t){if(zo(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+no;let n=Ho(e,t);return n?ar(t,n.environment).analytics:e}var za=ce(Ba(),e=>e.addCase(De,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${ro}`,t.analytics.apiBaseUrl=Bl(r.payload.platformUrl,t.organizationId));}).addCase(at,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders);}).addCase(st,(t,r)=>{N(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),N(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),N(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),N(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),N(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),N(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),N(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),N(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),N(r.payload.source)||(t.analytics.source=r.payload.source);let n=(0, $a.default)();n&&(t.analytics.analyticsMode="next",t.analytics.trackingId=n),N(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),N(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),N(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),N(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),N(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation);}).addCase(ct,t=>{t.analytics.enabled=!1;}).addCase(ut,t=>{t.analytics.enabled=!0;}).addCase(Cr,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2;}).addCase(wr,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3;}).addCase(La,(t,r)=>{t.analytics.originLevel2=r.payload;}).addCase(_a,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2;}));var Ct=za;function $l(e){return e.instantlyCallable}var Ha=()=>e=>t=>e($l(t)?t():t);var Qa=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error;if(n.payload?.ignored||e.error(o.stack||o.message||o.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},Wa=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var Ka=()=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href}),Ga=()=>({referrer:"default",userAgent:"Node.js",location:"default"});function Ya(e,t){let r={...e},n,o=i=>(a,c)=>{let u=i(a,c);return n?n(u,c):u};return {get combinedReducer(){let i=To(Object.entries(t).filter(([a])=>!(a in r)).map(([a,c])=>[a,()=>c]));return o(lr({...i,...r}))},containsAll(i){return Object.keys(i).every(c=>c in r)},add(i){Object.keys(i).filter(a=>!(a in r)).forEach(a=>r[a]=i[a]);},addCrossReducer(i){n=i;}}}function Ja(e,t,r){var n,o,i;t===void 0&&(t=50),r===void 0&&(r={});var a=(n=r.isImmediate)!=null&&n,c=(o=r.callback)!=null&&o,u=r.maxWait,s=Date.now(),d=[];function m(){if(u!==void 0){var l=Date.now()-s;if(l+t>=u)return u-l}return t}var g=function(){var l=[].slice.call(arguments),h=this;return new Promise(function(b,C){var R=a&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,s=Date.now(),!a){var T=e.apply(h,l);c&&c(T),d.forEach(function(F){return (0, F.resolve)(T)}),d=[];}},m()),R){var A=e.apply(h,l);return c&&c(A),b(A)}d.push({resolve:b,reject:C});})};return g.cancel=function(l){i!==void 0&&clearTimeout(i),d.forEach(function(h){return (0, h.reject)(l)}),d=[];},g}function Xa(e,t){let r=0,n=Ja(()=>r=0,500);return o=>i=>async a=>{if(!(typeof a=="function"))return i(a);let u=await i(a);if(!zl(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let s=await Hl(t);o.dispatch(De({accessToken:s})),o.dispatch(a);}}function zl(e){return e?.error?.name===new et().name}async function Hl(e){try{return await e()}catch{return ""}}function Za({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return Ci({reducer:e,preloadedState:t,devTools:{stateSanitizer:i=>i.history?{...i,history:"<<OMIT>>"}:i,name:o,shouldHotReload:!1},middleware:i=>i({thunk:{extraArgument:n}}).prepend(...r).concat(Wa(n.logger))})}var Ql={configuration:Ct,version:ka};function Wl(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...o}=e.analytics??{},i={...o,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(ir())return t.info("Analytics disabled since doNotTrack is active."),{...i,enabled:!1};if(i.analyticsMode==="next"&&!o.trackingId)throw new oo('analytics.trackingId is required when analytics.analyticsMode="next"');return i}function es(e,t){let r=Kl(e,t),{accessToken:n,organizationId:o}=e.configuration,{organizationEndpoints:i}=e.configuration,a=i?.platform||e.configuration.platformUrl;Xl(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Jl(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Zl(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(De({accessToken:n,organizationId:o,platformUrl:a}));let c=Wl(e.configuration,r.logger);return c&&r.dispatch(st(c)),r}function Kl(e,t){let{reducers:r}=e,n=Ya({...Ql,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let o=t.logger,i=e.navigatorContextProvider??Oa()?Ka:Ga,a={...t,get relay(){return zt(u.state)},get navigatorContext(){return i()}},c=Gl(e,a,n),u={addReducers(s){n.containsAll(s)||(n.add(s),c.replaceReducer(n.combinedReducer));},dispatch:c.dispatch,subscribe:c.subscribe,enableAnalytics(){c.dispatch(ut());},disableAnalytics(){c.dispatch(ct());},get state(){return c.getState()},get relay(){return zt(this.state)},get navigatorContext(){return i()},logger:o,store:c};return u}function Gl(e,t,r){let{preloadedState:n,configuration:o}=e,i=o.name||"coveo-headless",a=Yl(e,t.logger);return Za({preloadedState:n,reducer:r.combinedReducer,middlewares:a,thunkExtraArguments:t,name:i})}function Yl(e,t){let{renewAccessToken:r}=e.configuration,n=Xa(t,r);return [Ha,n,Qa(t),Fa].concat(e.middlewares||[])}function Jl(e){return ye(e.organizationEndpoints)}function Xl(e){return !N(e.platformUrl)||N(e.organizationEndpoints?.platform)}function Zl(e){let{platform:t}=e.organizationEndpoints;if(ye(t))return !1;let r=cn(t);return r&&r.organizationId!==e.organizationId}var oo=class extends Error{constructor(t){super(t),this.name="InvalidEngineConfiguration";}};var us=Oe(cs());function ds(e){return (0, us.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function ls(e,t){let r=ym(e),n=xn,o=Sm(e);return {analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function ym(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function Sm(e){return e.preprocessRequest||rr}({organizationId:q,accessToken:q,platformUrl:new P({required:!1,emptyAllowed:!1}),name:new P({required:!1,emptyAllowed:!1}),analytics:new U({options:{required:!1},values:{enabled:new fe({required:!1}),originContext:new P({required:!1}),originLevel2:new P({required:!1}),originLevel3:new P({required:!1}),analyticsMode:new P({constrainTo:["legacy","next"],required:!1})}})});function ms(){return {organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:ar("searchuisamples")}}var vm={organizationId:q,accessToken:q,platformUrl:new P({required:!1,emptyAllowed:!1}),name:new P({required:!1,emptyAllowed:!1}),analytics:new U({options:{required:!1},values:{enabled:new fe({required:!1}),originContext:new P({required:!1}),originLevel2:new P({required:!1}),originLevel3:new P({required:!1}),analyticsMode:new P({constrainTo:["legacy"],required:!1})}}),searchHub:B,locale:B,timezone:B},ps=new M(vm);function fs(){return {...ms(),searchHub:"default"}}var bm={searchHub:Vr,productRecommendations:vt};function Cm(e){let t=ds(e.loggerOptions);wm(e.configuration,t);let r=Rm(e.configuration,t),n={...ls(e.configuration,t),apiClient:r},o={...e,reducers:bm},i=es(o,n),{searchHub:a,timezone:c,locale:u}=e.configuration;return i.dispatch(at({timezone:c,locale:u})),N(a)||i.dispatch(bt(a)),{...i,get state(){return i.state}}}function wm(e,t){try{ps.validate(e);}catch(r){throw t.error("Product Recommendation engine configuration error",r),r}}function Rm(e,t){return new cr({logger:t,preprocessRequest:e.preprocessRequest||rr,postprocessSearchResponseMiddleware:Go,postprocessFacetSearchResponseMiddleware:Yo,postprocessQuerySuggestResponseMiddleware:Jo})}var Am=new re({each:q,required:!0}),gs=(e,t)=>(_(e,q),tr(t)?_(t,q):_(t,Am),{payload:{contextKey:e,contextValue:t}}),Ge=O("context/set",e=>{for(let[t,r]of Object.entries(e))gs(t,r);return {payload:e}}),Ye=O("context/add",e=>gs(e.contextKey,e.contextValue)),Je=O("context/remove",e=>_(e,q));function hs(){return {contextValues:{}}}ce(hs(),e=>{e.addCase(Ge,(t,r)=>{t.contextValues=r.payload;}).addCase(Ye,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue;}).addCase(Je,(t,r)=>{delete t.contextValues[r.payload];}).addCase(Le.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues);});});var wt=O("dictionaryFieldContext/set",e=>{let t=new U({options:{required:!0}}),r=_(e,t).error;if(r)return {payload:e,error:r};let n=Object.values(e),o=new re({each:He}),i=_(n,o).error;return i?{payload:e,error:i}:{payload:e}}),Rt=O("dictionaryFieldContext/add",e=>{let t=new U({options:{required:!0},values:{field:He,key:He}});return _(e,t)}),At=O("dictionaryFieldContext/remove",e=>_(e,He));function ys(){return {contextValues:{}}}ce(ys(),e=>{e.addCase(wt,(t,r)=>{t.contextValues=r.payload;}).addCase(Rt,(t,r)=>{let{field:n,key:o}=r.payload;t.contextValues[n]=o;}).addCase(At,(t,r)=>{delete t.contextValues[r.payload];}).addCase(Le.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues);});});function Xe(e){let t,r=new Map,n=()=>r.size===0,o=i=>{try{let a=JSON.stringify(i),c=t!==a;return t=a,c}catch(a){return console.warn('Could not detect if state has changed, check the controller "get state method"',a),!0}};return {subscribe(i){i();let a=Symbol(),c;return n()&&(t=JSON.stringify(this.state),c=e.subscribe(()=>{o(this.state)&&r.forEach(u=>u());})),r.set(a,i),()=>{r.delete(a),n()&&c&&c();}},get state(){return {}}}}var Q={additionalFields:new re({required:!1,each:B}),skus:new re({required:!1,each:B}),maxNumberOfRecommendations:new Ve({required:!1,max:50,min:1,default:5})},xm=new M({id:q,...Q}),ee=(e,t={})=>{if(!Pm(e));let r=Xe(e),{dispatch:n}=e,o=()=>e.state,i=G(e,xm,t.options,"buildBaseProductRecommendationsList");return n(ht({id:i.id})),n(St({number:i.maxNumberOfRecommendations})),i.additionalFields&&n(yt({additionalFields:i.additionalFields})),i.skus&&n(We({skus:i.skus})),{...r,setSkus(a){n(We({skus:a}));},refresh(){n(_e());},get state(){let{skus:a,maxNumberOfRecommendations:c,recommendations:u,error:s,isLoading:d}=o().productRecommendations;return {skus:a,maxNumberOfRecommendations:c,recommendations:u,error:s,isLoading:d}}}};function Pm(e){return e.addReducers({productRecommendations:vt,configuration:Ct}),!0}var Em=new M({sku:new P({required:!0,emptyAllowed:!1}),maxNumberOfRecommendations:Q.maxNumberOfRecommendations,additionalFields:Q.additionalFields});function km(e,t){let r=G(e,Em,t.options,"buildFrequentlyBoughtTogetherList"),n=ee(e,{...t,options:{maxNumberOfRecommendations:r.maxNumberOfRecommendations,additionalFields:r.additionalFields,skus:[r.sku],id:"frequentBought"}}),{setSkus:o,...i}=n;return {...i,setSku(a){o([a]);},get state(){let{skus:a,...c}=n.state;return {...c,sku:a[0]}}}}new M({...Q});new M({...Q});new M({maxNumberOfRecommendations:Q.maxNumberOfRecommendations,additionalFields:Q.additionalFields});new M({maxNumberOfRecommendations:Q.maxNumberOfRecommendations,additionalFields:Q.additionalFields});new M({maxNumberOfRecommendations:Q.maxNumberOfRecommendations,additionalFields:Q.additionalFields});new M({values:new U({options:{required:!1}})});new M({...Q});new M({...Q});mo();/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

const AtomicProductRecommendations = /*@__PURE__*/ proxyCustomElement(class AtomicProductRecommendations extends HTMLElement {
    constructor() {
        super();
        this.__registerHost();
        this.__attachShadow();
        this.unsubscribe = () => { };
        this.state = undefined;
    }
    componentWillLoad() {
        const sampleConfiguration = fs();
        this.engine = Cm({
            configuration: {
                ...sampleConfiguration,
                searchHub: 'frequently_bought_recommendations',
            },
        });
        this.frequentlyBoughtTogether = km(this.engine, {
            options: {
                sku: 'abc',
            },
        });
        this.unsubscribe = this.frequentlyBoughtTogether.subscribe(() => this.updateState());
        this.frequentlyBoughtTogether.refresh();
    }
    disconnectedCallback() {
        this.unsubscribe();
    }
    updateState() {
        this.state = this.frequentlyBoughtTogether.state;
    }
    render() {
        return (h("div", { key: 'e6d6b54c75f4c22bc4695c36a2b1ca61ff305548' }, "FREQUENTLY BOUGHT TOGETHER:", h("ul", { key: 'dcafc685b0c2c1e08d2980d2ae787a197c7fe2df' }, this.state.recommendations.map((p) => (h("li", null, p.ec_name))))));
    }
}, [1, "atomic-frequently-bought-together", {
        "state": [32]
    }]);
function defineCustomElement$1() {
    if (typeof customElements === "undefined") {
        return;
    }
    const components = ["atomic-frequently-bought-together"];
    components.forEach(tagName => { switch (tagName) {
        case "atomic-frequently-bought-together":
            if (!customElements.get(tagName)) {
                customElements.define(tagName, AtomicProductRecommendations);
            }
            break;
    } });
}

const AtomicFrequentlyBoughtTogether = AtomicProductRecommendations;
const defineCustomElement = defineCustomElement$1;

export { AtomicFrequentlyBoughtTogether, defineCustomElement };

//# sourceMappingURL=atomic-frequently-bought-together.js.map