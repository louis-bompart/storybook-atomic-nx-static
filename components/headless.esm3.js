/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var QC=Object.create;var Ma=Object.defineProperty;var BC=Object.getOwnPropertyDescriptor;var _C=Object.getOwnPropertyNames;var UC=Object.getPrototypeOf,jC=Object.prototype.hasOwnProperty;var $C=(e,t,r)=>t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var GC=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ye=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zC=(e,t)=>{for(var r in t)Ma(e,r,{get:t[r],enumerable:!0});},HC=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _C(t))!jC.call(e,o)&&o!==r&&Ma(e,o,{get:()=>t[o],enumerable:!(n=BC(t,o))||n.enumerable});return e};var at=(e,t,r)=>(r=e!=null?QC(UC(e)):{},HC(t||!e||!e.__esModule?Ma(r,"default",{value:e,enumerable:!0}):r,e));var La=(e,t,r)=>$C(e,typeof t!="symbol"?t+"":t,r);var Sp=ye((LE,hp)=>{function ZC(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=tA(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var eA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function tA(e){let t=eA.indexOf(e);return t<0?void 0:t}hp.exports=ZC;});var Cp=ye((QE,yp)=>{function rA(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let o=0;o<n.length;o++)typeof n[o]>"u"?r+="=":r+=oA(n[o]);}return r}var nA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function oA(e){if(e>=0&&e<64)return nA[e]}yp.exports=rA;});var Rp=ye((BE,Ap)=>{var aA=Sp(),iA=Cp();Ap.exports={atob:aA,btoa:iA};});var Dp=ye((YE,qp)=>{var Lu=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!Lu)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Lu.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');qp.exports.AbortController=Lu.AbortController;});var Qp=ye((ok,Lp)=>{Lp.exports=fetch;});var Bp=ye(Bo=>{var Ha=Bo&&Bo.__assign||function(){return Ha=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);}return e},Ha.apply(this,arguments)};Object.defineProperty(Bo,"__esModule",{value:!0});var SA={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return !0},startingDelay:100,timeMultiple:2};function yA(e){var t=Ha(Ha({},SA),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}Bo.getSanitizedOptions=yA;});var _p=ye($u=>{Object.defineProperty($u,"__esModule",{value:!0});function CA(e){var t=Math.random()*e;return Math.round(t)}$u.fullJitter=CA;});var Up=ye(Gu=>{Object.defineProperty(Gu,"__esModule",{value:!0});function AA(e){return e}Gu.noJitter=AA;});var jp=ye(zu=>{Object.defineProperty(zu,"__esModule",{value:!0});var RA=_p(),FA=Up();function xA(e){switch(e.jitter){case"full":return RA.fullJitter;case"none":default:return FA.noJitter}}zu.JitterFactory=xA;});var Wu=ye(Hu=>{Object.defineProperty(Hu,"__esModule",{value:!0});var bA=jp(),vA=function(){function e(t){this.options=t,this.attempt=0;}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t;},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=bA.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();Hu.Delay=vA;});var $p=ye(sr=>{var IA=sr&&sr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o;}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a]);},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n);}}(),wA=sr&&sr.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a);})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(n.next(l));}catch(d){i(d);}}function u(l){try{c(n.throw(l));}catch(d){i(d);}}function c(l){l.done?a(l.value):o(l.value).then(s,u);}c((n=n.apply(e,t||[])).next());})},PA=sr&&sr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r);}catch(l){c=[6,l],o=0;}finally{n=a=0;}if(c[0]&5)throw c[1];return {value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(sr,"__esModule",{value:!0});var EA=Wu(),kA=function(e){IA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return wA(this,void 0,void 0,function(){return PA(this,function(r){return [2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(EA.Delay);sr.SkipFirstDelay=kA;});var Gp=ye(_o=>{var OA=_o&&_o.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o;}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a]);},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t;}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n);}}();Object.defineProperty(_o,"__esModule",{value:!0});var TA=Wu(),qA=function(e){OA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(TA.Delay);_o.AlwaysDelay=qA;});var zp=ye(Yu=>{Object.defineProperty(Yu,"__esModule",{value:!0});var DA=$p(),VA=Gp();function NA(e,t){var r=MA(e);return r.setAttemptNumber(t),r}Yu.DelayFactory=NA;function MA(e){return e.delayFirstAttempt?new VA.AlwaysDelay(e):new DA.SkipFirstDelay(e)}});var Hp=ye(an=>{var Ku=an&&an.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a);})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(n.next(l));}catch(d){i(d);}}function u(l){try{c(n.throw(l));}catch(d){i(d);}}function c(l){l.done?a(l.value):o(l.value).then(s,u);}c((n=n.apply(e,t||[])).next());})},Ju=an&&an.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r);}catch(l){c=[6,l],o=0;}finally{n=a=0;}if(c[0]&5)throw c[1];return {value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(an,"__esModule",{value:!0});var LA=Bp(),QA=zp();function BA(e,t){return t===void 0&&(t={}),Ku(this,void 0,void 0,function(){var r,n;return Ju(this,function(o){switch(o.label){case 0:return r=LA.getSanitizedOptions(t),n=new _A(e,r),[4,n.execute()];case 1:return [2,o.sent()]}})})}an.backOff=BA;var _A=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0;}return e.prototype.execute=function(){return Ku(this,void 0,void 0,function(){var t,r;return Ju(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return [3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return [2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return [3,6];case 6:return [3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Ku(this,void 0,void 0,function(){var t;return Ju(this,function(r){switch(r.label){case 0:return t=QA.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}();});var Ti=ye((Ul,jl)=>{(function(e,t){typeof Ul=="object"&&typeof jl<"u"?jl.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t();})(Ul,function(){var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",i="hour",s="day",u="week",c="month",l="quarter",d="year",m="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var O=["th","st","nd","rd"],P=U%100;return "["+U+(O[(P-20)%10]||O[P]||O[0])+"]"}},b=function(U,O,P){var N=String(U);return !N||N.length>=O?U:""+Array(O+1-N.length).join(P)+U},I={s:b,z:function(U){var O=-U.utcOffset(),P=Math.abs(O),N=Math.floor(P/60),E=P%60;return (O<=0?"+":"-")+b(N,2,"0")+":"+b(E,2,"0")},m:function U(O,P){if(O.date()<P.date())return -U(P,O);var N=12*(P.year()-O.year())+(P.month()-O.month()),E=O.clone().add(N,c),j=P-E<0,H=O.clone().add(N+(j?-1:1),c);return +(-(N+(P-E)/(j?E-H:H-E))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return {M:c,y:d,w:u,d:s,D:m,h:i,m:a,s:o,ms:n,Q:l}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},L="en",$={};$[L]=A;var te="$isDayjsObject",W=function(U){return U instanceof ke||!(!U||!U[te])},ne=function U(O,P,N){var E;if(!O)return L;if(typeof O=="string"){var j=O.toLowerCase();$[j]&&(E=j),P&&($[j]=P,E=j);var H=O.split("-");if(!E&&H.length>1)return U(H[0])}else {var ie=O.name;$[ie]=O,E=ie;}return !N&&E&&(L=E),E||!N&&L},Y=function(U,O){if(W(U))return U.clone();var P=typeof O=="object"?O:{};return P.date=U,P.args=arguments,new ke(P)},K=I;K.l=ne,K.i=W,K.w=function(U,O){return Y(U,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var ke=function(){function U(P){this.$L=ne(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[te]=!0;}var O=U.prototype;return O.parse=function(P){this.$d=function(N){var E=N.date,j=N.utc;if(E===null)return new Date(NaN);if(K.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var H=E.match(g);if(H){var ie=H[2]-1||0,he=(H[7]||"0").substring(0,3);return j?new Date(Date.UTC(H[1],ie,H[3]||1,H[4]||0,H[5]||0,H[6]||0,he)):new Date(H[1],ie,H[3]||1,H[4]||0,H[5]||0,H[6]||0,he)}}return new Date(E)}(P),this.init();},O.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds();},O.$utils=function(){return K},O.isValid=function(){return this.$d.toString()!==p},O.isSame=function(P,N){var E=Y(P);return this.startOf(N)<=E&&E<=this.endOf(N)},O.isAfter=function(P,N){return Y(P)<this.startOf(N)},O.isBefore=function(P,N){return this.endOf(N)<Y(P)},O.$g=function(P,N,E){return K.u(P)?this[N]:this.set(E,P)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(P,N){var E=this,j=!!K.u(N)||N,H=K.p(P),ie=function(mt,Ie){var Xe=K.w(E.$u?Date.UTC(E.$y,Ie,mt):new Date(E.$y,Ie,mt),E);return j?Xe:Xe.endOf(s)},he=function(mt,Ie){return K.w(E.toDate()[mt].apply(E.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(Ie)),E)},Re=this.$W,ve=this.$M,Ge=this.$D,Rr="set"+(this.$u?"UTC":"");switch(H){case d:return j?ie(1,0):ie(31,11);case c:return j?ie(1,ve):ie(0,ve+1);case u:var It=this.$locale().weekStart||0,nr=(Re<It?Re+7:Re)-It;return ie(j?Ge-nr:Ge+(6-nr),ve);case s:case m:return he(Rr+"Hours",0);case i:return he(Rr+"Minutes",1);case a:return he(Rr+"Seconds",2);case o:return he(Rr+"Milliseconds",3);default:return this.clone()}},O.endOf=function(P){return this.startOf(P,!1)},O.$set=function(P,N){var E,j=K.p(P),H="set"+(this.$u?"UTC":""),ie=(E={},E[s]=H+"Date",E[m]=H+"Date",E[c]=H+"Month",E[d]=H+"FullYear",E[i]=H+"Hours",E[a]=H+"Minutes",E[o]=H+"Seconds",E[n]=H+"Milliseconds",E)[j],he=j===s?this.$D+(N-this.$W):N;if(j===c||j===d){var Re=this.clone().set(m,1);Re.$d[ie](he),Re.init(),this.$d=Re.set(m,Math.min(this.$D,Re.daysInMonth())).$d;}else ie&&this.$d[ie](he);return this.init(),this},O.set=function(P,N){return this.clone().$set(P,N)},O.get=function(P){return this[K.p(P)]()},O.add=function(P,N){var E,j=this;P=Number(P);var H=K.p(N),ie=function(ve){var Ge=Y(j);return K.w(Ge.date(Ge.date()+Math.round(ve*P)),j)};if(H===c)return this.set(c,this.$M+P);if(H===d)return this.set(d,this.$y+P);if(H===s)return ie(1);if(H===u)return ie(7);var he=(E={},E[a]=t,E[i]=r,E[o]=e,E)[H]||1,Re=this.$d.getTime()+P*he;return K.w(Re,this)},O.subtract=function(P,N){return this.add(-1*P,N)},O.format=function(P){var N=this,E=this.$locale();if(!this.isValid())return E.invalidDate||p;var j=P||"YYYY-MM-DDTHH:mm:ssZ",H=K.z(this),ie=this.$H,he=this.$m,Re=this.$M,ve=E.weekdays,Ge=E.months,Rr=E.meridiem,It=function(Ie,Xe,or,Fr){return Ie&&(Ie[Xe]||Ie(N,j))||or[Xe].slice(0,Fr)},nr=function(Ie){return K.s(ie%12||12,Ie,"0")},mt=Rr||function(Ie,Xe,or){var Fr=Ie<12?"AM":"PM";return or?Fr.toLowerCase():Fr};return j.replace(C,function(Ie,Xe){return Xe||function(or){switch(or){case"YY":return String(N.$y).slice(-2);case"YYYY":return K.s(N.$y,4,"0");case"M":return Re+1;case"MM":return K.s(Re+1,2,"0");case"MMM":return It(E.monthsShort,Re,Ge,3);case"MMMM":return It(Ge,Re);case"D":return N.$D;case"DD":return K.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return It(E.weekdaysMin,N.$W,ve,2);case"ddd":return It(E.weekdaysShort,N.$W,ve,3);case"dddd":return ve[N.$W];case"H":return String(ie);case"HH":return K.s(ie,2,"0");case"h":return nr(1);case"hh":return nr(2);case"a":return mt(ie,he,!0);case"A":return mt(ie,he,!1);case"m":return String(he);case"mm":return K.s(he,2,"0");case"s":return String(N.$s);case"ss":return K.s(N.$s,2,"0");case"SSS":return K.s(N.$ms,3,"0");case"Z":return H}return null}(Ie)||H.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(P,N,E){var j,H=this,ie=K.p(N),he=Y(P),Re=(he.utcOffset()-this.utcOffset())*t,ve=this-he,Ge=function(){return K.m(H,he)};switch(ie){case d:j=Ge()/12;break;case c:j=Ge();break;case l:j=Ge()/3;break;case u:j=(ve-Re)/6048e5;break;case s:j=(ve-Re)/864e5;break;case i:j=ve/r;break;case a:j=ve/t;break;case o:j=ve/e;break;default:j=ve;}return E?j:K.a(j)},O.daysInMonth=function(){return this.endOf(c).$D},O.$locale=function(){return $[this.$L]},O.locale=function(P,N){if(!P)return this.$L;var E=this.clone(),j=ne(P,N,!0);return j&&(E.$L=j),E},O.clone=function(){return K.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},U}(),pt=ke.prototype;return Y.prototype=pt,[["$ms",n],["$s",o],["$m",a],["$H",i],["$W",s],["$M",c],["$y",d],["$D",m]].forEach(function(U){pt[U[1]]=function(O){return this.$g(O,U[0],U[1])};}),Y.extend=function(U,O){return U.$i||(U(O,ke,Y),U.$i=!0),Y},Y.locale=ne,Y.isDayjs=W,Y.unix=function(U){return Y(1e3*U)},Y.en=$[L],Y.Ls=$,Y.p={},Y});});var jg=ye(($l,Gl)=>{(function(e,t){typeof $l=="object"&&typeof Gl<"u"?Gl.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_quarterOfYear=t();})($l,function(){var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var a=o.add;o.add=function(s,u){return s=Number(s),this.$utils().p(u)===t?this.add(3*s,e):a.bind(this)(s,u)};var i=o.startOf;o.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===t){var d=this.quarter()-1;return l?this.month(3*d).startOf(e).startOf("day"):this.month(3*d+2).endOf(e).endOf("day")}return i.bind(this)(s,u)};}});});var $g=ye((zl,Hl)=>{(function(e,t){typeof zl=="object"&&typeof Hl<"u"?Hl.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_customParseFormat=t();})(zl,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},i=function(p){return (p=+p)+(p>68?1900:2e3)},s=function(p){return function(g){this[p]=+g;}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var C=g.match(/([+-]|\d\d)/g),A=60*C[1]+(+C[2]||0);return A===0?0:C[0]==="+"?-A:A}(p);}],c=function(p){var g=a[p];return g&&(g.indexOf?g:g.s.concat(g.f))},l=function(p,g){var C,A=a.meridiem;if(A){for(var b=1;b<=24;b+=1)if(p.indexOf(A(b,0,g))>-1){C=b>12;break}}else C=p===(g?"pm":"PM");return C},d={A:[o,function(p){this.afternoon=l(p,!1);}],a:[o,function(p){this.afternoon=l(p,!0);}],S:[/\d/,function(p){this.milliseconds=100*+p;}],SS:[r,function(p){this.milliseconds=10*+p;}],SSS:[/\d{3}/,function(p){this.milliseconds=+p;}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[o,function(p){var g=a.ordinal,C=p.match(/\d+/);if(this.day=C[0],g)for(var A=1;A<=31;A+=1)g(A).replace(/\[|\]/g,"")===p&&(this.day=A);}],M:[n,s("month")],MM:[r,s("month")],MMM:[o,function(p){var g=c("months"),C=(c("monthsShort")||g.map(function(A){return A.slice(0,3)})).indexOf(p)+1;if(C<1)throw new Error;this.month=C%12||C;}],MMMM:[o,function(p){var g=c("months").indexOf(p)+1;if(g<1)throw new Error;this.month=g%12||g;}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p);}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function m(p){var g,C;g=p,C=a&&a.formats;for(var A=(p=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ne,Y,K){var ke=K&&K.toUpperCase();return Y||C[K]||e[K]||C[ke].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(pt,U,O){return U||O.slice(1)})})).match(t),b=A.length,I=0;I<b;I+=1){var L=A[I],$=d[L],te=$&&$[0],W=$&&$[1];A[I]=W?{regex:te,parser:W}:L.replace(/^\[|\]$/g,"");}return function(ne){for(var Y={},K=0,ke=0;K<b;K+=1){var pt=A[K];if(typeof pt=="string")ke+=pt.length;else {var U=pt.regex,O=pt.parser,P=ne.slice(ke),N=U.exec(P)[0];O.call(Y,N),ne=ne.replace(N,"");}}return function(E){var j=E.afternoon;if(j!==void 0){var H=E.hours;j?H<12&&(E.hours+=12):H===12&&(E.hours=0),delete E.afternoon;}}(Y),Y}}return function(p,g,C){C.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var A=g.prototype,b=A.parse;A.parse=function(I){var L=I.date,$=I.utc,te=I.args;this.$u=$;var W=te[1];if(typeof W=="string"){var ne=te[2]===!0,Y=te[3]===!0,K=ne||Y,ke=te[2];Y&&(ke=te[2]),a=this.$locale(),!ne&&ke&&(a=C.Ls[ke]),this.$d=function(P,N,E){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*P);var j=m(N)(P),H=j.year,ie=j.month,he=j.day,Re=j.hours,ve=j.minutes,Ge=j.seconds,Rr=j.milliseconds,It=j.zone,nr=new Date,mt=he||(H||ie?1:nr.getDate()),Ie=H||nr.getFullYear(),Xe=0;H&&!ie||(Xe=ie>0?ie-1:nr.getMonth());var or=Re||0,Fr=ve||0,qu=Ge||0,Du=Rr||0;return It?new Date(Date.UTC(Ie,Xe,mt,or,Fr,qu,Du+60*It.offset*1e3)):E?new Date(Date.UTC(Ie,Xe,mt,or,Fr,qu,Du)):new Date(Ie,Xe,mt,or,Fr,qu,Du)}catch{return new Date("")}}(L,W,$),this.init(),ke&&ke!==!0&&(this.$L=this.locale(ke).$L),K&&L!=this.format(W)&&(this.$d=new Date("")),a={};}else if(W instanceof Array)for(var pt=W.length,U=1;U<=pt;U+=1){te[1]=W[U-1];var O=C.apply(this,te);if(O.isValid()){this.$d=O.$d,this.$L=O.$L,this.init();break}U===pt&&(this.$d=new Date(""));}else b.call(this,I);};}});});var Hf=ye((_Q,zf)=>{var Nb=/(^|; )Coveo-Pendragon=([^;]*)/;zf.exports=()=>Nb.exec(document.cookie)?.pop()||null;});var Wf=ye((fd,hd)=>{(function(e,t){typeof fd=="object"&&typeof hd<"u"?hd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_timezone=t();})(fd,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var a,i=function(l,d,m){m===void 0&&(m={});var p=new Date(l),g=function(C,A){A===void 0&&(A={});var b=A.timeZoneName||"short",I=C+"|"+b,L=t[I];return L||(L=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:C,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),t[I]=L),L}(d,m);return g.formatToParts(p)},s=function(l,d){for(var m=i(l,d),p=[],g=0;g<m.length;g+=1){var C=m[g],A=C.type,b=C.value,I=e[A];I>=0&&(p[I]=parseInt(b,10));}var L=p[3],$=L===24?0:L,te=p[0]+"-"+p[1]+"-"+p[2]+" "+$+":"+p[4]+":"+p[5]+":000",W=+l;return (o.utc(te).valueOf()-(W-=W%1e3))/6e4},u=n.prototype;u.tz=function(l,d){l===void 0&&(l=a);var m=this.utcOffset(),p=this.toDate(),g=p.toLocaleString("en-US",{timeZone:l}),C=Math.round((p-new Date(g))/1e3/60),A=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(p.getTimezoneOffset()/15)-C,!0);if(d){var b=A.utcOffset();A=A.add(m-b,"minute");}return A.$x.$timezone=l,A},u.offsetName=function(l){var d=this.$x.$timezone||o.tz.guess(),m=i(this.valueOf(),d,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return m&&m.value};var c=u.startOf;u.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return c.call(this,l,d);var m=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(m,l,d).tz(this.$x.$timezone,!0)},o.tz=function(l,d,m){var p=m&&d,g=m||d||a,C=s(+o(),g);if(typeof l!="string")return o(l).tz(g);var A=function($,te,W){var ne=$-60*te*1e3,Y=s(ne,W);if(te===Y)return [ne,te];var K=s(ne-=60*(Y-te)*1e3,W);return Y===K?[ne,Y]:[$-60*Math.min(Y,K)*1e3,Math.max(Y,K)]}(o.utc(l,p).valueOf(),C,g),b=A[0],I=A[1],L=o(b).utcOffset(I);return L.$x.$timezone=g,L},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(l){a=l;};}});});var Yf=ye((Sd,yd)=>{(function(e,t){typeof Sd=="object"&&typeof yd<"u"?yd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t();})(Sd,function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var i=o.prototype;a.utc=function(p){var g={date:p,utc:!0,args:arguments};return new o(g)},i.utc=function(p){var g=a(this.toDate(),{locale:this.$L,utc:!0});return p?g.add(this.utcOffset(),e):g},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p);};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds();}else u.call(this);};var c=i.utcOffset;i.utcOffset=function(p,g){var C=this.$utils().u;if(C(p))return this.$u?0:C(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(L){L===void 0&&(L="");var $=L.match(t);if(!$)return null;var te=(""+$[0]).match(r)||["-",0,0],W=te[0],ne=60*+te[1]+ +te[2];return ne===0?0:W==="+"?ne:-ne}(p),p===null))return this;var A=Math.abs(p)<=16?60*p:p,b=this;if(g)return b.$offset=A,b.$u=p===0,b;if(p!==0){var I=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(A+I,e)).$offset=A,b.$x.$localOffset=I;}else b=this.utc();return b};var l=i.format;i.format=function(p){var g=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,g)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return !!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var m=i.diff;i.diff=function(p,g,C){if(p&&this.$u===p.$u)return m.call(this,p,g,C);var A=this.local(),b=a(p).local();return m.call(A,b,g,C)};}});});var uh=ye((r_,ch)=>{function Yb(e){try{return JSON.stringify(e)}catch{return '"[Circular]"'}}ch.exports=Kb;function Kb(e,t,r){var n=r&&r.stringify||Yb,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var i=new Array(a);i[0]=n(e);for(var s=1;s<a;s++)i[s]=n(t[s]);return i.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-o,d=-1,m=e&&e.length||0,p=0;p<m;){if(e.charCodeAt(p)===37&&p+1<m){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=u||t[l]==null)break;d<p&&(c+=e.slice(d,p)),c+=Number(t[l]),d=p+2,p++;break;case 105:if(l>=u||t[l]==null)break;d<p&&(c+=e.slice(d,p)),c+=Math.floor(Number(t[l])),d=p+2,p++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;d<p&&(c+=e.slice(d,p));var g=typeof t[l];if(g==="string"){c+="'"+t[l]+"'",d=p+2,p++;break}if(g==="function"){c+=t[l].name||"<anonymous>",d=p+2,p++;break}c+=n(t[l]),d=p+2,p++;break;case 115:if(l>=u)break;d<p&&(c+=e.slice(d,p)),c+=String(t[l]),d=p+2,p++;break;case 37:d<p&&(c+=e.slice(d,p)),c+="%",d=p+2,p++,l--;break}++l;}++p;}return d===-1?e:(d<m&&(c+=e.slice(d)),c)}});var fh=ye((n_,Ts)=>{var lh=uh();Ts.exports=mr;var la=dv().console||{},Jb={mapHttpRequest:Es,mapHttpResponse:Es,wrapRequestSerializer:Fd,wrapResponseSerializer:Fd,wrapErrorSerializer:Fd,req:Es,res:Es,err:ph,errWithCause:ph};function ks(e,t){return e==="silent"?1/0:t.levels.values[e]}var vd=Symbol("pino.logFuncs"),xd=Symbol("pino.hierarchy"),Xb={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function dh(e,t){let r={logger:t,parent:e[xd]};t[xd]=r;}function Zb(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:la[o]||la[Xb[o]||"log"]||da;}),e[vd]=n;}function ev(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function mr(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||la;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=ev(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let i=Object.keys(e.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(C){r[C]=r;}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",c=Object.create(r);c.log||(c.log=da),Zb(c,s,r),dh({},c),Object.defineProperty(c,"levelVal",{get:d}),Object.defineProperty(c,"level",{get:m,set:p});let l={transmit:t,serialize:o,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:s,timestamp:cv(e)};c.levels=tv(e),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=da,c.serializers=n,c._serialize=o,c._stdErrSerialize=a,c.child=g,t&&(c._logEvent=bd());function d(){return ks(this.level,this)}function m(){return this._level}function p(C){if(C!=="silent"&&!this.levels.values[C])throw Error("unknown level "+C);this._level=C,yn(this,l,c,"error"),yn(this,l,c,"fatal"),yn(this,l,c,"warn"),yn(this,l,c,"info"),yn(this,l,c,"debug"),yn(this,l,c,"trace"),i.forEach(A=>{yn(this,l,c,A);});}function g(C,A){if(!C)throw new Error("missing bindings for child Pino");A=A||{},o&&C.serializers&&(A.serializers=C.serializers);let b=A.serializers;if(o&&b){var I=Object.assign({},n,b),L=e.browser.serialize===!0?Object.keys(I):o;delete C.serializers,Os([C],L,I,this._stdErrSerialize);}function $(W){this._childLevel=(W._childLevel|0)+1,this.bindings=C,I&&(this.serializers=I,this._serialize=L),t&&(this._logEvent=bd([].concat(W._logEvent.bindings,C)));}$.prototype=this;let te=new $(this);return dh(this,te),te.level=this.level,te}return c}function tv(e){let t=e.customLevels||{},r=Object.assign({},mr.levels.values,t),n=Object.assign({},mr.levels.labels,rv(t));return {values:r,labels:n}}function rv(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r;}),t}mr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};mr.stdSerializers=Jb;mr.stdTimeFunctions=Object.assign({},{nullTime:mh,epochTime:gh,unixTime:uv,isoTime:lv});function nv(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[xd];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function yn(e,t,r,n){if(Object.defineProperty(e,n,{value:ks(e.level,r)>ks(n,r)?da:r[vd][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===da)return;e[n]=av(e,t,r,n);let o=nv(e);o.length!==0&&(e[n]=ov(o,e[n]));}function ov(e,t){return function(){return t.apply(this,[...e,...arguments])}}function av(e,t,r,n){return function(o){return function(){let i=t.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===la?la:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(t.serialize&&!t.asObject&&Os(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?o.call(u,iv(this,n,s,i,t.formatters)):o.apply(u,s),t.transmit){let l=t.transmit.level||e._level,d=r.levels.values[l],m=r.levels.values[n];if(m<d)return;sv(this,{ts:i,methodLevel:n,methodValue:m,transmitLevel:l,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:ks(e._level,r)},s);}}}(e[vd][n])}function iv(e,t,r,n,o={}){let{level:a=()=>e.levels.values[t],log:i=m=>m}=o;e._serialize&&Os(r,e._serialize,e.serializers,e._stdErrSerialize);let s=r.slice(),u=s[0],c={};n&&(c.time=n),c.level=a(t,e.levels.values[t]);let l=(e._childLevel|0)+1;if(l<1&&(l=1),u!==null&&typeof u=="object"){for(;l--&&typeof s[0]=="object";)Object.assign(c,s.shift());u=s.length?lh(s.shift(),s):void 0;}else typeof u=="string"&&(u=lh(s.shift(),s));return u!==void 0&&(c.msg=u),i(c)}function Os(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=mr.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(let a in e[o])t&&t.indexOf(a)>-1&&a in r&&(e[o][a]=r[a](e[o][a]));}function sv(e,t,r){let n=t.send,o=t.ts,a=t.methodLevel,i=t.methodValue,s=t.val,u=e._logEvent.bindings;Os(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=i,n(a,e._logEvent,s),e._logEvent=bd(u);}function bd(e){return {ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function ph(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function cv(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?mh:gh}function Es(){return {}}function Fd(e){return e}function da(){}function mh(){return !1}function gh(){return Date.now()}function uv(){return Math.round(Date.now()/1e3)}function lv(){return new Date(Date.now()).toISOString()}function dv(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Ts.exports.default=mr;Ts.exports.pino=mr;});var Mo=()=>global.crypto,pp=()=>{typeof window<"u"||(Mo()||(global.crypto=GC("crypto")),!Mo().getRandomValues&&Mo().webcrypto&&(global.crypto.getRandomValues=Mo().webcrypto.getRandomValues.bind(Mo().webcrypto)));};var Ip={};zC(Ip,{escape:()=>En,getHighlightedSuggestion:()=>Nu,highlightString:()=>uA});function WC(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new ar(r)}var ar=class extends Error{constructor(e){super(e),this.name="SchemaValidationError";}},Z=class{constructor(e){this.definition=e;}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let a=this.definition[o].validate(r[o]);a&&n.push(`${o}: ${a}`);}if(n.length)throw WC(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r);}return e}},ue=class{constructor(e={}){this.baseConfig=e;}validate(e){return this.baseConfig.required&&T(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ir(e){return e===void 0}function YC(e){return e===null}function T(e){return ir(e)||YC(e)}var q=class{constructor(e={}){this.config=e,this.value=new ue(e);}validate(e){let t=this.value.validate(e);return t||(KC(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function KC(e){return ir(e)||mp(e)}function mp(e){return typeof e=="number"&&!isNaN(e)}var M=class{constructor(e={}){this.value=new ue(e);}validate(e){let t=this.value.validate(e);return t||(JC(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function JC(e){return ir(e)||gp(e)}function gp(e){return typeof e=="boolean"}var XC=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,R=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new ue(this.config);}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o}=this.config,a=this.value.validate(e);return a||(ir(e)?null:In(e)?!t&&!e.length?"value is an empty string.":r&&!XC.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function In(e){return Object.prototype.toString.call(e)==="[object String]"}var x=class{constructor(e={}){this.config={options:{required:!1},values:{},...e};}validate(e){if(ir(e))return this.config.options.required?"value is required and is currently undefined":null;if(!fp(e))return "value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&T(e[r]))return `value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],a=n.validate(o);a!==null&&(t+=" "+a);}return t===""?null:t}get default(){}get required(){return !!this.config.options.required}};function fp(e){return e!==void 0&&typeof e=="object"}var Q=class{constructor(e={}){this.config=e,this.value=new ue(this.config);}validate(e){if(!T(e)&&!Array.isArray(e))return "value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(T(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return `value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return `value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&T(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=" "+o);}),r===""?null:r}return null}validatePrimitiveValue(e,t){return gp(e)||In(e)||mp(e)||fp(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function wn(e){return Array.isArray(e)}var gt=class{constructor(e){this.config=e,this.value=new ue(e);}validate(e){let t=this.value.validate(e);return t!==null?t:ir(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var Fp=at(Rp()),Qa=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Ba(e){return Array.isArray(e)}function _a(e){return e.trim()===""}function xp(e,t){return [...e.reduce((r,n)=>{let o=t(n);return r.has(o)||r.set(o,n),r},new Map).values()]}function sA(e){return (typeof btoa<"u"?btoa:Fp.btoa)(encodeURI(e))}function Ua(e,t){let{[e]:r,...n}=t;return n}function Pn(e){return sA(JSON.stringify(e))}var cA=new Set(["1",1,"yes",!0]);function ja(){if(typeof navigator>"u"||typeof window>"u")return !1;let e=navigator,t=window;return [e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>cA.has(r))}function bp(e){let t={};for(let[r,n]of e)t[r]=n;return t}function vp(e,t,r){return clearTimeout(t),setTimeout(e,r)}function Lo(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function uA(e){if(_a(e.openingDelimiter)||_a(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(T(e.content)||_a(e.content))return e.content;if(e.highlights.length===0)return En(e.content);let t=e.content.length,r="",n=0;for(let o=0;o<e.highlights.length;o++){let a=e.highlights[o],i=a.offset,s=i+a.length;if(s>t)break;r+=En(e.content.slice(n,i)),r+=e.openingDelimiter,r+=En(e.content.slice(i,s)),r+=e.closingDelimiter,n=s;}return n!==t&&(r+=En(e.content.slice(n))),r}function Nu(e,t){return e=En(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,o,a)=>n?Vu(n,t.notMatchDelimiters):o?Vu(o,t.exactMatchDelimiters):a?Vu(a,t.correctionDelimiters):r)}function Vu(e,t){return t?t.open+e+t.close:e}function En(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return n.test(e)?e.replace(o,a=>t[a]):e}async function Pp(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value);}function Ep(e){let t,r,n,o=!1;return function(i){t===void 0?(t=i,r=0,n=-1):t=lA(t,i);let s=t.length,u=0;for(;r<s;){o&&(t[r]===10&&(u=++r),o=!1);let c=-1;for(;r<s&&c===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:o=!0;case 10:c=r;break}if(c===-1)break;e(t.subarray(u,c),n),u=r,n=-1;}u===s?t=void 0:u!==0&&(t=t.subarray(u),r-=u);}}function kp(e,t,r){let n=wp(),o=new TextDecoder;return function(i,s){if(i.length===0)r?.(n),n=wp();else if(s>0){let u=o.decode(i.subarray(0,s)),c=s+(i[s+1]===32?2:1),l=o.decode(i.subarray(c));switch(u){case"data":n.data=n.data?n.data+`
`+l:l;break;case"event":n.event=l;break;case"id":e(n.id=l);break;case"retry":let d=parseInt(l,10);isNaN(d)||t(n.retry=d);break}}}}function lA(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function wp(){return {data:"",event:"",id:"",retry:void 0}}var dA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},$a="text/event-stream",pA=1e3,Op="last-event-id";function Tp(){}function Mu(e,t){var{signal:r,headers:n,onopen:o,onmessage:a,onclose:i,onerror:s,openWhenHidden:u,fetch:c}=t,l=dA(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,m)=>{let p=Object.assign({},n);p.accept||(p.accept=$a);let g;function C(){g?.abort(),document.hidden||te();}!u&&Tp()&&document.addEventListener("visibilitychange",C);let A=pA,b=0;function I(){Tp()&&document.removeEventListener("visibilitychange",C),clearTimeout(b),g?.abort();}r?.addEventListener("abort",()=>{I(),d();});let L=c??L,$=o??mA;async function te(){var W;g=typeof AbortController>"u"?null:new AbortController;try{let ne=await L(e,Object.assign(Object.assign({},l),{headers:p,signal:g?.signal}));await $(ne),await Pp(ne.body,Ep(kp(Y=>{Y?p[Op]=Y:delete p[Op];},Y=>{A=Y;},a))),i?.(),I(),d();}catch(ne){if(!g?.signal.aborted)try{let Y=(W=s?.(ne))!==null&&W!==void 0?W:A;clearTimeout(b),b=setTimeout(te,Y);}catch(Y){I(),m(Y);}}}te();})}function mA(e){let t=e.headers.get("content-type");if(!t?.startsWith($a))throw new Error(`Expected content-type to be ${$a}, Actual: ${t}`)}function Qu(){if(typeof window>"u"){let{AbortController:e}=Dp();return new e}return typeof AbortController>"u"?null:new AbortController}var on=class{constructor(t){this._params={};this._basePath=t;}addParam(t,r){this._params={...this.params,[t]:r};}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},Vp=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Np=(e,t)=>{let r=Bu(e);return r&&r.organizationId===t?r:null},Bu=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};var gA=(e,t,r)=>new on(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,Mp=3,fA=5e3,hA="text/event-stream",ju=1,_u=class extends Error{},Qo=class extends Error{constructor(r){super(r.message);this.payload=r;}},Uu=class{constructor(){this.timeouts=new Set;}add(t){this.timeouts.add(t);}remove(t){clearTimeout(t),this.timeouts.delete(t);}isActive(t){return this.timeouts.has(t)}},Ga=class{constructor(t){this.logger=t.logger;}streamGeneratedAnswer(t,r){let{url:n,organizationId:o,streamId:a,accessToken:i}=t,{write:s,abort:u,close:c,resetAnswer:l}=r,d=new Uu;if(!a){this.logger.error("No stream ID found");return}let m=0,p,g=()=>{p&&!d.isActive(p)&&(A?.abort(),l(),b());},C=()=>{d.remove(p),p=vp(g,p,fA),d.add(p);},A=Qu(),b=()=>Mu(gA(n,o,a),{method:"GET",fetch,headers:{Authorization:`Bearer ${i}`,accept:"*/*"},openWhenHidden:!0,signal:A?.signal,async onopen(I){if(I.ok&&I.headers.get("content-type")===hA)return;throw I.status>=400&&I.status<500&&I.status!==429?new Qo({message:"Error opening stream",code:I.status}):new _u},onmessage:I=>{if(A?.signal.aborted)return;let L=JSON.parse(I.data);if(L.finishReason==="ERROR"){d.remove(p),A?.abort(),u({message:L.errorMessage,code:L.statusCode});return}s(L),m=0,L.finishReason==="COMPLETED"?(d.remove(p),c()):C();},onerror:I=>{if(!A?.signal.aborted){if(d.remove(p),I instanceof Qo)throw A?.abort(),u(I),I;if(++m>Mp){this.logger.info("Maximum retry exceeded.");let L={message:"Failed to complete stream.",code:ju};throw A?.abort(),u(L),new Qo(L)}this.logger.info(`Retrying...(${m}/${Mp})`),l();}}});return b(),A}};var za=e=>e;var Jp=at(Qp()),Xp=at(Hp());var kn=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired.";}},sn=class extends Error{constructor(t,r){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r??0;}};function Wp(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`);}return t.join("&")}function Yp(e){return typeof e!="object"||!e?!1:Object.values(e).every(UA)}function UA(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Kp(e){return e===429}var wt=class e{static async call(t){let r=jA(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:a,...i}=o,s=async()=>{let u=await(0, Jp.default)(a,i);if(Kp(u.status))throw u;return u};try{let u=await(0, Xp.backOff)(s,{retry:c=>{let l=c&&Kp(c.status);return l&&n.info("Platform retrying request"),l}});if(u.status===419)throw n.info("Platform renewing token"),new kn;if(u.status===404)throw new sn(a,u.status);return n.info({response:u,requestInfo:o},"Platform response"),u}catch(u){return u.message==="Failed to fetch"?new sn(a):u}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:a,requestMetadata:i}=r,{signal:s,...u}=t,c=Lo(u);try{let l=await o(t,n,i);return {...t,...l}}catch(l){a.error(l,"Platform request preprocessing failed. Returning default request options.");}return c}};function Zp(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return `https://${e}${r}${n}.cloud.coveo.com`}function Wa(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,o=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,i=`https://${e}.admin.org${r}.coveo.com`;return {platform:n,analytics:o,search:a,admin:i}}function Xu(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:Zp("platform",e)}function em(e){return Zp("analytics",e)}function jA(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:a,signal:i}=e,s=e.method==="POST"||e.method==="PUT",u=$A(n,o);return {url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${a}`,...e.headers},...s&&{body:u},signal:i}}function $A(e,t){return t==="application/x-www-form-urlencoded"?Yp(e)?Wp(e):"":JSON.stringify(e)}function On(){return {answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function we(){return {response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:On(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:On(),extendedResults:{}}}function Ya(e){let{url:t,accessToken:r,organizationId:n,authentication:o,...a}=e;return a}var tm=(e,t)=>{let r=new on(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href};function HA(e){return {statusCode:e.statusCode,type:e.name,message:e.message}}function WA(e){return {statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function cn(e,t){if(t&&e.name==="AbortError")return {error:WA(e)};if(e instanceof sn)return {error:HA(e)};throw e}var xr=e=>e.success!==void 0,le=e=>e.error!==void 0;function rm(e){return e.results!==void 0}function nm(e){let t=On();return T(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}var Zu=(e,t)=>`${e.url}/rest/organizations/${e.organizationId}/insight/v1/configs/${e.insightId}${t??""}`,un=(e,t,r,n)=>{YA(e);let o=Zu(e,n);return {accessToken:e.accessToken,method:t,contentType:r,url:o,origin:"insightApiFetch"}},Uo=e=>{let{insightId:t,...r}=Ya(e);return r},YA=e=>{if(!e.url)throw new Error("The 'url' attribute must contain a valid platform URL.");if(!e.organizationId)throw new Error("The 'organizationId' attribute must contain a valid organization ID.");if(!e.accessToken)throw new Error("The 'accessToken' attribute must contain a valid platform access token.");if(!e.insightId)throw new Error("The 'insightId' attribute must contain a valid Insight Panel configuration ID.")};var om=e=>({...un(e,"GET","application/json","/interface"),requestParams:{}});var am=e=>({...un(e,"POST","application/json","/search"),requestParams:Uo(e)}),im=e=>({...un(e,"POST","application/json","/querysuggest"),requestParams:Uo(e)});var sm=e=>{let t=Uo(e);return {...un(e,"POST","application/json","/useractions"),requestParams:{ticketCreationDate:t.ticketCreationDate,numberSessionsBefore:t.numberSessionsBefore??50,numberSessionsAfter:t.numberSessionsAfter??50,maximumSessionInactivityMinutes:t.maximumSessionInactivityMinutes??30,excludedCustomActions:t.excludedCustomActions??[]}}};var Ka=class{constructor(t){this.options=t;}async getInterface(t){let r=await wt.call({...om(t),...this.options});if(r instanceof Error)return cn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}async query(t,r){let n=await wt.call({...am(t),requestMetadata:{method:"search",origin:r?.origin},...this.options});if(n instanceof Error)return cn(n);let o=await n.json();return rm(o)&&(o=nm(o)),n.ok?{success:o}:{error:o}}async querySuggest(t){let r=await wt.call({...im(t),...this.options});if(r instanceof Error)return cn(r);let n=await r.json();return n.completions?{success:n}:{error:n}}async userActions(t){let r=await wt.call({...sm(t),...this.options});if(r instanceof Error)return cn(r);let n=await r.json();return r.ok?{success:n}:{error:n}}};var F=new R({required:!0,emptyAllowed:!1}),ee=new R({required:!1,emptyAllowed:!1}),de=new R({required:!0,emptyAllowed:!0}),cm=new R({required:!1,emptyAllowed:!0}),Ja=new Q({each:F,required:!0}),um=new R({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Ze=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),it=(e,t)=>{if("required"in t)return {payload:new Z({value:t}).validate({value:e}).value};let o=new x({options:{required:!0},values:t}).validate(e);if(o)throw new ar(o);return {payload:e}},S=(e,t)=>{try{return it(e,t)}catch(r){return {payload:e,error:Ze(r)}}},Pt=(e,t,r,n)=>{let o=`Check the initialState of ${n}`;return lm(e,t,r,o,"Controller initialization error")},Pe=(e,t,r,n)=>{let o=`Check the options of ${n}`;return lm(e,t,r,o,"Controller initialization error")},lm=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,o),a}};function Oe(e){return `Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var KA=typeof Symbol=="function"&&Symbol.observable||"@@observable",dm=KA,el=()=>Math.random().toString(36).substring(7).split("").join("."),JA={INIT:`@@redux/INIT${el()}`,REPLACE:`@@redux/REPLACE${el()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${el()}`},Xa=JA;function Za(e){if(typeof e!="object"||e===null)return !1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tl(e,t,r){if(typeof e!="function")throw new Error(Oe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Oe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Oe(1));return r(tl)(e,t)}let n=e,o=t,a=new Map,i=a,s=0,u=!1;function c(){i===a&&(i=new Map,a.forEach((A,b)=>{i.set(b,A);}));}function l(){if(u)throw new Error(Oe(3));return o}function d(A){if(typeof A!="function")throw new Error(Oe(4));if(u)throw new Error(Oe(5));let b=!0;c();let I=s++;return i.set(I,A),function(){if(b){if(u)throw new Error(Oe(6));b=!1,c(),i.delete(I),a=null;}}}function m(A){if(!Za(A))throw new Error(Oe(7));if(typeof A.type>"u")throw new Error(Oe(8));if(typeof A.type!="string")throw new Error(Oe(17));if(u)throw new Error(Oe(9));try{u=!0,o=n(o,A);}finally{u=!1;}return (a=i).forEach(I=>{I();}),A}function p(A){if(typeof A!="function")throw new Error(Oe(10));n=A,m({type:Xa.REPLACE});}function g(){let A=d;return {subscribe(b){if(typeof b!="object"||b===null)throw new Error(Oe(11));function I(){let $=b;$.next&&$.next(l());}return I(),{unsubscribe:A(I)}},[dm](){return this}}}return m({type:Xa.INIT}),{dispatch:m,subscribe:d,getState:l,replaceReducer:p,[dm]:g}}function XA(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:Xa.INIT})>"u")throw new Error(Oe(12));if(typeof r(void 0,{type:Xa.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Oe(13))});}function ei(e){let t=Object.keys(e),r={};for(let i=0;i<t.length;i++){let s=t[i];typeof e[s]=="function"&&(r[s]=e[s]);}let n=Object.keys(r),a;try{XA(r);}catch(i){a=i;}return function(s={},u){if(a)throw a;let c=!1,l={};for(let d=0;d<n.length;d++){let m=n[d],p=r[m],g=s[m],C=p(g,u);if(typeof C>"u"){throw new Error(Oe(14))}l[m]=C,c=c||C!==g;}return c=c||n.length!==Object.keys(s).length,c?l:s}}function Tn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function pm(...e){return t=>(r,n)=>{let o=t(r,n),a=()=>{throw new Error(Oe(15))},i={getState:o.getState,dispatch:(u,...c)=>a(u,...c)},s=e.map(u=>u(i));return a=Tn(...s)(o.dispatch),{...o,dispatch:a}}}function mm(e){return Za(e)&&"type"in e&&typeof e.type=="string"}var Cm=Symbol.for("immer-nothing"),gm=Symbol.for("immer-draftable"),et=Symbol.for("immer-state");function ft(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var qn=Object.getPrototypeOf;function Et(e){return !!e&&!!e[et]}function ht(e){return e?Am(e)||Array.isArray(e)||!!e[gm]||!!e.constructor?.[gm]||oi(e)||ai(e):!1}var ZA=Object.prototype.constructor.toString();function Am(e){if(!e||typeof e!="object")return !1;let t=qn(e);if(t===null)return !0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===ZA}function jo(e,t){ni(e)===0?Object.entries(e).forEach(([r,n])=>{t(r,n,e);}):e.forEach((r,n)=>t(n,r,e));}function ni(e){let t=e[et];return t?t.type_:Array.isArray(e)?1:oi(e)?2:ai(e)?3:0}function ol(e,t){return ni(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Rm(e,t,r){let n=ni(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r;}function eR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function oi(e){return e instanceof Map}function ai(e){return e instanceof Set}function ln(e){return e.copy_||e.base_}function al(e,t){if(oi(e))return new Map(e);if(ai(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Am(e))return qn(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[et];let n=Reflect.ownKeys(r);for(let o=0;o<n.length;o++){let a=n[o],i=r[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]});}return Object.create(qn(e),r)}function ll(e,t=!1){return ii(e)||Et(e)||!ht(e)||(ni(e)>1&&(e.set=e.add=e.clear=e.delete=tR),Object.freeze(e),t&&jo(e,(r,n)=>ll(n,!0))),e}function tR(){ft(2);}function ii(e){return Object.isFrozen(e)}var rR={};function dn(e){let t=rR[e];return t||ft(0,e),t}var $o;function Fm(){return $o}function nR(e,t){return {drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fm(e,t){t&&(dn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t);}function il(e){sl(e),e.drafts_.forEach(oR),e.drafts_=null;}function sl(e){e===$o&&($o=e.parent_);}function hm(e){return $o=nR($o,e)}function oR(e){let t=e[et];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0;}function Sm(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[et].modified_&&(il(t),ft(4)),ht(e)&&(e=ti(t,e),t.parent_||ri(t,e)),t.patches_&&dn("Patches").generateReplacementPatches_(r[et].base_,e,t.patches_,t.inversePatches_)):e=ti(t,r,[]),il(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Cm?e:void 0}function ti(e,t,r){if(ii(t))return t;let n=t[et];if(!n)return jo(t,(o,a)=>ym(e,n,t,o,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return ri(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,a=o,i=!1;n.type_===3&&(a=new Set(o),o.clear(),i=!0),jo(a,(s,u)=>ym(e,n,o,s,u,r,i)),ri(e,o,!1),r&&e.patches_&&dn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_);}return n.copy_}function ym(e,t,r,n,o,a,i){if(Et(o)){let s=a&&t&&t.type_!==3&&!ol(t.assigned_,n)?a.concat(n):void 0,u=ti(e,o,s);if(Rm(r,n,u),Et(u))e.canAutoFreeze_=!1;else return}else i&&r.add(o);if(ht(o)&&!ii(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ti(e,o),(!t||!t.scope_.parent_)&&ri(e,o);}}function ri(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ll(t,r);}function aR(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Fm(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=dl;r&&(o=[n],a=Go);let{revoke:i,proxy:s}=Proxy.revocable(o,a);return n.draft_=s,n.revoke_=i,s}var dl={get(e,t){if(t===et)return e;let r=ln(e);if(!ol(r,t))return iR(e,r,t);let n=r[t];return e.finalized_||!ht(n)?n:n===rl(e.base_,t)?(nl(e),e.copy_[t]=ul(n,e)):n},has(e,t){return t in ln(e)},ownKeys(e){return Reflect.ownKeys(ln(e))},set(e,t,r){let n=xm(ln(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=rl(ln(e),t),a=o?.[et];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(eR(r,o)&&(r!==void 0||ol(e.base_,t)))return !0;nl(e),cl(e);}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rl(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,nl(e),cl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=ln(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ft(11);},getPrototypeOf(e){return qn(e.base_)},setPrototypeOf(){ft(12);}},Go={};jo(dl,(e,t)=>{Go[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)};});Go.deleteProperty=function(e,t){return Go.set.call(this,e,t,void 0)};Go.set=function(e,t,r){return dl.set.call(this,e[0],t,r,e[0])};function rl(e,t){let r=e[et];return (r?ln(r):e)[t]}function iR(e,t,r){let n=xm(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function xm(e,t){if(!(t in e))return;let r=qn(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=qn(r);}}function cl(e){e.modified_||(e.modified_=!0,e.parent_&&cl(e.parent_));}function nl(e){e.copy_||(e.copy_=al(e.base_,e.scope_.immer_.useStrictShallowCopy_));}var sR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let i=this;return function(u=a,...c){return i.produce(u,l=>r.call(this,l,...c))}}typeof r!="function"&&ft(6),n!==void 0&&typeof n!="function"&&ft(7);let o;if(ht(t)){let a=hm(this),i=ul(t,void 0),s=!0;try{o=r(i),s=!1;}finally{s?il(a):sl(a);}return fm(a,n),Sm(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===Cm&&(o=void 0),this.autoFreeze_&&ll(o,!0),n){let a=[],i=[];dn("Patches").generateReplacementPatches_(t,o,a,i),n(a,i);}return o}else ft(1,t);},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return (i,...s)=>this.produceWithPatches(i,u=>t(u,...s));let n,o;return [this.produce(t,r,(i,s)=>{n=i,o=s;}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy);}createDraft(e){ht(e)||ft(8),Et(e)&&(e=pl(e));let t=hm(this),r=ul(e,void 0);return r[et].isManual_=!0,sl(t),r}finishDraft(e,t){let r=e&&e[et];(!r||!r.isManual_)&&ft(9);let{scope_:n}=r;return fm(n,t),Sm(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e;}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e;}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=dn("Patches").applyPatches_;return Et(e)?n(e,t):this.produce(e,o=>n(o,t))}};function ul(e,t){let r=oi(e)?dn("MapSet").proxyMap_(e,t):ai(e)?dn("MapSet").proxySet_(e,t):aR(e,t);return (t?t.scope_:Fm()).drafts_.push(r),r}function pl(e){return Et(e)||ft(10,e),bm(e)}function bm(e){if(!ht(e)||ii(e))return e;let t=e[et],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=al(e,t.scope_.immer_.useStrictShallowCopy_);}else r=al(e,!0);return jo(r,(n,o)=>{Rm(r,n,bm(o));}),t&&(t.finalized_=!1),r}var tt=new sR,si=tt.produce;tt.produceWithPatches.bind(tt);tt.setAutoFreeze.bind(tt);tt.setUseStrictShallowCopy.bind(tt);tt.applyPatches.bind(tt);tt.createDraft.bind(tt);tt.finishDraft.bind(tt);function cR(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function uR(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function lR(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var vm=e=>Array.isArray(e)?e:[e];function dR(e){let t=Array.isArray(e[0])?e[0]:e;return lR(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function pR(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var mR=class{constructor(e){this.value=e;}deref(){return this.value}},gR=typeof WeakRef<"u"?WeakRef:mR,fR=0,Im=1;function ci(){return {s:fR,v:void 0,o:null,p:null}}function zo(e,t={}){let r=ci(),{resultEqualityCheck:n}=t,o,a=0;function i(){let s=r,{length:u}=arguments;for(let d=0,m=u;d<m;d++){let p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=s.o;g===null&&(s.o=g=new WeakMap);let C=g.get(p);C===void 0?(s=ci(),g.set(p,s)):s=C;}else {let g=s.p;g===null&&(s.p=g=new Map);let C=g.get(p);C===void 0?(s=ci(),g.set(p,s)):s=C;}}let c=s,l;if(s.s===Im?l=s.v:(l=e.apply(null,arguments),a++),c.s=Im,n){let d=o?.deref?.()??o;d!=null&&n(d,l)&&(l=d,a!==0&&a--),o=typeof l=="object"&&l!==null||typeof l=="function"?new gR(l):l;}return c.v=l,l}return i.clearCache=()=>{r=ci(),i.resetResultsCount();},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0;},i}function ui(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let a=0,i=0,s,u={},c=o.pop();typeof c=="object"&&(u=c,c=o.pop()),cR(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);let l={...r,...u},{memoize:d,memoizeOptions:m=[],argsMemoize:p=zo,argsMemoizeOptions:g=[],devModeChecks:C={}}=l,A=vm(m),b=vm(g),I=dR(o),L=d(function(){return a++,c.apply(null,arguments)},...A),te=p(function(){i++;let ne=pR(I,arguments);return s=L.apply(null,ne),s},...b);return Object.assign(te,{resultFunc:c,memoizedResultFunc:L,dependencies:I,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0;},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0;},memoize:d,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var se=ui(zo),hR=Object.assign((e,t=se)=>{uR(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,s,u)=>(i[r[u]]=s,i),{}))},{withTypes:()=>hR});function wm(e){return ({dispatch:r,getState:n})=>o=>a=>typeof a=="function"?a(r,n,e):o(a)}var Pm=wm(),Em=wm;var SR=(...e)=>{let t=ui(...e),r=Object.assign((...n)=>{let o=t(...n),a=(i,...s)=>o(Et(i)?pl(i):i,...s);return Object.assign(a,o),a},{withTypes:()=>r});return r};SR(zo);var yR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tn:Tn.apply(null,arguments)},CR=e=>e&&typeof e.match=="function";function h(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(ze(0));return {type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return {type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>mm(n)&&n.type===e,r}var Tm=class Ho extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ho.prototype);}static get[Symbol.species](){return Ho}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ho(...t[0].concat(this)):new Ho(...t.concat(this))}};function km(e){return ht(e)?si(e,()=>{}):e}function AR(e){return typeof e=="boolean"}var RR=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=t??{},i=new Tm;return r&&(AR(r)?i.push(Pm):i.push(Em(r.extraArgument))),i},FR="RTK_autoBatch";var qm=e=>t=>{setTimeout(t,e);},xR=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qm(10),bR=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,a=!1,i=!1,s=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?xR:e.type==="callback"?e.queueNotification:qm(e.timeout),c=()=>{i=!1,a&&(a=!1,s.forEach(l=>l()));};return Object.assign({},n,{subscribe(l){let d=()=>o&&l(),m=n.subscribe(d);return s.add(l),()=>{m(),s.delete(l);}},dispatch(l){try{return o=!l?.meta?.[FR],a=!o,a&&(i||(i=!0,u(c))),n.dispatch(l)}finally{o=!0;}}})},vR=e=>function(r){let{autoBatch:n=!0}=r??{},o=new Tm(e);return n&&o.push(bR(typeof n=="object"?n:void 0)),o},br=!0;function Dm(e){let t=RR(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{},s;if(typeof r=="function")s=r;else if(Za(r))s=ei(r);else throw new Error(ze(1));let u;if(typeof n=="function"){if(u=n(t),!br);}else u=t();let c=Tn;o&&(c=yR({trace:!br,...typeof o=="object"&&o}));let l=pm(...u),d=vR(l);let m=typeof i=="function"?i(d):d();let p=c(...m);return tl(s,a,p)}function IR(e){let t={},r=[],n,o={addCase(a,i){let s=typeof a=="string"?a:a.type;if(!s)throw new Error(ze(28));if(s in t)throw new Error(ze(29));return t[s]=i,o},addMatcher(a,i){return r.push({matcher:a,reducer:i}),o},addDefaultCase(a){return n=a,o}};return e(o),[t,r,n]}function wR(e){return typeof e=="function"}function B(e,t){let[r,n,o]=IR(t),a;if(wR(e))a=()=>km(e());else {let s=km(e);a=()=>s;}function i(s=a(),u){let c=[r[u.type],...n.filter(({matcher:l})=>l(u)).map(({reducer:l})=>l)];return c.filter(l=>!!l).length===0&&(c=[o]),c.reduce((l,d)=>{if(d)if(Et(l)){let p=d(l,u);return p===void 0?l:p}else {if(ht(l))return si(l,m=>d(m,u));{let m=d(l,u);if(m===void 0){if(l===null)return l;throw new Error(ze(9))}return m}}return l},s)}return i.getInitialState=a,i}var PR="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vm=(e=21)=>{let t="",r=e;for(;r--;)t+=PR[Math.random()*64|0];return t},ER=(e,t)=>CR(e)?e.match(t):e(t);function kR(...e){return t=>e.some(r=>ER(r,t))}var OR=["name","message","stack","code"],ml=class{constructor(e,t){La(this,"_type");this.payload=e,this.meta=t;}},Om=class{constructor(e,t){La(this,"_type");this.payload=e,this.meta=t;}},TR=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of OR)typeof e[r]=="string"&&(t[r]=e[r]);return t}return {message:String(e)}},k=(()=>{function e(t,r,n){let o=h(t+"/fulfilled",(u,c,l,d)=>({payload:u,meta:{...d||{},arg:l,requestId:c,requestStatus:"fulfilled"}})),a=h(t+"/pending",(u,c,l)=>({payload:void 0,meta:{...l||{},arg:c,requestId:u,requestStatus:"pending"}})),i=h(t+"/rejected",(u,c,l,d,m)=>({payload:d,error:(n&&n.serializeError||TR)(u||"Rejected"),meta:{...m||{},arg:l,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"}}));function s(u){return (c,l,d)=>{let m=n?.idGenerator?n.idGenerator(u):Vm(),p=new AbortController,g,C;function A(I){C=I,p.abort();}let b=async function(){let I;try{let $=n?.condition?.(u,{getState:l,extra:d});if(DR($)&&($=await $),$===!1||p.signal.aborted)throw {name:"ConditionError",message:"Aborted due to condition callback returning false."};let te=new Promise((W,ne)=>{g=()=>{ne({name:"AbortError",message:C||"Aborted"});},p.signal.addEventListener("abort",g);});c(a(m,u,n?.getPendingMeta?.({requestId:m,arg:u},{getState:l,extra:d}))),I=await Promise.race([te,Promise.resolve(r(u,{dispatch:c,getState:l,extra:d,requestId:m,signal:p.signal,abort:A,rejectWithValue:(W,ne)=>new ml(W,ne),fulfillWithValue:(W,ne)=>new Om(W,ne)})).then(W=>{if(W instanceof ml)throw W;return W instanceof Om?o(W.payload,m,u,W.meta):o(W,m,u)})]);}catch($){I=$ instanceof ml?i(null,m,u,$.payload,$.meta):i($,m,u);}finally{g&&p.signal.removeEventListener("abort",g);}return n&&!n.dispatchConditionRejection&&i.match(I)&&I.meta.condition||c(I),I}();return Object.assign(b,{abort:A,requestId:m,arg:u,unwrap(){return b.then(qR)}})}}return Object.assign(s,{pending:a,rejected:i,fulfilled:o,settled:kR(i,o),typePrefix:t})}return e.withTypes=()=>e,e})();function qR(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function DR(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var NR=(e,t)=>{if(typeof e!="function")throw new Error(ze(32))};var gl="listenerMiddleware";var MR=e=>{let{type:t,actionCreator:r,matcher:n,predicate:o,effect:a}=e;if(t)o=h(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error(ze(21));return NR(a),{predicate:o,type:t,effect:a}},LR=Object.assign(e=>{let{type:t,predicate:r,effect:n}=MR(e);return {id:Vm(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ze(22))}}},{withTypes:()=>LR});var QR=Object.assign(h(`${gl}/add`),{withTypes:()=>QR});h(`${gl}/removeAll`);var BR=Object.assign(h(`${gl}/remove`),{withTypes:()=>BR});function ze(e){return `Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function _R({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:a,mode:i}=e;i!=="disabled"&&(n.call(r),t.send(o,a,r));}var UR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jR(e){return typeof e=="string"&&UR.test(e)}function $R(e){let t="visitorId";return {getClientId:()=>{let r=e.get(),n=r.storage,o=n.getItem(t),a=o&&jR(o)?o:r.generateUUID();return n.setItem(t,a),a},clear:()=>{e.get().storage.removeItem(t);}}}var Bm="0.7.7";function GR(e){let{trackingId:t}=e;return {trackingId:t}}function zR(e){return (e.source||[]).concat([`relay@${Bm}`])}function _m(e,t,r,n){let{getReferrer:o,getLocation:a,getUserAgent:i}=r,s=GR(t),u=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:zR(t),clientId:u,userAgent:i(),referrer:o(),location:a()})}function HR(e,t,r,n,o){return {...t,meta:_m(e,r,n,o)}}var WR="*";function YR(){let e=[];function t({type:u,callback:c}){return e.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function n(u){return t(u)<0&&e.push(u),()=>s(u.type,u.callback)}function o(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u);}catch(l){console.error(l);}});}function a(u){if(u===WR)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1);}function i(u){let c=t(u);c>=0&&e.splice(c,1);}function s(u,c){c?i({type:u,callback:c}):a(u);}return {add:n,call:o,remove:s}}function Qm({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function KR(e){let t=Qm(e);return {get:()=>t,update:r=>{t=Qm({...t,...r});}}}function JR(){let e=typeof window<"u";return {sendMessage(t){e&&window.postMessage(t,"*");}}}var fl=XR();function XR(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return {getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let a of o){let i=a.replace(/^\s+/,"");if(i.lastIndexOf(n,0)===0)return i.substring(n.length,i.length)}return null},setItem(r,n,o){let a=t(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,s=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${i}${s};path=/;SameSite=Lax`;},removeItem(r){this.setItem(r,"",-1);}}}function ZR(){return {getItem(e){return fl.getItem(e)||localStorage.getItem(e)},removeItem(e){fl.removeItem(e),localStorage.removeItem(e);},setItem(e,t){localStorage.setItem(e,t),fl.setItem(e,t,31556952e3);}}}function eF(){let e=document.referrer;return e===""?null:e}function tF(){return {runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(JR().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>eF(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:ZR()}}function rF(){return {getItem(){return null},removeItem(){},setItem(){}}}function nF(){return {runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:rF()}}function oF(e){return e.get().mode!=="disabled"&&aF()?tF():nF()}function aF(){try{return typeof window=="object"}catch{return !1}}function iF(e){return {get:()=>Object.freeze(oF(e))}}function Um(e){let t=KR(e),r=YR(),n=iF(t),o=$R(n);return {emit:(a,i)=>{let s=t.get(),u=n.get(),c=HR(a,i,s,u,o);return _R({config:s,environment:u,event:c,listenerManager:r})},getMeta:a=>_m(a,t.get(),n.get(),o),on:(a,i)=>r.add({type:a,callback:i}),off:(a,i)=>r.remove(a,i),updateConfig:a=>t.update(a),version:Bm,clearStorage:()=>{o.clear();}}}var Dn="2.63.3",jm=["@coveo/atomic","@coveo/quantic"];var li=se(e=>e.source,e=>[`@coveo/headless@${Dn}`].concat(Object.entries(e).map(([t,r])=>`${t}@${r}`)));var Wo=se(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>li(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r,enabled:n},o)=>Um({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:o}));function kt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function y(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a);})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(n.next(l));}catch(d){i(d);}}function u(l){try{c(n.throw(l));}catch(d){i(d);}}function c(l){l.done?a(l.value):o(l.value).then(s,u);}c((n=n.apply(e,t||[])).next());})}var re;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect";})(re||(re={}));function $m(){return typeof window<"u"}function kl(){return typeof navigator<"u"}function Vn(){return typeof document<"u"}function Sl(){try{return typeof localStorage<"u"}catch{return !1}}function sF(){try{return typeof sessionStorage<"u"}catch{return !1}}function tg(){return kl()&&navigator.cookieEnabled}var cF=[re.click,re.custom,re.search,re.view],uF=(e,t)=>cF.indexOf(e)!==-1?Object.assign({language:Vn()?document.documentElement.lang:"unknown",userAgent:kl()?navigator.userAgent:"unknown"},t):t,Jo=class e{static set(t,r,n){var o,a,i,s;n&&(a=new Date,a.setTime(a.getTime()+n)),s=window.location.hostname,s.indexOf(".")===-1?Gm(t,r,a):(i=s.split("."),o=i[i.length-2]+"."+i[i.length-1],Gm(t,r,a,o));}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1);}};function Gm(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax";}function lF(){return Sl()?localStorage:tg()?new Xo:sF()?sessionStorage:new Mn}var Xo=class e{getItem(t){return Jo.get(`${e.prefix}${t}`)}removeItem(t){Jo.erase(`${e.prefix}${t}`);}setItem(t,r,n){Jo.set(`${e.prefix}${t}`,r,n);}};Xo.prefix="coveo_";var yl=class{constructor(){this.cookieStorage=new Xo;}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t);}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3);}},Mn=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},Yo="__coveo.analytics.history",rg=20,ng=1e3*60,og=75,Ln=class{constructor(t){this.store=t||lF();}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t]);}addElementAsync(t){return y(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t]);})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return y(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(Yo);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return []}}getHistoryWithInternalTimeAsync(){return y(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(Yo);return t?JSON.parse(t):[]}catch{return []}})}setHistory(t){try{this.store.setItem(Yo,JSON.stringify(t.slice(0,rg)));}catch{}}clear(){try{this.store.removeItem(Yo);}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,og)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>ng:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return {name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},ag=Object.freeze({__proto__:null,HistoryStore:Ln,MAX_NUMBER_OF_HISTORY_ELEMENTS:rg,MAX_VALUE_SIZE:og,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:ng,STORE_KEY:Yo,default:Ln}),dF=(e,t)=>y(void 0,void 0,void 0,function*(){return e===re.view?(yield pF(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),pF=e=>y(void 0,void 0,void 0,function*(){let t=new Ln,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r);}),di,mF=new Uint8Array(16);function gF(){if(!di&&(di=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!di))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return di(mF)}var fF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mi(e){return typeof e=="string"&&fF.test(e)}var Te=[];for(let e=0;e<256;++e)Te.push((e+256).toString(16).slice(1));function ig(e,t=0){return (Te[e[t+0]]+Te[e[t+1]]+Te[e[t+2]]+Te[e[t+3]]+"-"+Te[e[t+4]]+Te[e[t+5]]+"-"+Te[e[t+6]]+Te[e[t+7]]+"-"+Te[e[t+8]]+Te[e[t+9]]+"-"+Te[e[t+10]]+Te[e[t+11]]+Te[e[t+12]]+Te[e[t+13]]+Te[e[t+14]]+Te[e[t+15]]).toLowerCase()}function hF(e){if(!mi(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function SF(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var yF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",CF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function AF(e,t,r){function n(o,a,i,s){var u;if(typeof o=="string"&&(o=SF(o)),typeof a=="string"&&(a=hF(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(a),c.set(o,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return ig(c)}try{n.name=e;}catch{}return n.DNS=yF,n.URL=CF,n}var RF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zm={randomUUID:RF};function pn(e,t,r){if(zm.randomUUID&&!t&&!e)return zm.randomUUID();e=e||{};let n=e.random||(e.rng||gF)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return ig(n)}function FF(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function hl(e,t){return e<<t|e>>>32-t}function xF(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s));}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),a=new Array(o);for(let i=0;i<o;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=e[i*64+u*4]<<24|e[i*64+u*4+1]<<16|e[i*64+u*4+2]<<8|e[i*64+u*4+3];a[i]=s;}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<o;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=a[i][p];for(let p=16;p<80;++p)s[p]=hl(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],d=r[3],m=r[4];for(let p=0;p<80;++p){let g=Math.floor(p/20),C=hl(u,5)+FF(g,c,l,d)+m+t[g]+s[p]>>>0;m=d,d=l,l=hl(c,30)>>>0,c=u,u=C;}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+m>>>0;}return [r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var bF=AF("v5",80,xF),Hm=bF,sg="2.30.2",Ko={pageview:"pageview",event:"event"},vr=class e{constructor(t,r){if(!mi(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3);}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return !this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return !1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return mi(a)?new e(a,Number.parseInt(o)*1e3):null}};vr.cvo_cid="cvo_cid";vr.expirationTime=120;var ct=Object.keys;function pi(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Rl={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},vF=ct(Rl).map(e=>Rl[e]),IF=[...vF].join("|"),wF=new RegExp(`^(${IF}$)`),PF={svcAction:"svc_action",svcActionData:"svc_action_data"},kF=e=>wF.test(e),OF=[kF],Ym={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Km={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ne={action:"pa",list:"pal",listSource:"pls"},fi={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},TF=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Fl={id:"quoteId",affiliation:"quoteAffiliation"},xl={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},qF={add:Ne,bookmark_add:Ne,bookmark_remove:Ne,click:Ne,checkout:Ne,checkout_option:Ne,detail:Ne,impression:Ne,remove:Ne,refund:Object.assign(Object.assign({},Ne),fi),purchase:Object.assign(Object.assign({},Ne),fi),quickview:Ne,quote:Object.assign(Object.assign({},Ne),Fl),review:Object.assign(Object.assign({},Ne),xl)},DF=ct(Ym).map(e=>Ym[e]),VF=ct(Km).map(e=>Km[e]),NF=ct(Ne).map(e=>Ne[e]),MF=ct(fi).map(e=>fi[e]),LF=ct(xl).map(e=>xl[e]),QF=ct(Fl).map(e=>Fl[e]),BF=[...DF,"custom"].join("|"),_F=[...VF,"custom"].join("|"),cg="(pr[0-9]+)",ug="(il[0-9]+pi[0-9]+)",UF=new RegExp(`^${cg}(${BF})$`),jF=new RegExp(`^(${ug}(${_F}))|(il[0-9]+nm)$`),$F=new RegExp(`^(${NF.join("|")})$`),GF=new RegExp(`^(${MF.join("|")})$`),zF=new RegExp(`^${cg}custom$`),HF=new RegExp(`^${ug}custom$`),WF=new RegExp(`^(${[...TF,...LF,...QF].join("|")})$`),YF=e=>UF.test(e),KF=e=>jF.test(e),JF=e=>$F.test(e),XF=e=>GF.test(e),ZF=e=>WF.test(e),ex=[KF,YF,JF,XF,ZF],tx=[zF,HF],rx={anonymizeIp:"aip"},nx={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},ox={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},ax=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],ix=Object.assign(Object.assign(Object.assign(Object.assign({},rx),nx),ox),ax.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),bl=Object.assign(Object.assign({},ix),PF),sx=e=>{let t=!!e.action&&qF[e.action]||{};return ct(e).reduce((r,n)=>{let o=t[n]||bl[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},cx=ct(bl).map(e=>bl[e]),ux=e=>cx.indexOf(e)!==-1,lx=e=>e==="custom",dx=e=>[...ex,...OF,ux,lx].some(t=>t(e)),px=e=>ct(e).reduce((t,r)=>{let n=mx(r);return n?Object.assign(Object.assign({},t),gx(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),mx=e=>{let t;return [...tx].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},gx=(e,t)=>ct(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),vl=class{constructor(t){this.opts=t;}sendEvent(t,r){return y(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${a}`,r,o),u=this.encodeForEventType(t,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c);})}isAvailable(){return "sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return y(this,void 0,void 0,function*(){let o=t,a=r;if(n){let i=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;o=s||t;try{a=JSON.parse(u);}catch(c){console.error("Unable to process the request body as a JSON string",c);}}return {payload:a,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return y(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return [r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return [re.click,re.custom,re.search,re.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},Il=class{sendEvent(t,r){return y(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return y(this,void 0,void 0,function*(){return Promise.resolve()})}},Jm=window.fetch,hi=class{constructor(t){this.opts=t;}sendEvent(t,r){return y(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${n}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),a?yield a(s,"analyticsFetch"):{}),{url:c}=u,l=kt(u,["url"]),d;try{d=yield Jm(c,l);}catch(m){console.error("An error has occured when sending the event.",m);return}if(d.ok){let m=yield d.json();return m.visitorId&&o.setCurrentVisitorId(m.visitorId),m}else {try{d.json();}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,d,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return y(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Jm(r,{headers:this.getHeaders(),method:"DELETE"});})}shouldAppendVisitorId(t){return [re.click,re.custom,re.search,re.view].indexOf(t)!==-1}getVisitorIdParam(){return y(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},wl=class{constructor(t,r){Sl()&&tg()?this.storage=new yl:Sl()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Mn),this.client=new hi(t),this.beaconClient=new vl(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:a}of n)this.beaconClient.sendEvent(o,a);});}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Pl=class{constructor(t,r){this.storage=r||new Mn,this.client=new hi(t);}getClientDependingOnEventType(t){return this.client}},Si=class{constructor(){this.storage=new Mn,this.client=new Il;}getClientDependingOnEventType(t){return this.client}},fx="xx",hx=e=>e?.startsWith(fx)||!1,Sx=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function yx(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Cx=["1",1,"yes",!0];function Zo(){return kl()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Cx.indexOf(e)!==-1)}var lg="v15",dg={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Ax(e=dg.default,t=lg,r=!1){if(e=e.replace(/\/$/,""),r)return `${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return `${e}${n?"":"/rest"}/${t}`}var Rx="38824e1f-37f5-42d3-8372-a4b8fa9df946",st=class{get defaultOptions(){return {endpoint:dg.default,isCustomEndpoint:!1,token:"",version:lg,beforeSendHooks:[],afterSendHooks:[]}}get version(){return sg}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[dF,uF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Zo()?this.runtime=new Si:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(re.view,{newEventType:re.view,addClientIdParameter:!0}),this.addEventTypeMapping(re.click,{newEventType:re.click,addClientIdParameter:!0}),this.addEventTypeMapping(re.custom,{newEventType:re.custom,addClientIdParameter:!0}),this.addEventTypeMapping(re.search,{newEventType:re.search,addClientIdParameter:!0});}initRuntime(t){return $m()&&Vn()?new wl(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(yx()&&console.warn(Sx),new Pl(t))}get storage(){return this.runtime.storage}determineVisitorId(){return y(this,void 0,void 0,function*(){try{return $m()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||pn()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),pn()}})}getCurrentVisitorId(){return y(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t);}return this.visitorId})}setCurrentVisitorId(t){return y(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t);})}setClientId(t,r){return y(this,void 0,void 0,function*(){if(mi(t))this.setCurrentVisitorId(t.toLowerCase());else {if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Hm(t,Hm(r,Rx)));}})}getParameters(t,...r){return y(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return y(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(pn()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t);}extractClientIdFromLink(t){if(Zo())return null;try{let r=new URL(t).searchParams.get(vr.cvo_cid);if(r==null)return null;let n=vr.fromString(r);return !n||!Vn()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return y(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield [p=>n.length>0?this.parseVariableArgumentsPayload(n,p):p[0],p=>y(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:o?yield this.getCurrentVisitorId():""})}),p=>y(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>a?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((g,C)=>y(this,void 0,void 0,function*(){let A=yield g;return yield C(t,A)}),p)].reduce((p,g)=>y(this,void 0,void 0,function*(){let C=yield p;return yield g(C)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return y(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield [d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,t),d=>this.validateParams(d,t),d=>n?sx(d):d,d=>n?this.removeUnknownParameters(d):d,d=>n?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,m)=>y(this,void 0,void 0,function*(){let p=yield d;return yield m(p)}),Promise.resolve(r))})}makeEvent(t,...r){return y(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,o);return {eventType:n,payload:a,log:i=>y(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},a),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},o),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return y(this,void 0,void 0,function*(){return (yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return y(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new Ln().clear();}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId();}makeSearchEvent(t){return y(this,void 0,void 0,function*(){return this.makeEvent(re.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,n=kt(t,["searchQueryUid"]);return y(this,void 0,void 0,function*(){return (yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return y(this,void 0,void 0,function*(){return this.makeEvent(re.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,n=kt(t,["searchQueryUid"]);return y(this,void 0,void 0,function*(){return (yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return y(this,void 0,void 0,function*(){return this.makeEvent(re.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,n=kt(t,["lastSearchQueryUid"]);return y(this,void 0,void 0,function*(){return (yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return y(this,void 0,void 0,function*(){return this.makeEvent(re.view,t)})}sendViewEvent(t){return y(this,void 0,void 0,function*(){return (yield this.makeViewEvent(t)).log({})})}getVisit(){return y(this,void 0,void 0,function*(){let r=yield (yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return y(this,void 0,void 0,function*(){return yield (yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t);}registerAfterSendEventHook(t){this.afterSendHooks.push(t);}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r;}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,a=r.length;o<a;o++){let i=r[o];if(typeof i=="string")n[t[o]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},n),i)}return n}isKeyAllowedEmpty(t,r){return ({[re.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,a)=>Object.assign(Object.assign({},o),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(dx(n))return !0;console.log(n,"is not processed by coveoua");}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=kt(t,["custom"]),o={};r&&pi(r)&&(o=this.lowercaseKeys(r));let a=px(n);return Object.assign(Object.assign({},o),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=kt(t,["custom"]);if(r&&pi(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o];}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=kt(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==re.view||r==re.click||r==re.search||r==re.custom)&&(o.originLevel3=this.limit(o.originLevel3,128)),r==re.view&&(o.location=this.limit(o.location,128)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=kt(t,["userId"]);return hx(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=kt(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&pi(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&pi(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t!="string"?t:t.substring(0,r)}get baseUrl(){return Ax(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},qe;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle";})(qe||(qe={}));var f;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer";})(f||(f={}));var El={[f.triggerNotify]:"queryPipelineTriggers",[f.triggerExecute]:"queryPipelineTriggers",[f.triggerQuery]:"queryPipelineTriggers",[f.triggerRedirect]:"queryPipelineTriggers",[f.queryError]:"errors",[f.queryErrorBack]:"errors",[f.queryErrorClear]:"errors",[f.queryErrorRetry]:"errors",[f.pagerNext]:"getMoreResults",[f.pagerPrevious]:"getMoreResults",[f.pagerNumber]:"getMoreResults",[f.pagerResize]:"getMoreResults",[f.pagerScrolling]:"getMoreResults",[f.facetSearch]:"facet",[f.facetShowLess]:"facet",[f.facetShowMore]:"facet",[f.recommendation]:"recommendation",[f.likeSmartSnippet]:"smartSnippet",[f.dislikeSmartSnippet]:"smartSnippet",[f.expandSmartSnippet]:"smartSnippet",[f.collapseSmartSnippet]:"smartSnippet",[f.openSmartSnippetFeedbackModal]:"smartSnippet",[f.closeSmartSnippetFeedbackModal]:"smartSnippet",[f.sendSmartSnippetReason]:"smartSnippet",[f.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.clearRecentQueries]:"recentQueries",[f.recentResultClick]:"recentlyClickedDocuments",[f.clearRecentResults]:"recentlyClickedDocuments",[f.showLessFoldedResults]:"folding",[f.caseDetach]:"case",[f.likeGeneratedAnswer]:"generatedAnswer",[f.dislikeGeneratedAnswer]:"generatedAnswer",[f.openGeneratedAnswerSource]:"generatedAnswer",[f.generatedAnswerStreamEnd]:"generatedAnswer",[f.generatedAnswerSourceHover]:"generatedAnswer",[f.generatedAnswerCopyToClipboard]:"generatedAnswer",[f.generatedAnswerHideAnswers]:"generatedAnswer",[f.generatedAnswerShowAnswers]:"generatedAnswer",[f.generatedAnswerExpand]:"generatedAnswer",[f.generatedAnswerCollapse]:"generatedAnswer",[f.generatedAnswerFeedbackSubmit]:"generatedAnswer",[qe.expandToFullUI]:"interface",[qe.openUserActions]:"User Actions",[qe.showPrecedingSessions]:"User Actions",[qe.showFollowingSessions]:"User Actions",[qe.clickViewedDocument]:"User Actions",[qe.clickPageView]:"User Actions",[qe.createArticle]:"createArticle"},Ir=class{constructor(){this.runtime=new Si,this.currentVisitorId="";}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(re.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(re.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(re.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(re.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return sg}};function Fx(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function xx(e){return e.map(t=>t.replace(/;/g,""))}function pg(e){let r=e.join(";");return r.length<=256?r:pg(e.slice(1))}var Xm=e=>{let t=xx(e),r=Fx(t);return pg(r)};function Zm(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Xm(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Xm(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var wr=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Zo();this.coveoAnalyticsClient=n?new Ir:new st(t);}disable(){this.coveoAnalyticsClient=new Ir;}enable(){this.coveoAnalyticsClient=new st(this.opts);}makeInterfaceLoad(){return this.makeSearchEvent(f.interfaceLoad)}logInterfaceLoad(){return y(this,void 0,void 0,function*(){return (yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(f.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return y(this,void 0,void 0,function*(){return (yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(f.recommendation)}logRecommendation(){return y(this,void 0,void 0,function*(){return (yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(f.recommendationOpen,t,r)}logRecommendationOpen(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(f.staticFilterClearAll,t)}logStaticFilterClearAll(t){return y(this,void 0,void 0,function*(){return (yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(f.staticFilterSelect,t)}logStaticFilterSelect(t){return y(this,void 0,void 0,function*(){return (yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(f.staticFilterDeselect,t)}logStaticFilterDeselect(t){return y(this,void 0,void 0,function*(){return (yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return y(this,void 0,void 0,function*(){return (yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(f.interfaceChange,t)}logInterfaceChange(t){return y(this,void 0,void 0,function*(){return (yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return y(this,void 0,void 0,function*(){return (yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(f.didyoumeanClick)}logDidYouMeanClick(){return y(this,void 0,void 0,function*(){return (yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(f.resultsSort,t)}logResultsSort(t){return y(this,void 0,void 0,function*(){return (yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(f.searchboxSubmit)}logSearchboxSubmit(){return y(this,void 0,void 0,function*(){return (yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(f.searchboxClear)}logSearchboxClear(){return y(this,void 0,void 0,function*(){return (yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(f.searchboxAsYouType)}logSearchboxAsYouType(){return y(this,void 0,void 0,function*(){return (yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(f.breadcrumbFacet,t)}logBreadcrumbFacet(t){return y(this,void 0,void 0,function*(){return (yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(f.breadcrumbResetAll)}logBreadcrumbResetAll(){return y(this,void 0,void 0,function*(){return (yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(f.documentQuickview,t,r)}logDocumentQuickview(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(f.documentOpen,t,r)}logDocumentOpen(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(f.omniboxAnalytics,Zm(t))}logOmniboxAnalytics(t){return y(this,void 0,void 0,function*(){return (yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(f.omniboxFromLink,Zm(t))}logOmniboxFromLink(t){return y(this,void 0,void 0,function*(){return (yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(f.searchFromLink)}logSearchFromLink(){return y(this,void 0,void 0,function*(){return (yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(f.triggerNotify,t)}logTriggerNotify(t){return y(this,void 0,void 0,function*(){return (yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(f.triggerExecute,t)}logTriggerExecute(t){return y(this,void 0,void 0,function*(){return (yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(f.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return y(this,void 0,void 0,function*(){return (yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(f.undoTriggerQuery,t)}logUndoTriggerQuery(t){return y(this,void 0,void 0,function*(){return (yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(f.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return y(this,void 0,void 0,function*(){return (yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(f.pagerResize,t)}logPagerResize(t){return y(this,void 0,void 0,function*(){return (yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(f.pagerNumber,t)}logPagerNumber(t){return y(this,void 0,void 0,function*(){return (yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(f.pagerNext,t)}logPagerNext(t){return y(this,void 0,void 0,function*(){return (yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(f.pagerPrevious,t)}logPagerPrevious(t){return y(this,void 0,void 0,function*(){return (yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(f.pagerScrolling)}logPagerScrolling(){return y(this,void 0,void 0,function*(){return (yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(f.facetClearAll,t)}logFacetClearAll(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(f.facetSearch,t)}logFacetSearch(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(f.facetSelect,t)}logFacetSelect(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(f.facetDeselect,t)}logFacetDeselect(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(f.facetExclude,t)}logFacetExclude(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(f.facetUnexclude,t)}logFacetUnexclude(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(f.facetSelectAll,t)}logFacetSelectAll(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(f.facetUpdateSort,t)}logFacetUpdateSort(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(f.facetShowMore,t)}logFacetShowMore(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(f.facetShowLess,t)}logFacetShowLess(t){return y(this,void 0,void 0,function*(){return (yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(f.queryError,t)}logQueryError(t){return y(this,void 0,void 0,function*(){return (yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return y(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(f.queryErrorBack);return {description:t.description,log:()=>y(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorBack)})}})}logQueryErrorBack(){return y(this,void 0,void 0,function*(){return (yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return y(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(f.queryErrorRetry);return {description:t.description,log:()=>y(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorRetry)})}})}logQueryErrorRetry(){return y(this,void 0,void 0,function*(){return (yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return y(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(f.queryErrorClear);return {description:t.description,log:()=>y(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorClear)})}})}logQueryErrorClear(){return y(this,void 0,void 0,function*(){return (yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(f.likeSmartSnippet)}logLikeSmartSnippet(){return y(this,void 0,void 0,function*(){return (yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(f.dislikeSmartSnippet)}logDislikeSmartSnippet(){return y(this,void 0,void 0,function*(){return (yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(f.expandSmartSnippet)}logExpandSmartSnippet(){return y(this,void 0,void 0,function*(){return (yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(f.collapseSmartSnippet)}logCollapseSmartSnippet(){return y(this,void 0,void 0,function*(){return (yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return y(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return y(this,void 0,void 0,function*(){return (yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(f.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(f.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return y(this,void 0,void 0,function*(){return (yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(f.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return y(this,void 0,void 0,function*(){return (yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(f.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return y(this,void 0,void 0,function*(){return (yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(f.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return y(this,void 0,void 0,function*(){return (yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(f.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(f.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(f.copyToClipboard,t,r)}logCopyToClipboard(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(f.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(f.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(f.recentQueryClick)}logRecentQueryClick(){return y(this,void 0,void 0,function*(){return (yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(f.clearRecentQueries)}logClearRecentQueries(){return y(this,void 0,void 0,function*(){return (yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(f.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(f.clearRecentResults)}logClearRecentResults(){return y(this,void 0,void 0,function*(){return (yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(f.noResultsBack)}logNoResultsBack(){return y(this,void 0,void 0,function*(){return (yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(f.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(f.showLessFoldedResults)}logShowLessFoldedResults(){return y(this,void 0,void 0,function*(){return (yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return {actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r,n=El[t]){return y(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:n,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return {description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,n=El[t]){return y(this,void 0,void 0,function*(){return (yield this.makeCustomEvent(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return y(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return {description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,n){return y(this,void 0,void 0,function*(){return (yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return y(this,void 0,void 0,function*(){return (yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return y(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return {description:this.makeEventDescription(o,t),log:({searchUID:a})=>o.log({searchQueryUid:a})}})}makeClickEvent(t,r,n,o){return y(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return {description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,n,o){return y(this,void 0,void 0,function*(){return (yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var n,o;return y(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return y(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return {originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof st?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(f.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return y(this,void 0,void 0,function*(){return (yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(f.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return y(this,void 0,void 0,function*(){return (yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(f.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return y(this,void 0,void 0,function*(){return (yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(f.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(f.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(f.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(f.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(f.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(f.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(f.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(f.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return y(this,void 0,void 0,function*(){return (yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(f.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return y(this,void 0,void 0,function*(){return (yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(f.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return y(this,void 0,void 0,function*(){return (yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},yi=Object.assign({},Ko);Object.keys(yi).map(e=>yi[e]);var Ci;(function(e){e.click="click",e.flowStart="flowStart";})(Ci||(Ci={}));var St;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create";})(St||(St={}));var Ai;(function(e){e.quit="Quit",e.solved="Solved";})(Ai||(Ai={}));var bx=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach(r=>{var n;let o=(n=e.caseContext)===null||n===void 0?void 0:n[r];if(o){let a=`context_${r}`;t[a]=o;}}),t},V=(e,t=!0)=>{let{caseContext:r,caseId:n,caseNumber:o}=e,a=kt(e,["caseContext","caseId","caseNumber"]),i=bx(e);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:o},a),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),t&&i)},Fi=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Zo();this.coveoAnalyticsClient=n?new Ir:new st(t);}disable(){this.coveoAnalyticsClient=new Ir;}enable(){this.coveoAnalyticsClient=new st(this.opts);}logInterfaceLoad(t){if(t){let r=V(t);return this.logSearchEvent(f.interfaceLoad,r)}return this.logSearchEvent(f.interfaceLoad)}logInterfaceChange(t){let r=V(t);return this.logSearchEvent(f.interfaceChange,r)}logStaticFilterDeselect(t){let r=V(t);return this.logSearchEvent(f.staticFilterDeselect,r)}logFetchMoreResults(t){if(t){let r=V(t);return this.logCustomEvent(f.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(t){let r=V(t);return this.logSearchEvent(f.breadcrumbFacet,r)}logBreadcrumbResetAll(t){if(t){let r=V(t);return this.logSearchEvent(f.breadcrumbResetAll,r)}return this.logSearchEvent(f.breadcrumbResetAll)}logFacetSelect(t){let r=V(t);return this.logSearchEvent(f.facetSelect,r)}logFacetExclude(t){let r=V(t);return this.logSearchEvent(f.facetExclude,r)}logFacetDeselect(t){let r=V(t);return this.logSearchEvent(f.facetDeselect,r)}logFacetUpdateSort(t){let r=V(t);return this.logSearchEvent(f.facetUpdateSort,r)}logFacetClearAll(t){let r=V(t);return this.logSearchEvent(f.facetClearAll,r)}logFacetShowMore(t){let r=V(t,!1);return this.logCustomEvent(f.facetShowMore,r)}logFacetShowLess(t){let r=V(t,!1);return this.logCustomEvent(f.facetShowLess,r)}logQueryError(t){let r=V(t,!1);return this.logCustomEvent(f.queryError,r)}logPagerNumber(t){let r=V(t,!1);return this.logCustomEvent(f.pagerNumber,r)}logPagerNext(t){let r=V(t,!1);return this.logCustomEvent(f.pagerNext,r)}logPagerPrevious(t){let r=V(t,!1);return this.logCustomEvent(f.pagerPrevious,r)}logDidYouMeanAutomatic(t){if(t){let r=V(t);return this.logSearchEvent(f.didyoumeanAutomatic,r)}return this.logSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanClick(t){if(t){let r=V(t);return this.logSearchEvent(f.didyoumeanClick,r)}return this.logSearchEvent(f.didyoumeanClick)}logResultsSort(t){let r=V(t);return this.logSearchEvent(f.resultsSort,r)}logSearchboxSubmit(t){if(t){let r=V(t);return this.logSearchEvent(f.searchboxSubmit,r)}return this.logSearchEvent(f.searchboxSubmit)}logContextChanged(t){let r=V(t);return this.logSearchEvent(qe.contextChanged,r)}logExpandToFullUI(t){let r=V(t);return this.logCustomEvent(qe.expandToFullUI,r)}logOpenUserActions(t){let r=V(t,!1);return this.logCustomEvent(qe.openUserActions,r)}logShowPrecedingSessions(t){let r=V(t,!1);return this.logCustomEvent(qe.showPrecedingSessions,r)}logShowFollowingSessions(t){let r=V(t,!1);return this.logCustomEvent(qe.showFollowingSessions,r)}logViewedDocumentClick(t,r){return this.logCustomEvent(qe.clickViewedDocument,Object.assign(Object.assign({},V(r,!1)),{document:t}))}logPageViewClick(t,r){return this.logCustomEvent(qe.clickPageView,Object.assign(Object.assign({},V(r,!1)),{pageView:t}))}logCreateArticle(t,r){return this.logCustomEvent(qe.createArticle,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logDocumentOpen(t,r,n){return this.logClickEvent(f.documentOpen,t,r,n?V(n,!1):void 0)}logCopyToClipboard(t,r,n){return this.logClickEvent(f.copyToClipboard,t,r,n?V(n,!1):void 0)}logCaseSendEmail(t,r,n){return this.logClickEvent(f.caseSendEmail,t,r,n?V(n,!1):void 0)}logFeedItemTextPost(t,r,n){return this.logClickEvent(f.feedItemTextPost,t,r,n?V(n,!1):void 0)}logDocumentQuickview(t,r,n){let o={documentTitle:t.documentTitle,documentURL:t.documentUrl};return this.logClickEvent(f.documentQuickview,t,r,n?Object.assign(Object.assign({},V(n,!1)),o):o)}logCaseAttach(t,r,n){let o={documentTitle:t.documentTitle,documentURL:t.documentUrl,resultUriHash:t.documentUriHash};return this.logClickEvent(f.caseAttach,t,r,n?Object.assign(Object.assign({},V(n,!1)),o):o)}logCaseDetach(t,r){return this.logCustomEvent(f.caseDetach,r?Object.assign(Object.assign({},V(r,!1)),{resultUriHash:t}):{resultUriHash:t})}logLikeSmartSnippet(t){return this.logCustomEvent(f.likeSmartSnippet,t?V(t,!1):void 0)}logDislikeSmartSnippet(t){return this.logCustomEvent(f.dislikeSmartSnippet,t?V(t,!1):void 0)}logExpandSmartSnippet(t){return this.logCustomEvent(f.expandSmartSnippet,t?V(t,!1):void 0)}logCollapseSmartSnippet(t){return this.logCustomEvent(f.collapseSmartSnippet,t?V(t,!1):void 0)}logOpenSmartSnippetFeedbackModal(t){return this.logCustomEvent(f.openSmartSnippetFeedbackModal,t?V(t,!1):void 0)}logCloseSmartSnippetFeedbackModal(t){return this.logCustomEvent(f.closeSmartSnippetFeedbackModal,t?V(t,!1):void 0)}logSmartSnippetFeedbackReason(t,r,n){return this.logCustomEvent(f.sendSmartSnippetReason,n?Object.assign(Object.assign({},V(n,!1)),{reason:t,details:r}):{reason:t,details:r})}logExpandSmartSnippetSuggestion(t,r){let n="documentId"in t?t:{documentId:t};return this.logCustomEvent(f.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},V(r,!1)),n):n)}logCollapseSmartSnippetSuggestion(t,r){let n="documentId"in t?t:{documentId:t};return this.logCustomEvent(f.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},V(r,!1)),n):n)}logOpenSmartSnippetSource(t,r,n){return this.logClickEvent(f.openSmartSnippetSource,t,r,n?V(n,!1):void 0)}logOpenSmartSnippetSuggestionSource(t,r,n){return this.logClickEvent(f.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},V(n,!1)),r):r)}logOpenSmartSnippetInlineLink(t,r,n){return this.logClickEvent(f.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},n?Object.assign(Object.assign({},V(n,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(t,r,n){return this.logClickEvent(f.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},n?Object.assign(Object.assign({},V(n,!1)),r):r)}logLikeGeneratedAnswer(t,r){return this.logCustomEvent(f.likeGeneratedAnswer,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logDislikeGeneratedAnswer(t,r){return this.logCustomEvent(f.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logOpenGeneratedAnswerSource(t,r){return this.logCustomEvent(f.openGeneratedAnswerSource,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerSourceHover(t,r){return this.logCustomEvent(f.generatedAnswerSourceHover,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerCopyToClipboard(t,r){return this.logCustomEvent(f.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerHideAnswers(t,r){return this.logCustomEvent(f.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerShowAnswers(t,r){return this.logCustomEvent(f.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerExpand(t,r){return this.logCustomEvent(f.generatedAnswerExpand,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerCollapse(t,r){return this.logCustomEvent(f.generatedAnswerCollapse,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logGeneratedAnswerFeedbackSubmit(t,r){return this.logCustomEvent(f.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logRephraseGeneratedAnswer(t,r){return this.logSearchEvent(f.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logRetryGeneratedAnswer(t){return this.logSearchEvent(f.retryGeneratedAnswer,t?Object.assign({},V(t,!1)):{})}logGeneratedAnswerStreamEnd(t,r){return this.logCustomEvent(f.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},V(r,!1)),t):t)}logCustomEvent(t,r){return y(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(n)),{eventType:El[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(o)})}logSearchEvent(t,r){return y(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,n,o){return y(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(a)})}logShowMoreFoldedResults(t,r,n){return y(this,void 0,void 0,function*(){return this.logClickEvent(f.showMoreFoldedResults,t,r,n?V(n,!1):void 0)})}logShowLessFoldedResults(t){return y(this,void 0,void 0,function*(){return this.logCustomEvent(f.showLessFoldedResults,t?V(t,!1):void 0)})}getBaseCustomEventRequest(t){return y(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var n,o;return y(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return y(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return {originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof st?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var Pr=()=>"default";var Fe=e=>new st(e).getCurrentVisitorId(),Me=new ag.HistoryStore,Ot=(e,t)=>typeof t=="function"?(...r)=>{let n=Lo(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Tt=(e,t)=>(...r)=>{let n=Lo(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};var xi=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var vx=e=>{let t=e.configuration.search.locale.split("-")[0];return !t||t.length!==2?"en":t},qt=class{constructor(t){this.getState=t;this.state=t();}getLanguage(){return vx(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[a,i]of Object.entries(n)){let s=`context_${a}`;o[s]=i;}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=Dn),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Pr()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};function bi(){return {desiredCount:5,numberOfValues:8,set:{}}}var cr=(e,t)=>{let r=n=>n.facetId===t;if("productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets)return e.productListing.facets.results.find(r);if("search"in e&&e.search)return e.search.response.facets.find(r)},fg=(e,t)=>e.facetSet[t]?.request;function Ix(e,t){return !!t&&t.facetId in e.facetSet}var ql=(e,t)=>{let r=cr(e,t);if(Ix(e,r))return r};var hg=(e,t)=>{let r=ql(e,t);return r?r.values.filter(n=>n.state!=="idle"):[]},Dt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function Vt(e){let{activeValue:t,ancestryMap:r}=wx(e);return t?Px(t,r):[]}function wx(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return {activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children);}return {}}function Px(e,t){let r=[];if(!e)return [];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}function Ex(e,t){return !!t&&t.facetId in e.categoryFacetSet}var Dl=(e,t)=>{let r=cr(e,t);if(Ex(e,r))return r},Vl=(e,t)=>e.categoryFacetSet[t]?.request,yg=(e,t)=>{let r=Dl(e,t);return Vt(r?.values??[])},Nl=(e,t)=>{let r=Vl(e,t);return Vt(r?.currentValues??[])};function Qn(){return {}}function Cg(e){return {request:e}}function Bn(){return {}}function Ag(e){return {request:e}}function _n(){return {}}function Rg(e){return {request:e,hasBreadcrumbs:!0}}function Un(){return {}}var mn=(e,t)=>{let r=vg(t,e),n=r?r.field:"",o=Ml(n,e);return {facetId:e,facetField:n,facetTitle:o}};function jn(e,t){let{facetId:r,facetValue:n}=e,o=mn(r,t),a=Ig(t,r);return {...o,facetValue:a==="hierarchical"?bg(t,r):n}}function He(e){return {facetSet:e.facetSet??Un(),categoryFacetSet:e.categoryFacetSet??Qn(),dateFacetSet:e.dateFacetSet??Bn(),numericFacetSet:e.numericFacetSet??_n(),automaticFacetSet:e.automaticFacetSet??bi()}}var vi=e=>{let t=[];return Tx(e).forEach((r,n)=>{let o=Ig(e,r.facetId),a=Mx(r,n+1);if(Ox(r)){if(!!!Nl(e,r.facetId).length)return;t.push({...a,...Vx(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=Fg(i,s+1,o),c=kx(r)?xg(i):Dx(i);t.push({...a,...u,...c});});}),qx(e).forEach((r,n)=>{let o=Nx(r,n+1);r.values.forEach((a,i)=>{if(a.state==="idle")return;let s=Fg(a,i+1,"specific"),u=xg(a);t.push({...o,...s,...u});});}),t},kx=e=>e.type==="specific",Ox=e=>e.type==="hierarchical",Tx=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),qx=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),Fg=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Dx=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),xg=e=>({displayValue:e.value,value:e.value}),bg=(e,t)=>Nl(e,t).map(n=>n.value).join(";"),Vx=(e,t)=>{let n=bg(e,t);return {value:n,valuePosition:1,displayValue:n}},Nx=(e,t)=>({title:Ml(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Mx=(e,t)=>({title:Ml(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Ml=(e,t)=>`${e}_${t}`,vg=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Ig=(e,t)=>{let r=vg(e,t);return r?r.type:"specific"};var Se=()=>({q:"",enableQuerySyntax:!1});var ra=class extends qt{getSearchUID(){let t=this.getState();return t.search?.searchResponseId||t.search?.response.searchUid||we().response.searchUid}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||"default"}getSearchEventRequestPayload(){return {queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return vi(He(this.state))}getBaseMetadata(){let t=this.getState(),r=super.getBaseMetadata(),n=t.search?.response?.extendedResults?.generativeQuestionAnsweringId;return n&&(r.generativeQuestionAnsweringId=n),r}getGeneratedAnswerMetadata(){let t=this.getState();return {...t.generatedAnswer?.isVisible!==void 0&&{showGeneratedAnswer:t.generatedAnswer.isVisible}}}get queryText(){return this.state.query?.q||Se().q}get responseTime(){return this.state.search?.duration||we().duration}mapResultsToAnalyticsDocument(){return this.state.search?.response.results.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){return this.state.search?.response.results.length||we().response.results.length}},wg=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new ra(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Fi({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Ot(e,n),beforeSendHooks:[Tt(e,r),(d,m)=>(e.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},o);return c||l.disable(),l};var gn=class extends qt{constructor(){super(...arguments);this.initialState=xi();}getPipeline(){return ""}getSearchEventRequestPayload(){return {queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productListing?.responseId||this.initialState.responseId}mapResultsToAnalyticsDocument(){return this.state.productListing?.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Pg=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new gn(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new wr({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Ot(e,n),beforeSendHooks:[Tt(e,r),(d,m)=>(e.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},o);return c||l.disable(),l};var Ll=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Ll||{}),Ii=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(Ii||{}),ur=e=>{if(wn(e))return e.map(t=>ur(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return `date ${e.order}`;case"field":return `@${e.field} ${e.order}`;default:return ""}},Ql=()=>({by:"relevancy"});new x({values:{by:new gt({enum:Ii,required:!0}),order:new gt({enum:Ll}),field:new R}});function rt(){return ur(Ql())}var na=class na extends qt{constructor(){super(...arguments);this.getFacetRequest=r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response;}getFacetState(){return vi(He(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||na.fallbackPipelineName}getSearchEventRequestPayload(){return {queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||we().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||na.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=r.search?.response?.extendedResults?.generativeQuestionAnsweringId;return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:n,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:a,criteria:n,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return {...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??rt()}}getStaticFilterToggleMetadata(r,n){return {...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return {...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return {...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return {...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:n,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest&&this.state.querySuggest[r],a=o.completions.map(c=>c.expression),i=o.partialQueries.length-1,s=o.partialQueries[i]||"",u=o.responseId;return {...this.getBaseMetadata(),suggestionRanking:a.indexOf(n),partialQuery:s,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return {...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return {...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Se().q}get responseTime(){return this.state.search?.duration||we().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||we().response.totalCountFiltered}};na.fallbackPipelineName="default";var Er=na,kg=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new Er(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new wr({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Ot(e,n),beforeSendHooks:[Tt(e,r),(d,m)=>(e.info({...m,type:d,endpoint:s,token:i},"Analytics request"),m)]},o);return c||l.disable(),l},Bl=()=>{let t=Me.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};function wi(e){let t=Og(e),r=[e,...t].filter(o=>o.parentResult).map(o=>o.parentResult);return xp([e,...t,...r],o=>o.uniqueId)}function Og(e){return e.childResults?e.childResults.flatMap(t=>[t,...Og(t)]):[]}var Pi=()=>"";function Tg(e,t){return {...new Er(t).getBaseMetadata(),actionCause:e,type:e}}function Qx(e){return Object.assign(e,{instantlyCallable:!0})}function Bx(e,t){let r=a=>Qx(k(e,a)),n=r(async(a,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(n,{prepare:async({getState:a,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await t({getState:a,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return {description:c,action:r(async(d,{getState:m,extra:p})=>await l({state:m(),extra:p}))}}}),n}var oa=(e,t,r)=>{function n(...o){let a=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return jx(a)}return n},_x=e=>e.configuration.analytics.analyticsMode==="legacy",Ux=e=>e.configuration.analytics.analyticsMode==="next",jx=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:a,providerClass:i})=>(r??(r=s=>new i(s)),Bx(e,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let d=[],m={log:async({state:b})=>{for(let I of d)await I(b);}},p=s(),g=a({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),C=await t(g,s());m.description=C?.description,d.push(async b=>{_x(b)&&await $x(C,r,b,l,g.coveoAnalyticsClient);});let{emit:A}=Wo(p);return d.push(async b=>{if(Ux(b)&&o&&n){let I=n(b);await Jx(A,o,I);}}),m}));async function $x(e,t,r,n,o){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:a},"Analytics response");}var qg=e=>r=>(n,o)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(n,o);}}),ae=oa(kg,e=>e,Er),w=e=>oa(wg,qg(e),ra),Dg=oa(Pg,e=>e,gn);var me=(e,t)=>{let r=a=>a+(t.pagination?.firstResult??0),n=-1,o=t.search?.results;return n=Ng(e,o),n<0&&(n=Kx(e,o)),n<0&&(n=0),Gx(e,r(n),t)};function Gx(e,t,r){let n=e.raw.collection;return {collectionName:typeof n=="string"?n:"default",documentAuthor:Wx(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Yx(e),queryPipeline:r.pipeline||Pi()}}var Ce=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Vg={urihash:new R,sourcetype:new R,permanentid:new R},aa={uniqueId:F,raw:new x({values:Vg}),title:F,uri:F,clickUri:F,rankingModifier:new R({required:!1,emptyAllowed:!0})};function zx(e){return Object.assign({},...Object.keys(Vg).map(t=>({[t]:e[t]})))}function Hx(e){return Object.assign({},...Object.keys(aa).map(t=>({[t]:e[t]})),{raw:zx(e.raw)})}function Wx(e){let t=e.raw.author;return T(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Yx(e){let t=e.raw.source;return T(t)?"unknown":t}var De=e=>new Z(aa).validate(Hx(e));function Kx(e,t){for(let[r,n]of t.entries()){let o=wi(n);if(Ng(e,o)!==-1)return r}return -1}function Ng(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function Jx(e,t,r){await e(t,r);}var lr=(e,t)=>{let r=Ce(e),n=me(e,t);return {uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:n.documentTitle,author:n.documentAuthor,url:n.documentUri}};var Bg=()=>({actionCause:"interfaceLoad"}),$n=()=>({actionCause:"interfaceChange"});var Ei=h("insightConfiguration/set",e=>S(e,{insightId:F}));var _g=()=>({insightId:""});var ki=B(_g(),e=>{e.addCase(Ei,(t,r)=>{t.insightId=r.payload.insightId;});});var Oi=h("searchHub/set",e=>S(e,new R({required:!0,emptyAllowed:!0})));var kr=k("insight/interface/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:o}})=>{let a=t(),i=await o.getInterface(Xx(a));return le(i)?n(i.error):(r(Oi(i.success.searchHub)),{response:i.success})}),Xx=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,insightId:e.insightConfiguration.insightId});var Ug=()=>({loading:!1,config:void 0});var Or=B(Ug(),e=>{e.addCase(kr.pending,t=>{t.loading=!0,t.error=void 0;}).addCase(kr.rejected,(t,r)=>{t.loading=!1,t.error=r.payload;}).addCase(kr.fulfilled,(t,r)=>{t.loading=!1,t.error=void 0;let{searchHub:n,...o}=r.payload.response;t.config=o;});});var ia=at(Ti()),Wg=at(jg());var qi=at(Ti()),Gg=at($g());qi.default.extend(Gg.default);var zg="YYYY/MM/DD@HH:mm:ss",Zx="1401-01-01";function Gn(e,t){let r=(0, qi.default)(e,t);return !r.isValid()&&!t?(0, qi.default)(e,zg):r}function Di(e){return e.format(zg)}function Hg(e,t){let r=Gn(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}Wl(r);}function Wl(e){if(e.isBefore(Zx))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}ia.default.extend(Wg.default);var Yg=["past","now","next"],Kg=["minute","hour","day","week","month","quarter","year"],eb=e=>{let t=e==="now";return {amount:new q({required:!t,min:1}),unit:new R({required:!t,constrainTo:Kg}),period:new R({required:!0,constrainTo:Yg})}};function Vi(e){if(typeof e=="string"&&!Tr(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Yl(e):e;new Z(eb(t.period)).validate(t);let r=Xg(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Wl(r);}function Jg(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return `${t}-${r}-${n}`;case"now":return t}}function Xg(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return (0, ia.default)().subtract(r,n);case"next":return (0, ia.default)().add(r,n);case"now":return (0, ia.default)()}}function sa(e){return Di(Xg(Yl(e)))}function Zg(e){return e.toLocaleLowerCase().split("-")}function Tr(e){let[t,r,n]=Zg(e);if(t==="now")return !0;if(!Yg.includes(t)||!Kg.includes(n))return !1;let o=parseInt(r);return !(isNaN(o)||o<=0)}function ef(e){return !!e&&typeof e=="object"&&"period"in e}function Yl(e){let[t,r,n]=Zg(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function tb(e){return Vi(e),Yl(e)}function tf(e){return e.type==="dateRange"}function rf(e){return `start${e}`}function nf(e){return `end${e}`}var rb=()=>({dateFacetValueMap:{}});function nb(e,t,r){let n=e.start,o=e.end;return Tr(n)&&(n=sa(n),r.dateFacetValueMap[t][rf(n)]=e.start),Tr(o)&&(o=sa(o),r.dateFacetValueMap[t][nf(o)]=e.end),{...e,start:n,end:o}}function ob(e,t){if(tf(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>nb(o,r,t))}}return e}function qr(e){let t=rb();return {request:{...e,facets:e.facets?.map(n=>ob(n,t))},mappings:t}}function ab(e,t,r){return {...e,start:r.dateFacetValueMap[t][rf(e.start)]||e.start,end:r.dateFacetValueMap[t][nf(e.end)]||e.end}}function ib(e,t){return e.facetId in t.dateFacetValueMap}function sb(e,t){return ib(e,t)?{...e,values:e.values.map(r=>ab(r,e.facetId,t))}:e}function yt(e,t){return "success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>sb(n,t))}}:e}var Nt=async(e,t)=>{let r=e.analyticsMode==="next";return {analytics:{clientId:await Fe(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Bl()&&{pageId:Bl()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:li(e)}}}};var of=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.platformUrl,count:t.querySuggest[e].count,insightId:t.insightConfiguration.insightId,q:t.querySet?.[e],timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Me.getHistory():[],...t.insightCaseContext?.caseContext&&{context:t.insightCaseContext.caseContext},...t.configuration.analytics.enabled&&{visitorId:await Fe(t.configuration.analytics),...t.configuration.analytics.enabled&&await Nt(t.configuration.analytics)}});var Ni=h("didYouMean/enable"),af=h("didYouMean/disable"),Mi=h("didYouMean/automaticCorrections/disable"),sf=h("didYouMean/automaticCorrections/enable"),We=h("didYouMean/correction",e=>S(e,F)),Li=h("didYouMean/automaticCorrections/mode",e=>S(e,new R({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));var Dr=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),cf=()=>({correctedQuery:"",corrections:[],originalQuery:""});function uf(){return {enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Dr(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}var cb=h("history/undo"),ub=h("history/redo"),Le=h("history/snapshot");k("history/back",async(e,{dispatch:t})=>{t(cb()),await t(ge());});k("history/forward",async(e,{dispatch:t})=>{t(ub()),await t(ge());});var ge=k("history/change",async(e,{getState:t})=>t().history.present);var dr=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function Qi(){return {contextValues:{}}}var Bi=()=>!1;function lf(){return {contextValues:{}}}function zn(){return {enabled:!0}}function _i(){return {freezeFacetOrder:!1,facets:{}}}function df(){return []}function Mt(){return {firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ui(){return {}}function pf(){return {}}function ji(){return {}}function Qe(e){return {context:e.context||Qi(),dictionaryFieldContext:e.dictionaryFieldContext||lf(),facetSet:e.facetSet||Un(),numericFacetSet:e.numericFacetSet||_n(),dateFacetSet:e.dateFacetSet||Bn(),categoryFacetSet:e.categoryFacetSet||Qn(),automaticFacetSet:e.automaticFacetSet??bi(),pagination:e.pagination||Mt(),query:e.query||Se(),tabSet:e.tabSet||ji(),advancedSearchQueries:e.advancedSearchQueries||dr(),staticFilterSet:e.staticFilterSet||pf(),querySet:e.querySet||Ui(),sortCriteria:e.sortCriteria||rt(),pipeline:e.pipeline||Pi(),searchHub:e.searchHub||Pr(),facetOptions:e.facetOptions||_i(),facetOrder:e.facetOrder??df(),debug:e.debug??Bi()}}var Ye=h("query/updateQuery",e=>S(e,{q:new R,enableQuerySyntax:new M}));var mf=()=>({caseContext:{},caseId:"",caseNumber:""}),v=e=>({caseContext:e?.caseContext||{},caseId:e?.caseId,caseNumber:e?.caseNumber});var Kl=()=>w("pagerScrolling")("search/logFetchMoreResults",(e,t)=>e.logFetchMoreResults(v(t.insightCaseContext))),Hn=e=>w("query")("search/queryError",(t,r)=>t.logQueryError({...v(r.insightCaseContext),query:r.query?.q||Se().q,aq:"",cq:"",dq:"",errorType:e.type,errorMessage:e.message})),$i=()=>w("interfaceLoad")("analytics/interface/load",(e,t)=>e.logInterfaceLoad(v(t.insightCaseContext))),Vr=()=>w("interfaceChange")("analytics/interface/change",(e,t)=>{e.logInterfaceChange({...v(t.insightCaseContext),interfaceChangeTo:t.configuration.analytics.originLevel2});});function Ct(e){return Object.values(e).map(t=>t.request)}var ff=async(e,t)=>{let r=db(e),n=lb(e);return qr({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,insightId:e.insightConfiguration.insightId,...e.configuration.analytics.enabled&&await Nt(e.configuration.analytics,t),q:e.query?.q,...n.length&&{facets:n},caseContext:e.insightCaseContext?.caseContext,...r&&{cq:r},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...e.sortCriteria&&{sortCriteria:e.sortCriteria},tab:e.configuration.analytics.originLevel2,...e.folding&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.context&&{context:e.context.contextValues},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})},ut=async(e,t)=>{let r=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,n=await ff(e,t);return {...n,request:{...n.request,...e.pagination&&{firstResult:e.pagination.firstResult,numberOfResults:r()}}}},hf=async(e,t)=>{let r=await ff(e);return {...r,request:{...r.request,filterFieldRange:100,cq:`@${e?.folding?.fields.collection}="${t}"`}}},Gi=async(e,t)=>{let r=await ut(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.pagination?.numberOfResults??0)},r},zi=async(e,t)=>{let r=await ut(e,t);return r.request={...r.request,numberOfResults:0},r};function lb(e){return Ct({...e.facetSet,...e.numericFacetSet,...e.dateFacetSet,...e.categoryFacetSet})}function db(e){return Object.values(e.tabSet||{}).find(n=>n.isActive)?.expression.trim()||""}var hn=class{constructor(t){this.config=t;}async fetchFromAPI({request:t,mappings:r},n){let o=new Date().getTime(),a=yt(await this.extra.apiClient.query(t,n),r),i=new Date().getTime()-o,s=this.getState().query?.q||"";return {response:a,duration:i,queryExecuted:s,requestExecuted:t}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return le(t.response)?(this.dispatch(Hn(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){if(!this.shouldReExecuteTheQueryWithCorrections(t)||le(t.response))return null;let{correctedQuery:r}=t.response.success.queryCorrections?t.response.success.queryCorrections[0]:Dr(),n=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithCorrection(r);return le(o.response)?(this.dispatch(Hn(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(Le(Qe(this.getState()))),{...o,response:{...o.response.success,queryCorrections:t.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:n})}shouldReExecuteTheQueryWithCorrections(t){let r=this.getState(),n=this.getSuccessResponse(t);return !!(r.didYouMean?.enableDidYouMean===!0&&n?.results.length===0&&n?.queryCorrections&&n?.queryCorrections.length!==0)}async automaticallyRetryQueryWithCorrection(t){this.dispatch(Ye({q:t}));let r=this.getState(),n=await this.fetchFromAPI(await ut(r));return this.dispatch(We(t)),n}processSuccessResponse(t){return this.dispatch(Le(Qe(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return xr(t.response)?t.response.success:null}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}};var yf=()=>w("didyoumeanAutomatic")("analytics/didyoumean/automatic",(e,t)=>e.logDidYouMeanAutomatic(v(t.insightCaseContext)));var Sn=class{constructor(t){this.config=t;}async fetchFromAPI({request:t,mappings:r},n){let o=new Date().getTime(),a=yt(await this.extra.apiClient.query(t,n),r),i=new Date().getTime()-o,s=this.getState().query?.q||"";return {response:a,duration:i,queryExecuted:s,requestExecuted:t}}async process(t,r){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t,r)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return le(t.response)?(this.dispatch(Hn(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t,r){if(!this.shouldReExecuteTheQueryWithCorrections(t)||le(t.response))return null;let{correctedQuery:n}=t.response.success.queryCorrections?t.response.success.queryCorrections[0]:Dr(),o=this.getCurrentQuery(),a=await this.automaticallyRetryQueryWithCorrection(n);return le(a.response)?(this.dispatch(Hn(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t,r),this.dispatch(Le(Qe(this.getState()))),{...a,response:{...a.response.success,queryCorrections:t.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:o,analyticsAction:yf()})}shouldReExecuteTheQueryWithCorrections(t){let r=this.getState(),n=this.getSuccessResponse(t);return !!(r.didYouMean?.enableDidYouMean===!0&&n?.results.length===0&&n?.queryCorrections&&n?.queryCorrections.length!==0)}async automaticallyRetryQueryWithCorrection(t){this.dispatch(Ye({q:t}));let r=this.getState(),n=await this.fetchFromAPI(await ut(r));return this.dispatch(We(t)),n}processSuccessResponse(t){return this.dispatch(Le(Qe(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return xr(t.response)?t.response.success:null}getStateAfterResponse(t,r,n,o){return {...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Se().enableQuerySyntax},search:{...we(),duration:r,response:o,results:o.results}}}logOriginalAnalyticsQueryBeforeAutoCorrection(t,r){let n=this.getState(),o=yt(t.response,r.mappings).success;this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,n,o),this.extra);}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get analyticsAction(){return this.config.analyticsAction}};async function Jl(e,t,r){ca(e);let n=new Sn({...t,analyticsAction:r}),{analyticsClientMiddleware:o,preprocessRequest:a,logger:i}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:a,logger:i}),u=await ut(e,s),c=await n.fetchFromAPI(u);return await n.process(c,u)}async function Xl(e,t,r){ca(e);let n=new Sn({...t,analyticsAction:r}),{analyticsClientMiddleware:o,preprocessRequest:a,logger:i}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:a,logger:i}),u=await ut(e,s),c=await n.fetchFromAPI(u);return await n.process(c,u)}async function Zl(e,t){let r=new Sn({...t,analyticsAction:Kl}),{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:i}=await Kl().prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=await Gi(e,i),u=await r.fetchFromAPI(s);return await r.process(u,s)}async function ed(e,t,r){let n=new Sn({...t,analyticsAction:r}),{analyticsClientMiddleware:o,preprocessRequest:a,logger:i}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:a,logger:i}),u=await zi(e,s),c=await n.fetchFromAPI(u);return await n.process(c,u)}var Cf=k("search/executeSearch",async(e,t)=>{let r=t.getState();return await Jl(r,t,e)}),Af=k("search/fetchPage",async(e,t)=>{let r=t.getState();return await Xl(r,t,e)}),Rf=k("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Zl(r,t)}),Ff=k("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await ed(r,t,e)});var xf=async(e,t,{request:r,mappings:n},o)=>{let a=new Date().getTime(),i=yt(await e.query(r,o),n),s=new Date().getTime()-a,u=t.query?.q||"";return {response:i,duration:s,queryExecuted:u,requestExecuted:r}},G=k("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Jl(r,t,e.legacy);ca(r);let n=new hn({...t}),o=Ki(e.next),a=await ut(r,o),i=await n.fetchFromAPI(a);return await n.process(i)}),Hi=k("search/fetchPage",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Xl(r,t,e.legacy);ca(r);let n=new hn({...t}),o=Ki(e.next),a=await ut(r,o),i=await n.fetchFromAPI(a);return await n.process(i)}),Wi=k("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Zl(r,t);let n=new hn({...t}),o=Ki({actionCause:"pagerScrolling"}),a=await Gi(r,o),i=await n.fetchFromAPI(a);return await n.process(i)}),Wn=k("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return ed(r,t,e.legacy);let n=new hn({...t}),o=Ki(e.next),a=await zi(r,o),i=await n.fetchFromAPI(a);return await n.process(i)}),Yi=k("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o}})=>{o(e,{id:F});let a=e.id,i=await of(a,t()),s=await n.querySuggest(i);return le(s)?r(s.error):{id:a,q:i.q,...s.success}}),ca=e=>{e.configuration.analytics.enabled&&Me.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)});},Ki=e=>({actionCause:e.actionCause,type:e.actionCause});var Ee=h("breadcrumb/deselectAll"),Nr=h("breadcrumb/deselectAllNonBreadcrumbs");var Lt=h("facet/updateFacetAutoSelection",e=>S(e,{allow:new M({required:!0})}));var Ji=class extends Er{constructor(r){super(r);this.getState=r;}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].cache[o];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Se().q}get responseTime(){return this.activeInstantResultCache?.duration??we().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??we().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var bf=()=>ae("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Ji(e)),vf=()=>({actionCause:"searchboxAsYouType"});var td={id:F},pb={...td,q:de};h("instantResults/register",e=>S(e,td));var Xi=h("instantResults/updateQuery",e=>S(e,pb));h("instantResults/clearExpired",e=>S(e,td));var Zi=new q({required:!0,min:0}),es=h("pagination/registerNumberOfResults",e=>S(e,Zi)),ts=h("pagination/updateNumberOfResults",e=>S(e,Zi)),rs=h("pagination/registerPage",e=>S(e,Zi)),lt=h("pagination/updatePage",e=>S(e,Zi)),ns=h("pagination/nextPage"),os=h("pagination/previousPage");var Yn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Fe(e.configuration.analytics),actionsHistory:Me.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Nt(e.configuration.analytics,t),...e.excerptLength&&!T(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Kn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Fe(e.configuration.analytics),actionsHistory:Me.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Nt(e.configuration.analytics,t),...e.excerptLength&&!T(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var rd=()=>ae("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),Ve=e=>ae("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Se().q,aq:r.advancedSearchQueries?.aq||dr().aq,cq:r.advancedSearchQueries?.cq||dr().cq,dq:r.advancedSearchQueries?.dq||dr().dq,errorType:e.type,errorMessage:e.message}));function Jn(e,t){let r={};e.forEach(a=>r[a.facetId]=a);let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a]);});let o=Object.values(r);return [...n,...o]}var xe=async(e,t)=>{let r=Cb(e),n=mb(e),o=gb(e),a=e.configuration.analytics.analyticsMode==="legacy"?await Kn(e,t):await Yn(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return qr({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function mb(e){return Jn(hb(e),e.facetOrder??[])}function gb(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(fb).filter(r=>r.currentValues.length>0):void 0}function fb(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return {field:t,label:r,currentValues:o}}function hb(e){return Sb(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function Sb(e){return [...yb(e.facetSet??{}),...If(e.numericFacetSet??{}),...If(e.dateFacetSet??{}),...Ct(e.categoryFacetSet??{})]}function yb(e){return Ct(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function If(e){return Ct(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}function Cb(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=Ab(e);return [t,n,...o].filter(a=>!!a).join(" AND ")}function Ab(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var nd=()=>ae("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),Pf=()=>({actionCause:"didyoumeanAutomatic"});new x({values:{undoneQuery:de},options:{required:!0}});var Ef=()=>ae("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);var as=h("trigger/query/ignore",e=>S(e,new R({emptyAllowed:!0,required:!0}))),is=h("trigger/query/modification",e=>S(e,new x({values:{originalQuery:ee,modification:ee}})));var Mr=class{constructor(t,r=n=>{this.dispatch(Ye({q:n}));}){this.config=t;this.onUpdateQueryForCorrection=r;}async fetchFromAPI({mappings:t,request:r},n){let o=new Date().getTime(),a=yt(await this.extra.apiClient.search(r,n),t),i=new Date().getTime()-o,s=this.getState().query?.q||"";return {response:a,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return le(t.response)?(this.dispatch(Ve(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:u}=n;if(!o||!a)return null;let c=i.length===0&&s&&s.length!==0,l=!T(u)&&!T(u.correctedQuery);if(!c&&!l)return null;let m=c?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(Le(Qe(this.getState()))),m}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return le(a.response)?(this.dispatch(Ve(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(Le(Qe(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:nd()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:nd()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra);}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(s=>s.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(as("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(n);return le(i.response)?(this.dispatch(Ve(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Le(Qe(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:Ef()})}getStateAfterResponse(t,r,n,o){return {...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Se().enableQuerySyntax},search:{...we(),duration:r,response:o,results:o.results}}}processSuccessResponse(t){return this.dispatch(Le(Qe(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return xr(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await xe(this.getState()),{origin:"mainSearch"});return this.dispatch(We(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(is({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await xe(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};k("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;S(e,{q:new R,enableQuerySyntax:new M,clearFilters:new M}),e.clearFilters&&(r(Ee()),r(Nr())),r(Lt({allow:!0})),r(Ye({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(lt(1));});var ss=k("search/executeSearch",async(e,t)=>{let r=t.getState();return await ls(r,t,e)}),cs=k("search/fetchPage",async(e,t)=>{let r=t.getState();return await ad(r,t,e)}),us=k("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await id(t,r)}),kf=k("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await bb(t,e,r)});k("search/fetchInstantResults",async(e,t)=>od(e,t));var Rb=async(e,t)=>{let r=await xe(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Fb=async(e,t,r)=>{let n=await Kn(e);return qr({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},xb=async(e,t)=>{let r=await xe(e,t);return r.request.numberOfResults=0,r},Of=e=>{e.configuration.analytics.enabled&&Me.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)});};async function od(e,t){S(e,{id:F,q:F,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q});let{q:r,maxResultsPerQuery:n}=e,o=t.getState(),a=new Mr({...t,analyticsAction:bf()},c=>{t.dispatch(Xi({q:c,id:e.id}));}),i=await Fb(o,r,n),s=await a.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await a.process(s);return "response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function ad(e,t,r){Of(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=new Mr({...t,analyticsAction:r}),u=await xe(e,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function id(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:o}=e.extra,{description:a}=await rd().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:o}),i=new Mr({...e,analyticsAction:rd()}),s=await Rb(t,a),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function bb(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=e.extra,{description:i}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=new Mr({...e,analyticsAction:t}),u=await xb(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function ls(e,t,r){Of(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=await xe(e,i),u=new Mr({...t,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var Lr=class{constructor(t,r=n=>{this.dispatch(Ye({q:n}));}){this.config=t;this.onUpdateQueryForCorrection=r;}async fetchFromAPI({mappings:t,request:r},n){let o=new Date().getTime(),a=yt(await this.extra.apiClient.search(r,n),t),i=new Date().getTime()-o,s=this.getState().query?.q||"";return {response:a,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return le(t.response)?(this.dispatch(Ve(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:u}=n;if(!o||!a)return null;let c=i.length===0&&s&&s.length!==0,l=!T(u)&&!T(u.correctedQuery);if(!c&&!l)return null;let m=c?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(Le(Qe(this.getState()))),m}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return le(a.response)?(this.dispatch(Ve(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(Le(Qe(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(s=>s.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(as("")),null;let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(n);return le(i.response)?(this.dispatch(Ve(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Le(Qe(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(Le(Qe(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return xr(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=Pf(),o=await this.fetchFromAPI(await xe(r,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(We(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(is({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await xe(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var Tf=k("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;S(e,{q:new R,enableQuerySyntax:new M,clearFilters:new M}),e.clearFilters&&(r(Ee()),r(Nr())),r(Lt({allow:!0})),r(Ye({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(lt(1));}),pe=k("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return ls(r,t,e.legacy);qf(r);let n=sd(e.next),o=await xe(r,n),a=new Lr({...t,analyticsAction:n}),i=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(i)}),ds=k("search/fetchPage",async(e,t)=>{let r=t.getState();if(qf(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return ad(r,t,e.legacy);let n=new Lr({...t,analyticsAction:e.next}),o=await xe(r,e.next),a=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(a)}),ps=k("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return id(t,r);let n=Tg("pagerScrolling",t.getState),o=new Lr({...t,analyticsAction:n}),a=await vb(r,n),i=await o.fetchFromAPI(a,{origin:"mainSearch"});return await o.process(i)}),ms=k("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return ls(r,t,e.legacy);let n=sd(e.next),o=new Lr({...t,analyticsAction:n}),a=await wb(r,n),i=await o.fetchFromAPI(a,{origin:"facetValues"});return await o.process(i)});k("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return od(e,t);S(e,{id:F,q:F,maxResultsPerQuery:new q({required:!0,min:1}),cacheTimeout:new q});let{q:n,maxResultsPerQuery:o}=e,a=sd(vf()),i=await Ib(r,n,o,a),s=new Lr({...t,analyticsAction:a},l=>{t.dispatch(Xi({q:l,id:e.id}));}),u=await s.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),c=await s.process(u);return "response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c});var vb=async(e,t)=>{let r=await xe(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Ib=async(e,t,r,n)=>{let o=await Yn(e,n);return qr({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},wb=async(e,t)=>{let r=await xe(e,t);return r.request.numberOfResults=0,r},qf=e=>{e.configuration.analytics.enabled&&Me.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)});},sd=e=>({actionCause:e.actionCause,type:e.actionCause});async function Df(e,t){let{search:r,accessToken:n,organizationId:o,analytics:a}=e.configuration,i=e.query?.q||"";return {url:r.apiBaseUrl,accessToken:n,organizationId:o,enableNavigation:!1,...a.enabled&&{visitorId:await Fe(e.configuration.analytics)},q:i,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var ua=k("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),a=await Df(o,e),i=await t.apiClient.html(a);return le(i)?n(i.error):{content:i.success,uniqueId:e.uniqueId}}),gs=h("resultPreview/next"),fs=h("resultPreview/previous"),Nf=h("resultPreview/prepare",e=>S(e,{results:new Q({required:!0})})),Vf=2048,hs=k("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),o=tm(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return o?.length>Vf&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Vf} characters.`),{contentURL:o}});function cd(){return {uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var ud=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:o}=cd();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=o;},ld=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),Xn=B(cd(),e=>{e.addCase(ua.pending,t=>{t.isLoading=!0;}).addCase(ua.fulfilled,(t,r)=>{let{content:n,uniqueId:o}=r.payload;t.position=t.resultsWithPreview.indexOf(o),t.content=n,t.uniqueId=o,t.isLoading=!1;}).addCase(pe.fulfilled,(t,r)=>{ud(t),t.resultsWithPreview=ld(r.payload.response.results);}).addCase(ps.fulfilled,(t,r)=>{ud(t),t.resultsWithPreview=t.resultsWithPreview.concat(ld(r.payload.response.results));}).addCase(ds.fulfilled,ud).addCase(Nf,(t,r)=>{t.resultsWithPreview=ld(r.payload.results);}).addCase(gs,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r;}).addCase(fs,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r;}).addCase(hs.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL;});});var dd=()=>ee,Mf=()=>F,Zn=h("configuration/updateBasicConfiguration",e=>S(e,{accessToken:ee,organizationId:ee,platformUrl:ee})),Ss=h("configuration/updateSearchConfiguration",e=>S(e,{apiBaseUrl:ee,pipeline:new R({required:!1,emptyAllowed:!0}),searchHub:ee,timezone:ee,locale:ee,authenticationProviders:new Q({required:!1,each:F})})),Pb={enabled:new M({default:!0}),originContext:dd(),originLevel2:dd(),originLevel3:dd(),apiBaseUrl:ee,nextApiBaseUrl:ee,runtimeEnvironment:new ue,anonymous:new M({default:!1}),deviceId:ee,userDisplayName:ee,documentLocation:ee,trackingId:ee,analyticsMode:new R({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new x({options:{required:!1},values:jm.reduce((e,t)=>(e[t]=um,e),{})})},ys=h("configuration/updateAnalyticsConfiguration",e=>(ja()&&(e.enabled=!1),S(e,Pb))),Cs=h("configuration/analytics/disable"),As=h("configuration/analytics/enable"),Lf=h("configuration/analytics/originlevel2",e=>S(e,{originLevel2:Mf()})),Qf=h("configuration/analytics/originlevel3",e=>S(e,{originLevel3:Mf()}));var Rs=B(Pr(),e=>{e.addCase(Oi,(t,r)=>r.payload).addCase(ge.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(Ss,(t,r)=>r.payload.searchHub||t);});var Qr=(e,t)=>{let r=e;return T(r[t])?T(e.raw[t])?null:e.raw[t]:r[t]};function Fs(e){return e.search.response.searchUid!==""}function _f(e,t,r){return e.search.results.find(n=>Qr(n,t)===r)}function pd(e,t){let r=t.payload??null;r&&(e.response=we().response,e.results=[],e.questionAnswer=On()),e.error=r,e.isLoading=!1;}function gd(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1;}function Db(e,t){gd(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults;}function md(e,t){e.isLoading=!0,e.requestId=t.meta.requestId;}var X=B(we(),e=>{e.addCase(ss.rejected,(t,r)=>pd(t,r)),e.addCase(us.rejected,(t,r)=>pd(t,r)),e.addCase(cs.rejected,(t,r)=>pd(t,r)),e.addCase(ss.fulfilled,(t,r)=>{Db(t,r);}),e.addCase(us.fulfilled,(t,r)=>{gd(t,r),t.results=[...t.results,...r.payload.response.results];}),e.addCase(cs.fulfilled,(t,r)=>{gd(t,r),t.results=r.payload.response.results;}),e.addCase(kf.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid;}),e.addCase(ss.pending,md),e.addCase(us.pending,md),e.addCase(cs.pending,md);});var Uf=B(Dn,e=>e);function jf(){return typeof window<"u"&&typeof document<"u"}function Vb(e){let t=e.payload?.analyticsAction;return $f(e)&&!T(t)}function $f(e){return "type"in e}var Gf=e=>t=>r=>{let n;Vb(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return $f(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};var Xf=at(Hf());var xs={q:new R,enableQuerySyntax:new M,aq:new R,cq:new R,firstResult:new q({min:0}),numberOfResults:new q({min:0}),sortCriteria:new R,f:new x,fExcluded:new x,cf:new x,nf:new x,df:new x,debug:new M,sf:new x,tab:new R,af:new x};var fe=h("searchParameters/restore",e=>S(e,xs));var bs=h("tab/register",e=>{let t=new x({values:{id:F,expression:de}});return S(e,t)}),pr=h("tab/updateActiveTab",e=>S(e,F));var vs=at(Ti()),Kf=at(Wf()),Jf=at(Yf());vs.default.extend(Jf.default);vs.default.extend(Kf.default);var Cd="/rest/search/v2",Ad="/rest/ua",Is=()=>({organizationId:"",accessToken:"",platformUrl:Xu(),search:{apiBaseUrl:`${Xu()}${Cd}`,locale:"en-US",timezone:vs.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${em()}${Ad}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function Mb(e,t){if(Vp(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Ad;let n=Np(e,t);return n?Wa(t,n.environment).analytics:e}var ws=B(Is(),e=>e.addCase(Zn,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Cd}`,t.analytics.apiBaseUrl=Mb(r.payload.platformUrl,t.organizationId));}).addCase(Ss,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders);}).addCase(ys,(t,r)=>{T(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),T(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),T(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),T(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),T(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),T(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),T(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),T(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),T(r.payload.source)||(t.analytics.source=r.payload.source);let n=(0, Xf.default)();n&&(t.analytics.analyticsMode="next",t.analytics.trackingId=n),T(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),T(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),T(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),T(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),T(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation);}).addCase(Cs,t=>{t.analytics.enabled=!1;}).addCase(As,t=>{t.analytics.enabled=!0;}).addCase(Lf,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2;}).addCase(Qf,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3;}).addCase(pr,(t,r)=>{t.analytics.originLevel2=r.payload;}).addCase(fe,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2;}));var J=ws;function Lb(e){return e.instantlyCallable}var Zf=()=>e=>t=>e(Lb(t)?t():t);var eh=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error;if(n.payload?.ignored||e.error(o.stack||o.message||o.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},th=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var rh=()=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href}),nh=()=>({referrer:"default",userAgent:"Node.js",location:"default"});function oh(e,t){let r={...e},n,o=a=>(i,s)=>{let u=a(i,s);return n?n(u,s):u};return {get combinedReducer(){let a=bp(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return o(ei({...a,...r}))},containsAll(a){return Object.keys(a).every(s=>s in r)},add(a){Object.keys(a).filter(i=>!(i in r)).forEach(i=>r[i]=a[i]);},addCrossReducer(a){n=a;}}}function Ps(e,t,r){var n,o,a;t===void 0&&(t=50),r===void 0&&(r={});var i=(n=r.isImmediate)!=null&&n,s=(o=r.callback)!=null&&o,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var p=Date.now()-c;if(p+t>=u)return u-p}return t}var m=function(){var p=[].slice.call(arguments),g=this;return new Promise(function(C,A){var b=i&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,c=Date.now(),!i){var L=e.apply(g,p);s&&s(L),l.forEach(function($){return (0, $.resolve)(L)}),l=[];}},d()),b){var I=e.apply(g,p);return s&&s(I),C(I)}l.push({resolve:C,reject:A});})};return m.cancel=function(p){a!==void 0&&clearTimeout(a),l.forEach(function(g){return (0, g.reject)(p)}),l=[];},m}function ah(e,t){let r=0,n=Ps(()=>r=0,500);return o=>a=>async i=>{if(!(typeof i=="function"))return a(i);let u=await a(i);if(!Qb(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let c=await Bb(t);o.dispatch(Zn({accessToken:c})),o.dispatch(i);}}function Qb(e){return e?.error?.name===new kn().name}async function Bb(e){try{return await e()}catch{return ""}}function ih({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return Dm({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:o,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:n}}).prepend(...r).concat(th(n.logger))})}var _b={configuration:J,version:Uf};function Ub(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...o}=e.analytics??{},a={...o,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(ja())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!o.trackingId)throw new Rd('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function sh(e,t){let r=jb(e,t),{accessToken:n,organizationId:o}=e.configuration,{organizationEndpoints:a}=e.configuration,i=a?.platform||e.configuration.platformUrl;Hb(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),zb(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Wb(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Zn({accessToken:n,organizationId:o,platformUrl:i}));let s=Ub(e.configuration,r.logger);return s&&r.dispatch(ys(s)),r}function jb(e,t){let{reducers:r}=e,n=oh({..._b,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let o=t.logger,a=e.navigatorContextProvider??jf()?rh:nh,i={...t,get relay(){return Wo(u.state)},get navigatorContext(){return a()}},s=$b(e,i,n),u={addReducers(c){n.containsAll(c)||(n.add(c),s.replaceReducer(n.combinedReducer));},dispatch:s.dispatch,subscribe:s.subscribe,enableAnalytics(){s.dispatch(As());},disableAnalytics(){s.dispatch(Cs());},get state(){return s.getState()},get relay(){return Wo(this.state)},get navigatorContext(){return a()},logger:o,store:s};return u}function $b(e,t,r){let{preloadedState:n,configuration:o}=e,a=o.name||"coveo-headless",i=Gb(e,t.logger);return ih({preloadedState:n,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:a})}function Gb(e,t){let{renewAccessToken:r}=e.configuration,n=ah(t,r);return [Zf,n,eh(t),Gf].concat(e.middlewares||[])}function zb(e){return ir(e.organizationEndpoints)}function Hb(e){return !T(e.platformUrl)||T(e.organizationEndpoints?.platform)}function Wb(e){let{platform:t}=e.organizationEndpoints;if(ir(t))return !1;let r=Bu(t);return r&&r.organizationId!==e.organizationId}var Rd=class extends Error{constructor(t){super(t),this.name="InvalidEngineConfiguration";}};var hh=at(fh());function Sh(e){return (0, hh.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function yh(e,t){let r=pv(e),n=it,o=mv(e);return {analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function pv(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function mv(e){return e.preprocessRequest||za}var Ch={organizationId:F,accessToken:F,platformUrl:new R({required:!1,emptyAllowed:!1}),name:new R({required:!1,emptyAllowed:!1}),analytics:new x({options:{required:!1},values:{enabled:new M({required:!1}),originContext:new R({required:!1}),originLevel2:new R({required:!1}),originLevel3:new R({required:!1}),analyticsMode:new R({constrainTo:["legacy","next"],required:!1})}})};var Ah=new Z({...Ch,insightId:F});var gv={insightConfiguration:ki,search:X,insightInterface:Or,searchHub:Rs,resultPreview:Xn};function fv(e){let t=Sh(e.loggerOptions);hv(e.configuration,t);let r=Sv(e.configuration,t),n=yv(t),o={...yh(e.configuration,t),apiClient:r,streamingClient:n},a={...e,reducers:gv},i=sh(a,o),{insightId:s}=e.configuration;return i.dispatch(Ei({insightId:s})),{...i,get state(){return i.state},executeFirstSearch(u=$i()){Fs(i.state)||i.dispatch(G({legacy:u,next:Bg()}));}}}function hv(e,t){try{Ah.validate(e);}catch(r){throw t.error(r,"Insight engine configuration error"),r}}function Sv(e,t){return new Ka({logger:t,preprocessRequest:e.preprocessRequest||za})}function yv(e){return new Ga({logger:e})}var Cn={id:F},eo=h("querySuggest/register",e=>S(e,{...Cn,count:new q({min:0})})),Rh=h("querySuggest/unregister",e=>S(e,Cn)),to=h("querySuggest/selectSuggestion",e=>S(e,{...Cn,expression:de})),ro=h("querySuggest/clear",e=>S(e,Cn)),qs=k("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o}})=>{o(e,Cn);let a=e.id,i=await Cv(a,t()),s=await n.querySuggest(i);return le(s)?r(s.error):{id:a,q:i.q,...s.success}}),Cv=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Me.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await Fe(t.configuration.analytics),...t.configuration.analytics.enabled&&await Nt(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});function dU(e){return e.addReducers({search:X}),{executeSearch:Cf,fetchFacetValues:Ff,fetchMoreResults:Rf,fetchPage:Af,fetchQuerySuggestions:Yi,registerQuerySuggest:eo}}var Fh={q:new R},xh={};var bh=h("commerce/searchParameters/restore",e=>S(e,Fh));h("commerce/productListingParameters/restore",e=>S(e,xh));var vh={id:F,query:de},no=h("querySet/register",e=>S(e,vh)),An=h("querySet/update",e=>S(e,vh));var Ds=B(Ui(),e=>{e.addCase(no,(t,r)=>{let{id:n,query:o}=r.payload;n in t||(t[n]=o);}).addCase(An,(t,r)=>{let{id:n,query:o}=r.payload;Id(t,n,o);}).addCase(to,(t,r)=>{let{id:n,expression:o}=r.payload;Id(t,n,o);}).addCase(pe.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;wh(t,n);}).addCase(fe,Ih).addCase(bh,Ih).addCase(ge.fulfilled,(t,r)=>{if(r.payload)for(let[n,o]of Object.entries(r.payload.querySet))Id(t,n,o);});});function Ih(e,t){T(t.payload.q)||wh(e,t.payload.q);}function wh(e,t){Object.keys(e).forEach(r=>e[r]=t);}var Id=(e,t,r)=>{t in e&&(e[t]=r);};var _=F;var Av={categoryFacetId:_,categoryFacetPath:new Q({required:!0,each:F})},Rv=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let o=e.categoryFacetSet[t]?.request.field,a=`${o}_${t}`;return {categoryFacetId:t,categoryFacetPath:r,categoryFacetField:o,categoryFacetTitle:a}},Vs=e=>w("breadcrumbFacet")("analytics/categoryFacet/breadcrumb",(t,r)=>{S(e,Av);let n={...Rv(r,e),...v(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});var oo=e=>w("showMoreFacetResults")("analytics/facet/showMore",(t,r)=>{S(e,_);let n={...mn(e,He(r)),...v(r.insightCaseContext)};return t.logFacetShowMore(n)}),ao=e=>w("showLessFacetResults")("analytics/facet/showLess",(t,r)=>{S(e,_);let n={...mn(e,He(r)),...v(r.insightCaseContext)};return t.logFacetShowLess(n)}),Qt=e=>w("facetUpdateSort")("analytics/facet/sortChange",(t,r)=>{S(e,{facetId:_,sortCriterion:new ue({required:!0})});let{facetId:n,sortCriterion:o}=e,a=He(r),s={...mn(n,a),criteria:o,...v(r.insightCaseContext)};return t.logFacetUpdateSort(s)}),Be=e=>w("facetClearAll")("analytics/facet/reset",(t,r)=>{S(e,_);let n=He(r),o={...mn(e,n),...v(r.insightCaseContext)};return t.logFacetClearAll(o)}),$e=e=>w("facetSelect")("analytics/facet/select",(t,r)=>{S(e,{facetId:_,facetValue:F});let n=He(r),o={...jn(e,n),...v(r.insightCaseContext)};return t.logFacetSelect(o)}),At=e=>w("facetDeselect")("analytics/facet/deselect",(t,r)=>{S(e,{facetId:_,facetValue:F});let n=He(r),o={...jn(e,n),...v(r.insightCaseContext)};return t.logFacetDeselect(o)}),pa=e=>w("breadcrumbFacet")("analytics/facet/breadcrumb",(t,r)=>{S(e,{facetId:_,facetValue:F});let n={...jn(e,He(r)),...v(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});var Ns=()=>w("breadcrumbResetAll")("analytics/facet/deselectAllBreadcrumbs",(e,t)=>e.logBreadcrumbResetAll(v(t.insightCaseContext)));var Ms=(e,{facetId:t,selection:r})=>{let o=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,a=`${o}_${t}`;return {facetId:t,facetField:o,facetTitle:a,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},Ls=()=>({actionCause:"breadcrumbFacet"});var Rn={state:F,start:new q({required:!0}),end:new q({required:!0}),endInclusive:new M({required:!0}),numberOfResults:new q({required:!0,min:0})},Fn={start:F,end:F,endInclusive:new M({required:!0}),state:F,numberOfResults:new q({required:!0,min:0})},gr=e=>({facetId:_,selection:typeof e.start=="string"?new x({values:Fn}):new x({values:Rn})});var ma=e=>w("breadcrumbFacet")("analytics/dateFacet/breadcrumb",(t,r)=>{S(e,gr(e.selection));let n={...Ms(r,e),...v(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});var Ph=(e,{facetId:t,selection:r})=>{let o=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,a=`${o}_${t}`;return {facetId:t,facetField:o,facetTitle:a,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}};var ga=e=>w("breadcrumbFacet")("analytics/numericFacet/breadcrumb",(t,r)=>{S(e,gr(e.selection));let n={...Ph(r,e),...v(r.insightCaseContext)};return t.logBreadcrumbFacet(n)});var xn={value:F,numberOfResults:new q({min:0}),state:F};var vv=new q({min:1,default:8,required:!1}),Iv=new q({min:1,max:20,default:5,required:!1}),wv={desiredCount:Iv,numberOfValues:vv};h("automaticFacet/setOptions",e=>S(e,wv));h("automaticFacet/deselectAll",e=>S(e,_));var Pv=F,Oh=h("automaticFacet/toggleSelectValue",e=>S(e,{field:Pv,selection:new x({values:xn})}));var Ev={state:new ue({required:!0}),numberOfResults:new q({required:!0,min:0}),value:new R({required:!0,emptyAllowed:!0}),path:new Q({required:!0,each:F}),moreValuesAvailable:new M({required:!1})};function wd(e){e.children.forEach(t=>{wd(t);}),it({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Ev);}var io={facetId:_,field:F,delimitingCharacter:new R({required:!1,emptyAllowed:!0}),filterFacetCount:new M({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),basePath:new Q({required:!1,each:F}),filterByBasePath:new M({required:!1})};var so=h("categoryFacet/register",e=>S(e,io)),co=h("categoryFacet/toggleSelectValue",e=>{try{return it(e.facetId,F),wd(e.selection),{payload:e,error:null}}catch(t){return {payload:e,error:Ze(t)}}}),Br=h("categoryFacet/deselectAll",e=>S(e,io.facetId)),fa=h("categoryFacet/updateNumberOfValues",e=>S(e,{facetId:io.facetId,numberOfValues:io.numberOfValues})),Qs=h("categoryFacet/updateSortCriterion",e=>S(e,{facetId:io.facetId,criterion:new ue})),Th=h("categoryFacet/updateBasePath",e=>S(e,{facetId:io.facetId,basePath:new Q({each:F})}));var ha={facetId:_,captions:new x({options:{required:!1}}),numberOfValues:new q({required:!1,min:1}),query:new R({required:!1,emptyAllowed:!0})};var kv={path:new Q({required:!0,each:F}),displayValue:de,rawValue:de,count:new q({required:!0,min:0})},Bs=h("categoryFacet/selectSearchResult",e=>S(e,{facetId:_,value:new x({values:kv})})),qh=h("categoryFacetSearch/register",e=>S(e,ha));var Dh={facetId:_,value:new x({values:{displayValue:de,rawValue:de,count:new q({required:!0,min:0})}})},Vh=h("facetSearch/register",e=>S(e,ha)),_s=h("facetSearch/update",e=>S(e,ha)),Us=h("facetSearch/toggleSelectValue",e=>S(e,Dh)),js=h("facetSearch/toggleExcludeValue",e=>S(e,Dh));function Sa(e){let t=Nh(e.start,e),r=Nh(e.end,e),n=e.endInclusive??!1,o=e.state??"idle";return {start:t,end:r,endInclusive:n,state:o}}function Nh(e,t){let{dateFormat:r}=t;return ef(e)?(Vi(e),Jg(e)):typeof e=="string"&&Tr(e)?(Vi(e),e):(Hg(e,r),Di(Gn(e,r)))}var Bt=new R({regex:/^[a-zA-Z0-9-_]+$/}),_t=new R({required:!0}),Mh=new Q({each:new R}),Lh=new R,Qh=new M,Ut=new M,jt=new q({min:0}),Rt=new q({min:1}),$s=new M({required:!0}),Ov=new x,Tv=new R,qv={captions:Ov,numberOfValues:Rt,query:Tv},uo=new x({values:qv}),Gs=new x({options:{required:!1},values:{type:new R({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new Q({required:!0,max:25,each:new R({emptyAllowed:!1,required:!0})})}});new M;var zs=new Q({min:1,max:25,required:!1,each:new R({emptyAllowed:!1,required:!0})});var Dv={facetId:_,field:new R({required:!0,emptyAllowed:!0}),filterFacetCount:new M({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),resultsMustMatch:new ue({required:!1}),allowedValues:Gs,customSort:zs},lo=h("facet/register",e=>S(e,Dv)),_r=h("facet/toggleSelectValue",e=>S(e,{facetId:_,selection:new x({values:xn})})),Ur=h("facet/toggleExcludeValue",e=>S(e,{facetId:_,selection:new x({values:xn})})),be=h("facet/deselectAll",e=>S(e,_)),Hs=h("facet/updateSortCriterion",e=>S(e,{facetId:_,criterion:new ue({required:!0})})),ya=h("facet/updateNumberOfValues",e=>S(e,{facetId:_,numberOfValues:new q({required:!0,min:1})})),Ca=h("facet/updateIsFieldExpanded",e=>S(e,{facetId:_,isFieldExpanded:new M({required:!0})})),bn=h("facet/updateFreezeCurrentValues",e=>S(e,{facetId:_,freezeCurrentValues:new M({required:!0})}));var po=h("rangeFacet/updateSortCriterion",e=>S(e,{facetId:_,criterion:new ue({required:!0})}));var Vv={start:F,end:F,endInclusive:new M({required:!0}),state:F},Nv={facetId:_,field:F,currentValues:new Q({required:!1,each:new x({values:Vv})}),generateAutomaticRanges:new M({required:!0}),filterFacetCount:new M({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),rangeAlgorithm:new ue({required:!1})};function Bh(e){return Tr(e)?sa(e):e}function Ws(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=Sa(t);if(Gn(Bh(r)).isAfter(Gn(Bh(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)});}var $t=h("dateFacet/register",e=>{try{return it(e,Nv),Ws(e),{payload:e,error:null}}catch(t){return {payload:e,error:Ze(t)}}}),Gt=h("dateFacet/toggleSelectValue",e=>S(e,{facetId:_,selection:new x({values:Fn})})),zt=h("dateFacet/toggleExcludeValue",e=>S(e,{facetId:_,selection:new x({values:Fn})})),fr=h("dateFacet/updateFacetValues",e=>{try{return it(e,{facetId:_,values:new Q({each:new x({values:Fn})})}),Ws({currentValues:e.values}),{payload:e,error:null}}catch(t){return {payload:e,error:Ze(t)}}}),Ys=po,Ks=be;var Mv={state:F,start:new q({required:!0}),end:new q({required:!0}),endInclusive:new M({required:!0})},Lv={facetId:_,field:F,currentValues:new Q({required:!1,each:new x({values:Mv})}),generateAutomaticRanges:new M({required:!0}),filterFacetCount:new M({required:!1}),injectionDepth:new q({required:!1,min:0}),numberOfValues:new q({required:!1,min:1}),sortCriteria:new ue({required:!1}),rangeAlgorithm:new ue({required:!1})};function Js(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)});}var Ht=h("numericFacet/register",e=>{try{return S(e,Lv),Js(e),{payload:e,error:null}}catch(t){return {payload:e,error:Ze(t)}}}),Wt=h("numericFacet/toggleSelectValue",e=>S(e,{facetId:_,selection:new x({values:Rn})})),Yt=h("numericFacet/toggleExcludeValue",e=>S(e,{facetId:_,selection:new x({values:Rn})})),hr=h("numericFacet/updateFacetValues",e=>{try{return it(e,{facetId:_,values:new Q({each:new x({values:Rn})})}),Js({currentValues:e.values}),{payload:e,error:null}}catch(t){return {payload:e,error:Ze(t)}}}),Xs=po,Zs=be;var Ft=e=>e.error!==void 0;var mo=(r=>(r.Relevance="relevance",r.Fields="fields",r))(mo||{}),ec=(r=>(r.Ascending="asc",r.Descending="desc",r))(ec||{});new x({options:{required:!1},values:{by:new gt({enum:mo,required:!0}),fields:new Q({each:new x({values:{name:new R,direction:new gt({enum:ec})}})})}});var _h=()=>Dg("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new gn(e));h("productlisting/setUrl",e=>S(e,{url:new R({required:!0,url:!0})}));h("productlisting/setAdditionalFields",e=>S(e,{additionalFields:new Q({required:!0,each:new R({required:!0,emptyAllowed:!1})})}));var jr=k("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t(),{apiClient:i}=o,s=await i.getProducts(await Bv(a));return Ft(s)?(r(Ve(s.error)),n(s.error)):{response:s.success,analyticsAction:_h()}}),Bv=async e=>{let t=Uv(e),r=await Fe(e.configuration.analytics);return {accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:e.productListing?.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...e.productListing.additionalFields?.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&_v(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(e.sort?.by||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function _v(e){return e.debug}function Uv(e){return Jn(jv(e),e.facetOrder??[])}function jv(e){return [...Ct(e.facetSet??{}),...Ct(e.numericFacetSet??{}),...Ct(e.dateFacetSet??{}),...Ct(e.categoryFacetSet??{})]}var fo=B(Mt(),e=>{e.addCase(es,(t,r)=>{let n=Pd(t),o=r.payload;t.defaultNumberOfResults=t.numberOfResults=o,t.firstResult=Aa(n,o);}).addCase(ts,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0;}).addCase(pr,t=>{t.firstResult=0;}).addCase(rs,(t,r)=>{let n=r.payload;t.firstResult=Aa(n,t.numberOfResults);}).addCase(lt,(t,r)=>{let n=r.payload;t.firstResult=Aa(n,t.numberOfResults);}).addCase(os,t=>{let r=Pd(t),n=Math.max(r-1,1);t.firstResult=Aa(n,t.numberOfResults);}).addCase(ns,t=>{let r=Pd(t),n=$v(t),o=Math.min(r+1,n);t.firstResult=Aa(o,t.numberOfResults);}).addCase(ge.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult);}).addCase(fe,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults;}).addCase(pe.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered;}).addCase(jr.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount;}).addCase(be,t=>{_e(t);}).addCase(zt,t=>{_e(t);}).addCase(Ur,t=>{_e(t);}).addCase(Yt,t=>{_e(t);}).addCase(js,t=>{_e(t);}).addCase(_r,t=>{_e(t);}).addCase(Br,t=>{_e(t);}).addCase(co,t=>{_e(t);}).addCase(Bs,t=>{_e(t);}).addCase(Gt,t=>{_e(t);}).addCase(Wt,t=>{_e(t);}).addCase(Ee,t=>{_e(t);}).addCase(fr,t=>{_e(t);}).addCase(hr,t=>{_e(t);}).addCase(Us,t=>{_e(t);}).addCase(Oh,t=>{_e(t);});});function _e(e){e.firstResult=Mt().firstResult;}function Pd(e){let{firstResult:t,numberOfResults:r}=e;return Ed(t,r)}function $v(e){let{totalCountFiltered:t,numberOfResults:r}=e;return kd(t,r)}function Aa(e,t){return (e-1)*t}function Ed(e,t){return Math.round(e/t)+1}function kd(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function Gv(e){return e.pagination.firstResult}function Uh(e){return e.pagination.numberOfResults}function zv(e){return e.pagination.totalCountFiltered}var $r=e=>{let t=Gv(e),r=Uh(e);return Ed(t,r)},Od=e=>{let t=zv(e),r=Uh(e);return kd(t,r)},jh=(e,t)=>{let r=$r(e),n=Od(e),o=Hv(r,t);return o=Wv(o),o=Yv(o,n),Kv(o)};function Hv(e,t){let r=t%2===0,n=Math.floor(t/2),o=r?n-1:n,a=e-n,i=e+o;return {start:a,end:i}}function Wv(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return {start:r,end:n}}function Yv(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),o=e.end-r;return {start:n,end:o}}function Kv(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var tc=()=>w("pagerNumber")("analytics/pager/number",(e,t)=>e.logPagerNumber({pagerNumber:$r(t),...v(t.insightCaseContext)})),rc=()=>w("pagerNext")("analytics/pager/next",(e,t)=>e.logPagerNext({pagerNumber:$r(t),...v(t.insightCaseContext)})),nc=()=>w("pagerPrevious")("analytics/pager/previous",(e,t)=>e.logPagerPrevious({pagerNumber:$r(t),...v(t.insightCaseContext)}));var Sr=e=>{let t=v(e.insightCaseContext);return {targetId:t.caseId||"",targetType:"Case",caseNumber:t.caseNumber}};var oc=e=>w("staticFilterDeselect")("analytics/staticFilter/deselect",(t,r)=>t.logStaticFilterDeselect({...e,...v(r.insightCaseContext)}));var ce=h("facetOptions/update",(e={freezeFacetOrder:!0})=>S(e,{freezeFacetOrder:new M({required:!1})})),Ke=h("facetOptions/facet/enable",e=>S(e,_)),Ae=h("facetOptions/facet/disable",e=>S(e,_));function So(e,t){let{facetId:r,criterion:n}=t,o=e[r]?.request;o&&(o.sortCriteria=n);}function Ra(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0);}function ac(e,t){e&&(e.numberOfValues=t);}var sc={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function cc(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let o=Hh(r);r.numberOfValues=o,e[n]=t;}function uc(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=Hh(n));}function lc(e,t,r){let n=e[t]?.request;if(!n)return;let o=ic(n.currentValues,r);if(!o)return;let a=o.state==="selected";o.state=a?"idle":"selected",n.preventAutoSelect=!0;}function dc(e,t,r){let n=e[t]?.request;if(!n)return;let o=ic(n.currentValues,r);if(!o)return;let a=o.state==="excluded";o.state=a?"idle":"excluded",n.preventAutoSelect=!0;}function Gr(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(n=>n.state="idle");}function pc(e,t){Object.entries(e).forEach(([r,{request:n}])=>{let o=t[r]||[];n.currentValues.forEach(s=>{let u=!!ic(o,s);return s.state=u?"selected":"idle",s});let a=o.filter(s=>!ic(n.currentValues,s)),i=n.currentValues;i.push(...a),n.numberOfValues=Math.max(n.numberOfValues,i.length);});}function yo(e,t,r){t.forEach(n=>{let o=n.facetId,a=e[o]?.request;if(!a)return;let i=r(n.values);a.currentValues=i,a.preventAutoSelect=!1;});}function ic(e,t){let{start:r,end:n}=t;return e.find(o=>o.start===r&&o.end===n)}function Hh(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Kt=B(Bn(),e=>{e.addCase($t,(t,r)=>{let{payload:n}=r,o=Jv(n);cc(t,Cg(o));}).addCase(ge.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(fe,(t,r)=>{let n=r.payload.df||{};pc(t,n);}).addCase(Gt,(t,r)=>{let{facetId:n,selection:o}=r.payload;lc(t,n,o);}).addCase(zt,(t,r)=>{let{facetId:n,selection:o}=r.payload;dc(t,n,o);}).addCase(fr,(t,r)=>{let{facetId:n,values:o}=r.payload;uc(t,n,o);}).addCase(Ks,(t,r)=>{Gr(t,r.payload);}).addCase(Ee,t=>{Object.keys(t).forEach(r=>{Gr(t,r);});}).addCase(Ys,(t,r)=>{So(t,r.payload);}).addCase(pe.fulfilled,(t,r)=>{let n=r.payload.response.facets;yo(t,n,Wh);}).addCase(jr.fulfilled,(t,r)=>{let n=r.payload.response?.facets?.results||[];yo(t,n,Wh);}).addCase(Ae,(t,r)=>{Gr(t,r.payload);});});function Jv(e){return {...sc,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Wh(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}function Ez(e){return e.addReducers({dateFacetSet:Kt}),{deselectAllDateFacetValues:Ks,registerDateFacet:$t,toggleSelectDateFacetValue:Gt,toggleExcludeDateFacetValue:zt,updateDateFacetSortCriterion:Ys,updateDateFacetValues:fr}}var zr=B(_n(),e=>{e.addCase(Ht,(t,r)=>{let{payload:n}=r,o=Xv(n);cc(t,Ag(o));}).addCase(ge.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(fe,(t,r)=>{let n=r.payload.nf||{};pc(t,n);}).addCase(Wt,(t,r)=>{let{facetId:n,selection:o}=r.payload;lc(t,n,o);}).addCase(Yt,(t,r)=>{let{facetId:n,selection:o}=r.payload;dc(t,n,o);}).addCase(hr,(t,r)=>{let{facetId:n,values:o}=r.payload;uc(t,n,o);}).addCase(Zs,(t,r)=>{Gr(t,r.payload);}).addCase(Ee,t=>{Object.keys(t).forEach(r=>{Gr(t,r);});}).addCase(Xs,(t,r)=>{So(t,r.payload);}).addCase(pe.fulfilled,(t,r)=>{let n=r.payload.response.facets;yo(t,n,Yh);}).addCase(jr.fulfilled,(t,r)=>{let n=r.payload.response?.facets?.results||[];yo(t,n,Yh);}).addCase(Ae,(t,r)=>{Gr(t,r.payload);});});function Xv(e){return {...sc,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Yh(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}function Kz(e){return e.addReducers({numericFacetSet:zr}),{deselectAllNumericFacetValues:Zs,registerNumericFacet:Ht,toggleSelectNumericFacetValue:Wt,toggleExcludeNumericFacetValue:Yt,updateNumericFacetSortCriterion:Xs,updateNumericFacetValues:hr}}var Zv={results:new Q({required:!0,each:new x({values:aa})}),maxLength:new q({required:!0,min:1,default:10})},mc=h("recentResults/registerRecentResults",e=>S(e,Zv)),Jt=h("recentResults/pushRecentResult",e=>(De(e),{payload:e})),gc=h("recentResults/clearRecentResults");function Kh(){return {results:[],maxLength:10}}B(Kh(),e=>{e.addCase(mc,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength;}).addCase(gc,t=>{t.results=[];}).addCase(Jt,(t,r)=>{let n=r.payload;t.results=t.results.filter(a=>a.uniqueId!==n.uniqueId);let o=t.results.slice(0,t.maxLength-1);t.results=[n,...o];});});var fc=h("insight/caseContext/set",e=>{let t=new x({options:{required:!0}}),r=S(e,t).error;if(r)return {payload:e,error:r};let n=Object.values(e),o=new Q({each:de}),a=S(n,o).error;return a?{payload:e,error:a}:{payload:e}}),hc=h("insight/caseId/set",e=>{let r=S(e,de).error;return r?{payload:e,error:r}:{payload:e}}),Sc=h("insight/caseNumber/set",e=>{let r=S(e,de).error;return r?{payload:e,error:r}:{payload:e}});B(mf(),e=>{e.addCase(fc,(t,r)=>{t.caseContext=r.payload;}).addCase(hc,(t,r)=>{t.caseId=r.payload;}).addCase(Sc,(t,r)=>{t.caseNumber=r.payload;});});var eI=new Q({each:F,required:!0}),Zh=(e,t)=>(S(e,F),In(t)?S(t,F):S(t,eI),{payload:{contextKey:e,contextValue:t}}),yc=h("context/set",e=>{for(let[t,r]of Object.entries(e))Zh(t,r);return {payload:e}}),Cc=h("context/add",e=>Zh(e.contextKey,e.contextValue)),Ac=h("context/remove",e=>S(e,F));B(Qi(),e=>{e.addCase(yc,(t,r)=>{t.contextValues=r.payload;}).addCase(Cc,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue;}).addCase(Ac,(t,r)=>{delete t.contextValues[r.payload];}).addCase(ge.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues);});});var Fa={collectionField:new R({emptyAllowed:!1,required:!1}),parentField:new R({emptyAllowed:!1,required:!1}),childField:new R({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new q({min:0,required:!1})},Hr=h("folding/register",e=>S(e,Fa)),Co=k("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=o.configuration.analytics.analyticsMode==="legacy"?await Kn(o):await Yn(o),i=await n.search({...a,q:tI(o),enableQuerySyntax:!0,cq:`@${o.folding.fields.collection}="${e}"`,filterField:o.folding.fields.collection,childField:o.folding.fields.parent,parentField:o.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return le(i)?r(i.error):{collectionId:e,results:i.success.results,rootResult:o.folding.collections[e].result}});function tI(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Rc=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var Wr=h("fields/registerFieldsToInclude",e=>S(e,Ja)),Fc=h("fields/fetchall/enable"),xc=h("fields/fetchall/disable"),bc=k("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),{accessToken:a,organizationId:i}=o.configuration,{apiBaseUrl:s}=o.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:i,url:s});return le(u)?n(u.error):u.success.fields});var tS=["author","language","urihash","objecttype","collection","source","permanentid"],rS=()=>({fieldsToInclude:tS,fetchAllFields:!1,fieldsDescription:[]});var Ao=B(rS(),e=>e.addCase(Wr,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))];}).addCase(Fc,t=>{t.fetchAllFields=!0;}).addCase(xc,t=>{t.fetchAllFields=!1;}).addCase(bc.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r;}).addCase(Hr,(t,{payload:r})=>{let n=Rc().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child);}));function gW(e){return e.addReducers({fields:Ao}),{registerFieldsToInclude:Wr,enableFetchAllFields:Fc,disableFetchAllFields:xc,fetchFieldsDescription:bc}}var nS=new x({options:{required:!0},values:{articleLanguage:ee,articlePublishStatus:ee,articleVersionNumber:ee,caseId:F,knowledgeArticleId:ee,name:ee,permanentId:ee,resultUrl:ee,source:ee,title:F,uriHash:ee}}),vc=h("insight/attachToCase/setAttachedResults",e=>S(e,{results:new Q({each:nS}),loading:new M({required:!1,default:!1})})),Ic=h("insight/attachToCase/attach",e=>oS(e)),wc=h("insight/attachToCase/detach",e=>oS(e)),oS=e=>T(e.result.permanentId)&&T(e.result.uriHash)?{payload:e,error:Ze(new ar("Either permanentId or uriHash is required"))}:S(e,{result:nS});function aS(){return {results:[],loading:!1}}B(aS(),e=>{e.addCase(vc,(t,r)=>{let{results:n,loading:o}=r.payload;"results"in t&&t.results?.length>0||(t.results=n,o&&(t.loading=o));}).addCase(Ic,(t,r)=>{(!T(r.payload.result.permanentId)||!T(r.payload.result.uriHash))&&(t.results=[...t.results,r.payload.result]);}).addCase(wc,(t,r)=>{t.results=t.results.filter(n=>nI(n,r.payload.result));});});var nI=(e,t)=>{let r=!T(e.permanentId)&&e?.permanentId===t?.permanentId,n=!T(e.uriHash)&&e?.uriHash===t?.uriHash;return !(e.caseId===t.caseId)||!r&&!n};var Ec=()=>new x({values:{questionAnswerId:F},options:{required:!0}}),Td=()=>new x({values:{linkText:de,linkURL:de},options:{required:!0}});function Ro(e){return S(e,Ec())}var Fo=h("smartSnippet/expand"),xo=h("smartSnippet/collapse"),bo=h("smartSnippet/like"),vo=h("smartSnippet/dislike"),Io=h("smartSnippet/feedbackModal/open"),Yr=h("smartSnippet/feedbackModal/close"),wo=h("smartSnippet/related/expand",e=>Ro(e)),Po=h("smartSnippet/related/collapse",e=>Ro(e));var qd=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var iS=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function sS({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Pn({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function oI(e,t){let r=sS(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Xt=B(qd(),e=>e.addCase(Fo,t=>{t.expanded=!0;}).addCase(xo,t=>{t.expanded=!1;}).addCase(bo,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1;}).addCase(vo,t=>{t.liked=!1,t.disliked=!0;}).addCase(Io,t=>{t.feedbackModalOpen=!0;}).addCase(Yr,t=>{t.feedbackModalOpen=!1;}).addCase(pe.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((a,i)=>oI(a,t.relatedQuestions[i])),o=sS(r.payload.response.questionAnswer);return t.questionAnswerId===o?{...t,relatedQuestions:n}:{...qd(),relatedQuestions:n,questionAnswerId:o}}).addCase(wo,(t,r)=>{let n=iS(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0);}).addCase(Po,(t,r)=>{let n=iS(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1);}));function aI(e,t){return e.raw[t.collection]}function Dd(e,t){return e.raw[t.parent]}function xa(e,t){let r=e.raw[t.child];return Ba(r)?r[0]:r}function iI(e,t){return (e||t)!==void 0&&e===t}function uS(e,t,r,n=[]){let o=xa(e,r);return o?n.indexOf(o)!==-1?[]:t.filter(a=>{let i=xa(a,r)===xa(e,r);return Dd(a,r)===o&&!i}).map(a=>({result:a,children:uS(a,t,r,[...n,o])})):[]}function sI(e,t){return e.find(r=>{let n=Dd(r,t)===void 0,o=iI(Dd(r,t),xa(r,t));return n||o})}function lS(e){return e.parentResult?lS(e.parentResult):e}function cI(e,t,r){let n=wi(e),o=r??sI(n,t)??lS(e);return {result:o,children:uS(o,n,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function kc(e,t,r){let n={};return e.forEach(o=>{let a=aI(o,t);a&&(!xa(o,t)&&!o.parentResult||(n[a]=cI(o,t,r)));}),n}function cS(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var Oc=B(Rc(),e=>e.addCase(pe.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?kc(r.response.results,t.fields):{};}).addCase(ds.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?kc(r.response.results,t.fields):{};}).addCase(ps.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...kc(r.response.results,t.fields)}:{};}).addCase(Hr,(t,{payload:r})=>t.enabled?t:{enabled:!0,collections:{},fields:{collection:r.collectionField??t.fields.collection,parent:r.parentField??t.fields.parent,child:r.childField??t.fields.child},filterFieldRange:r.numberOfFoldedResults??t.filterFieldRange}).addCase(Co.pending,(t,{meta:r})=>{let n=r.arg;cS(t,n).isLoadingMoreResults=!0;}).addCase(Co.rejected,(t,{meta:r})=>{let n=r.arg;cS(t,n).isLoadingMoreResults=!1;}).addCase(Co.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:o}})=>{let a=kc(n,t.fields,o);if(!a||!a[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=a[r],t.collections[r].moreResultsAvailable=!1;}));function z(e){let t,r=new Map,n=()=>r.size===0,o=a=>{try{let i=JSON.stringify(a),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return {subscribe(a){a();let i=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{o(this.state)&&r.forEach(u=>u());})),r.set(i,a),()=>{r.delete(i),n()&&s&&s();}},get state(){return {}}}}se(e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!=="",e=>e);var pS=(e,t)=>{let r={...cf(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery;};B(uf(),e=>{e.addCase(Ni,t=>{t.enableDidYouMean=!0;}).addCase(af,t=>{t.enableDidYouMean=!1;}).addCase(sf,t=>{t.automaticallyCorrectQuery=!0;}).addCase(Mi,t=>{t.automaticallyCorrectQuery=!1;}).addCase(pe.pending,t=>{t.queryCorrection=Dr(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo="";}).addCase(pe.fulfilled,(t,r)=>{let{queryCorrection:n,queryCorrections:o}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let a=o&&o[0]?o[0]:Dr();t.queryCorrection=a;}t.queryCorrectionMode==="next"&&pS(t,n),t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery;}).addCase(We,(t,r)=>{t.wasCorrectedTo=r.payload;}).addCase(Li,(t,r)=>{t.queryCorrectionMode=r.payload;});});({categoryFacetId:_,categoryFacetPath:new Q({required:!0,each:F})});var fS=()=>({actionCause:"breadcrumbFacet"});function Tc(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0);}function Vd(e,t,r){e.currentValues=dI(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0;}function dI(e,t){if(!e.length)return [];let r=hS(e[0],t),n=r;for(let o of e.splice(1)){let a=hS(o,t);n.children.push(a),n=a;}return n.state="selected",n.retrieveChildren=!0,[r]}function hS(e,t){return {value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var qc=B(Qn(),e=>{e.addCase(so,(t,r)=>{let n=r.payload,{facetId:o}=n;if(o in t)return;let a=mI(n),i=a.numberOfValues;t[o]={request:a,initialNumberOfValues:i};}).addCase(ge.fulfilled,(t,r)=>r.payload?.categoryFacetSet??t).addCase(fe,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(o=>{let a=t[o].request,i=n[o]||[];(i.length||a.currentValues.length)&&Vd(a,i,t[o].initialNumberOfValues);});}).addCase(Qs,(t,r)=>{let{facetId:n,criterion:o}=r.payload,a=t[n]?.request;a&&(a.sortCriteria=o);}).addCase(Th,(t,r)=>{let{facetId:n,basePath:o}=r.payload,a=t[n]?.request;a&&(a.basePath=[...o]);}).addCase(co,(t,r)=>{let{facetId:n,selection:o,retrieveCount:a}=r.payload,i=t[n]?.request;if(!i)return;let{path:s}=o,u=s.slice(0,s.length-1),c=pI(i,u,a);if(c.length){let d=c[0];d.retrieveChildren=!0,d.state="selected",d.children=[];return}let l=yS(o.value,a);l.state="selected",c.push(l),i.numberOfValues=1;}).addCase(Br,(t,r)=>{let n=r.payload;Tc(t,n);}).addCase(Ee,t=>{Object.keys(t).forEach(r=>Tc(t,r));}).addCase(Lt,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow;})).addCase(fa,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload,a=t[n]?.request;if(a){if(!a.currentValues.length)return ac(a,o);gI(t,r.payload);}}).addCase(Bs,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n];if(!a)return;let i=[...o.path,o.rawValue];Vd(a.request,i,a.initialNumberOfValues);}).addCase(ms.fulfilled,(t,r)=>{SS(t,r.payload.response.facets);}).addCase(pe.fulfilled,(t,r)=>{SS(t,r.payload.response.facets);}).addCase(Ae,(t,r)=>{Tc(t,r.payload);});}),Nd={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function pI(e,t,r){let n=e.currentValues;for(let o of t){let a=n[0];(!a||o!==a.value)&&(a=yS(o,r),n.length=0,n.push(a)),a.retrieveChildren=!1,a.state="idle",n=a.children;}return n}function mI(e){return {...Nd,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function yS(e,t){return {value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function SS(e,t){t.forEach(r=>{if(!fI(e,r))return;let n=r.facetId,o=e[n]?.request;if(!o)return;let a=hI(o,r);o.currentValues=a?[]:o.currentValues,o.preventAutoSelect=!1;});}function gI(e,t){let{facetId:r,numberOfValues:n}=t,o=e[r]?.request.currentValues[0];if(o){for(;o.children.length&&o?.state!=="selected";)o=o.children[0];o.retrieveCount=n;}}function fI(e,t){return t.facetId in e}function hI(e,t){let r=Vt(e.currentValues),n=Vt(t.values);return r.length!==n.length}var Kr=()=>({actionCause:"facetUpdateSort"}),Je=()=>({actionCause:"facetClearAll"}),nt=()=>({actionCause:"facetSelect"}),yr=()=>({actionCause:"facetDeselect"});var Md=()=>({actionCause:"breadcrumbFacet"}),Dc=()=>({actionCause:"showLessFacetResults"}),Vc=()=>({actionCause:"showMoreFacetResults"});var ko=B(Un(),e=>{e.addCase(lo,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=Rg(SI(r.payload)));}).addCase(ge.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(fe,(t,r)=>{let n=r.payload.f||{},o=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],u=n[i]||[],c=o[i]||[],l=u.length+c.length,d=s.currentValues.filter(m=>!u.includes(m.value)&&!c.includes(m.value));s.currentValues=[...u.map(CS),...c.map(AS),...d.map(CI)],s.preventAutoSelect=l>0,s.numberOfValues=Math.max(l,s.numberOfValues);});}).addCase(_r,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===o.value);if(!i){Nc(a,o);return}let s=i.state==="selected";i.state=s?"idle":"selected",a.freezeCurrentValues=!0;}).addCase(Ur,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===o.value);if(!i){Nc(a,o);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",a.freezeCurrentValues=!0;}).addCase(bn,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n]?.request;a&&(a.freezeCurrentValues=o);}).addCase(be,(t,r)=>{Ra(t[r.payload]?.request);}).addCase(Ee,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Ra(r));}).addCase(Nr,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Ra(r));}).addCase(Lt,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow;})).addCase(Hs,(t,r)=>{So(t,r.payload);}).addCase(ya,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload;ac(t[n]?.request,o);}).addCase(Ca,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n]?.request;a&&(a.isFieldExpanded=o);}).addCase(pe.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>Ld(t[o.facetId]?.request,o));}).addCase(jr.fulfilled,(t,r)=>{(r.payload.response?.facets?.results||[]).forEach(o=>Ld(t[o.facetId]?.request,o));}).addCase(ms.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>Ld(t[o.facetId]?.request,o));}).addCase(Us,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:i}=o,{currentValues:s}=a,u=s.find(l=>l.value===i);if(u){u.state="selected";return}let c=CS(i);Nc(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0;}).addCase(js,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:i}=o,{currentValues:s}=a,u=s.find(l=>l.value===i);if(u){u.state="excluded";return}let c=AS(i);Nc(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0;}).addCase(Ae,(t,r)=>{if(!(r.payload in t))return;let{request:n}=t[r.payload];Ra(n);});});function Nc(e,t){let{currentValues:r}=e,n=r.findIndex(s=>s.state==="idle"),o=n===-1?r.length:n,a=r.slice(0,o),i=r.slice(o+1);e.currentValues=[...a,t,...i],e.numberOfValues=e.currentValues.length;}function Ld(e,t){e&&(e.currentValues=t.values.map(yI),e.freezeCurrentValues=!1,e.preventAutoSelect=!1);}var Qd={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function SI(e){return {...Qd,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function yI(e){let{value:t,state:r}=e;return {value:t,state:r}}function CS(e){return {value:e,state:"selected"}}function AS(e){return {value:e,state:"excluded"}}function CI(e){return {...e,state:"idle"}}var RS=()=>({actionCause:"breadcrumbResetAll"});var Bd=Ls;function AI(e,t){return !!t&&t.facetId in e.dateFacetSet}var FS=(e,t)=>{let r=cr(e,t);if(AI(e,r))return r},xS=(e,t)=>(FS(e,t)||{values:[]}).values.filter(n=>n.state==="selected"),bS=(e,t)=>(FS(e,t)||{values:[]}).values.filter(n=>n.state!=="idle");var _d=Ls;function RI(e,t){return !!t&&t.facetId in e.numericFacetSet}var vS=(e,t)=>{let r=cr(e,t);if(RI(e,r))return r},IS=(e,t)=>(vS(e,t)||{values:[]}).values.filter(n=>n.state!=="idle"),wS=(e,t)=>(vS(e,t)||{values:[]}).values.filter(n=>n.state==="selected");var va=F,Mc=new x({options:{required:!0},values:{caption:de,expression:de,state:new R({constrainTo:["idle","selected","excluded"]})}}),PS=new Q({required:!0,each:Mc});h("staticFilter/register",e=>S(e,{id:va,values:PS}));var ES=h("staticFilter/toggleSelect",e=>S(e,{id:va,value:Mc})),kS=h("staticFilter/toggleExclude",e=>S(e,{id:va,value:Mc}));h("staticFilter/deselectAllFilterValues",e=>S(e,va));var OS=()=>({actionCause:"staticFilterDeselect"});var Lc=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(n=>({value:n,deselect:()=>{n.state==="selected"?e.executeToggleSelect({facetId:t,selection:n}):n.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:n});}}));return {facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function TS(e){let t=z(e),{dispatch:r}=e;return {...t,get state(){return {facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Ee());},deselectBreadcrumb(n){n.deselect();}}}function FI(e){if(!xI(e));let t=TS(e),{dispatch:r}=e,n=()=>e.state,o=()=>{let p={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:g,selection:C})=>{let A=pa({facetId:g,facetValue:C.value});r(_r({facetId:g,selection:C})),r(bn({facetId:g,freezeCurrentValues:!1})),r(G({legacy:A,next:Md()}));},executeToggleExclude:({facetId:g,selection:C})=>{let A=pa({facetId:g,facetValue:C.value});r(Ur({facetId:g,selection:C})),r(bn({facetId:g,freezeCurrentValues:!1})),r(G({legacy:A,next:Md()}));},facetValuesSelector:hg};return Lc(p)},a=()=>{let p={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:g=>{r(Wt(g)),r(G({legacy:ga(g),next:_d()}));},executeToggleExclude:g=>{r(Yt(g)),r(G({legacy:ga(g),next:_d()}));},facetValuesSelector:IS};return Lc(p)},i=()=>{let p={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:g=>{r(Gt(g)),r(G({legacy:ma(g),next:Bd()}));},executeToggleExclude:g=>{r(zt(g)),r(G({legacy:ma(g),next:Bd()}));},facetValuesSelector:bS};return Lc(p)},s=p=>{let g=yg(n(),p);return {facetId:p,field:n().categoryFacetSet[p].request.field,path:g,deselect:()=>{r(Br(p)),r(G({legacy:Vs({categoryFacetPath:g.map(C=>C.value),categoryFacetId:p}),next:fS()}));}}},u=()=>Object.keys(n().categoryFacetSet).map(s).filter(p=>p.path.length),c=()=>{let p=n().staticFilterSet||{};return Object.values(p).map(l)},l=p=>{let{id:g,values:C}=p,A=C.filter(b=>b.state!=="idle").map(b=>d(g,b));return {id:g,values:A}},d=(p,g)=>({value:g,deselect:()=>{let{caption:C,expression:A}=g,b=oc({staticFilterId:p,staticFilterValue:{caption:C,expression:A}});g.state==="selected"?r(ES({id:p,value:g})):g.state==="excluded"&&r(kS({id:p,value:g})),r(G({legacy:b,next:OS()}));}});function m(){return !![...o(),...a(),...i(),...u(),...c()].length}return {...t,get state(){return {facetBreadcrumbs:o(),categoryFacetBreadcrumbs:u(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:c(),hasBreadcrumbs:m()}},deselectAll:()=>{t.deselectAll(),r(G({legacy:Ns(),next:RS()}));}}}function xI(e){return e.addReducers({configuration:J,search:X,facetSet:ko,numericFacetSet:zr,dateFacetSet:Kt,categoryFacetSet:qc}),!0}var Ud=()=>ae("analytics/searchbox/submit",e=>e.makeSearchboxSubmit());var jd=()=>ae("analytics/pager/resize",(e,t)=>e.makePagerResize({currentResultsPerPage:t.pagination?.numberOfResults||Mt().numberOfResults}));var DS=()=>({actionCause:"pagerResize"}),VS=()=>({actionCause:"pagerNext"}),NS=()=>({actionCause:"pagerPrevious"}),MS=()=>({actionCause:"pagerNumber"});var _c=()=>w("searchboxSubmit")("analytics/searchbox/submit",(e,t)=>e.logSearchboxSubmit(v(t.insightCaseContext)));var vI=Object.getOwnPropertyNames,II=Object.getOwnPropertySymbols,wI=Object.prototype.hasOwnProperty;function GS(e,t){return function(n,o,a){return e(n,o,a)&&t(n,o,a)}}function jc(e){return function(r,n,o){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,o);var a=o.cache,i=a.get(r),s=a.get(n);if(i&&s)return i===n&&s===r;a.set(r,n),a.set(n,r);var u=e(r,n,o);return a.delete(r),a.delete(n),u}}function zS(e){return vI(e).concat(II(e))}var ZS=Object.hasOwn||function(e,t){return wI.call(e,t)};function qo(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var ey="_owner",HS=Object.getOwnPropertyDescriptor,WS=Object.keys;function PI(e,t,r){var n=e.length;if(t.length!==n)return !1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return !1;return !0}function EI(e,t){return qo(e.getTime(),t.getTime())}function YS(e,t,r){if(e.size!==t.size)return !1;for(var n={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var u=t.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var d=i.value,m=d[0],p=d[1],g=s.value,C=g[0],A=g[1];!c&&!n[l]&&(c=r.equals(m,C,a,l,e,t,r)&&r.equals(p,A,m,C,e,t,r))&&(n[l]=!0),l++;}if(!c)return !1;a++;}return !0}function kI(e,t,r){var n=WS(e),o=n.length;if(WS(t).length!==o)return !1;for(var a;o-- >0;)if(a=n[o],a===ey&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!ZS(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return !1;return !0}function wa(e,t,r){var n=zS(e),o=n.length;if(zS(t).length!==o)return !1;for(var a,i,s;o-- >0;)if(a=n[o],a===ey&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!ZS(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(i=HS(e,a),s=HS(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return !1;return !0}function OI(e,t){return qo(e.valueOf(),t.valueOf())}function TI(e,t){return e.source===t.source&&e.flags===t.flags}function KS(e,t,r){if(e.size!==t.size)return !1;for(var n={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!n[c]&&(u=r.equals(a.value,i.value,a.value,i.value,e,t,r))&&(n[c]=!0),c++;if(!u)return !1}return !0}function qI(e,t){var r=e.length;if(t.length!==r)return !1;for(;r-- >0;)if(e[r]!==t[r])return !1;return !0}var DI="[object Arguments]",VI="[object Boolean]",NI="[object Date]",MI="[object Map]",LI="[object Number]",QI="[object Object]",BI="[object RegExp]",_I="[object Set]",UI="[object String]",jI=Array.isArray,JS=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,XS=Object.assign,$I=Object.prototype.toString.call.bind(Object.prototype.toString);function GI(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,u=e.areTypedArraysEqual;return function(l,d,m){if(l===d)return !0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var p=l.constructor;if(p!==d.constructor)return !1;if(p===Object)return o(l,d,m);if(jI(l))return t(l,d,m);if(JS!=null&&JS(l))return u(l,d,m);if(p===Date)return r(l,d,m);if(p===RegExp)return i(l,d,m);if(p===Map)return n(l,d,m);if(p===Set)return s(l,d,m);var g=$I(l);return g===NI?r(l,d,m):g===BI?i(l,d,m):g===MI?n(l,d,m):g===_I?s(l,d,m):g===QI?typeof l.then!="function"&&typeof d.then!="function"&&o(l,d,m):g===DI?o(l,d,m):g===VI||g===LI||g===UI?a(l,d,m):!1}}function zI(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,o={areArraysEqual:n?wa:PI,areDatesEqual:EI,areMapsEqual:n?GS(YS,wa):YS,areObjectsEqual:n?wa:kI,arePrimitiveWrappersEqual:OI,areRegExpsEqual:TI,areSetsEqual:n?GS(KS,wa):KS,areTypedArraysEqual:n?wa:qI};if(r&&(o=XS({},o,r(o))),t){var a=jc(o.areArraysEqual),i=jc(o.areMapsEqual),s=jc(o.areObjectsEqual),u=jc(o.areSetsEqual);o=XS({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u});}return o}function HI(e){return function(t,r,n,o,a,i,s){return e(t,r,s)}}function WI(e){var t=e.circular,r=e.comparator,n=e.createState,o=e.equals,a=e.strict;if(n)return function(u,c){var l=n(),d=l.cache,m=d===void 0?t?new WeakMap:void 0:d,p=l.meta;return r(u,c,{cache:m,equals:o,meta:p,strict:a})};if(t)return function(u,c){return r(u,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(u,c){return r(u,c,i)}}Zt();Zt({strict:!0});Zt({circular:!0});Zt({circular:!0,strict:!0});Zt({createInternalComparator:function(){return qo}});Zt({strict:!0,createInternalComparator:function(){return qo}});Zt({circular:!0,createInternalComparator:function(){return qo}});Zt({circular:!0,createInternalComparator:function(){return qo},strict:!0});function Zt(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=zI(e),u=GI(s),c=n?n(u):HI(u);return WI({circular:r,comparator:u,createState:o,equals:c,strict:i})}function YI(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(n=>$d(r,n))!==-1)}var $d=Zt({createCustomConfig:e=>({...e,areArraysEqual:YI})});new Z({parameters:new x({options:{required:!0},values:xs})});var Ue=B(_i(),e=>{e.addCase(ce,(t,r)=>({...t,...r.payload})).addCase(pe.fulfilled,t=>{t.freezeFacetOrder=!1;}).addCase(pe.rejected,t=>{t.freezeFacetOrder=!1;}).addCase(ge.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(so,(t,r)=>{t.facets[r.payload.facetId]=zn();}).addCase(lo,(t,r)=>{t.facets[r.payload.facetId]=zn();}).addCase($t,(t,r)=>{t.facets[r.payload.facetId]=zn();}).addCase(Ht,(t,r)=>{t.facets[r.payload.facetId]=zn();}).addCase(Ke,(t,r)=>{t.facets[r.payload].enabled=!0;}).addCase(Ae,(t,r)=>{t.facets[r.payload].enabled=!1;}).addCase(fe,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(n=>{n in t||(t.facets[n]=zn()),t.facets[n].enabled=!0;});});});var er=(e,t)=>e.facetOptions.facets[t]?.enabled??!0;var Gc=e=>cw(e.cartItems,e.cart);function cw(e,t){let r=e.reduce((n,o)=>{let{productId:a,quantity:i}=t[o];return a in n||(n[a]={productId:a,quantity:0}),n[a].quantity+=i,n},{});return [...Object.values(r)]}new x({options:{required:!1},values:{by:new gt({enum:mo,required:!0}),fields:new Q({each:new x({values:{field:new R({required:!0}),direction:new gt({enum:ec}),displayName:new R}})})}});var xt=async e=>({...await uw(e),facets:dw(e),...e.commerceSort&&{sort:pw(e.commerceSort.appliedSort)}}),uw=async(e,t)=>{let{view:r,user:n,...o}=e.commerceContext;return {accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...o,clientId:await Fe(e.configuration.analytics),context:{user:n,view:r,cart:Gc(e.cart)},...lw(e,t)}},lw=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function dw(e){return !e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map(t=>e.commerceFacetSet[t].request).filter(t=>t.values.length>0)}function pw(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var sy=async(e,t,r)=>{let o=`*${t.categoryFacetSearchSet[e].options.query}*`,a=t.commerceFacetSet[e]?.request,i=a&&mw(a)?a&&gw(a):[],s=i.length?[i]:[],u=t.commerceQuery?.query,{url:c,accessToken:l,organizationId:d,trackingId:m,language:p,country:g,currency:C,clientId:A,context:b,...I}=await xt(t);return {url:c,accessToken:l,organizationId:d,facetId:e,facetQuery:o,ignorePaths:s,trackingId:m,language:p,country:g,currency:C,clientId:A,context:b,...!r&&{...I,query:u}}};function mw(e){return e.type==="hierarchical"}var gw=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};var cy=async(e,t,r)=>{let o=`*${t.facetSearchSet[e].options.query}*`,a=t.commerceQuery?.query;a===void 0&&(a="");let{url:i,accessToken:s,organizationId:u,trackingId:c,language:l,country:d,currency:m,clientId:p,context:g,...C}=await xt(t);return {url:i,accessToken:s,organizationId:u,facetId:e,facetQuery:o,trackingId:c,language:l,country:d,currency:m,clientId:p,context:g,...!r&&{...C,query:a}}};var uy=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:o}})=>{let a=r();o(t,F);let i=fw(a,t)||hw(a,t)?cy(t,a,e):sy(t,a,e),s=await n.facetSearch(await i);return {facetId:t,response:s}},Jr=k("commerce/facetSearch/executeSearch",uy(!1)),Xr=k("commerce/facetSearch/facetFieldSuggest",uy(!1)),fw=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,hw=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1;var zc=se(e=>e.commercePagination?.principal.perPage||0,e=>e);se((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0,e=>e);var Hc=se(e=>e.commercePagination?.principal.totalEntries||0,e=>e);se((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0,e=>e);se(e=>e.commercePagination?.principal.page||0,e=>e);se((e,t)=>e.commercePagination?.recommendations[t]?.page||0,e=>e);se(e=>e.productListing.responseId,e=>e);se(e=>e.productListing.requestId,e=>e);var zd=se(e=>e.productListing?.products.length||0,e=>e),ly=se(e=>({total:Hc(e),current:zd(e)}),({current:e,total:t})=>e<t);se(e=>e.productListing?.isLoading,e=>T(e)?!1:e);se(e=>e.productListing?.error,e=>e);var Wc=k("commerce/productListing/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t(),{apiClient:i}=o,s=await i.getProductListing(await xt(a));return Ft(s)?(r(Ve(s.error)),n(s.error)):{response:s.success}});k("commerce/productListing/fetchMoreProducts",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t();if(!ly(a))return null;let{apiClient:s}=o,u=zc(a),l=zd(a)/u,d=await s.getProductListing({...await xt(a),page:l});return Ft(d)?(r(Ve(d.error)),n(d.error)):{response:d.success}});var Zr=k("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o}})=>{o(e,Cn);let a=t(),i=await Sw(e.id,a),s=await n.querySuggest(i);return Ft(s)?r(s.error):{id:e.id,query:i.query,...s.success}}),Sw=async(e,t)=>{let{view:r,user:n,...o}=t.commerceContext;return {accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...o,clientId:await Fe(t.configuration.analytics),context:{user:n,view:r,cart:Gc(t.cart)}}};var dy=h("query/updateQuery",e=>S(e,{query:new R}));se(e=>e.commerceSearch.responseId,e=>e);se(e=>e.commerceSearch.requestId,e=>e);var Hd=se(e=>e.commerceSearch?.products.length||0,e=>e),py=se(e=>({total:Hc(e),current:Hd(e)}),({current:e,total:t})=>e<t);se(e=>e.commerceSearch?.isLoading,e=>T(e)?!1:e);se(e=>e.commerceSearch?.error,e=>e);var Yc=se(e=>e.commerceQuery?.query,e=>e??"");se(e=>e.commerceSearch?.queryExecuted,e=>e);var Wd=(e,t)=>t.queryCorrection?.correctedQuery!==void 0?t.queryCorrection?.correctedQuery:Yc(e);var Kc=k("commerce/search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t(),{apiClient:i}=o,s=Yc(a),u=await i.search({...await xt(a),query:s});return Ft(u)?(r(Ve(u.error)),n(u.error)):{response:u.success,originalQuery:s,queryExecuted:Wd(a,u.success)}});k("commerce/search/fetchMoreProducts",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t();if(!py(a))return null;let{apiClient:s}=o,u=zc(a),l=Hd(a)/u,d=Yc(a),m=await s.search({...await xt(a),query:d,page:l});return Ft(m)?(r(Ve(m.error)),n(m.error)):{response:m.success,originalQuery:d,queryExecuted:Wd(a,m.success)}});k("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;S(e,{query:new R,clearFilters:new M}),e.clearFilters&&(r(Ee()),r(Nr())),r(Lt({allow:!0})),r(dy({query:e.query})),r(lt(1));});k("commerce/search/fetchInstantProducts",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t(),{q:i}=e,{apiClient:s}=o,u=await s.productSuggestions({...await xt(a),query:i});if(Ft(u))return r(Ve(u.error)),n(u.error);let c=u.success.products.slice(0,5);return {response:{...u.success,products:c}}});function Pa(e,t,r){let{facetId:n}=t;if(e[n])return;let o=!1,a={...tr,...t},i=r();e[n]={options:a,isLoading:o,response:i,initialNumberOfValues:a.numberOfValues,requestId:""};}function Jc(e,t){let{facetId:r,...n}=t,o=e[r];o&&(o.options={...o.options,...n});}function en(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0);}function tn(e,t){let r=e[t];r&&(r.isLoading=!1);}function Xc(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=o);}function Zc(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in o&&(a.response=o.success));}function eu(e,t,r,n){let{facetId:o,response:a}=t,i=e[o];if(!i)Pa(e,{facetId:o},n),i=e[o];else if(i.requestId!==r)return;i.isLoading=!1,"success"in a&&(i.response=a.success);}function my(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets)o.facetId in e||o.type!=="regular"||(e[o.facetId]={options:{...tr,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:tr.numberOfValues,requestId:r});}function gy(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets)o.facetId in e||o.type!=="hierarchical"||(e[o.facetId]={options:{...tr,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:tr.numberOfValues,requestId:r});}function Ea(e,t,r){let{facetId:n}=t,o=e[n];o&&(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=tr.query);}function Cr(e,t){Object.keys(e).forEach(r=>Ea(e,{facetId:r},t));}var tr={captions:{},numberOfValues:10,query:""};var fy=async(e,t,r)=>{let n=t.categoryFacetSearchSet[e].options,o=t.categoryFacetSet[e].request,{captions:a,query:i,numberOfValues:s}=n,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:d}=o,m=yw(o),p=m.length?[m]:[],g=`*${i}*`;return {url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:a,numberOfValues:s,query:g,field:u,delimitingCharacter:c,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await xe(t)).request}}},yw=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var hy=async(e,t,r)=>{let{captions:n,query:o,numberOfValues:a}=t.facetSearchSet[e].options,{field:i,currentValues:s,filterFacetCount:u}=t.facetSet[e].request,c=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${o}*`;return {url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:a,query:l,field:i,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await xe(t)).request}}};var Sy=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:o}})=>{let a=r(),i;o(t,F),Cw(a,t)?i=await hy(t,a,e):i=await fy(t,a,e);let s=await n.facetSearch(i);return {facetId:t,response:s}},rn=k("facetSearch/executeSearch",Sy(!1));k("facetSearch/executeSearch",Sy(!0));var tu=h("facetSearch/clearResults",e=>S(e,{facetId:_})),Cw=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;function yy(){return {}}B(yy(),e=>{e.addCase(qh,(t,r)=>{let n=r.payload;Pa(t,n,vn);}).addCase(_s,(t,r)=>{Jc(t,r.payload);}).addCase(Jr.pending,(t,r)=>{let n=r.meta.arg;en(t,n,r.meta.requestId);}).addCase(Xr.pending,(t,r)=>{let n=r.meta.arg;en(t,n,r.meta.requestId);}).addCase(rn.pending,(t,r)=>{let n=r.meta.arg;en(t,n,r.meta.requestId);}).addCase(Jr.rejected,(t,r)=>{let n=r.meta.arg;tn(t,n);}).addCase(Xr.rejected,(t,r)=>{let n=r.meta.arg;tn(t,n);}).addCase(rn.rejected,(t,r)=>{let n=r.meta.arg;tn(t,n);}).addCase(Jr.fulfilled,(t,r)=>{Zc(t,r.payload,r.meta.requestId);}).addCase(Xr.fulfilled,(t,r)=>{eu(t,r.payload,r.meta.requestId,vn);}).addCase(Zr.fulfilled,(t,r)=>{gy(t,r.payload,r.meta.requestId,vn);}).addCase(rn.fulfilled,(t,r)=>{Xc(t,r.payload,r.meta.requestId);}).addCase(tu,(t,{payload:{facetId:r}})=>{Ea(t,{facetId:r},vn);}).addCase(Wc.fulfilled,t=>Cr(t,vn)).addCase(Kc.fulfilled,t=>Cr(t,vn)).addCase(pe.fulfilled,t=>{Cr(t,vn);});});function vn(){return {moreValuesAvailable:!1,values:[]}}function Ay(e,t){let{field:r,state:n}=e;if(!Aw(e))return r;let o=`${r}_`,a=Rw(o,n);return xw(r,t),`${o}${a}`}function Aw(e){let{field:t,state:r}=e;return Ry(r).some(o=>o&&t in o)}function Rw(e,t){let n=Ry(t).map(o=>Object.keys(o||{})).reduce((o,a)=>o.concat(a),[]);return Fw(n,e)+1}function Ry(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:o}=e;return [t,r,n,o]}function Fw(e,t){return e.map(a=>{let i=a.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?0:s}).sort().pop()??0}function xw(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r);}function dt(e,t){let{state:r,logger:n}=e,{field:o,facetId:a}=t;return a||Ay({field:o,state:r},n)}var Fy=["alphanumeric","occurrences"];new Z({field:_t,basePath:Mh,delimitingCharacter:Lh,facetId:Bt,facetSearch:uo,filterByBasePath:Qh,filterFacetCount:Ut,injectionDepth:jt,numberOfValues:Rt,sortCriteria:new R({constrainTo:Fy})});var Pw=Intl.supportedValuesOf("currency"),Ew=new R({required:!0,emptyAllowed:!1,constrainTo:Pw}),Yd={url:F,referrer:cm},Kd={userId:ee,email:ee,userIp:ee,userAgent:ee},kw=new x({options:{required:!0},values:{productId:ee,sku:ee,name:ee,price:ee,quantity:ee}});({items:new Q({each:kw})});var Jd={language:F,country:F,currency:Ew,user:new x({values:Kd}),view:new x({options:{required:!0},values:Yd})};new Z(Jd);h("commerce/setContext",e=>S(e,Jd));h("commerce/setUser",e=>T(e.userId)&&T(e.email)?{payload:e,error:Ze(new ar("Either userId or email is required"))}:S(e,Kd));var vy=h("commerce/setView",e=>S(e,Yd));function Iy(){return {}}var ru=B(Iy(),e=>{e.addCase(Vh,(t,r)=>{let n=r.payload;Pa(t,n,nn);}).addCase(_s,(t,r)=>{Jc(t,r.payload);}).addCase(Jr.pending,(t,r)=>{let n=r.meta.arg;en(t,n,r.meta.requestId);}).addCase(Xr.pending,(t,r)=>{let n=r.meta.arg;en(t,n,r.meta.requestId);}).addCase(rn.pending,(t,r)=>{let n=r.meta.arg;en(t,n,r.meta.requestId);}).addCase(Jr.rejected,(t,r)=>{let n=r.meta.arg;tn(t,n);}).addCase(Xr.rejected,(t,r)=>{let n=r.meta.arg;tn(t,n);}).addCase(rn.rejected,(t,r)=>{let n=r.meta.arg;tn(t,n);}).addCase(Jr.fulfilled,(t,r)=>{Zc(t,r.payload,r.meta.requestId);}).addCase(Xr.fulfilled,(t,r)=>{eu(t,r.payload,r.meta.requestId,nn);}).addCase(Zr.fulfilled,(t,r)=>{my(t,r.payload,r.meta.requestId,nn);}).addCase(rn.fulfilled,(t,r)=>{Xc(t,r.payload,r.meta.requestId);}).addCase(tu,(t,{payload:r})=>{Ea(t,r,nn);}).addCase(pe.fulfilled,t=>{Cr(t,nn);}).addCase(Wc.fulfilled,t=>Cr(t,nn)).addCase(Kc.fulfilled,t=>Cr(t,nn)).addCase(vy,t=>Cr(t,nn));});function nn(){return {moreValuesAvailable:!1,values:[]}}var Ow=e=>e.state==="selected",wy=(e,t)=>{let r={facetId:e,facetValue:t.value};return Ow(t)?At(r):$e(r)};var Xd=e=>e.state==="selected",Py=e=>e.state==="excluded";var Ey=e=>Xd(e)?yr():nt();var ky={facetId:_,selection:new x({values:xn})},Oy=k("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},ky),n(_r({facetId:e,selection:t})),n(ce());}),Ty=k("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},ky),n(Ur({facetId:e,selection:t})),n(ce());});var Do=["allValues","atLeastOneValue"];var nu=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var qy=new Z({facetId:Bt,field:_t,filterFacetCount:Ut,injectionDepth:jt,numberOfValues:Rt,sortCriteria:new R({constrainTo:nu}),resultsMustMatch:new R({constrainTo:Do}),facetSearch:uo});function Dy(e,t,r=qy){if(!qw(e));let{dispatch:n}=e,o=z(e),a=dt(e,t.options),i={...Qd,...Ua("facetSearch",t.options),field:t.options.field,facetId:a},s={facetSearch:{...tr,...t.options.facetSearch},...i};Pe(e,r,s,"buildFacet");let u=()=>fg(e.state,a),c=()=>ql(e.state,a),l=()=>Dt(e.state),d=()=>er(e.state,a),m=()=>{let{currentValues:g}=u();return g.filter(C=>C.state!=="idle").length},p=()=>{let{currentValues:g}=u(),C=s.numberOfValues,A=!!g.find(b=>b.state==="idle");return C<g.length&&A};return n(lo(i)),{...o,toggleSelect:g=>n(Oy({facetId:s.facetId,selection:g})),toggleExclude:g=>n(Ty({facetId:s.facetId,selection:g})),toggleSingleSelect:function(g){g.state==="idle"&&n(be(a)),this.toggleSelect(g);},toggleSingleExclude:function(g){g.state==="idle"&&n(be(a)),this.toggleExclude(g);},isValueSelected:Xd,isValueExcluded:Py,deselectAll(){n(be(a)),n(ce());},sortBy(g){n(Hs({facetId:a,criterion:g})),n(ce());},isSortedBy(g){return this.state.sortCriterion===g},showMoreValues(){let g=u().numberOfValues,C=s.numberOfValues,A=C-g%C,b=g+A;n(ya({facetId:a,numberOfValues:b})),n(Ca({facetId:a,isFieldExpanded:!0})),n(ce());},showLessValues(){let g=s.numberOfValues,C=Math.max(g,m());n(ya({facetId:a,numberOfValues:C})),n(Ca({facetId:a,isFieldExpanded:!1})),n(ce());},enable(){n(Ke(a));},disable(){n(Ae(a));},get state(){let g=u(),C=c(),A=l(),b=d(),I;typeof g.sortCriteria=="object"?I=g.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":I=g.sortCriteria;let L=C?C.values:[],$=L.some(ne=>ne.state!=="idle"),te=C?C.moreValuesAvailable:!1,W=g.resultsMustMatch;return {label:C?.label,facetId:a,values:L,sortCriterion:I,resultsMustMatch:W,isLoading:A,hasActiveValues:$,canShowMoreValues:te,canShowLessValues:p(),enabled:b}}}}function qw(e){return e.addReducers({facetSet:ko,facetOptions:Ue,configuration:J,facetSearchSet:ru}),!0}var Vy=new Z({facetId:Bt,field:_t,filterFacetCount:Ut,injectionDepth:jt,numberOfValues:Rt,sortCriteria:new R({constrainTo:nu}),resultsMustMatch:new R({constrainTo:Do}),facetSearch:uo,allowedValues:Gs,customSort:zs});function Dw(e,t){if(!Vw(e));let{dispatch:r}=e,n=Dy(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},Vy),o=()=>n.state.facetId,i={updateText(){},showMoreResults(){},search(){},clear(){},updateCaptions(){},select(){},exclude(){},singleSelect(){},singleExclude(){},get state(){return {values:[],isLoading:!1,moreValuesAvailable:!1,query:""}}},{state:s,...u}=i;return {...n,facetSearch:u,toggleSelect(c){n.toggleSelect(c),r(G({legacy:wy(o(),c),next:Ey(c)}));},deselectAll(){n.deselectAll(),r(G({legacy:Be(o()),next:Je()}));},sortBy(c){n.sortBy(c),r(G({legacy:Qt({facetId:o(),sortCriterion:c}),next:Kr()}));},isSortedBy(c){return this.state.sortCriterion===c},showMoreValues(){n.showMoreValues(),r(Wn({legacy:oo(o()),next:Vc()}));},showLessValues(){n.showLessValues(),r(Wn({legacy:ao(o()),next:Dc()}));},get state(){return {...n.state,facetSearch:i.state}}}}function Vw(e){return e.addReducers({facetSet:ko,configuration:J,facetSearchSet:ru,search:X}),!0}var ka=e=>e.state==="selected",Ny=e=>e.state==="excluded";var ou=e=>ka(e)?yr():nt();var au=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return ka(t)?At(n):$e(n)};var iu=h("rangeFacet/executeToggleSelect",e=>S(e,gr(e.selection))),su=h("rangeFacet/executeToggleExclude",e=>S(e,gr(e.selection)));var My={facetId:_,selection:new x({values:Fn})},Ly=k("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,My),t(Gt(e)),t(iu(e)),t(ce());}),Qy=k("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,My),t(zt(e)),t(su(e)),t(ce());});function cu(e,t){let{facetId:r,getRequest:n}=t,o=z(e),a=e.dispatch,i=()=>er(e.state,r);return {...o,isValueSelected:ka,isValueExcluded:Ny,deselectAll(){a(be(r)),a(ce());},sortBy(s){a(po({facetId:r,criterion:s})),a(ce());},isSortedBy(s){return this.state.sortCriterion===s},enable(){a(Ke(r));},disable(){a(Ae(r));},get state(){let s=n(),u=cr(e.state,r),c=s.sortCriteria,l=s.resultsMustMatch,d=u?u.values:[],m=Dt(e.state),p=i(),g=d.some(C=>C.state!=="idle");return {facetId:r,values:d,sortCriterion:c,resultsMustMatch:l,hasActiveValues:g,isLoading:m,enabled:p}}}}function uu(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var lu=["idle","selected","excluded"];var du=["ascending","descending"],pu=["even","equiprobable"];var Nw={start:new R,end:new R,endInclusive:new M,state:new R({constrainTo:lu})},Mw=new Z({facetId:Bt,field:_t,generateAutomaticRanges:$s,filterFacetCount:Ut,injectionDepth:jt,numberOfValues:Rt,currentValues:new Q({each:new x({values:Nw})}),sortCriteria:new R({constrainTo:du}),rangeAlgorithm:new R({constrainTo:pu})});function mu(e,t){Pe(e,Mw,t,"buildDateFacet"),Ws(t);}function By(e,t){if(!Lw(e));uu(t.options,"buildDateFacet");let r=e.dispatch,n=dt(e,t.options),o={currentValues:[],...t.options,facetId:n};mu(e,o),r($t(o));let a=cu(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return {...a,toggleSelect:i=>r(Ly({facetId:n,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(be(n)),this.toggleSelect(i);},toggleExclude:i=>r(Qy({facetId:n,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(be(n)),this.toggleExclude(i);},get state(){return a.state}}}function Lw(e){return e.addReducers({configuration:J,search:X,dateFacetSet:Kt,facetOptions:Ue}),!0}function Qw(e,t){let r=By(e,t),n=e.dispatch,o=()=>r.state.facetId;return {...r,deselectAll(){r.deselectAll(),n(G({legacy:Be(o()),next:Je()}));},sortBy(a){r.sortBy(a),n(G({legacy:Qt({facetId:o(),sortCriterion:a}),next:Kr()}));},toggleSelect:a=>{r.toggleSelect(a),n(G({legacy:au(o(),a),next:ou(a)}));},get state(){return r.state}}}var _y={facetId:_,selection:new x({values:Rn})},Uy=k("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,_y),t(Wt(e)),t(iu(e)),t(ce());});k("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,_y),t(Yt(e)),t(su(e)),t(ce());});var Bw={start:new q,end:new q,endInclusive:new M,state:new R({constrainTo:lu})},_w=new Z({facetId:Bt,field:_t,generateAutomaticRanges:$s,filterFacetCount:Ut,injectionDepth:jt,numberOfValues:Rt,currentValues:new Q({each:new x({values:Bw})}),sortCriteria:new R({constrainTo:du}),resultsMustMatch:new R({constrainTo:Do}),rangeAlgorithm:new R({constrainTo:pu})});function gu(e,t){Pe(e,_w,t,"buildNumericFacet"),Js(t);}function Zd(e){return {endInclusive:!1,state:"idle",...e}}function jy(e,t){if(!Uw(e));uu(t.options,"buildNumericFacet");let r=e.dispatch,n=dt(e,t.options),o={currentValues:[],...t.options,facetId:n};gu(e,o),r(Ht(o));let a=cu(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return {...a,toggleSelect:i=>r(Uy({facetId:n,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(be(n)),this.toggleSelect(i);},get state(){return a.state}}}function Uw(e){return e.addReducers({numericFacetSet:zr,facetOptions:Ue,configuration:J,search:X}),!0}function jw(e,t){let r=jy(e,t),n=e.dispatch,o=()=>r.state.facetId;return {...r,deselectAll(){r.deselectAll(),n(G({legacy:Be(o()),next:Je()}));},sortBy(a){r.sortBy(a),n(G({legacy:Qt({facetId:o(),sortCriterion:a}),next:Kr()}));},toggleSelect:a=>{r.toggleSelect(a),n(G({legacy:au(o(),a),next:ou(a)}));},get state(){return {...r.state}}}}function $y(e,t){if(!$w(e));let r=z(e),{dispatch:n}=e,o=()=>e.state,a=dt(e,t.options),i={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a};gu(e,i),n(Ht(i));let s=()=>er(e.state,a);return {...r,clear:()=>{n(hr({facetId:a,values:[]})),n(ce());},setRange:u=>{let c={...u,state:"selected",numberOfResults:0,endInclusive:!0},l=hr({facetId:a,values:[c]});return l.error?!1:(n(l),n(ce()),!0)},enable(){n(Ke(a));},disable(){n(Ae(a));},get state(){let u=Dt(o()),c=s(),l=wS(o(),a),d=l.length?l[0]:void 0;return {facetId:a,isLoading:u,range:d,enabled:c}}}}function $w(e){return e.addReducers({numericFacetSet:zr,facetOptions:Ue,configuration:J,search:X}),!0}function Gw(e,t){let r=$y(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return {...r,clear:()=>{r.clear(),n(G({legacy:Be(o()),next:Je()}));},setRange:a=>{let i=r.setRange(a);return i&&n(G({legacy:$e({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:nt()})),i},get state(){return {...r.state}}}}function Gy(e,t){if(!zw(e));let r=z(e),{dispatch:n}=e,o=()=>e.state,a=dt(e,t.options),i={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a};mu(e,i),n($t(i));let s=()=>er(e.state,a);return {...r,clear:()=>{n(fr({facetId:a,values:[]})),n(ce());},setRange:u=>{let c={...u,state:"selected",numberOfResults:0,endInclusive:!0},l=fr({facetId:a,values:[c]});return l.error?!1:(n(l),n(ce()),!0)},enable(){n(Ke(a));},disable(){n(Ae(a));},get state(){let u=Dt(o()),c=s(),l=xS(o(),a),d=l.length?l[0]:void 0;return {facetId:a,isLoading:u,range:d,enabled:c}}}}function zw(e){return e.addReducers({dateFacetSet:Kt,facetOptions:Ue,configuration:J,search:X}),!0}function Hw(e,t){if(!Ww(e));let r=Gy(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return {...r,clear:()=>{r.clear(),n(G({legacy:Be(o()),next:Je()}));},setRange:a=>{let i=r.setRange(a);return i&&n(G({legacy:$e({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:nt()})),i},get state(){return {...r.state}}}}function Ww(e){return e.addReducers({dateFacetSet:Kt,configuration:J,search:X}),!0}var Yw=new Z({numberOfPages:new q({default:5,min:0})}),Kw=new Z({page:new q({min:1})});function zy(e,t={}){if(!Jw(e));let r=z(e),{dispatch:n}=e,o=Pe(e,Yw,t.options,"buildPager"),i=Pt(e,Kw,t.initialState,"buildPager").page;i&&n(rs(i));let s=()=>$r(e.state),u=()=>{let{numberOfPages:l}=o;return jh(e.state,l)},c=()=>Od(e.state);return {...r,get state(){let l=s(),d=c(),m=l>1&&d>0,p=l<d;return {currentPage:l,currentPages:u(),maxPage:d,hasPreviousPage:m,hasNextPage:p}},selectPage(l){n(lt(l));},nextPage(){n(ns());},previousPage(){n(os());},isCurrentPage(l){return l===this.state.currentPage}}}function Jw(e){return e.addReducers({configuration:J,pagination:fo}),!0}function Xw(e,t={}){let{dispatch:r}=e,n=zy(e,t);return {...n,get state(){return n.state},selectPage(o){n.selectPage(o),r(Hi({legacy:tc(),next:MS()}));},nextPage(){n.nextPage(),r(Hi({legacy:rc(),next:VS()}));},previousPage(){n.previousPage(),r(Hi({legacy:nc(),next:NS()}));}}}function Vo(e){if(!tP(e));let t=z(e),r=()=>e.state;return {...t,get state(){let n=r();return {hasError:n.search.error!==null,isLoading:n.search.isLoading,hasResults:!!n.search.results.length,firstSearchExecuted:Fs(n)}}}}function tP(e){return e.addReducers({search:X}),!0}function Yy(e){if(!rP(e));let t=z(e),r=Vo(e),n=()=>e.state,o=()=>{let a=n().search.duration/1e3;return Math.round((a+Number.EPSILON)*100)/100};return {...t,get state(){return {...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:o(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function rP(e){return e.addReducers({search:X,pagination:fo}),!0}function nP(e){return Yy(e)}var sP=new Z({fieldsToInclude:new Q({required:!1,each:new R({required:!0,emptyAllowed:!1})})});function hu(e,t){if(!cP(e));let r=z(e),n=Vo(e),{dispatch:o}=e,a=()=>e.state,i=Pe(e,sP,t?.options,"buildCoreResultList");i.fieldsToInclude&&o(Wr(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,u=0,c=0,l=5,d=200,m=!1;return {...r,get state(){let g=a();return {...n.state,results:g.search.results,moreResultsAvailable:s(),searchResponseId:g.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-u<d){if(c++,c>=l){u=Date.now(),!m&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),m=!0;return}}else c=0;m=!1,t?.fetchMoreResultsActionCreator&&(await o(t?.fetchMoreResultsActionCreator()),u=Date.now());}}}function cP(e){return e.addReducers({search:X,configuration:J,fields:Ao}),!0}function uP(e,t){return hu(e,{...t,fetchMoreResultsActionCreator:Wi})}var lP=e=>w("showMoreFoldedResults")("analytics/folding/showMore",(t,r)=>(De(e),t.logShowMoreFoldedResults(me(e,r),Ce(e),v(r.insightCaseContext)))),dP=()=>w("showLessFoldedResults")("analytics/folding/showLess",(e,t)=>e.logShowLessFoldedResults(v(t.insightCaseContext))),Zy={logShowMoreFoldedResults:lP,logShowLessFoldedResults:dP};h("folding/register",e=>S(e,Fa));var eC=k("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let o=t(),a=await hf(o,e),s=(await xf(n,o,a,{origin:"foldingCollection"})).response;return le(s)?r(s.error):{collectionId:e,results:s.success.results,rootResult:o.folding.collections[e].result}});var Su=B(Se(),e=>e.addCase(Ye,(t,r)=>({...t,...r.payload})).addCase(We,(t,r)=>{t.q=r.payload;}).addCase(to,(t,r)=>{t.q=r.payload.expression;}).addCase(ge.fulfilled,(t,r)=>r.payload?.query??t).addCase(fe,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax;}));var pP=new Z(Fa);function tC(e,t,r){if(!mP(e));let n=hu(e,t),{dispatch:o}=e,a=()=>e.state,i=t.options?.folding?Pe(e,pP,t.options.folding,"buildFoldedResultList"):{};return o(Hr({...i})),{...n,loadCollection:s=>{o(t.loadCollectionActionCreator(s.result.raw[e.state.folding.fields.collection])),o(r.logShowMoreFoldedResults(s.result));},logShowMoreFoldedResults:s=>{o(r.logShowMoreFoldedResults(s));},logShowLessFoldedResults:()=>{o(r.logShowLessFoldedResults());},findResultById(s){return tp(this.state.results,u=>u.result.uniqueId===s.result.uniqueId)},findResultByCollection(s){return tp(this.state.results,u=>u.result.raw.foldingcollection===s.result.raw.foldingcollection)},get state(){let s=a();return {...n.state,results:n.state.results.map(u=>{let c=u.raw[s.folding.fields.collection];return !c||!s.folding.collections[c]?{result:u,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:s.folding.collections[c]})}}}}function mP(e){return e.addReducers({search:X,configuration:ws,folding:Oc,query:Su}),!0}function tp(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let o=tp(n.children,t);if(o)return o}}return null}function gP(e,t={}){let r=tC(e,{...t,loadCollectionActionCreator:eC,fetchMoreResultsActionCreator:Wi},Zy);return {...r,get state(){return r.state}}}var rC=e=>w("documentOpen")({prefix:"analytics/insight/result/open",__legacy__getBuilder:(t,r)=>{De(e);let n=v(r.insightCaseContext);return t.logDocumentOpen(me(e,r),Ce(e),n)},analyticsType:"InsightPanel.ItemAction",analyticsPayloadBuilder:t=>{let r=me(e,t);return {itemMetadata:lr(e,t),position:r.documentPosition,searchUid:t.search?.response.searchUid||"",action:"open",context:Sr(t)}}});function rr(e,t,r){if(!fP(e));let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},a;return {select:Ps(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,o.selectionDelay);},cancelPendingSelect(){a&&clearTimeout(a);}}}function fP(e){return e.addReducers({configuration:J}),!0}function hP(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(rC(t.options.result)));};return rr(e,t,()=>{n(),e.dispatch(Jt(t.options.result));})}var SP=new Z({numberOfResults:new q({min:0})});function nC(e,t={}){if(!yP(e));let r=z(e),{dispatch:n}=e,o=()=>e.state,i=Pt(e,SP,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&n(es(i)),{...r,get state(){return {numberOfResults:o().pagination.numberOfResults}},set(s){n(ts(s));},isSetTo(s){return s===this.state.numberOfResults}}}function yP(e){return e.addReducers({pagination:fo,configuration:J}),!0}function CP(e,t={}){let r=nC(e,t),{dispatch:n}=e;return {...r,get state(){return {...r.state}},set(o){r.set(o),n(G({legacy:jd(),next:DS()}));}}}var oC=e=>ae("analytics/querySuggest",(t,r)=>{let n=AP(r,e);return t.makeOmniboxAnalytics(n)}),aC=()=>({actionCause:"omniboxAnalytics"});function AP(e,t){let{id:r,suggestion:n}=t,o=e.querySuggest&&e.querySuggest[r];if(!o)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let a=o.completions.map(c=>c.expression),i=o.partialQueries.length-1,s=o.partialQueries[i]||"",u=o.responseId;return {suggestionRanking:a.indexOf(n),partialQuery:s,partialQueries:o.partialQueries,suggestions:a,querySuggestResponseId:u}}var iC=()=>({});var uC=B(iC(),e=>e.addCase(eo,(t,r)=>{let n=r.payload.id;n in t||(t[n]=RP(r.payload));}).addCase(Rh,(t,r)=>{delete t[r.payload.id];}).addCase(qs.pending,sC).addCase(qs.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null;}).addCase(qs.rejected,cC).addCase(Zr.pending,sC).addCase(Zr.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{query:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),n.isLoading=!1,n.error=null;}).addCase(Zr.rejected,cC).addCase(ro,(t,r)=>{let n=t[r.payload.id];n&&(n.responseId="",n.completions=[],n.partialQueries=[]);}));function RP(e){return {id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function sC(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0);}function cC(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1);}var lC={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},rp={open:new R,close:new R},FP={id:F,numberOfSuggestions:new q({min:0}),enableQuerySyntax:new M,highlightOptions:new x({values:{notMatchDelimiters:new x({values:rp}),exactMatchDelimiters:new x({values:rp}),correctionDelimiters:new x({values:rp})}}),clearFilters:new M},dC=new Z(FP);function pC(e,t){if(!bP(e));let r=z(e),{dispatch:n}=e,o=()=>e.state,a=t.options?.id||Qa("search_box"),i={id:a,highlightOptions:{...t.options?.highlightOptions},...lC,...t.options};Pe(e,dC,i,"buildSearchBox"),n(no({id:a,query:e.state.query.q})),i.numberOfSuggestions&&n(eo({id:a,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],u=async c=>{let{enableQuerySyntax:l,clearFilters:d}=i;n(Tf({q:s(),enableQuerySyntax:l,clearFilters:d})),t.isNextAnalyticsReady?n(t.executeSearchActionCreator(c)):n(t.executeSearchActionCreator(c.legacy));};return {...r,updateText(c){n(An({id:a,query:c})),this.showSuggestions();},clear(){n(An({id:a,query:""})),n(ro({id:a}));},showSuggestions(){i.numberOfSuggestions&&n(t.fetchQuerySuggestionsActionCreator({id:a}));},selectSuggestion(c){n(to({id:a,expression:c})),u({legacy:oC({id:a,suggestion:c}),next:aC()}).then(()=>{n(ro({id:a}));});},submit(c=Ud(),l){u({legacy:c,next:l}),n(ro({id:a}));},get state(){let c=o(),l=c.querySuggest[i.id],d=xP(l,i.highlightOptions),m=l?l.isLoading:!1;return {value:s(),suggestions:d,isLoading:c.search.isLoading,isLoadingSuggestions:m}}}}function xP(e,t){return e?e.completions.map(r=>({highlightedValue:Nu(r.highlighted,t),rawValue:r.expression})):[]}function bP(e){return e.addReducers({query:Su,querySuggest:uC,configuration:J,querySet:Ds,search:X}),!0}function vP(e,t={}){let r=pC(e,{...t,executeSearchActionCreator:G,fetchQuerySuggestionsActionCreator:Yi,isNextAnalyticsReady:!0});return {...r,submit(){r.submit(_c());},get state(){return r.state}}}function IP(e){return Vo(e)}var mC={by:new gt({enum:Ii,required:!0})},yu=h("sortCriteria/register",e=>gC(e)),Cu=h("sortCriteria/update",e=>gC(e)),gC=e=>wn(e)?(e.forEach(t=>S(t,mC)),{payload:e}):S(e,mC);B(rt(),e=>{e.addCase(yu,(t,r)=>ur(r.payload)).addCase(Cu,(t,r)=>ur(r.payload)).addCase(ge.fulfilled,(t,r)=>r.payload?.sortCriteria??t).addCase(fe,(t,r)=>r.payload.sortCriteria??t);});var yC=B(ji(),e=>{e.addCase(bs,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]={...n,isActive:!1});}).addCase(pr,(t,r)=>{let n=r.payload;SC(t,n);}).addCase(fe,(t,r)=>{let n=r.payload.tab||"";SC(t,n);}).addCase(ge.fulfilled,(t,r)=>r.payload?.tabSet??t);});function SC(e,t){t in e&&Object.keys(e).forEach(n=>{e[n].isActive=n===t;});}var OP=new Z({expression:de,id:F}),TP=new Z({isActive:new M});function CC(e,t){if(DP(t.options.id),!qP(e));let r=z(e),{dispatch:n}=e;Pe(e,OP,t.options,"buildTab");let o=Pt(e,TP,t.initialState,"buildTab"),{id:a,expression:i}=t.options;return n(bs({id:a,expression:i})),o.isActive&&n(pr(a)),{...r,select(){n(pr(a));},get state(){return {isActive:e.state.tabSet[a]?.isActive}}}}function qP(e){return e.addReducers({configuration:J,tabSet:yC}),!0}function DP(e){let t=Is().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function VP(e,t){let{dispatch:r}=e,n=CC(e,t),o=()=>r(G({legacy:Vr(),next:$n()}));return {...n,get state(){return n.state},select(){n.select(),o();}}}function AC(e,t){if(!NP(e));let r=m=>e.state.facetOptions.facets[m]?.enabled??!1,n=m=>e.state.facetSet?.[m]?.request?.currentValues??e.state.categoryFacetSet?.[m]?.request?.currentValues??e.state.numericFacetSet?.[m]?.request?.currentValues??e.state.dateFacetSet?.[m]?.request?.currentValues??null,o=m=>m in e.state.facetOptions.facets,a=()=>Pn({isFacetRegistered:o(t.facetId),parentFacets:t.conditions.map(({parentFacetId:m})=>o(m)?{enabled:r(m),values:n(m)}:null)}),i=()=>{let m=a();return m===l?!1:(l=m,!0)},s=()=>t.conditions.some(m=>{if(!r(m.parentFacetId))return !1;let p=n(m.parentFacetId);return p===null?!1:m.condition(p)}),u=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([m,p])=>p.request.freezeCurrentValues&&e.dispatch(bn({facetId:m,freezeCurrentValues:!1})));},c=()=>{if(!o(t.facetId))return;let m=r(t.facetId),p=s();m!==p&&(e.dispatch(p?Ke(t.facetId):Ae(t.facetId)),u());};if(!t.conditions.length)return {stopWatching(){}};let l=a(),d=e.subscribe(()=>{i()&&c();});return c(),{stopWatching(){d();}}}function NP(e){return e.addReducers({facetOptions:Ue}),!0}function MP(e,t){return AC(e,t)}function bt(e,t){let r=t??e.search?.questionAnswer?.documentId;return r&&e.search&&_f(e,r.contentIdKey,r.contentIdValue)}function Ar(e,t){let r=e.questionAnswering?.relatedQuestions.findIndex(o=>o.questionAnswerId===t)??-1;return r===-1?null:e.search?.questionAnswer?.relatedQuestions?.[r]??null}var BP=()=>w("expandSmartSnippet")({prefix:"analytics/smartSnippet/expand",__legacy__getBuilder:(e,t)=>e.logExpandSmartSnippet(v(t.insightCaseContext)),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),_P=()=>w("collapseSmartSnippet")({prefix:"analytics/smartSnippet/collapse",__legacy__getBuilder:(e,t)=>e.logCollapseSmartSnippet(v(t.insightCaseContext)),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),UP=()=>w("likeSmartSnippet")({prefix:"analytics/smartSnippet/like",__legacy__getBuilder:(e,t)=>e.logLikeSmartSnippet(v(t.insightCaseContext)),analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:e=>({answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"},feedback:{liked:!0}})}),jP=()=>w("dislikeSmartSnippet")({prefix:"analytics/smartSnippet/dislike",__legacy__getBuilder:(e,t)=>e.logDislikeSmartSnippet(v(t.insightCaseContext)),analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:e=>({answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"},feedback:{liked:!1}})}),$P=()=>w("openSmartSnippetSource")({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(e,t)=>{let r=bt(t);return e.logOpenSmartSnippetSource(me(r,t),Ce(r),v(t.insightCaseContext))},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:e=>{let t=bt(e),r=Ce(t);return {answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"},citation:{id:r.contentIDValue,type:"Source"}}}}),np=e=>w("openSmartSnippetSource")({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{S(e,Td());let n=bt(r);return t.logOpenSmartSnippetInlineLink(me(n,r),{...Ce(n),...e},v(r.insightCaseContext))},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{let r=bt(t),n=Ce(r);return {answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippet"},citation:{id:n.contentIDValue,type:"InlineLink"}}}}),GP=()=>w("openSmartSnippetFeedbackModal")("analytics/smartSnippet/feedbackModal/open",(e,t)=>e.logOpenSmartSnippetFeedbackModal(v(t.insightCaseContext))),zP=()=>w("closeSmartSnippetFeedbackModal")("analytics/smartSnippet/feedbackModal/close",(e,t)=>e.logCloseSmartSnippetFeedbackModal(v(t.insightCaseContext))),HP=e=>w("sendSmartSnippetReason")({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:(t,r)=>t.logSmartSnippetFeedbackReason(e,void 0,v(r.insightCaseContext)),analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippet"},feedback:{liked:!1,reason:e}})}),WP=e=>w("sendSmartSnippetReason")({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:(t,r)=>t.logSmartSnippetFeedbackReason("other",e,v(r.insightCaseContext)),analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippet"},feedback:{liked:!1,reason:"other",details:e}})}),YP=e=>w("expandSmartSnippetSuggestion")({prefix:"analytics/smartSnippetSuggestion/expand",__legacy__getBuilder:(t,r)=>{Ro(e);let n=Ar(r,e.questionAnswerId);return n?t.logExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId},v(r.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:t=>({action:"expand",answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"}})}),KP=e=>w("collapseSmartSnippetSuggestion")({prefix:"analytics/smartSnippetSuggestion/collapse",__legacy__getBuilder:(t,r)=>{Ro(e);let n=Ar(r,e.questionAnswerId);return n?t.logCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId},v(r.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:t=>({action:"collapse",answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"}})}),op=e=>w("openSmartSnippetSuggestionSource")({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(t,r)=>{S(e,Ec());let n=Ar(r,e.questionAnswerId);if(!n)return null;let o=bt(r,n.documentId);return o?t.logOpenSmartSnippetSuggestionSource(me(o,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId},v(r.insightCaseContext)):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{let r=Ar(t,e.questionAnswerId);return {answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"},citation:{id:r?.documentId.contentIdValue||"",type:"Source"}}}}),RC=(e,t)=>w("openSmartSnippetSuggestionSource")({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{S(e,Ec()),S(t,Td());let o=Ar(n,e.questionAnswerId);if(!o)return null;let a=bt(n,o.documentId);return a?r.logOpenSmartSnippetSuggestionInlineLink(me(a,n),{question:o.question,answerSnippet:o.answerSnippet,documentId:o.documentId,linkText:t.linkText,linkURL:t.linkURL},v(n.insightCaseContext)):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:r=>{let n=Ar(r,e.questionAnswerId);return {answer:{responseId:r.search?.response.searchUid||"",type:"SmartSnippetSuggestion"},citation:{id:n?.documentId.contentIdValue||"",type:"InlineLink"}}}}),Au={logExpandSmartSnippet:BP,logCollapseSmartSnippet:_P,logLikeSmartSnippet:UP,logDislikeSmartSnippet:jP,logOpenSmartSnippetSource:$P,logOpenSmartSnippetInlineLink:np,logOpenSmartSnippetFeedbackModal:GP,logCloseSmartSnippetFeedbackModal:zP,logSmartSnippetFeedback:HP,logSmartSnippetDetailedFeedback:WP,logExpandSmartSnippetSuggestion:YP,logCollapseSmartSnippetSuggestion:KP,logOpenSmartSnippetSuggestionSource:op};function FC(e,t,r){if(!JP(e));let n=z(e),o=()=>e.state,a=()=>bt(o()),i=null,s=rr(e,{options:{selectionDelay:r?.options?.selectionDelay}},()=>{let u=a();if(!u){i=null;return}let{searchResponseId:c}=o().search;i!==c&&(i=c,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(Jt(u)));});return {...n,get state(){let u=o();return {question:u.search.questionAnswer.question,answer:u.search.questionAnswer.answerSnippet,documentId:u.search.questionAnswer.documentId,expanded:u.questionAnswering.expanded,answerFound:u.search.questionAnswer.answerSnippet!=="",liked:u.questionAnswering.liked,disliked:u.questionAnswering.disliked,feedbackModalOpen:u.questionAnswering.feedbackModalOpen,source:a()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(Fo());},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(xo());},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(bo());},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(vo());},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Io());},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(Yr());},sendFeedback(u){e.dispatch(t.logSmartSnippetFeedback(u)),e.dispatch(Yr());},sendDetailedFeedback(u){e.dispatch(t.logSmartSnippetDetailedFeedback(u)),e.dispatch(Yr());},selectSource(){s.select();},beginDelayedSelectSource(){s.beginDelayedSelect();},cancelPendingSelectSource(){s.cancelPendingSelect();}}}function JP(e){return e.addReducers({search:X,questionAnswering:Xt}),!0}function Ru(e,t){if(!XP(e));let r=()=>e.state,n=new Set,o=l=>n.has(l)?!0:(n.add(l),!1),a=null,i=l=>{a!==l&&(a=l,u={},n.clear());},s=(l,d,m)=>rr(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{o(d)||e.dispatch(m?RC({questionAnswerId:m},l):np(l));}),u={},c=(l,d)=>{let{searchResponseId:m}=r().search;i(m);let p=Pn({...l,questionAnswerId:d});return p in u||(u[p]=s(l,p,d)),u[p]};return {selectInlineLink(l,d){c(l,d)?.select();},beginDelayedSelectInlineLink(l,d){c(l,d)?.beginDelayedSelect();},cancelPendingSelectInlineLink(l,d){c(l,d)?.cancelPendingSelect();}}}function XP(e){return e.addReducers({search:X,questionAnswering:Xt}),!0}function ZP(e,t){let r=FC(e,Au,t),n=Ru(e,{options:{selectionDelay:t?.options?.selectionDelay}});return {...r,get state(){return r.state},selectInlineLink(o){n.selectInlineLink(o);},beginDelayedSelectInlineLink(o){n.beginDelayedSelectInlineLink(o);},cancelPendingSelectInlineLink(o){n.cancelPendingSelectInlineLink(o);}}}function xC(e,t){if(!eE(e));let r=z(e),n=()=>e.state,o=a=>{let{contentIdKey:i,contentIdValue:s}=a;return e.state.search.results.find(u=>Qr(u,i)===s)};return {...r,get state(){let a=n();return {questions:a.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:a.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:a.questionAnswering.relatedQuestions[s].expanded,source:o(i.documentId)}))}},expand(a){let i={questionAnswerId:a};e.dispatch(t.logExpandSmartSnippetSuggestion(i)),e.dispatch(wo(i));},collapse(a){let i={questionAnswerId:a};e.dispatch(t.logCollapseSmartSnippetSuggestion(i)),e.dispatch(Po(i));}}}function eE(e){return e.addReducers({search:X,questionAnswering:Xt}),!0}function bC(e,t){if(!tE(e));let r=()=>e.state,n=d=>{let m=r(),p=Ar(m,d);return p?bt(m,p.documentId):null},o=new Set,a=d=>o.has(d)?!0:(o.add(d),!1),i=null,s=d=>{i!==d&&(i=d,c={},o.clear());},u=(d,m)=>rr(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{a(m)||(e.dispatch(op({questionAnswerId:m})),e.dispatch(Jt(d)));}),c={},l=d=>{let{searchResponseId:m}=r().search;s(m);let p=n(d);return p?(d in c||(c[d]=u(p,d)),c[d]):null};return {selectSource(d){l(d)?.select();},beginDelayedSelectSource(d){l(d)?.beginDelayedSelect();},cancelPendingSelectSource(d){l(d)?.cancelPendingSelect();}}}function tE(e){return e.addReducers({search:X,questionAnswering:Xt}),!0}function rE(e,t){let r=xC(e,Au),n=Ru(e,{options:{selectionDelay:t?.options?.selectionDelay}}),o=bC(e,{options:{selectionDelay:t?.options?.selectionDelay}});return {...r,get state(){return r.state},selectSource(a){o.selectSource(a);},beginDelayedSelectSource(a){o.beginDelayedSelectSource(a);},cancelPendingSelectSource(a){o.cancelPendingSelectSource(a);},selectInlineLink(a,i){n.selectInlineLink(i,a);},beginDelayedSelectInlineLink(a,i){n.beginDelayedSelectInlineLink(i,a);},cancelPendingSelectInlineLink(a,i){n.cancelPendingSelectInlineLink(i,a);}}}function Fu(e,t){return e.generatedAnswer?.citations?.find(r=>r.id===t)}function je(e){return e.search?.response?.extendedResults?.generativeQuestionAnsweringId}var vC=e=>ae("analytics/generatedAnswer/streamEnd",(t,r)=>{let n=je(r),o=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e,answerTextIsEmpty:o}):null});var IC=()=>({actionCause:"retryGeneratedAnswer"}),wC=()=>({actionCause:"rephraseGeneratedAnswer"});var vt="RGA",nE=()=>w("retryGeneratedAnswer")("analytics/generatedAnswer/retry",(e,t)=>e.logRetryGeneratedAnswer(v(t.insightCaseContext))),oE=e=>w("rephraseGeneratedAnswer")("analytics/generatedAnswer/rephrase",(t,r)=>{let n=je(r);return n?t.logRephraseGeneratedAnswer({generativeQuestionAnsweringId:n,rephraseFormat:e.answerStyle},v(r.insightCaseContext)):null}),ap=e=>w("openGeneratedAnswerSource")({prefix:"analytics/generatedAnswer/openAnswerSource",__legacy__getBuilder:(t,r)=>{let n=je(r),o=Fu(r,e);return !n||!o?null:t.logOpenGeneratedAnswerSource({generativeQuestionAnsweringId:n,permanentId:o.permanentid,citationId:o.id},v(r.insightCaseContext))},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:vt},citation:{id:e,type:"Source"}})}),aE=(e,t)=>w("generatedAnswerSourceHover")({prefix:"analytics/generatedAnswer/hoverCitation",__legacy__getBuilder:(r,n)=>{let o=je(n),a=Fu(n,e);return !o||!a?null:r.logGeneratedAnswerSourceHover({generativeQuestionAnsweringId:o,permanentId:a.permanentid,citationId:a.id,citationHoverTimeMs:t},v(n.insightCaseContext))},analyticsType:"Qna.CitationHover",analyticsPayloadBuilder:r=>({answer:{responseId:r.search?.response.searchUid||"",type:vt},citation:{id:e,type:"Source"},citationHoverTimeInMs:t})}),iE=()=>w("likeGeneratedAnswer")({prefix:"analytics/generatedAnswer/like",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logLikeGeneratedAnswer({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:e=>({answer:{responseId:e.search?.response.searchUid||"",type:vt},feedback:{liked:!0}})}),sE=()=>w("dislikeGeneratedAnswer")({prefix:"analytics/generatedAnswer/dislike",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logDislikeGeneratedAnswer({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:e=>({answer:{responseId:e.search?.response.searchUid||"",type:vt},feedback:{liked:!1}})}),cE=e=>w("generatedAnswerFeedbackSubmit")({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let n=je(r);return n?t.logGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:n,reason:e},v(r.insightCaseContext)):null},analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:vt},feedback:{liked:!1,reason:e}})}),uE=e=>w("generatedAnswerFeedbackSubmit")({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let n=je(r);return n?t.logGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:n,reason:"other",details:e},v(r.insightCaseContext)):null},analyticsType:"Qna.SubmitFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:vt},feedback:{liked:!1,reason:"other",details:e}})}),lE=e=>w("generatedAnswerStreamEnd")("analytics/generatedAnswer/streamEnd",(t,r)=>{let n=je(r);return n?t.logGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e},v(r.insightCaseContext)):null}),dE=()=>w("generatedAnswerShowAnswers")({prefix:"analytics/generatedAnswer/show",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"show",answer:{responseId:e.search?.response.searchUid||"",type:vt}})}),pE=()=>w("generatedAnswerHideAnswers")({prefix:"analytics/generatedAnswer/hide",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"hide",answer:{responseId:e.search?.response.searchUid||"",type:vt}})}),mE=()=>w("generatedAnswerExpand")({prefix:"analytics/generatedAnswer/expand",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logGeneratedAnswerExpand({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:vt}})}),gE=()=>w("generatedAnswerCollapse")({prefix:"analytics/generatedAnswer/collapse",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logGeneratedAnswerCollapse({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:vt}})}),fE=()=>w("generatedAnswerCopyToClipboard")({prefix:"analytics/generatedAnswer/copy",__legacy__getBuilder:(e,t)=>{let r=je(t);return r?e.logGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r},v(t.insightCaseContext)):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"copyToClipboard",answer:{responseId:e.search?.response.searchUid||"",type:vt}})}),xu={logCopyGeneratedAnswer:fE,logGeneratedAnswerHideAnswers:pE,logGeneratedAnswerShowAnswers:dE,logGeneratedAnswerStreamEnd:lE,logGeneratedAnswerDetailedFeedback:uE,logGeneratedAnswerFeedback:cE,logDislikeGeneratedAnswer:sE,logLikeGeneratedAnswer:iE,logHoverCitation:aE,logOpenGeneratedAnswerSource:ap,logRetryGeneratedAnswer:nE,logRephraseGeneratedAnswer:oE,logGeneratedAnswerExpand:mE,logGeneratedAnswerCollapse:gE};var PC=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:e.search.extendedResults?.generativeQuestionAnsweringId});var EC=["default","bullet","step","concise"],kC=["text/plain","text/markdown"];var Oa=new R({required:!0}),OC=new R,vu=new M({required:!0}),hE={id:Oa,title:Oa,uri:Oa,permanentid:Oa,clickUri:OC},TC=new R({required:!0,constrainTo:kC}),No=h("generatedAnswer/setIsVisible",e=>S(e,vu)),ip=h("generatedAnswer/updateMessage",e=>S(e,{textDelta:Oa})),sp=h("generatedAnswer/updateCitations",e=>S(e,{citations:new Q({required:!0,each:new x({values:hE})})})),cp=h("generatedAnswer/updateError",e=>S(e,{message:OC,code:new q({min:0})})),qa=h("generatedAnswer/resetAnswer"),Iu=h("generatedAnswer/like"),wu=h("generatedAnswer/dislike"),Pu=h("generatedAnswer/feedbackModal/open"),Da=h("generatedAnswer/expand"),Eu=h("generatedAnswer/collapse"),ku=h("generatedAnswer/setId",e=>S(e,{id:new R({required:!0})})),Ou=h("generatedAnswer/feedbackModal/close"),Va=h("generatedAnswer/sendFeedback"),Ta=h("generatedAnswer/setIsLoading",e=>S(e,vu)),bu=h("generatedAnswer/setIsStreaming",e=>S(e,vu)),up=h("generatedAnswer/setAnswerContentFormat",e=>S(e,TC)),Na=h("generatedAnswer/updateResponseFormat",e=>S(e,{answerStyle:new R({required:!0,constrainTo:EC}),contentFormat:new Q({each:TC,default:["text/plain"]})})),Tu=h("generatedAnswer/registerFieldsToIncludeInCitations",e=>S(e,Ja)),lp=h("generatedAnswer/setIsAnswerGenerated",e=>S(e,vu)),qC=k("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:o}=t,{setAbortControllerRef:a}=e,i=await PC(r),s=(l,d)=>{switch(l){case"genqa.headerMessageType":{let m=JSON.parse(d);n(up(m.contentFormat));break}case"genqa.messageType":n(ip(JSON.parse(d)));break;case"genqa.citationsType":n(sp(JSON.parse(d)));break;case"genqa.endOfStreamType":{let m=JSON.parse(d).answerGenerated;n(bu(!1)),n(lp(m)),n(vC(m));break}default:r.debug&&o.logger.warn(`Unknown payloadType: "${l}"`);}};n(Ta(!0));let u=l=>l.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=o.streamingClient?.streamGeneratedAnswer(i,{write:l=>{u(i)&&(n(Ta(!1)),l.payload&&l.payloadType&&s(l.payloadType,l.payload));},abort:l=>{u(i)&&n(cp(l));},close:()=>{u(i)&&n(bu(!1));},resetAnswer:()=>{u(i)&&n(qa());}});c?a(c):n(Ta(!1));});function dp(){return {id:"",isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default",contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1}}var DC=B(dp(),e=>e.addCase(No,(t,{payload:r})=>{t.isVisible=r;}).addCase(ku,(t,{payload:r})=>{t.id=r.id;}).addCase(ip,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error;}).addCase(sp,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=t.citations.concat(r.citations),delete t.error;}).addCase(cp,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===ju},t.citations=[],delete t.answer;}).addCase(Iu,t=>{t.liked=!0,t.disliked=!1;}).addCase(wu,t=>{t.liked=!1,t.disliked=!0;}).addCase(Pu,t=>{t.feedbackModalOpen=!0;}).addCase(Ou,t=>{t.feedbackModalOpen=!1;}).addCase(Va,t=>{t.feedbackSubmitted=!0;}).addCase(qa,t=>({...dp(),responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(Ta,(t,{payload:r})=>{t.isLoading=r;}).addCase(bu,(t,{payload:r})=>{t.isStreaming=r;}).addCase(up,(t,{payload:r})=>{t.answerContentFormat=r;}).addCase(Na,(t,{payload:r})=>{t.responseFormat=r;}).addCase(Tu,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))];}).addCase(lp,(t,{payload:r})=>{t.isAnswerGenerated=r;}).addCase(Da,t=>{t.expanded=!0;}).addCase(Eu,t=>{t.expanded=!1;}));var ot={engines:{},setAbortControllerRef:(e,t)=>{ot.engines[t].abortController=e;},getIsStreamInProgress:e=>!ot.engines[e].abortController||ot.engines[e].abortController?.signal.aborted?(ot.engines[e].abortController=void 0,!1):!0,subscribeToSearchRequests:e=>{let t=()=>{let r=e.state,n=r.search.requestId,o=r.search.extendedResults.generativeQuestionAnsweringId,a=r.generatedAnswer.id;ot.engines[a].lastRequestId!==n&&(ot.engines[a].lastRequestId=n,ot.engines[a].abortController?.abort(),e.dispatch(qa())),!ot.getIsStreamInProgress(a)&&o&&o!==ot.engines[a].lastStreamId&&(ot.engines[a].lastStreamId=o,e.dispatch(qC({setAbortControllerRef:s=>ot.setAbortControllerRef(s,a)})));};return e.subscribe(t)}};function VC(e,t,r={}){if(!SE(e));let{dispatch:n}=e,o=z(e),a=()=>e.state;if(!e.state.generatedAnswer.id){let l=Qa("genQA-",12);n(ku({id:l})),ot.engines[l]={abortController:void 0,lastRequestId:"",lastStreamId:""};}let i=r.initialState?.isVisible;i!==void 0&&n(No(i));let s=r.initialState?.responseFormat;s&&n(Na(s));let u=r.fieldsToIncludeInCitations;return u&&n(Tu(u)),r.initialState?.expanded&&n(Da()),ot.subscribeToSearchRequests(e),{...o,get state(){return a().generatedAnswer},like(){this.state.liked||(n(Iu()),n(t.logLikeGeneratedAnswer()));},dislike(){this.state.disliked||(n(wu()),n(t.logDislikeGeneratedAnswer()));},openFeedbackModal(){n(Pu());},closeFeedbackModal(){n(Ou());},sendFeedback(l){n(t.logGeneratedAnswerFeedback(l)),n(Va());},sendDetailedFeedback(l){n(t.logGeneratedAnswerDetailedFeedback(l)),n(Va());},logCitationClick(l){n(t.logOpenGeneratedAnswerSource(l));},logCitationHover(l,d){n(t.logHoverCitation(l,d));},rephrase(l){n(Na(l));},show(){this.state.isVisible||(n(No(!0)),n(t.logGeneratedAnswerShowAnswers()));},hide(){this.state.isVisible&&(n(No(!1)),n(t.logGeneratedAnswerHideAnswers()));},expand(){this.state.expanded||(n(Da()),n(t.logGeneratedAnswerExpand()));},collapse(){this.state.expanded&&(n(Eu()),n(t.logGeneratedAnswerCollapse()));},logCopyToClipboard(){n(t.logCopyGeneratedAnswer());},retry(){}}}function SE(e){return e.addReducers({generatedAnswer:DC}),!0}function yE(e,t={}){let{dispatch:r}=e,n=VC(e,xu,t);return {...n,get state(){return n.state},retry(){r(G({legacy:xu.logRetryGeneratedAnswer(),next:IC()}));},rephrase(o){n.rephrase(o),r(G({legacy:xu.logRephraseGeneratedAnswer(o),next:wC()}));}}}function NC(e,t,r){let n=!1,o=()=>{n||(n=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)));};return rr(e,r,()=>{o();})}function CE(e,t){return NC(e,{logOpenGeneratedAnswerSource:ap},t)}new Z({content:new ue({required:!0}),conditions:new ue({required:!0}),priority:new q({required:!1,default:0,min:0}),fields:new Q({required:!1,each:F})});function LC(e){if(!xE(e));let t=z(e),r=()=>e.state;return {...t,get state(){return {hasError:r().search.error!==null,error:r().search.error}}}}function xE(e){return e.addReducers({search:X}),!0}function bE(e){return LC(e)}pp();/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

export { CP as C, Dw as D, Ez as E, FI as F, Gw as G, Hw as H, IP as I, Kz as K, MP as M, Qw as Q, Sa as S, VP as V, Wa as W, Xw as X, Zd as Z, CE as a, gW as b, bE as c, dU as d, ZP as e, fv as f, gP as g, hP as h, jw as j, nP as n, rE as r, tb as t, uP as u, vP as v, yE as y };

//# sourceMappingURL=headless.esm3.js.map