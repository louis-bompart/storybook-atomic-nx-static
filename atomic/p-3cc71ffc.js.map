{"version":3,"names":["QueryErrorContainer","_","children","h","class","getErrorTitleFromErrorType","i18n","organizationId","errorType","t","org","getErrorDescriptionFromErrorType","url","getAriaMessageFromErrorType","platformUrl","QueryErrorDescription","part","QueryErrorDetails","error","show","JSON","stringify","QueryErrorGuard","hasError","Fragment","QueryErrorIcon","getIconFromErrorType","NoConnection","Indexing","CannotAccess","SearchInactive","SomethingWrong","icon","QueryErrorLink","getErrorLink","link","href","QueryErrorShowMore","onShowMore","Button","style","onClick","text","QueryErrorTitle"],"sources":["src/components/common/query-error/container.tsx","src/components/common/query-error/utils.ts","src/components/common/query-error/description.tsx","src/components/common/query-error/details.tsx","src/components/common/query-error/guard.tsx","src/components/common/query-error/icon.tsx","src/components/common/query-error/link.tsx","src/components/common/query-error/show-more.tsx","src/components/common/query-error/title.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\n\nexport const QueryErrorContainer: FunctionalComponent = (_, children) => {\n  return <div class=\"text-center p-8\">{children}</div>;\n};\n","import {i18n} from 'i18next';\nimport {KnownErrorType} from './known-error-types';\n\nexport const getErrorTitleFromErrorType = (\n  i18n: i18n,\n  organizationId: string,\n  errorType?: string\n) => {\n  switch (errorType as KnownErrorType) {\n    case 'Disconnected':\n      return i18n.t('disconnected');\n\n    case 'NoEndpointsException':\n      return i18n.t('no-endpoints', {org: organizationId});\n    case 'InvalidTokenException':\n      return i18n.t('cannot-access', {org: organizationId});\n    case 'OrganizationIsPausedException':\n      return i18n.t('organization-is-paused', {org: organizationId});\n    default:\n      return i18n.t('something-went-wrong');\n  }\n};\n\nexport const getErrorDescriptionFromErrorType = (\n  i18n: i18n,\n  organizationId: string,\n  url: string,\n  errorType?: string\n) => {\n  switch (errorType as KnownErrorType) {\n    case 'Disconnected':\n      return i18n.t('check-your-connection', {url});\n    case 'NoEndpointsException':\n      return i18n.t('add-sources');\n    case 'InvalidTokenException':\n      return i18n.t('invalid-token');\n    case 'OrganizationIsPausedException':\n      return i18n.t('organization-will-resume', {\n        org: organizationId,\n      });\n    default:\n      return i18n.t('if-problem-persists');\n  }\n};\n\nexport const getAriaMessageFromErrorType = (\n  i18n: i18n,\n  organizationId: string,\n  platformUrl: string,\n  errorType?: string\n) => {\n  return `${getErrorTitleFromErrorType(i18n, organizationId, errorType)} ${getErrorDescriptionFromErrorType(i18n, organizationId, platformUrl, errorType)}`;\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {getErrorDescriptionFromErrorType} from './utils';\n\ninterface QueryErrorDescriptionProps {\n  errorType?: string;\n  i18n: i18n;\n  url: string;\n  organizationId: string;\n}\n\nexport const QueryErrorDescription: FunctionalComponent<\n  QueryErrorDescriptionProps\n> = ({errorType, i18n, url, organizationId}) => {\n  return (\n    <p part=\"description\" class=\"text-lg text-neutral-dark mt-2.5\">\n      {getErrorDescriptionFromErrorType(i18n, organizationId, url, errorType)}\n    </p>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\ninterface QueryErrorDetailsProps {\n  error: unknown;\n  show: boolean;\n}\nexport const QueryErrorDetails: FunctionalComponent<QueryErrorDetailsProps> = ({\n  error,\n  show,\n}) => {\n  if (!show) {\n    return;\n  }\n  return (\n    <pre\n      part=\"error-info\"\n      class=\"text-left border border-neutral bg-neutral-light p-3 rounded mt-8 whitespace-pre-wrap\"\n    >\n      <code>{JSON.stringify(error, null, 2)}</code>\n    </pre>\n  );\n};\n","import {Fragment, FunctionalComponent, h} from '@stencil/core';\n\ninterface QueryErrorGuardProps {\n  hasError: boolean;\n}\n\nexport const QueryErrorGuard: FunctionalComponent<QueryErrorGuardProps> = (\n  {hasError},\n  children\n) => {\n  if (!hasError) {\n    return;\n  }\n\n  return <Fragment>{children}</Fragment>;\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport CannotAccess from '../../../images/cannot-access.svg';\nimport Indexing from '../../../images/indexing.svg';\nimport NoConnection from '../../../images/no-connection.svg';\nimport SearchInactive from '../../../images/search-inactive.svg';\nimport SomethingWrong from '../../../images/something-wrong.svg';\nimport {KnownErrorType} from './known-error-types';\n\ninterface QueryErrorIconProps {\n  errorType?: string;\n}\n\nexport const QueryErrorIcon: FunctionalComponent<QueryErrorIconProps> = ({\n  errorType,\n}) => {\n  const getIconFromErrorType = () => {\n    switch (errorType as KnownErrorType) {\n      case 'Disconnected':\n        return NoConnection;\n\n      case 'NoEndpointsException':\n        return Indexing;\n\n      case 'InvalidTokenException':\n        return CannotAccess;\n      case 'OrganizationIsPausedException':\n        return SearchInactive;\n      default:\n        return SomethingWrong;\n    }\n  };\n\n  return (\n    <atomic-icon\n      part=\"icon\"\n      icon={getIconFromErrorType()}\n      class=\"w-1/2 max-w-lg\"\n    ></atomic-icon>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {KnownErrorType} from './known-error-types';\n\ninterface QueryErrorLinkProps {\n  errorType?: string;\n  i18n: i18n;\n}\n\nexport const QueryErrorLink: FunctionalComponent<QueryErrorLinkProps> = ({\n  errorType,\n  i18n,\n}) => {\n  const getErrorLink = () => {\n    switch (errorType as KnownErrorType) {\n      case 'NoEndpointsException':\n        return 'https://docs.coveo.com/en/mcc80216';\n      case 'InvalidTokenException':\n        return 'https://docs.coveo.com/en/102';\n      case 'OrganizationIsPausedException':\n        return 'https://docs.coveo.com/l6af0467';\n      default:\n        return null;\n    }\n  };\n\n  const link = getErrorLink();\n\n  return link ? (\n    <a href={link} part=\"doc-link\" class=\"btn-primary p-3 mt-10 inline-block\">\n      {i18n.t('coveo-online-help')}\n    </a>\n  ) : null;\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {Button} from '../button';\nimport {QueryErrorLink} from './link';\n\ninterface QueryErrorShowMoreProps {\n  onShowMore: () => void;\n  i18n: i18n;\n  link?: typeof QueryErrorLink;\n}\n\nexport const QueryErrorShowMore: FunctionalComponent<\n  QueryErrorShowMoreProps\n> = ({i18n, onShowMore, link}) => {\n  if (link) {\n    return link;\n  }\n  return (\n    <Button\n      part=\"more-info-btn\"\n      style=\"primary\"\n      class=\"p-3 mt-8\"\n      onClick={() => {\n        onShowMore();\n      }}\n      text={i18n.t('more-info')}\n    ></Button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {getErrorTitleFromErrorType} from './utils';\n\ninterface QueryErrorTitleProps {\n  errorType?: string;\n  i18n: i18n;\n  organizationId: string;\n}\n\nexport const QueryErrorTitle: FunctionalComponent<QueryErrorTitleProps> = ({\n  errorType,\n  i18n,\n  organizationId,\n}) => {\n  return (\n    <p part=\"title\" class=\"text-2xl text-on-background mt-8\">\n      {getErrorTitleFromErrorType(i18n, organizationId, errorType)}\n    </p>\n  );\n};\n"],"mappings":"qFAEaA,EAA2C,CAACC,EAAGC,IACnDC,EAAA,OAAKC,MAAM,mBAAmBF,GCAhC,MAAMG,EAA6B,CACxCC,EACAC,EACAC,KAEA,OAAQA,GACN,IAAK,eACH,OAAOF,EAAKG,EAAE,gBAEhB,IAAK,uBACH,OAAOH,EAAKG,EAAE,eAAgB,CAACC,IAAKH,IACtC,IAAK,wBACH,OAAOD,EAAKG,EAAE,gBAAiB,CAACC,IAAKH,IACvC,IAAK,gCACH,OAAOD,EAAKG,EAAE,yBAA0B,CAACC,IAAKH,IAChD,QACE,OAAOD,EAAKG,EAAE,wB,EAIb,MAAME,EAAmC,CAC9CL,EACAC,EACAK,EACAJ,KAEA,OAAQA,GACN,IAAK,eACH,OAAOF,EAAKG,EAAE,wBAAyB,CAACG,QAC1C,IAAK,uBACH,OAAON,EAAKG,EAAE,eAChB,IAAK,wBACH,OAAOH,EAAKG,EAAE,iBAChB,IAAK,gCACH,OAAOH,EAAKG,EAAE,2BAA4B,CACxCC,IAAKH,IAET,QACE,OAAOD,EAAKG,EAAE,uB,QAIPI,EAA8B,CACzCP,EACAC,EACAO,EACAN,IAEO,GAAGH,EAA2BC,EAAMC,EAAgBC,MAAcG,EAAiCL,EAAMC,EAAgBO,EAAaN,K,MCxClIO,EAET,EAAEP,YAAWF,OAAMM,MAAKL,oBAExBJ,EAAA,KAAGa,KAAK,cAAcZ,MAAM,oCACzBO,EAAiCL,EAAMC,EAAgBK,EAAKJ,I,MCVtDS,EAAiE,EAC5EC,QACAC,WAEA,IAAKA,EAAM,CACT,M,CAEF,OACEhB,EAAA,OACEa,KAAK,aACLZ,MAAM,yFAEND,EAAA,YAAOiB,KAAKC,UAAUH,EAAO,KAAM,IAC/B,E,MCbGI,EAA6D,EACvEC,YACDrB,KAEA,IAAKqB,EAAU,CACb,M,CAGF,OAAOpB,EAACqB,EAAQ,KAAEtB,EAAoB,E,kgjFCF3BuB,EAA2D,EACtEjB,gBAEA,MAAMkB,EAAuB,KAC3B,OAAQlB,GACN,IAAK,eACH,OAAOmB,EAET,IAAK,uBACH,OAAOC,EAET,IAAK,wBACH,OAAOC,EACT,IAAK,gCACH,OAAOC,EACT,QACE,OAAOC,E,EAIb,OACE5B,EAAA,eACEa,KAAK,OACLgB,KAAMN,IACNtB,MAAM,kBACO,E,MC5BN6B,EAA2D,EACtEzB,YACAF,WAEA,MAAM4B,EAAe,KACnB,OAAQ1B,GACN,IAAK,uBACH,MAAO,qCACT,IAAK,wBACH,MAAO,gCACT,IAAK,gCACH,MAAO,kCACT,QACE,OAAO,K,EAIb,MAAM2B,EAAOD,IAEb,OAAOC,EACLhC,EAAA,KAAGiC,KAAMD,EAAMnB,KAAK,WAAWZ,MAAM,sCAClCE,EAAKG,EAAE,sBAER,IAAI,E,MCrBG4B,EAET,EAAE/B,OAAMgC,aAAYH,WACtB,GAAIA,EAAM,CACR,OAAOA,C,CAET,OACEhC,EAACoC,EAAM,CACLvB,KAAK,gBACLwB,MAAM,UACNpC,MAAM,WACNqC,QAAS,KACPH,GAAY,EAEdI,KAAMpC,EAAKG,EAAE,cACL,E,MChBDkC,EAA6D,EACxEnC,YACAF,OACAC,oBAGEJ,EAAA,KAAGa,KAAK,QAAQZ,MAAM,oCACnBC,EAA2BC,EAAMC,EAAgBC,W"}