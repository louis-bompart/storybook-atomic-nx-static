{"file":"item-link.js","mappings":";;;MA6Ba,mBAAmB,GAAG,CACjC,IAAuB,EACvB,EACE,QAAQ,EACR,oBAAoB,EACpB,qBAAqB,EACrB,eAAe,GAAG,IAAI,GACH;IAErB,MAAM,yBAAyB,GAAG,CAAC,CAAQ,EAAE,OAAmB;QAC9D,eAAe,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;QACvC,OAAO,EAAE,CAAC;KACX,CAAC;IACD,CAAC,OAAO,EAAE,aAAa,EAAE,WAAW,EAAE,SAAS,CAAW,CAAC,OAAO,CACjE,CAAC,SAAS,KACR,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,KACjC,yBAAyB,CAAC,CAAC,EAAE,QAAQ,CAAC,CACvC,CACJ,CAAC;IACF,IAAI,CAAC,gBAAgB,CACnB,YAAY,EACZ,CAAC,CAAC,KAAK,yBAAyB,CAAC,CAAC,EAAE,oBAAoB,CAAC,EACzD,EAAC,OAAO,EAAE,IAAI,EAAC,CAChB,CAAC;IACF,IAAI,CAAC,gBAAgB,CACnB,UAAU,EACV,CAAC,CAAC,KAAK,yBAAyB,CAAC,CAAC,EAAE,qBAAqB,CAAC,EAC1D,EAAC,OAAO,EAAE,IAAI,EAAC,CAChB,CAAC;AACJ,EAAE;MAEW,qBAAqB,GAAuC,CACvE,EACE,IAAI,EACJ,SAAS,EACT,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,oBAAoB,EACpB,qBAAqB,EACrB,WAAW,EACX,YAAY,EACZ,OAAO,EACP,MAAM,EACN,GAAG,EACH,UAAU,EACV,QAAQ,EACR,UAAU,EACV,GAAG,EACH,eAAe,GAAG,IAAI,EACtB,MAAM,GAAG,OAAO,GACjB,EACD,QAAQ;IAER,QACE,SACE,KAAK,EAAE,SAAS,EAChB,IAAI,EAAE,IAAI,EACV,IAAI,EAAE,cAAc,CAAC,IAAI,CAAC,EAC1B,MAAM,EAAE,MAAM,EACd,KAAK,EAAE,KAAK,EACZ,GAAG,EAAE,GAAG,EACR,GAAG,EAAE,CAAC,EAAE;YACN,IAAI,GAAG,EAAE;gBACP,GAAG,CAAC,EAAE,CAAC,CAAC;aACT;YAED,IAAI,CAAC,EAAE,EAAE;gBACP,OAAO;aACR;YAED,mBAAmB,CAAC,EAAE,EAAE;gBACtB,QAAQ;gBACR,oBAAoB;gBACpB,qBAAqB;gBACrB,eAAe;aAChB,CAAC,CAAC;YAEH,IAAI,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,MAAM,EAAE;gBACtB,CAAC,GAAG,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,EAAC,QAAQ,EAAE,SAAS,EAAC;oBAC5C,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAU,CAAC,CAAC;iBACvC,CAAC,CAAC;aACJ;YAED,IAAI,UAAU,EAAE;gBACd,EAAE,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;aACxC;SACF,EACD,QAAQ,EAAE,QAAQ,EAClB,WAAW,EAAE,WAAW,EACxB,YAAY,EAAE,YAAY,EAC1B,OAAO,EAAE,OAAO,EAChB,MAAM,EAAE,MAAM,IAEb,QAAQ,CACP,EACJ;AACJ;;;;","names":[],"sources":["src/components/common/item-link/item-link.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\nimport {filterProtocol} from '../../../utils/xss-utils';\nimport {ItemTarget} from '../layout/display-options';\n\ninterface ItemLinkEventProps {\n  onSelect: () => void;\n  onBeginDelayedSelect: () => void;\n  onCancelPendingSelect: () => void;\n  stopPropagation?: boolean;\n}\n\nexport interface ItemLinkProps extends ItemLinkEventProps {\n  href: string;\n  className?: string;\n  part?: string;\n  title?: string;\n  ref?: (elm?: HTMLAnchorElement) => void;\n  stopPropagation?: boolean;\n  attributes?: Attr[];\n  tabIndex?: number;\n  ariaHidden?: boolean;\n  target?: ItemTarget;\n  rel?: string;\n  onMouseOver?: () => void;\n  onMouseLeave?: () => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n}\n\nexport const bindAnalyticsToLink = (\n  link: HTMLAnchorElement,\n  {\n    onSelect,\n    onBeginDelayedSelect,\n    onCancelPendingSelect,\n    stopPropagation = true,\n  }: ItemLinkEventProps\n) => {\n  const stopPropagationAndProcess = (e: Event, process: () => void) => {\n    stopPropagation && e.stopPropagation();\n    process();\n  };\n  (['click', 'contextmenu', 'mousedown', 'mouseup'] as const).forEach(\n    (eventName) =>\n      link.addEventListener(eventName, (e) =>\n        stopPropagationAndProcess(e, onSelect)\n      )\n  );\n  link.addEventListener(\n    'touchstart',\n    (e) => stopPropagationAndProcess(e, onBeginDelayedSelect),\n    {passive: true}\n  );\n  link.addEventListener(\n    'touchend',\n    (e) => stopPropagationAndProcess(e, onCancelPendingSelect),\n    {passive: true}\n  );\n};\n\nexport const LinkWithItemAnalytics: FunctionalComponent<ItemLinkProps> = (\n  {\n    href,\n    className,\n    part,\n    title,\n    onSelect,\n    onBeginDelayedSelect,\n    onCancelPendingSelect,\n    onMouseOver,\n    onMouseLeave,\n    onFocus,\n    onBlur,\n    ref,\n    attributes,\n    tabIndex,\n    ariaHidden,\n    rel,\n    stopPropagation = true,\n    target = '_self',\n  },\n  children\n) => {\n  return (\n    <a\n      class={className}\n      part={part}\n      href={filterProtocol(href)}\n      target={target}\n      title={title}\n      rel={rel}\n      ref={(el) => {\n        if (ref) {\n          ref(el);\n        }\n\n        if (!el) {\n          return;\n        }\n\n        bindAnalyticsToLink(el, {\n          onSelect,\n          onBeginDelayedSelect,\n          onCancelPendingSelect,\n          stopPropagation,\n        });\n\n        if (attributes?.length) {\n          [...attributes].forEach(({nodeName, nodeValue}) => {\n            el.setAttribute(nodeName, nodeValue!);\n          });\n        }\n\n        if (ariaHidden) {\n          el.setAttribute('aria-hidden', 'true');\n        }\n      }}\n      tabIndex={tabIndex}\n      onMouseOver={onMouseOver}\n      onMouseLeave={onMouseLeave}\n      onFocus={onFocus}\n      onBlur={onBlur}\n    >\n      {children}\n    </a>\n  );\n};\n"],"version":3}