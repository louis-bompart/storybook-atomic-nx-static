import{e as d}from"./p-1580513b-3LX64KEr.js";import{T as a}from"./p-f5723aee-BNyovPuY.js";const h="atomic/accessibility/findAriaLive";function b(t,e=!1){function i(){const n=d(h,{});document.dispatchEvent(n);const{element:s}=n.detail;return s}function o(n){var s;(s=i())===null||s===void 0||s.updateMessage(t,n,e)}function l(){var n;(n=i())===null||n===void 0||n.registerRegion(t,e)}return(n,s)=>{const{componentWillRender:r}=n;Object.defineProperty(n,s,{set:u=>o(u)}),n.componentWillRender=function(){r&&r.call(this),l()}}}class A{constructor(e){this.component=e,this.doFocusAfterSearch=!1,this.doFocusOnNextTarget=!1,this.bindings=e.bindings,this.handleComponentRenderLoop()}setTarget(e){e&&(this.element=e,this.doFocusOnNextTarget&&(this.doFocusOnNextTarget=!1,this.focus()))}async focus(){var e,i;await a(),(e=this.element)===null||e===void 0||e.focus(),(i=this.onFocusCallback)===null||i===void 0||i.call(this)}focusAfterSearch(){return this.lastSearchId=this.bindings.store.getUniqueIDFromEngine(this.bindings.engine),this.doFocusAfterSearch=!0,new Promise(e=>this.onFocusCallback=e)}focusOnNextTarget(){return this.doFocusOnNextTarget=!0,new Promise(e=>this.onFocusCallback=e)}disableForCurrentSearch(){this.bindings.store.getUniqueIDFromEngine(this.bindings.engine)!==this.lastSearchId&&(this.doFocusAfterSearch=!1)}handleComponentRenderLoop(){const e=this.component.componentDidRender;this.component.componentDidRender=()=>{if(e&&e.call(this.component),!!this.bindings&&this.doFocusAfterSearch&&this.bindings.store.getUniqueIDFromEngine(this.bindings.engine)!==this.lastSearchId&&(this.doFocusAfterSearch=!1,this.element)){const i=this.element;a().then(()=>{var o;i.focus(),(o=this.onFocusCallback)===null||o===void 0||o.call(this)})}}}}function f(t){if(t.getAttribute("tabindex")==="-1")return!1;if(t.hasAttribute("tabindex")||t.getAttribute("contentEditable")==="true")return!0;switch(t.tagName){case"A":case"AREA":return t.hasAttribute("href");case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":return!t.hasAttribute("disabled");case"IFRAME":return!0;default:return!1}}function*c(t){f(t)&&(yield t);let e=Array.from(t.children);t instanceof HTMLSlotElement?e=t.assignedElements():t.shadowRoot&&e.push(...Array.from(t.shadowRoot.children));for(const i of e)yield*c(i)}function p(t){var e;return(e=c(t).next().value)!==null&&e!==void 0?e:null}export{p as a,b as e,A as n};
