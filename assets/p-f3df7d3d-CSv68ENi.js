import{a as r}from"./p-53b93b76-CzeWwJ_U.js";import{u}from"./p-bd76e089-DfLGy3Sh.js";import{r as p,T as o}from"./p-f5723aee-D-iZ1npx.js";const d="result-component";class c{constructor(t){this.props=t,this.props.store.setLoadingFlag(this.props.loadingFlag),this.props.store.registerResultList(this),this.updateBreakpointsOnce=p(()=>u(this.props.host))}updateBreakpoints(){this.updateBreakpointsOnce()}getResultId(t,i,e,s){return`${t}${i}${e}${s}`}setNewResultRef(t,i){var e,s;if(i===0&&(this.firstResultEl=t),i!==this.indexOfResultToFocus||!t.children.length&&!(!((e=t.shadowRoot)===null||e===void 0)&&e.children.length))return;this.indexOfResultToFocus=void 0;const n=(s=r(t))!==null&&s!==void 0?s:t;this.props.nextNewItemTarget.setTarget(n)}focusOnNextNewResult(){this.indexOfResultToFocus=this.props.getCurrentNumberOfItems(),this.props.nextNewItemTarget.focusOnNextTarget()}async focusOnFirstResultAfterNextSearch(){return await o(),new Promise(t=>{this.props.getIsLoading()&&(this.firstResultEl=void 0);const i=this.props.engineSubscribe(async()=>{var e;if(await o(),!this.props.getIsLoading()&&this.firstResultEl){const s=(e=r(this.firstResultEl))!==null&&e!==void 0?e:this.firstResultEl;this.props.nextNewItemTarget.setTarget(s),this.props.nextNewItemTarget.focus(),this.firstResultEl=void 0,i(),t()}})})}}export{d as h,c as n};
