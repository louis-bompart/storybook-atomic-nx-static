{"file":"atomic-quickview-modal.entry.esm.js","mappings":"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","names":["ArrowDown"],"sources":["src/components/search/result-template-components/atomic-quickview-sidebar/atomic-quickview-sidebar.tsx","src/components/search/result-template-components/quickview-iframe/quickview-iframe.tsx","src/components/search/result-template-components/quickview-preview-bar/quickview-preview-bar.ts","src/utils/color-utils.ts","src/components/search/result-template-components/quickview-word-highlight/quickview-word-highlight.tsx","src/components/search/result-template-components/atomic-quickview-modal/atomic-quickview-modal.pcss?tag=atomic-quickview-modal&encapsulation=shadow","src/components/search/result-template-components/atomic-quickview-modal/atomic-quickview-modal.tsx"],"sourcesContent":["import {Fragment, FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport Add from '../../../../images/add.svg';\r\nimport ArrowDown from '../../../../images/arrow-bottom-rounded.svg';\r\nimport ArrowUp from '../../../../images/arrow-top-rounded.svg';\r\nimport MinimizeIcon from '../../../../images/menu.svg';\r\nimport Remove from '../../../../images/remove.svg';\r\nimport {Checkbox} from '../../../common/checkbox';\r\nimport {FieldsetGroup} from '../../../common/fieldset-group';\r\nimport {IconButton} from '../../../common/iconButton';\r\nimport type {HighlightKeywords} from '../atomic-quickview-modal/atomic-quickview-modal';\r\nimport {QuickviewWordHighlight} from '../quickview-word-highlight/quickview-word-highlight';\r\n\r\nconst identifierKeywordsSection = 'coveo-quickview-sidebar-keywords';\r\n\r\nexport interface QuickviewSidebarProps {\r\n  words: Record<string, QuickviewWordHighlight>;\r\n  i18n: i18n;\r\n  highlightKeywords: HighlightKeywords;\r\n  onHighlightKeywords: (highlight: HighlightKeywords) => void;\r\n  minimized: boolean;\r\n  onMinimize: (minimize: boolean) => void;\r\n}\r\n\r\nexport const QuickviewSidebar: FunctionalComponent<QuickviewSidebarProps> = (\r\n  props\r\n) => {\r\n  const {words, minimized} = props;\r\n  const numberOfWords = Object.values(words).length;\r\n\r\n  if (numberOfWords === 0) {\r\n    return;\r\n  }\r\n\r\n  const minimizeButton = (\r\n    <MinimizeButton {...props} wordsLength={numberOfWords} />\r\n  );\r\n\r\n  return (\r\n    <div class=\"p-4 border-r border-neutral h-full\">\r\n      {minimized && minimizeButton}\r\n      <div class=\"flex items-center justify-between\">\r\n        <div class=\"flex items-center\">\r\n          <HighlightKeywordsCheckbox {...props} />\r\n        </div>\r\n        {!minimized && <div>{minimizeButton}</div>}\r\n      </div>\r\n\r\n      {!minimized && <Keywords {...props} words={words} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MinimizeButton: FunctionalComponent<\r\n  Pick<\r\n    QuickviewSidebarProps,\r\n    'i18n' | 'minimized' | 'onMinimize' | 'highlightKeywords'\r\n  > & {wordsLength: number}\r\n> = ({i18n, minimized, onMinimize, highlightKeywords, wordsLength}) => (\r\n  <IconButton\r\n    partPrefix=\"sidebar-minimize\"\r\n    icon={MinimizeIcon}\r\n    style=\"text-transparent\"\r\n    title={i18n.t('quickview-toggle-navigation')}\r\n    ariaLabel={i18n.t('quickview-toggle-navigation')}\r\n    onClick={() => onMinimize(!minimized)}\r\n    badge={\r\n      highlightKeywords && minimized ? <slot>{wordsLength}</slot> : undefined\r\n    }\r\n    class={`w-fit ${minimized ? '' : 'ml-auto'}`}\r\n    ariaExpanded={(!minimized).toString()}\r\n    ariaControls={identifierKeywordsSection}\r\n  />\r\n);\r\n\r\nconst HighlightKeywordsCheckbox: FunctionalComponent<\r\n  Pick<\r\n    QuickviewSidebarProps,\r\n    'i18n' | 'highlightKeywords' | 'onHighlightKeywords' | 'minimized'\r\n  >\r\n> = ({i18n, highlightKeywords, onHighlightKeywords, minimized}) => (\r\n  <Fragment>\r\n    <Checkbox\r\n      text={i18n.t('keywords-highlight')}\r\n      class=\"mr-2\"\r\n      id=\"atomic-quickview-sidebar-highlight-keywords\"\r\n      checked={!highlightKeywords.highlightNone}\r\n      onToggle={(checked) =>\r\n        onHighlightKeywords({\r\n          ...highlightKeywords,\r\n          highlightNone: !checked,\r\n        })\r\n      }\r\n    ></Checkbox>\r\n    {!minimized && (\r\n      <label\r\n        class=\"font-bold cursor-pointer whitespace-nowrap\"\r\n        htmlFor=\"atomic-quickview-sidebar-highlight-keywords\"\r\n      >\r\n        {i18n.t('keywords-highlight')}\r\n      </label>\r\n    )}\r\n  </Fragment>\r\n);\r\n\r\nconst Keywords: FunctionalComponent<\r\n  Pick<\r\n    QuickviewSidebarProps,\r\n    'i18n' | 'onHighlightKeywords' | 'highlightKeywords'\r\n  > & {\r\n    words: Record<string, QuickviewWordHighlight>;\r\n  }\r\n> = ({words, i18n, highlightKeywords, onHighlightKeywords}) => {\r\n  return (\r\n    <div id={identifierKeywordsSection}>\r\n      {Object.values(words).map((keyword) => {\r\n        const wordIsEnabled =\r\n          !highlightKeywords.highlightNone &&\r\n          (highlightKeywords.keywords[keyword.text] === undefined ||\r\n            highlightKeywords.keywords[keyword.text].enabled === true);\r\n\r\n        return (\r\n          <div\r\n            key={keyword.text}\r\n            class=\"flex items-center justify-between gap-x-2 my-4 w-100\"\r\n          >\r\n            <div\r\n              class={`flex grow items-center bg-background border border-neutral rounded-lg overflow-x-auto ${\r\n                !wordIsEnabled ? 'pointer-events-none opacity-50' : ''\r\n              }`}\r\n            >\r\n              <div\r\n                class=\"flex items-center grow p-4 border-r\"\r\n                aria-hidden=\"true\"\r\n              >\r\n                <div\r\n                  class=\"w-5 h-5 flex-none mr-2\"\r\n                  style={{backgroundColor: keyword.color}}\r\n                ></div>\r\n                <div class=\"grow mr-2 whitespace-nowrap\">{keyword.text}</div>\r\n                <div class=\"flex-none\">\r\n                  (\r\n                  {new Intl.NumberFormat(i18n.language, {\r\n                    notation: 'compact',\r\n                  }).format(keyword.occurrences)}\r\n                  )\r\n                </div>\r\n              </div>\r\n              <FieldsetGroup\r\n                label={i18n.t('quickview-navigate-keywords', {\r\n                  occurrences: keyword.occurrences,\r\n                  keyword: keyword.text,\r\n                })}\r\n              >\r\n                <div class=\"flex px-2\">\r\n                  <IconButton\r\n                    partPrefix=\"sidebar-next\"\r\n                    icon={ArrowDown}\r\n                    disabled={!wordIsEnabled}\r\n                    style=\"text-transparent\"\r\n                    class=\"border-0\"\r\n                    ariaLabel={i18n.t('next')}\r\n                    title={i18n.t('next')}\r\n                    onClick={() => keyword.navigateForward()}\r\n                  />\r\n                  <IconButton\r\n                    partPrefix=\"sidebar-previous\"\r\n                    icon={ArrowUp}\r\n                    disabled={!wordIsEnabled}\r\n                    style=\"text-transparent\"\r\n                    class=\"border-0\"\r\n                    ariaLabel={i18n.t('previous')}\r\n                    title={i18n.t('previous')}\r\n                    onClick={() => keyword.navigateBackward()}\r\n                  />\r\n                </div>\r\n              </FieldsetGroup>\r\n            </div>\r\n            <IconButton\r\n              partPrefix=\"sidebar-remove-word\"\r\n              class={`${\r\n                highlightKeywords.highlightNone\r\n                  ? 'pointer-events-none opacity-50'\r\n                  : ''\r\n              }`}\r\n              tabIndex={highlightKeywords.highlightNone ? '-1' : '0'}\r\n              ariaPressed={(!wordIsEnabled).toString()}\r\n              style=\"text-transparent\"\r\n              icon={wordIsEnabled ? Remove : Add}\r\n              ariaLabel={i18n.t('quickview-remove-word')}\r\n              onClick={() => {\r\n                onHighlightKeywords({\r\n                  ...highlightKeywords,\r\n                  keywords: {\r\n                    ...highlightKeywords.keywords,\r\n                    [keyword.text]: {\r\n                      enabled: !wordIsEnabled,\r\n                      indexIdentifier: keyword.indexIdentifier,\r\n                    },\r\n                  },\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import {SearchEngine} from '@coveo/headless';\r\nimport {FunctionalComponent, h} from '@stencil/core';\r\n\r\nconst documentIdentifierInIframe = 'CoveoDocIdentifier';\r\n\r\nconst writeDocument = (documentWriter: Document, content: string) => {\r\n  documentWriter.open();\r\n  documentWriter.write(content);\r\n  documentWriter.close();\r\n  if (documentWriter.scrollingElement) {\r\n    documentWriter.scrollingElement.scrollTop = 0;\r\n  }\r\n};\r\n\r\nconst currentResultAlreadyWrittenToDocument = (\r\n  documentWriter: Document,\r\n  uniqueIdentifier: string\r\n) => {\r\n  const currentDocIdentifier = documentWriter.getElementById(\r\n    documentIdentifierInIframe\r\n  );\r\n\r\n  return (\r\n    currentDocIdentifier &&\r\n    currentDocIdentifier.textContent === uniqueIdentifier\r\n  );\r\n};\r\n\r\nconst ensureSameResultIsNotOverwritten = (\r\n  documentWriter: Document,\r\n  uniqueIdentifier: string\r\n) => {\r\n  const docIdentifier = documentWriter.createElement('div');\r\n  docIdentifier.style.display = 'none';\r\n  docIdentifier.setAttribute('aria-hidden', 'true');\r\n  docIdentifier.id = documentIdentifierInIframe;\r\n  docIdentifier.textContent = uniqueIdentifier;\r\n  documentWriter.body.appendChild(docIdentifier);\r\n};\r\n\r\nconst warnAboutLimitedUsageQuickview = (logger?: SearchEngine['logger']) => {\r\n  logger?.warn(\r\n    'Quickview initialized in restricted mode due to incompatible sandboxing environment. Keywords hit navigation will be disabled.'\r\n  );\r\n};\r\n\r\nexport const QuickviewIframe: FunctionalComponent<{\r\n  content?: string;\r\n  onSetIframeRef: (ref: HTMLIFrameElement) => void;\r\n  uniqueIdentifier?: string;\r\n  sandbox?: string;\r\n  src?: string;\r\n  logger?: SearchEngine['logger'];\r\n}> = ({onSetIframeRef, uniqueIdentifier, content, sandbox, src, logger}) => {\r\n  // When a document is written with document.open/document.write/document.close\r\n  // it is not synchronous and the content of the iframe is only available to be queried at the end of the current call stack.\r\n  // This add a \"wait\" (setTimeout 0) before calling the `onSetIframeRef` from the parent modal quickview\r\n  const waitForIframeContentToBeWritten = () => {\r\n    return new Promise((resolve) => setTimeout(resolve));\r\n  };\r\n\r\n  return (\r\n    <iframe\r\n      src=\"about:blank\"\r\n      class=\"w-full h-full\"\r\n      sandbox={sandbox}\r\n      ref={async (el) => {\r\n        const iframeRef = el as HTMLIFrameElement;\r\n\r\n        if (!uniqueIdentifier || !content) {\r\n          return;\r\n        }\r\n\r\n        const documentWriter = iframeRef.contentDocument;\r\n        if (!documentWriter) {\r\n          if (src) {\r\n            warnAboutLimitedUsageQuickview(logger);\r\n            iframeRef.src = src;\r\n          }\r\n\r\n          return;\r\n        }\r\n        if (\r\n          currentResultAlreadyWrittenToDocument(\r\n            documentWriter,\r\n            uniqueIdentifier\r\n          )\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        writeDocument(documentWriter, content);\r\n        ensureSameResultIsNotOverwritten(documentWriter, uniqueIdentifier);\r\n\r\n        await waitForIframeContentToBeWritten();\r\n        onSetIframeRef(iframeRef);\r\n      }}\r\n    ></iframe>\r\n  );\r\n};\r\n","import {HighlightKeywords} from '../atomic-quickview-modal/atomic-quickview-modal';\r\nimport {QuickviewWordHighlight} from '../quickview-word-highlight/quickview-word-highlight';\r\n\r\nconst buildPreviewBar = (documentWriter: Document) => {\r\n  const previewBarId = 'CoveoPreviewBar';\r\n  const bar =\r\n    documentWriter.getElementById(previewBarId) ||\r\n    documentWriter.createElement('div');\r\n\r\n  bar.id = previewBarId;\r\n  bar.innerHTML = '';\r\n  bar.style.position = 'fixed';\r\n  bar.style.top = '0';\r\n  bar.style.right = '0';\r\n  bar.style.width = '15px';\r\n  bar.style.height = '100%';\r\n  bar.setAttribute('aria-hidden', 'true');\r\n  return bar;\r\n};\r\n\r\nconst buildPreviewUnit = (\r\n  documentWriter: Document,\r\n  word: QuickviewWordHighlight,\r\n  wordElement: HTMLElement,\r\n  docHeight: number,\r\n  highlightKeywords: HighlightKeywords\r\n) => {\r\n  const previewUnit = documentWriter.createElement('div');\r\n  if (highlightKeywords.keywords[word.text]?.enabled === false) {\r\n    previewUnit.style.display = 'none';\r\n    return previewUnit;\r\n  }\r\n\r\n  const elementPosition = wordElement.getBoundingClientRect().top;\r\n\r\n  previewUnit.style.position = 'absolute';\r\n  previewUnit.style.top = `${(elementPosition / docHeight) * 100}%`;\r\n  previewUnit.style.width = '100%';\r\n  previewUnit.style.height = '1px';\r\n  previewUnit.style.border = `1px solid ${word.previewBorderColor}`;\r\n  previewUnit.style.backgroundColor = word.color;\r\n  return previewUnit;\r\n};\r\n\r\nexport const buildQuickviewPreviewBar = (\r\n  words: Record<string, QuickviewWordHighlight>,\r\n  highlightKeywords: HighlightKeywords,\r\n  iframe?: HTMLIFrameElement\r\n) => {\r\n  if (!iframe) {\r\n    return;\r\n  }\r\n  const documentWriter = iframe.contentDocument;\r\n  if (!documentWriter) {\r\n    return;\r\n  }\r\n  const bar = buildPreviewBar(documentWriter);\r\n  if (highlightKeywords.highlightNone) {\r\n    bar.remove();\r\n    return;\r\n  }\r\n  const docHeight = documentWriter.body.scrollHeight;\r\n\r\n  Object.values(words).forEach((word) => {\r\n    word.elements.forEach((wordElement) => {\r\n      const previewUnit = buildPreviewUnit(\r\n        documentWriter,\r\n        word,\r\n        wordElement,\r\n        docHeight,\r\n        highlightKeywords\r\n      );\r\n\r\n      bar.appendChild(previewUnit);\r\n    });\r\n  });\r\n  documentWriter.body.appendChild(bar);\r\n};\r\n","export const rgbToHsv = (r: number, g: number, b: number) => {\r\n  const max = Math.max(r, g, b);\r\n  const min = Math.min(r, g, b);\r\n\r\n  let h: number;\r\n  const v = max;\r\n\r\n  const d = max - min;\r\n  const s = max === 0 ? 0 : d / max;\r\n\r\n  if (max === min) {\r\n    h = 0;\r\n  } else {\r\n    switch (max) {\r\n      case r:\r\n        h = (g - b) / d + (g < b ? 6 : 0);\r\n        break;\r\n      case g:\r\n        h = (b - r) / d + 2;\r\n        break;\r\n      case b:\r\n      default:\r\n        h = (r - g) / d + 4;\r\n        break;\r\n    }\r\n    h /= 6;\r\n  }\r\n\r\n  return {h, s, v};\r\n};\r\n\r\nexport const hsvToRgb = (h: number, s: number, v: number) => {\r\n  let r, g, b;\r\n\r\n  const i = Math.floor(h * 6);\r\n  const f = h * 6 - i;\r\n  const p = v * (1 - s);\r\n  const q = v * (1 - f * s);\r\n  const t = v * (1 - (1 - f) * s);\r\n\r\n  switch (i % 6) {\r\n    case 0:\r\n      (r = v), (g = t), (b = p);\r\n      break;\r\n    case 1:\r\n      (r = q), (g = v), (b = p);\r\n      break;\r\n    case 2:\r\n      (r = p), (g = v), (b = t);\r\n      break;\r\n    case 3:\r\n      (r = p), (g = q), (b = v);\r\n      break;\r\n    case 4:\r\n      (r = t), (g = p), (b = v);\r\n      break;\r\n    case 5:\r\n    default:\r\n      (r = v), (g = p), (b = q);\r\n      break;\r\n  }\r\n\r\n  return {\r\n    r: Math.round(r),\r\n    g: Math.round(g),\r\n    b: Math.round(b),\r\n  };\r\n};\r\n","import {TermsToHighlight} from '@coveo/headless';\r\nimport {hsvToRgb, rgbToHsv} from '../../../../utils/color-utils';\r\n\r\nexport const HIGHLIGHT_PREFIX = 'CoveoHighlight';\r\nexport class QuickviewWordHighlight {\r\n  public text: string;\r\n  public indexIdentifier: string;\r\n  public occurrences = 0;\r\n  public color: string;\r\n  public focusedColor: string;\r\n  public previewBorderColor: string;\r\n  public elements: HTMLElement[] = [];\r\n\r\n  private currentNavigationPosition = -1;\r\n\r\n  constructor(\r\n    private stemmingInfoFromIndex: TermsToHighlight,\r\n    keywordElementInIframe: HTMLElement\r\n  ) {\r\n    const parsed = this.parseKeywordIdentifier(keywordElementInIframe);\r\n    if (!parsed) {\r\n      throw 'Invalid keyword identifier for quickview';\r\n    }\r\n\r\n    this.text = this.getText(keywordElementInIframe);\r\n    this.indexIdentifier = `${parsed.keywordIdentifier}-${this.text}`;\r\n    this.color = keywordElementInIframe.style.backgroundColor;\r\n    this.focusedColor = this.computeInvertedColor();\r\n    this.previewBorderColor = this.computeSaturatedColor();\r\n\r\n    this.addElement(keywordElementInIframe);\r\n  }\r\n\r\n  public addElement(keywordElementInIframe: HTMLElement) {\r\n    this.occurrences++;\r\n    this.elements.push(keywordElementInIframe);\r\n  }\r\n\r\n  public navigateForward() {\r\n    this.currentNavigationPosition++;\r\n    if (this.currentNavigationPosition >= this.elements.length) {\r\n      this.currentNavigationPosition = 0;\r\n    }\r\n    this.highlightNavigation();\r\n    this.putElementIntoView();\r\n    return this.elements[this.currentNavigationPosition];\r\n  }\r\n\r\n  public navigateBackward() {\r\n    this.currentNavigationPosition--;\r\n    if (this.currentNavigationPosition < 0) {\r\n      this.currentNavigationPosition = this.elements.length - 1;\r\n    }\r\n    this.highlightNavigation();\r\n    this.putElementIntoView();\r\n    return this.elements[this.currentNavigationPosition];\r\n  }\r\n\r\n  private isTaggedWord(element: HTMLElement) {\r\n    return element.nodeName.toLowerCase() === 'coveotaggedword';\r\n  }\r\n\r\n  private highlightNavigation() {\r\n    const currentElement = this.elements[this.currentNavigationPosition];\r\n    const otherElements = this.elements.filter((el) => el !== currentElement);\r\n    currentElement.style.color = this.color;\r\n    currentElement.style.backgroundColor = this.focusedColor;\r\n    otherElements.forEach((element) => {\r\n      element.style.color = '';\r\n      element.style.backgroundColor = this.color;\r\n    });\r\n  }\r\n\r\n  private putElementIntoView() {\r\n    const element = this.elements[this.currentNavigationPosition];\r\n    element.scrollIntoView();\r\n  }\r\n\r\n  private getText(element: HTMLElement) {\r\n    const innerTextOfHTMLElement = this.getHighlightedInnerText(element);\r\n    return this.resolveOriginalTerm(innerTextOfHTMLElement).trim();\r\n  }\r\n\r\n  private resolveOriginalTerm(highlight: string): string {\r\n    // First try to find either an exact match between the highlight and the original non-stemmed keyword.\r\n    // Otherwise try to find a match between the highlight and the stemming keyword expansions\r\n    // If nothing is found (which should not normally happen...), simply return the highlight keyword as is.\r\n\r\n    const found = Object.keys(this.stemmingInfoFromIndex).find(\r\n      (originalTerm) => {\r\n        const originalTermMatch =\r\n          originalTerm.toLowerCase() === highlight.toLowerCase();\r\n        if (originalTermMatch) {\r\n          return true;\r\n        }\r\n        const stemmingExpansions = this.stemmingInfoFromIndex[originalTerm];\r\n        if (!stemmingExpansions) {\r\n          return false;\r\n        }\r\n\r\n        const stemmingExpansionMatch = stemmingExpansions.find(\r\n          (stemmingExpansion) =>\r\n            stemmingExpansion.toLowerCase() === highlight.toLowerCase()\r\n        );\r\n        return stemmingExpansionMatch;\r\n      }\r\n    );\r\n    return found || highlight;\r\n  }\r\n\r\n  private getHighlightedInnerText(element: HTMLElement): string {\r\n    if (!this.isTaggedWord(element)) {\r\n      return this.getTextOfHTMLElement(element);\r\n    }\r\n\r\n    const children = Array.from(element.children) as HTMLElement[];\r\n    if (children.length >= 1) {\r\n      return this.getTextOfHTMLElement(children[0]);\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  private parseKeywordIdentifier(element: HTMLElement) {\r\n    const parts = element.id\r\n      .substring(HIGHLIGHT_PREFIX.length + 1)\r\n      .match(/^([0-9]+)\\.([0-9]+)\\.([0-9]+)$/);\r\n\r\n    if (!parts || parts.length <= 3) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      keywordIdentifier: parts[1],\r\n      keywordTermPart: parseInt(parts[3], 10),\r\n    };\r\n  }\r\n\r\n  private getTextOfHTMLElement(el: HTMLElement) {\r\n    return el.innerText || el.textContent || '';\r\n  }\r\n\r\n  private computeInvertedColor() {\r\n    const {r, g, b} = this.extractRgb();\r\n    return `rgb(${255 - r}, ${255 - g}, ${255 - b})`;\r\n  }\r\n\r\n  private computeSaturatedColor() {\r\n    const {r, g, b} = this.extractRgb();\r\n    const {h, s, v} = rgbToHsv(r, g, b);\r\n    let newSaturation = s * 2;\r\n    if (newSaturation > 1) {\r\n      newSaturation = 1;\r\n    }\r\n    const {\r\n      r: rSaturated,\r\n      g: gSaturated,\r\n      b: bSaturated,\r\n    } = hsvToRgb(h, newSaturation, v);\r\n    return `rgb(${rSaturated}, ${gSaturated}, ${bSaturated})`;\r\n  }\r\n\r\n  private extractRgb() {\r\n    const rgbExtracted = this.color.match(/\\d+/g);\r\n    if (!rgbExtracted) {\r\n      return {r: 255, g: 255, b: 255};\r\n    }\r\n\r\n    return {\r\n      r: parseInt(rgbExtracted[0], 10),\r\n      g: parseInt(rgbExtracted[1], 10),\r\n      b: parseInt(rgbExtracted[2], 10),\r\n    };\r\n  }\r\n}\r\n\r\nexport const getWordsHighlights = (\r\n  stemmingInfoFromIndex: TermsToHighlight,\r\n  iframe?: HTMLIFrameElement\r\n) => {\r\n  const wordsHighlights: Record<string, QuickviewWordHighlight> = {};\r\n  if (!iframe) {\r\n    return wordsHighlights;\r\n  }\r\n\r\n  iframe.contentDocument?.body\r\n    .querySelectorAll(`[id^=\"${HIGHLIGHT_PREFIX}\"]`)\r\n    .forEach((el) => {\r\n      const wordHTMLElementToHighlight = el as HTMLElement;\r\n\r\n      const wordHighlight = new QuickviewWordHighlight(\r\n        stemmingInfoFromIndex,\r\n        wordHTMLElementToHighlight\r\n      );\r\n\r\n      if (!wordHighlight.text) {\r\n        return;\r\n      }\r\n\r\n      const alreadyScannedKeyword =\r\n        wordsHighlights[wordHighlight.indexIdentifier];\r\n\r\n      if (alreadyScannedKeyword) {\r\n        alreadyScannedKeyword.addElement(wordHTMLElementToHighlight);\r\n      } else {\r\n        wordsHighlights[wordHighlight.indexIdentifier] = wordHighlight;\r\n      }\r\n    });\r\n\r\n  return wordsHighlights;\r\n};\r\n","@import '../../../../global/global.pcss';\r\n@import '../../../../global/mixins.pcss';\r\n\r\n.atomic-quickview-modal {\r\n  &::part(backdrop) {\r\n    grid-template-columns: 1fr max(80vw, 30rem) 1fr;\r\n  }\r\n  &::part(body),\r\n  &::part(header),\r\n  &::part(footer) {\r\n    @apply max-w-full;\r\n  }\r\n\r\n  &::part(footer) {\r\n    @apply flex justify-center;\r\n  }\r\n\r\n  &::part(body-wrapper) {\r\n    @apply p-0 overflow-hidden h-full;\r\n  }\r\n\r\n  &::part(body) {\r\n    @apply h-full;\r\n  }\r\n\r\n  &::part(backdrop) {\r\n    grid-template-rows: 1fr 100% 3fr;\r\n  }\r\n\r\n  &::part(header-wrapper) {\r\n    @apply bg-neutral-light;\r\n  }\r\n\r\n  a {\r\n    @mixin link-style;\r\n  }\r\n}\r\n","import {\r\n  buildInteractiveResult,\r\n  Result,\r\n  InteractiveResult,\r\n  TermsToHighlight,\r\n} from '@coveo/headless';\r\nimport {\r\n  Component,\r\n  Event,\r\n  EventEmitter,\r\n  h,\r\n  Prop,\r\n  State,\r\n  Watch,\r\n  Method,\r\n  VNode,\r\n  Fragment,\r\n} from '@stencil/core';\r\nimport CloseIcon from '../../../../images/close.svg';\r\nimport {\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../../utils/initialization-utils';\r\nimport {Button} from '../../../common/button';\r\nimport {IconButton} from '../../../common/iconButton';\r\nimport {LinkWithItemAnalytics} from '../../../common/item-link/item-link';\r\nimport {Bindings} from '../../atomic-search-interface/atomic-search-interface';\r\nimport {QuickviewSidebar} from '../atomic-quickview-sidebar/atomic-quickview-sidebar';\r\nimport {QuickviewIframe} from '../quickview-iframe/quickview-iframe';\r\nimport {buildQuickviewPreviewBar} from '../quickview-preview-bar/quickview-preview-bar';\r\nimport {\r\n  getWordsHighlights,\r\n  HIGHLIGHT_PREFIX,\r\n  QuickviewWordHighlight,\r\n} from '../quickview-word-highlight/quickview-word-highlight';\r\n\r\nexport interface HighlightKeywords {\r\n  highlightNone: boolean;\r\n  keywords: {\r\n    [text: string]: {\r\n      indexIdentifier: string;\r\n      enabled: boolean;\r\n    };\r\n  };\r\n}\r\n\r\n/**\r\n * The modal opened when clicking on a quickview button.\r\n * Do not use this component directly; use `atomic-quickview` instead.\r\n *\r\n * @part quickview-modal-header-icon - The close icon of the modal.\r\n * @part quickview-modal-header-title - The title of the modal.\r\n */\r\n@Component({\r\n  tag: 'atomic-quickview-modal',\r\n  styleUrl: 'atomic-quickview-modal.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicQuickviewModal implements InitializableComponent {\r\n  @InitializeBindings() public bindings!: Bindings;\r\n  @State() public error!: Error;\r\n\r\n  @State() private highlightKeywords: HighlightKeywords = {\r\n    highlightNone: false,\r\n    keywords: {},\r\n  };\r\n  @Watch('highlightKeywords')\r\n  watchHighlightKeywords() {\r\n    this.handleHighlightsScripts();\r\n  }\r\n\r\n  @Event({eventName: 'atomic/quickview/next'}) nextQuickview?: EventEmitter;\r\n  @Event({eventName: 'atomic/quickview/previous'})\r\n  previousQuickview?: EventEmitter;\r\n\r\n  @State() private minimizeSidebar = false;\r\n  @State() private words: Record<string, QuickviewWordHighlight> = {};\r\n  private iframeRef?: HTMLIFrameElement;\r\n\r\n  @Prop({mutable: true, reflect: false}) content?: string;\r\n  @Prop({mutable: true, reflect: false}) result?: Result;\r\n  @Prop() current?: number;\r\n  @Prop() total?: number;\r\n  @Prop() sandbox?: string;\r\n  @Prop() modalCloseCallback?: () => void;\r\n\r\n  private interactiveResult?: InteractiveResult;\r\n\r\n  public componentWillRender(): void {\r\n    this.minimizeSidebar = this.bindings.store.isMobile();\r\n  }\r\n\r\n  @Method()\r\n  public async reset() {\r\n    this.highlightKeywords = {\r\n      highlightNone: false,\r\n      keywords: {},\r\n    };\r\n    this.minimizeSidebar = false;\r\n    this.iframeRef = undefined;\r\n    this.content = undefined;\r\n    this.result = undefined;\r\n    this.interactiveResult = undefined;\r\n  }\r\n\r\n  private renderHeader() {\r\n    let headerContent: VNode | null = null;\r\n    if (this.result) {\r\n      this.interactiveResult = buildInteractiveResult(this.bindings.engine, {\r\n        options: {result: this.result},\r\n      });\r\n      headerContent = (\r\n        <Fragment>\r\n          <LinkWithItemAnalytics\r\n            href={this.result?.clickUri}\r\n            onSelect={() => this.interactiveResult?.select()}\r\n            onBeginDelayedSelect={() =>\r\n              this.interactiveResult?.beginDelayedSelect()\r\n            }\r\n            onCancelPendingSelect={() =>\r\n              this.interactiveResult?.cancelPendingSelect()\r\n            }\r\n            className=\"truncate\"\r\n            part=\"quickview-modal-header-title\"\r\n          >\r\n            {this.result.title}\r\n          </LinkWithItemAnalytics>\r\n          <IconButton\r\n            partPrefix=\"quickview-modal-header\"\r\n            icon={CloseIcon}\r\n            onClick={() => this.onClose()}\r\n            ariaLabel={this.bindings.i18n.t('close')}\r\n            style=\"text-transparent\"\r\n            title={this.bindings.i18n.t('close')}\r\n          />\r\n        </Fragment>\r\n      );\r\n    }\r\n    return (\r\n      <div slot=\"header\" class=\"w-full flex justify-between items-center\">\r\n        {headerContent}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderBody() {\r\n    return (\r\n      <div slot=\"body\" class=\"grid grid-cols-[min-content_auto] h-full\">\r\n        <div\r\n          class=\"h-full overflow-y-auto\"\r\n          style={{backgroundColor: 'var(--atomic-neutral-light)'}}\r\n        >\r\n          <QuickviewSidebar\r\n            words={this.words}\r\n            i18n={this.bindings.i18n}\r\n            highlightKeywords={this.highlightKeywords}\r\n            onHighlightKeywords={(highlight) =>\r\n              (this.highlightKeywords = highlight)\r\n            }\r\n            minimized={this.minimizeSidebar}\r\n            onMinimize={(minimize) => (this.minimizeSidebar = minimize)}\r\n          />\r\n        </div>\r\n        <div class=\"overflow-auto relative\">\r\n          <QuickviewIframe\r\n            logger={this.logger}\r\n            src={this.quickviewSrc}\r\n            sandbox={this.sandbox}\r\n            uniqueIdentifier={this.quickviewUniqueIdentifier}\r\n            content={this.content}\r\n            onSetIframeRef={async (ref) => {\r\n              this.iframeRef = ref;\r\n              this.words = getWordsHighlights(\r\n                this.termsToHighlight,\r\n                this.iframeRef\r\n              );\r\n              this.handleHighlightsScripts();\r\n            }}\r\n          />\r\n          {buildQuickviewPreviewBar(\r\n            this.words,\r\n            this.highlightKeywords,\r\n            this.iframeRef\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderFooter() {\r\n    return (\r\n      <div slot=\"footer\" class=\"flex items-center gap-2\">\r\n        <Button\r\n          class=\"p-2\"\r\n          style=\"square-neutral\"\r\n          onClick={() => this.previousQuickview?.emit()}\r\n          text={this.bindings.i18n.t('quickview-previous')}\r\n        ></Button>\r\n        <p class=\"text-center\">\r\n          {this.bindings.i18n.t('showing-results-of', {\r\n            first: this.current,\r\n            total: this.total,\r\n          })}\r\n        </p>\r\n        <Button\r\n          class=\"p-2\"\r\n          style=\"square-neutral\"\r\n          onClick={() => this.nextQuickview?.emit()}\r\n          text={this.bindings.i18n.t('quickview-next')}\r\n        ></Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onClose() {\r\n    this.content = undefined;\r\n    this.result = undefined;\r\n    this.modalCloseCallback && this.modalCloseCallback();\r\n  }\r\n\r\n  private get isOpen() {\r\n    return !!this.content && !!this.result;\r\n  }\r\n\r\n  private get highlightScriptId() {\r\n    return 'CoveoDisableHighlightStyle';\r\n  }\r\n\r\n  private get logger() {\r\n    return this.bindings.engine.logger;\r\n  }\r\n\r\n  private get quickviewSrc() {\r\n    return this.bindings.engine.state.resultPreview?.contentURL;\r\n  }\r\n\r\n  private enableHighlights() {\r\n    this.removeDisableHighlightScript();\r\n  }\r\n\r\n  private enableHighlightsSpecificKeyword(identifier: string) {\r\n    this.removeDisableHighlightScript(identifier);\r\n  }\r\n\r\n  private disableHighlights() {\r\n    this.createDisableHighlightScript();\r\n  }\r\n\r\n  private disableHighlightsSpecificKeyword(identifier: string) {\r\n    this.createDisableHighlightScript(identifier);\r\n  }\r\n\r\n  private removeDisableHighlightScript(identifier?: string) {\r\n    const doc = this.iframeRef?.contentWindow?.document;\r\n    if (!doc) {\r\n      return;\r\n    }\r\n    doc\r\n      .getElementById(\r\n        `${this.highlightScriptId}${identifier ? `:${identifier}` : ''}`\r\n      )\r\n      ?.remove();\r\n  }\r\n\r\n  private createDisableHighlightScript(identifier?: string) {\r\n    const doc = this.iframeRef?.contentWindow?.document;\r\n    if (!doc) {\r\n      return;\r\n    }\r\n\r\n    const head = doc.head;\r\n    const scriptId = `${this.highlightScriptId}${\r\n      identifier ? `:${identifier}` : ''\r\n    }`;\r\n    const style =\r\n      doc.getElementById(scriptId) || this.bindings.createStyleElement();\r\n    style.setAttribute('id', scriptId);\r\n    head.appendChild(style);\r\n    style.appendChild(\r\n      doc.createTextNode(`[id^=\"${HIGHLIGHT_PREFIX}${\r\n        identifier ? `:${identifier}` : ''\r\n      }\"] {\r\n      background-color: inherit !important;\r\n      color: inherit !important;\r\n    }`)\r\n    );\r\n  }\r\n\r\n  private get termsToHighlight() {\r\n    const flatPhrasesToHighlight: TermsToHighlight = {};\r\n\r\n    const phrasesToHighlight =\r\n      this.bindings.engine.state.search.response.phrasesToHighlight;\r\n\r\n    Object.entries(phrasesToHighlight).forEach(([phrase, keywords]) => {\r\n      flatPhrasesToHighlight[phrase] = Object.entries(keywords).flatMap(\r\n        ([keywordEntry, keywordStemming]) => {\r\n          return [keywordEntry, ...keywordStemming];\r\n        }\r\n      );\r\n    });\r\n\r\n    return {\r\n      ...this.bindings.engine.state.search.response.termsToHighlight,\r\n      ...flatPhrasesToHighlight,\r\n    };\r\n  }\r\n\r\n  private get requestId() {\r\n    return this.bindings.engine.state.search.requestId;\r\n  }\r\n\r\n  private get quickviewUniqueIdentifier() {\r\n    return this.result?.uniqueId + this.requestId;\r\n  }\r\n\r\n  private handleHighlightsScripts() {\r\n    if (!this.highlightKeywords.highlightNone) {\r\n      this.enableHighlights();\r\n    } else {\r\n      this.disableHighlights();\r\n    }\r\n    Object.values(this.highlightKeywords.keywords).forEach((word) => {\r\n      if (word.enabled) {\r\n        this.enableHighlightsSpecificKeyword(word.indexIdentifier);\r\n      } else {\r\n        this.disableHighlightsSpecificKeyword(word.indexIdentifier);\r\n      }\r\n    });\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <atomic-modal\r\n        fullscreen={this.bindings.store.isMobile()}\r\n        class={'atomic-quickview-modal'}\r\n        isOpen={this.isOpen}\r\n        close={() => this.onClose()}\r\n      >\r\n        {this.renderHeader()}\r\n        {this.renderBody()}\r\n        {this.renderFooter()}\r\n      </atomic-modal>\r\n    );\r\n  }\r\n}\r\n"],"version":3}