import{r as e,h as t}from"./p-00525453.js";
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r=Object.create;var n=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var o=Object.getOwnPropertyNames;var s=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty;var u=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var c=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e)((function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}));var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var d=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of o(t))!a.call(e,u)&&u!==r&&n(e,u,{get:()=>t[u],enumerable:!(s=i(t,u))||s.enumerable});return e};var h=(e,t,i)=>(i=e!=null?r(s(e)):{},d(t||!e||!e.__esModule?n(i,"default",{value:e,enumerable:!0}):i,e));var f=(e,t,r)=>u(e,typeof t!="symbol"?t+"":t,r);var v=l(((e,t)=>{t.exports=fetch}));var p=l((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}e.getSanitizedOptions=n}));var m=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){var t=Math.random()*e;return Math.round(t)}e.fullJitter=t}));var y=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){return e}e.noJitter=t}));var g=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=m(),r=y();function n(e){switch(e.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}));var w=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=g(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var e=t.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}));var b=l((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=w(),o=function(e){t(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(i.Delay);e.SkipFirstDelay=o}));var S=l((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=w(),n=function(e){t(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(r.Delay);e.AlwaysDelay=n}));var k=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=S();function n(e,t){var r=i(e);return r.setAttemptNumber(t),r}e.DelayFactory=n;function i(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}}));var O=l((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=p(),i=k();function o(e,i){return i===void 0&&(i={}),t(this,void 0,void 0,(function(){var t,o;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),o=new s(e,t),[4,o.execute()];case 1:return[2,r.sent()]}}))}))}e.backOff=o;var s=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return e=r.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(t=r.sent(),!t||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=i.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return t.sent(),[2]}}))}))},e}()}));var I=l(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=i(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){let t=n.indexOf(e);return t<0?void 0:t}t.exports=r}));var j=l(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=i(n[e])}return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){if(e>=0&&e<64)return n[e]}t.exports=r}));var A=l(((e,t)=>{var r=I(),n=j();t.exports={atob:r,btoa:n}}));var E=l(((e,t)=>{var r=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}));var D=l(((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}));var U=l(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,(function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",s="hour",a="day",u="week",c="month",l="quarter",d="year",h="date",f="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},g={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),o=r-i<0,s=t.clone().add(n+(o?-1:1),c);return+(-(n+(r-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:a,D:h,h:s,m:o,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},w="en",b={};b[w]=m;var S="$isDayjsObject",k=function(e){return e instanceof A||!(!e||!e[S])},O=function e(t,r,n){var i;if(!t)return w;if(typeof t=="string"){var o=t.toLowerCase();b[o]&&(i=o),r&&(b[o]=r,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;b[a]=t,i=a}return!n&&i&&(w=i),i||!n&&w},I=function(e,t){if(k(e))return e.clone();var r=typeof t=="object"?t:{};return r.date=e,r.args=arguments,new A(r)},j=g;j.l=O,j.i=k,j.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function m(e){this.$L=O(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(t===null)return new Date(NaN);if(j.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var n=t.match(v);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return j},y.isValid=function(){return this.$d.toString()!==f},y.isSame=function(e,t){var r=I(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return I(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<I(e)},y.$g=function(e,t,r){return j.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!j.u(t)||t,l=j.p(e),f=function(e,t){var i=j.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(a)},v=function(e,t){return j.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},p=this.$W,m=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case d:return n?f(1,0):f(31,11);case c:return n?f(1,m):f(0,m+1);case u:var w=this.$locale().weekStart||0,b=(p<w?p+7:p)-w;return f(n?y-b:y+(6-b),m);case a:case h:return v(g+"Hours",0);case s:return v(g+"Minutes",1);case o:return v(g+"Seconds",2);case i:return v(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,u=j.p(e),l="set"+(this.$u?"UTC":""),f=(r={},r[a]=l+"Date",r[h]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[s]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],v=u===a?this.$D+(t-this.$W):t;if(u===c||u===d){var p=this.clone().set(h,1);p.$d[f](v),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](v);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[j.p(e)]()},y.add=function(n,l){var h,f=this;n=Number(n);var v=j.p(l),p=function(e){var t=I(f);return j.w(t.date(t.date()+Math.round(e*n)),f)};if(v===c)return this.set(c,this.$M+n);if(v===d)return this.set(d,this.$y+n);if(v===a)return p(1);if(v===u)return p(7);var m=(h={},h[o]=t,h[s]=r,h[i]=e,h)[v]||1,y=this.$d.getTime()+n*m;return j.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=j.z(this),o=this.$H,s=this.$m,a=this.$M,u=r.weekdays,c=r.months,l=r.meridiem,d=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].slice(0,o)},h=function(e){return j.s(o%12||12,e,"0")},v=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(p,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return j.s(t.$y,4,"0");case"M":return a+1;case"MM":return j.s(a+1,2,"0");case"MMM":return d(r.monthsShort,a,c,3);case"MMMM":return d(c,a);case"D":return t.$D;case"DD":return j.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(o);case"HH":return j.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return v(o,s,!0);case"A":return v(o,s,!1);case"m":return String(s);case"mm":return j.s(s,2,"0");case"s":return String(t.$s);case"ss":return j.s(t.$s,2,"0");case"SSS":return j.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,h,f){var v,p=this,m=j.p(h),y=I(n),g=(y.utcOffset()-this.utcOffset())*t,w=this-y,b=function(){return j.m(p,y)};switch(m){case d:v=b()/12;break;case c:v=b();break;case l:v=b()/3;break;case u:v=(w-g)/6048e5;break;case a:v=(w-g)/864e5;break;case s:v=w/r;break;case o:v=w/t;break;case i:v=w/e;break;default:v=w}return f?v:j.a(v)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=O(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return j.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),E=A.prototype;return I.prototype=E,[["$ms",n],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",d],["$D",h]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,A,I),e.$i=!0),I},I.locale=O,I.isDayjs=k,I.unix=function(e){return I(1e3*e)},I.en=b[w],I.Ls=b,I.p={},I}))}));var R=l(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var o,s=function(e,r,n){n===void 0&&(n={});var i=new Date(e),o=function(e,r){r===void 0&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,o=t[i];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=o),o}(r,n);return o.formatToParts(i)},a=function(t,r){for(var n=s(t,r),o=[],a=0;a<n.length;a+=1){var u=n[a],c=u.type,l=u.value,d=e[c];d>=0&&(o[d]=parseInt(l,10))}var h=o[3],f=h===24?0:h,v=o[0]+"-"+o[1]+"-"+o[2]+" "+f+":"+o[4]+":"+o[5]+":000",p=+t;return(i.utc(v).valueOf()-(p-=p%1e3))/6e4},u=n.prototype;u.tz=function(e,t){e===void 0&&(e=o);var r=this.utcOffset(),n=this.toDate(),s=n.toLocaleString("en-US",{timeZone:e}),a=Math.round((n-new Date(s))/1e3/60),u=i(s,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-a,!0);if(t){var c=u.utcOffset();u=u.add(r-c,"minute")}return u.$x.$timezone=e,u},u.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=s(this.valueOf(),t,{timeZoneName:e}).find((function(e){return e.type.toLowerCase()==="timezonename"}));return r&&r.value};var c=u.startOf;u.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,s=r||t||o,u=a(+i(),s);if(typeof e!="string")return i(e).tz(s);var c=function(e,t,r){var n=e-60*t*1e3,i=a(n,r);if(t===i)return[n,t];var o=a(n-=60*(i-t)*1e3,r);return i===o?[n,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}(i.utc(e,n).valueOf(),u,s),l=c[0],d=c[1],h=i(l).utcOffset(d);return h.$x.$timezone=s,h},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){o=e}}}))}));var C=l(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,o){var s=i.prototype;o.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},s.utc=function(t){var r=o(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},s.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var u=s.init;s.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=s.utcOffset;s.utcOffset=function(n,i){var o=this.$utils().u;if(o(n))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if(typeof n=="string"&&(n=function(e){e===void 0&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],o=i[0],s=60*+i[1]+ +i[2];return s===0?0:o==="+"?s:-s}(n),n===null))return this;var s=Math.abs(n)<=16?60*n:n,a=this;if(i)return a.$offset=s,a.$u=n===0,a;if(n!==0){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(s+u,e)).$offset=s,a.$x.$localOffset=u}else a=this.utc();return a};var l=s.format;s.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},s.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var d=s.toDate;s.toDate=function(e){return e==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=s.diff;s.diff=function(e,t,r){if(e&&this.$u===e.$u)return h.call(this,e,t,r);var n=this.local(),i=o(e).local();return h.call(n,i,t,r)}}}))}));var T=l(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=n;function n(e,t,n){var i=n&&n.stringify||r,o=1;if(typeof e=="object"&&e!==null){var s=t.length+o;if(s===1)return e;var a=new Array(s);a[0]=i(e);for(var u=1;u<s;u++)a[u]=i(t[u]);return a.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",d=1-o,h=-1,f=e&&e.length||0,v=0;v<f;){if(e.charCodeAt(v)===37&&v+1<f){switch(h=h>-1?h:0,e.charCodeAt(v+1)){case 100:case 102:if(d>=c||t[d]==null)break;h<v&&(l+=e.slice(h,v)),l+=Number(t[d]),h=v+2,v++;break;case 105:if(d>=c||t[d]==null)break;h<v&&(l+=e.slice(h,v)),l+=Math.floor(Number(t[d])),h=v+2,v++;break;case 79:case 111:case 106:if(d>=c||t[d]===void 0)break;h<v&&(l+=e.slice(h,v));var p=typeof t[d];if(p==="string"){l+="'"+t[d]+"'",h=v+2,v++;break}if(p==="function"){l+=t[d].name||"<anonymous>",h=v+2,v++;break}l+=i(t[d]),h=v+2,v++;break;case 115:if(d>=c)break;h<v&&(l+=e.slice(h,v)),l+=String(t[d]),h=v+2,v++;break;case 37:h<v&&(l+=e.slice(h,v)),l+="%",h=v+2,v++,d--;break}++d}++v}return h===-1?e:(h<f&&(l+=e.slice(h)),l)}}));var _=l(((e,t)=>{var r=T();t.exports=h;var n=_().console||{},i={mapHttpRequest:j,mapHttpResponse:j,wrapRequestSerializer:A,wrapResponseSerializer:A,wrapErrorSerializer:A,req:j,res:j,err:O,errWithCause:O};function o(e,t){return e==="silent"?1/0:t.levels.values[e]}var s=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),u={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[a]};t[a]=r}function l(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[u[e]||"log"]||E})),e[s]=i}function d(e,t){return Array.isArray(e)?e.filter((function(e){return e!=="!stdSerializers.err"})):e===!0?Object.keys(t):!1}function h(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},s=d(e.browser.serialize,i),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let u=Object.keys(e.customLevels||{}),h=["error","fatal","warn","info","debug","trace"].concat(u);typeof r=="function"&&h.forEach((function(e){r[e]=r})),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let v=e.level||"info",p=Object.create(r);p.log||(p.log=E),l(p,h,r),c({},p),Object.defineProperty(p,"levelVal",{get:g}),Object.defineProperty(p,"level",{get:w,set:S});let y={transmit:t,serialize:s,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:h,timestamp:I(e)};p.levels=f(e),p.level=v,p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=E,p.serializers=i,p._serialize=s,p._stdErrSerialize=a,p.child=O,t&&(p._logEvent=k());function g(){return o(this.level,this)}function w(){return this._level}function S(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,m(this,y,p,"error"),m(this,y,p,"fatal"),m(this,y,p,"warn"),m(this,y,p,"info"),m(this,y,p,"debug"),m(this,y,p,"trace"),u.forEach((e=>{m(this,y,p,e)}))}function O(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},s&&r.serializers&&(n.serializers=r.serializers);let o=n.serializers;if(s&&o){var a=Object.assign({},i,o),u=e.browser.serialize===!0?Object.keys(a):s;delete r.serializers,b([r],u,a,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,a&&(this.serializers=a,this._serialize=u),t&&(this._logEvent=k([].concat(e._logEvent.bindings,r)))}l.prototype=this;let d=new l(this);return c(this,d),d.level=this.level,d}return p}function f(e){let t=e.customLevels||{},r=Object.assign({},h.levels.values,t),n=Object.assign({},h.levels.labels,v(t));return{values:r,labels:n}}function v(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}h.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};h.stdSerializers=i;h.stdTimeFunctions=Object.assign({},{nullTime:D,epochTime:U,unixTime:R,isoTime:C});function p(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[a];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function m(e,t,r,n){if(Object.defineProperty(e,n,{value:o(e.level,r)>o(n,r)?E:r[s][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===E)return;e[n]=g(e,t,r,n);let i=p(e);i.length!==0&&(e[n]=y(i,e[n]))}function y(e,t){return function(){return t.apply(this,[...e,...arguments])}}function g(e,t,r,i){return function(s){return function(){let a=t.timestamp(),u=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<u.length;l++)u[l]=arguments[l];if(t.serialize&&!t.asObject&&b(u,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?s.call(c,w(this,i,u,a,t.formatters)):s.apply(c,u),t.transmit){let n=t.transmit.level||e._level,s=r.levels.values[n],c=r.levels.values[i];if(c<s)return;S(this,{ts:a,methodLevel:i,methodValue:c,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:o(e._level,r)},u)}}}(e[s][i])}function w(e,t,n,i,o={}){let{level:s=(()=>e.levels.values[t]),log:a=(e=>e)}=o;e._serialize&&b(n,e._serialize,e.serializers,e._stdErrSerialize);let u=n.slice(),c=u[0],l={};i&&(l.time=i),l.level=s(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof u[0]=="object";)Object.assign(l,u.shift());c=u.length?r(u.shift(),u):void 0}else typeof c=="string"&&(c=r(u.shift(),u));return c!==void 0&&(l.msg=c),a(l)}function b(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=h.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function S(e,t,r){let n=t.send,i=t.ts,o=t.methodLevel,s=t.methodValue,a=t.val,u=e._logEvent.bindings;b(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return u.indexOf(e)===-1})),e._logEvent.level.label=o,e._logEvent.level.value=s,n(o,e._logEvent,a),e._logEvent=k(u)}function k(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function O(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function I(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?D:U}function j(){return{}}function A(e){return e}function E(){}function D(){return!1}function U(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function _(){function e(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=h;t.exports.pino=h}));var x=()=>global.crypto,$=()=>{typeof window<"u"||(x()||(global.crypto=c("crypto")),!x().getRandomValues&&x().webcrypto&&(global.crypto.getRandomValues=x().webcrypto.getRandomValues.bind(x().webcrypto)))};function q(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join(`\n\t`)}\n  \n  ${t}\n  `;return new M(r)}var M=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},P=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw q(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},F=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&z(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function N(e){return e===void 0}function L(e){return e===null}function z(e){return N(e)||L(e)}var H=class{constructor(e={}){this.config=e,this.value=new F(e)}validate(e){let t=this.value.validate(e);return t||(V(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function V(e){return N(e)||B(e)}function B(e){return typeof e=="number"&&!isNaN(e)}var Q=class{constructor(e={}){this.value=new F(e)}validate(e){let t=this.value.validate(e);return t||(G(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function G(e){return N(e)||Y(e)}function Y(e){return typeof e=="boolean"}var J=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,W=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new F(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,o=this.value.validate(e);return o||(N(e)?null:K(e)?!t&&!e.length?"value is an empty string.":r&&!J.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function K(e){return Object.prototype.toString.call(e)==="[object String]"}var Z=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(N(e))return this.config.options.required?"value is required and is currently undefined":null;if(!X(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&z(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],o=n.validate(i);o!==null&&(t+=" "+o)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function X(e){return e!==void 0&&typeof e=="object"}var ee=class{constructor(e={}){this.config=e,this.value=new F(this.config)}validate(e){if(!z(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(z(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let t="";return e.forEach((r=>{this.config.each.required&&z(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);n!==null&&(t+=" "+n)})),t===""?null:t}return null}validatePrimitiveValue(e,t){return Y(e)||K(e)||B(e)||X(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function te(e){return Array.isArray(e)}var re=class{constructor(e){this.config=e,this.value=new F(e)}validate(e){let t=this.value.validate(e);return t!==null?t:N(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var ne=e=>e;function ie(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function oe(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:ie(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:ie(),extendedResults:{}}}function se(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...o}=e;return o}var ae=e=>{let{response:t}=e;return t.body?ue(e):ce(t)},ue=e=>de(e)?he(e):le(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},ce=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function le(e){return e.body.statusCode!==void 0}function de(e){return e.body.exception!==void 0}var he=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var fe=h(v()),ve=h(O());var pe=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},me=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};h(A());var ye=new Set(["1",1,"yes",!0]);function ge(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>ye.has(e)))}function we(e){let t={};for(let[r,n]of e)t[r]=n;return t}function be(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Se(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function ke(e){return typeof e!="object"||!e?!1:Object.values(e).every(Oe)}function Oe(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Ie(e){return e===429}var je=class e{static async call(t){let r=Re(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:o,...s}=i,a=async()=>{let e=await(0,fe.default)(o,s);if(Ie(e.status))throw e;return e};try{let e=await(0,ve.backOff)(a,{retry:e=>{let t=e&&Ie(e.status);return t&&n.info("Platform retrying request"),t}});if(e.status===419)throw n.info("Platform renewing token"),new pe;if(e.status===404)throw new me(o,e.status);return n.info({response:e,requestInfo:i},"Platform response"),e}catch(e){return e.message==="Failed to fetch"?new me(o):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:o}=t,{signal:s,...a}=e,u=be(a);try{let t=await n(e,r,o);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return u}};function Ae(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function Ee(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,o=`${n}/rest/search/v2`,s=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:o,admin:s}}function De(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:Ae("platform",e)}function Ue(e){return Ae("analytics",e)}function Re(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:o,signal:s}=e,a=e.method==="POST"||e.method==="PUT",u=Ce(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${o}`,...e.headers},...a&&{body:u},signal:s}}function Ce(e,t){return t==="application/x-www-form-urlencoded"?ke(e)?Se(e):"":JSON.stringify(e)}function Te(){if(typeof window>"u"){let{AbortController:e}=E();return new e}return typeof AbortController>"u"?null:new AbortController}var _e=class{constructor(){this.currentAbortController=null}async enqueue(e,t){let r=this.currentAbortController,n=this.currentAbortController=Te();r&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),r.abort());try{return await e(n?.signal??null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var xe=class{constructor(e){this._params={};this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},$e=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),qe=(e,t)=>{let r=Me(e);return r&&r.organizationId===t?r:null},Me=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};function Pe(e){return((e.headers.get("content-type")||"").split(";").find((e=>e.indexOf("charset=")!==-1))||"").split("=")[1]||"UTF-8"}var Fe=(e,t,r,n)=>{let i=new xe(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}};var Ne=async(e,t)=>{let r=await je.call({...Fe(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:se(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=Pe(r),i=await r.arrayBuffer(),o=new TextDecoder(n).decode(i);return Le(o)?{success:o}:{error:ae({response:r,body:o})}};function Le(e){return typeof e=="string"}function ze(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function He(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Ve(e,t){if(t&&e.name==="AbortError")return{error:He(e)};if(e instanceof me)return{error:ze(e)};throw e}var Be=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new _e,mainSearch:new _e,facetValues:new _e,foldingCollection:new _e,instantResults:new _e}}async plan(e){let t=await je.call({...Fe(e,"POST","application/json","/plan"),requestParams:se(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return Ve(t);let r=await t.json();return We(r)?{success:r}:{error:ae({response:t,body:r})}}async querySuggest(e){let t=await je.call({...Fe(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:se(e),...this.options});if(t instanceof Error)return Ve(t);let r=await t.json(),n={response:t,body:r};return Je(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:ae(n)}}async search(e,t){let r=t?.origin??"unknown",n=await this.apiCallsQueues[r].enqueue((r=>je.call({...Fe(e,"POST","application/json",""),requestParams:se(e),requestMetadata:{method:"search",origin:t?.origin},...this.options,signal:r??void 0})),{logger:this.options.logger,warnOnAbort:!t?.disableAbortWarning});if(n instanceof Error)return Ve(n,t?.disableAbortWarning);let i=await n.json(),o={response:n,body:i};return Ge(i)?(o.body=Ye(i),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:ae(o)}}async facetSearch(e){let t=await je.call({...Fe(e,"POST","application/json","/facet"),requestParams:se(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await je.call({...Fe(e,"POST","application/json",""),requestParams:se(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ge(r)?{success:r}:{error:ae({response:t,body:r})}}async html(e){return Ne(e,{...this.options})}async productRecommendations(e){let t=await je.call({...Fe(e,"POST","application/json",""),requestParams:se(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ge(r)?{success:r}:{error:ae({response:t,body:r})}}async fieldDescriptions(e){let t=await je.call({...Fe(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ke(r)?{success:r}:{error:ae({response:t,body:r})}}};var Qe=e=>e.error!==void 0;function Ge(e){return e.results!==void 0}function Ye(e){let t=ie();return z(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function Je(e){return e.completions!==void 0}function We(e){return e.preprocessingOutput!==void 0}function Ke(e){return e.fields!==void 0}var Ze=e=>e,Xe=e=>e,et=e=>e;function tt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rt=typeof Symbol=="function"&&Symbol.observable||"@@observable",nt=rt,it=()=>Math.random().toString(36).substring(7).split("").join("."),ot={INIT:`@@redux/INIT${it()}`,REPLACE:`@@redux/REPLACE${it()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${it()}`},st=ot;function at(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ut(e,t,r){if(typeof e!="function")throw new Error(tt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(tt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(tt(1));return r(ut)(e,t)}let n=e,i=t,o=new Map,s=o,a=0,u=!1;function c(){s===o&&(s=new Map,o.forEach(((e,t)=>{s.set(t,e)})))}function l(){if(u)throw new Error(tt(3));return i}function d(e){if(typeof e!="function")throw new Error(tt(4));if(u)throw new Error(tt(5));let t=!0;c();let r=a++;return s.set(r,e),function(){if(t){if(u)throw new Error(tt(6));t=!1,c(),s.delete(r),o=null}}}function h(e){if(!at(e))throw new Error(tt(7));if(typeof e.type>"u")throw new Error(tt(8));if(typeof e.type!="string")throw new Error(tt(17));if(u)throw new Error(tt(9));try{u=!0,i=n(i,e)}finally{u=!1}return(o=s).forEach((e=>{e()})),e}function f(e){if(typeof e!="function")throw new Error(tt(10));n=e,h({type:st.REPLACE})}function v(){let e=d;return{subscribe(t){if(typeof t!="object"||t===null)throw new Error(tt(11));function r(){let e=t;e.next&&e.next(l())}return r(),{unsubscribe:e(r)}},[nt](){return this}}}return h({type:st.INIT}),{dispatch:h,subscribe:d,getState:l,replaceReducer:f,[nt]:v}}function ct(e){Object.keys(e).forEach((t=>{let r=e[t];if(typeof r(void 0,{type:st.INIT})>"u")throw new Error(tt(12));if(typeof r(void 0,{type:st.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(tt(13))}))}function lt(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}let n=Object.keys(r),i;try{ct(r)}catch(e){i=e}return function(e={},t){if(i)throw i;let o=!1,s={};for(let i=0;i<n.length;i++){let a=n[i],u=r[a],c=e[a],l=u(c,t);if(typeof l>"u"){throw new Error(tt(14))}s[a]=l,o=o||l!==c}return o=o||n.length!==Object.keys(e).length,o?s:e}}function dt(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function ht(...e){return t=>(r,n)=>{let i=t(r,n),o=()=>{throw new Error(tt(15))},s={getState:i.getState,dispatch:(e,...t)=>o(e,...t)},a=e.map((e=>e(s)));return o=dt(...a)(i.dispatch),{...i,dispatch:o}}}function ft(e){return at(e)&&"type"in e&&typeof e.type=="string"}var vt=Symbol.for("immer-nothing"),pt=Symbol.for("immer-draftable"),mt=Symbol.for("immer-state");function yt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gt=Object.getPrototypeOf;function wt(e){return!!e&&!!e[mt]}function bt(e){return e?kt(e)||Array.isArray(e)||!!e[pt]||!!e.constructor?.[pt]||Dt(e)||Ut(e):!1}var St=Object.prototype.constructor.toString();function kt(e){if(!e||typeof e!="object")return!1;let t=gt(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===St}function Ot(e,t){It(e)===0?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function It(e){let t=e[mt];return t?t.type_:Array.isArray(e)?1:Dt(e)?2:Ut(e)?3:0}function jt(e,t){return It(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function At(e,t,r){let n=It(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Et(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dt(e){return e instanceof Map}function Ut(e){return e instanceof Set}function Rt(e){return e.copy_||e.base_}function Ct(e,t){if(Dt(e))return new Map(e);if(Ut(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&kt(e))return gt(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[mt];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let i=n[t],o=r[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(gt(e),r)}function Tt(e,t=!1){return xt(e)||wt(e)||!bt(e)||(It(e)>1&&(e.set=e.add=e.clear=e.delete=_t),Object.freeze(e),t&&Ot(e,((e,t)=>Tt(t,!0)))),e}function _t(){yt(2)}function xt(e){return Object.isFrozen(e)}var $t={};function qt(e){let t=$t[e];return t||yt(0,e),t}var Mt;function Pt(){return Mt}function Ft(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Nt(e,t){t&&(qt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Lt(e){zt(e),e.drafts_.forEach(Vt),e.drafts_=null}function zt(e){e===Mt&&(Mt=e.parent_)}function Ht(e){return Mt=Ft(Mt,e)}function Vt(e){let t=e[mt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Bt(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[mt].modified_&&(Lt(t),yt(4)),bt(e)&&(e=Qt(t,e),t.parent_||Yt(t,e)),t.patches_&&qt("Patches").generateReplacementPatches_(r[mt].base_,e,t.patches_,t.inversePatches_)):e=Qt(t,r,[]),Lt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vt?e:void 0}function Qt(e,t,r){if(xt(t))return t;let n=t[mt];if(!n)return Ot(t,((i,o)=>Gt(e,n,t,i,o,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return Yt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,i=t,o=!1;n.type_===3&&(i=new Set(t),t.clear(),o=!0),Ot(i,((i,s)=>Gt(e,n,t,i,s,r,o))),Yt(e,t,!1),r&&e.patches_&&qt("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Gt(e,t,r,n,i,o,s){if(wt(i)){let s=o&&t&&t.type_!==3&&!jt(t.assigned_,n)?o.concat(n):void 0,a=Qt(e,i,s);if(At(r,n,a),wt(a))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(bt(i)&&!xt(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Qt(e,i),(!t||!t.scope_.parent_)&&Yt(e,i)}}function Yt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Tt(t,r)}function Jt(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Pt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Wt;r&&(i=[n],o=Kt);let{revoke:s,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=s,a}var Wt={get(e,t){if(t===mt)return e;let r=Rt(e);if(!jt(r,t))return Xt(e,r,t);let n=r[t];return e.finalized_||!bt(n)?n:n===Zt(e.base_,t)?(rr(e),e.copy_[t]=ir(n,e)):n},has(e,t){return t in Rt(e)},ownKeys(e){return Reflect.ownKeys(Rt(e))},set(e,t,r){let n=er(Rt(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=Zt(Rt(e),t),i=n?.[mt];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Et(r,n)&&(r!==void 0||jt(e.base_,t)))return!0;rr(e),tr(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Zt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,rr(e),tr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Rt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){yt(11)},getPrototypeOf(e){return gt(e.base_)},setPrototypeOf(){yt(12)}},Kt={};Ot(Wt,((e,t)=>{Kt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}));Kt.deleteProperty=function(e,t){return Kt.set.call(this,e,t,void 0)};Kt.set=function(e,t,r){return Wt.set.call(this,e[0],t,r,e[0])};function Zt(e,t){let r=e[mt];return(r?Rt(r):e)[t]}function Xt(e,t,r){let n=er(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function er(e,t){if(!(t in e))return;let r=gt(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=gt(r)}}function tr(e){e.modified_||(e.modified_=!0,e.parent_&&tr(e.parent_))}function rr(e){e.copy_||(e.copy_=Ct(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}typeof t!="function"&&yt(6),r!==void 0&&typeof r!="function"&&yt(7);let n;if(bt(e)){let i=Ht(this),o=ir(e,void 0),s=!0;try{n=t(o),s=!1}finally{s?Lt(i):zt(i)}return Nt(i,r),Bt(n,i)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===vt&&(n=void 0),this.autoFreeze_&&Tt(n,!0),r){let t=[],i=[];qt("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}else yt(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bt(e)||yt(8),wt(e)&&(e=or(e));let t=Ht(this),r=ir(e,void 0);return r[mt].isManual_=!0,zt(t),r}finishDraft(e,t){let r=e&&e[mt];(!r||!r.isManual_)&&yt(9);let{scope_:n}=r;return Nt(n,t),Bt(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=qt("Patches").applyPatches_;return wt(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function ir(e,t){let r=Dt(e)?qt("MapSet").proxyMap_(e,t):Ut(e)?qt("MapSet").proxySet_(e,t):Jt(e,t);return(t?t.scope_:Pt()).drafts_.push(r),r}function or(e){return wt(e)||yt(10,e),sr(e)}function sr(e){if(!bt(e)||xt(e))return e;let t=e[mt],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ct(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ct(e,!0);return Ot(r,((e,t)=>{At(r,e,sr(t))})),t&&(t.finalized_=!1),r}var ar=new nr,ur=ar.produce;ar.produceWithPatches.bind(ar);ar.setAutoFreeze.bind(ar);ar.setUseStrictShallowCopy.bind(ar);ar.applyPatches.bind(ar);ar.createDraft.bind(ar);ar.finishDraft.bind(ar);function cr(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function lr(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function dr(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>typeof e=="function"))){let r=e.map((e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}var hr=e=>Array.isArray(e)?e:[e];function fr(e){let t=Array.isArray(e[0])?e[0]:e;return dr(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function vr(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var pr=class{constructor(e){this.value=e}deref(){return this.value}},mr=typeof WeakRef<"u"?WeakRef:pr,yr=0,gr=1;function wr(){return{s:yr,v:void 0,o:null,p:null}}function br(e,t={}){let r=wr(),{resultEqualityCheck:n}=t,i,o=0;function s(){let t=r,{length:s}=arguments;for(let e=0,r=s;e<r;e++){let r=arguments[e];if(typeof r=="function"||typeof r=="object"&&r!==null){let e=t.o;e===null&&(t.o=e=new WeakMap);let n=e.get(r);n===void 0?(t=wr(),e.set(r,t)):t=n}else{let e=t.p;e===null&&(t.p=e=new Map);let n=e.get(r);n===void 0?(t=wr(),e.set(r,t)):t=n}}let a=t,u;if(t.s===gr?u=t.v:(u=e.apply(null,arguments),o++),a.s=gr,n){let e=i?.deref?.()??i;e!=null&&n(e,u)&&(u=e,o!==0&&o--),i=typeof u=="object"&&u!==null||typeof u=="function"?new mr(u):u}return a.v=u,u}return s.clearCache=()=>{r=wr(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Sr(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t=0,n=0,i,o={},s=e.pop();typeof s=="object"&&(o=s,s=e.pop()),cr(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);let a={...r,...o},{memoize:u,memoizeOptions:c=[],argsMemoize:l=br,argsMemoizeOptions:d=[],devModeChecks:h={}}=a,f=hr(c),v=hr(d),p=fr(e),m=u((function(){return t++,s.apply(null,arguments)}),...f),y=l((function(){n++;let e=vr(p,arguments);return i=m.apply(null,e),i}),...v);return Object.assign(y,{resultFunc:s,memoizedResultFunc:m,dependencies:p,dependencyRecomputations:()=>n,resetDependencyRecomputations:()=>{n=0},lastResult:()=>i,recomputations:()=>t,resetRecomputations:()=>{t=0},memoize:u,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var kr=Sr(br),Or=Object.assign(((e,t=kr)=>{lr(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map((t=>e[t]));return t(n,((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>Or});function Ir(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var jr=Ir(),Ar=Ir;var Er=(...e)=>{let t=Sr(...e),r=Object.assign(((...e)=>{let r=t(...e),n=(e,...t)=>r(wt(e)?or(e):e,...t);return Object.assign(n,r),n}),{withTypes:()=>r});return r};Er(br);var Dr=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dt:dt.apply(null,arguments)},Ur=e=>e&&typeof e.match=="function";function Rr(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(cn(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>ft(t)&&t.type===e,r}var Cr=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Tr(e){return bt(e)?ur(e,(()=>{})):e}function _r(e){return typeof e=="boolean"}var xr=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},o=new Cr;return t&&(_r(t)?o.push(jr):o.push(Ar(t.extraArgument))),o},$r="RTK_autoBatch";var qr=e=>t=>{setTimeout(t,e)},Mr=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qr(10),Pr=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,o=!1,s=!1,a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Mr:e.type==="callback"?e.queueNotification:qr(e.timeout),c=()=>{s=!1,o&&(o=!1,a.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){let t=()=>i&&e(),r=n.subscribe(t);return a.add(e),()=>{r(),a.delete(e)}},dispatch(e){try{return i=!e?.meta?.[$r],o=!i,o&&(s||(s=!0,u(c))),n.dispatch(e)}finally{i=!0}}})},Fr=e=>function(t){let{autoBatch:r=!0}=t??{},n=new Cr(e);return r&&n.push(Pr(typeof r=="object"?r:void 0)),n},Nr=!0;function Lr(e){let t=xr(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{},a;if(typeof r=="function")a=r;else if(at(r))a=lt(r);else throw new Error(cn(1));let u;if(typeof n=="function"){if(u=n(t),!Nr);}else u=t();let c=dt;i&&(c=Dr({trace:!Nr,...typeof i=="object"&&i}));let l=ht(...u),d=Fr(l);let h=typeof s=="function"?s(d):d();let f=c(...h);return ut(a,o,f)}function zr(e){let t={},r=[],n,i={addCase(e,r){let n=typeof e=="string"?e:e.type;if(!n)throw new Error(cn(28));if(n in t)throw new Error(cn(29));return t[n]=r,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return n=e,i}};return e(i),[t,r,n]}function Hr(e){return typeof e=="function"}function Vr(e,t){let[r,n,i]=zr(t),o;if(Hr(e))o=()=>Tr(e());else{let t=Tr(e);o=()=>t}function s(e=o(),t){let s=[r[t.type],...n.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return s.filter((e=>!!e)).length===0&&(s=[i]),s.reduce(((e,r)=>{if(r)if(wt(e)){let n=r(e,t);return n===void 0?e:n}else{if(bt(e))return ur(e,(e=>r(e,t)));{let n=r(e,t);if(n===void 0){if(e===null)return e;throw new Error(cn(9))}return n}}return e}),e)}return s.getInitialState=o,s}var Br="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Qr=(e=21)=>{let t="",r=e;for(;r--;)t+=Br[Math.random()*64|0];return t},Gr=(e,t)=>Ur(e)?e.match(t):e(t);function Yr(...e){return t=>e.some((e=>Gr(e,t)))}var Jr=["name","message","stack","code"],Wr=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},Kr=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},Zr=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Jr)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},Xr=(()=>{function e(e,t,r){let n=Rr(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),i=Rr(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=Rr(e+"/rejected",((e,t,n,i,o)=>({payload:i,error:(r&&r.serializeError||Zr)(e||"Rejected"),meta:{...o||{},arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}})));function s(e){return(s,a,u)=>{let c=r?.idGenerator?r.idGenerator(e):Qr(),l=new AbortController,d,h;function f(e){h=e,l.abort()}let v=async function(){let v;try{let o=r?.condition?.(e,{getState:a,extra:u});if(tn(o)&&(o=await o),o===!1||l.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let p=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:h||"Aborted"})},l.signal.addEventListener("abort",d)}));s(i(c,e,r?.getPendingMeta?.({requestId:c,arg:e},{getState:a,extra:u}))),v=await Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:a,extra:u,requestId:c,signal:l.signal,abort:f,rejectWithValue:(e,t)=>new Wr(e,t),fulfillWithValue:(e,t)=>new Kr(e,t)})).then((t=>{if(t instanceof Wr)throw t;return t instanceof Kr?n(t.payload,c,e,t.meta):n(t,c,e)}))])}catch(t){v=t instanceof Wr?o(null,c,e,t.payload,t.meta):o(t,c,e)}finally{d&&l.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&o.match(v)&&v.meta.condition||s(v),v}();return Object.assign(v,{abort:f,requestId:c,arg:e,unwrap(){return v.then(en)}})}}return Object.assign(s,{pending:i,rejected:o,fulfilled:n,settled:Yr(o,n),typePrefix:e})}return e.withTypes=()=>e,e})();function en(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function tn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var rn=(e,t)=>{if(typeof e!="function")throw new Error(cn(32))};var nn="listenerMiddleware";var on=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:o}=e;if(t)i=Rr(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(cn(21));return rn(o),{predicate:i,type:t,effect:o}},sn=Object.assign((e=>{let{type:t,predicate:r,effect:n}=on(e);return{id:Qr(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(cn(22))}}}),{withTypes:()=>sn});var an=Object.assign(Rr(`${nn}/add`),{withTypes:()=>an});Rr(`${nn}/removeAll`);var un=Object.assign(Rr(`${nn}/remove`),{withTypes:()=>un});function cn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ln=new W({required:!0,emptyAllowed:!1}),dn=new W({required:!1,emptyAllowed:!1}),hn=new W({required:!0,emptyAllowed:!0});new W({required:!1,emptyAllowed:!0});new ee({each:ln,required:!0});var fn=new W({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),vn=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),pn=(e,t)=>{if("required"in t)return{payload:new P({value:t}).validate({value:e}).value};let r=new Z({options:{required:!0},values:t}).validate(e);if(r)throw new M(r);return{payload:e}},mn=(e,t)=>{try{return pn(e,t)}catch(t){return{payload:e,error:vn(t)}}},yn=(e,t,r,n)=>{let i=`Check the options of ${n}`;return gn(e,t,r,i,"Controller initialization error")},gn=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}};var wn="2.63.3",bn=["@coveo/atomic","@coveo/quantic"];var Sn=()=>dn,kn=()=>ln,On=Rr("configuration/updateBasicConfiguration",(e=>mn(e,{accessToken:dn,organizationId:dn,platformUrl:dn}))),In=Rr("configuration/updateSearchConfiguration",(e=>mn(e,{apiBaseUrl:dn,pipeline:new W({required:!1,emptyAllowed:!0}),searchHub:dn,timezone:dn,locale:dn,authenticationProviders:new ee({required:!1,each:ln})}))),jn={enabled:new Q({default:!0}),originContext:Sn(),originLevel2:Sn(),originLevel3:Sn(),apiBaseUrl:dn,nextApiBaseUrl:dn,runtimeEnvironment:new F,anonymous:new Q({default:!1}),deviceId:dn,userDisplayName:dn,documentLocation:dn,trackingId:dn,analyticsMode:new W({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new Z({options:{required:!1},values:bn.reduce(((e,t)=>(e[t]=fn,e)),{})})},An=Rr("configuration/updateAnalyticsConfiguration",(e=>(ge()&&(e.enabled=!1),mn(e,jn)))),En=Rr("configuration/analytics/disable"),Dn=Rr("configuration/analytics/enable"),Un=Rr("configuration/analytics/originlevel2",(e=>mn(e,{originLevel2:kn()}))),Rn=Rr("configuration/analytics/originlevel3",(e=>mn(e,{originLevel3:kn()})));function Cn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Tn(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):i(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}var _n;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(_n||(_n={}));function xn(){return typeof window<"u"}function $n(){return typeof navigator<"u"}function qn(){return typeof document<"u"}function Mn(){try{return typeof localStorage<"u"}catch{return!1}}function Pn(){try{return typeof sessionStorage<"u"}catch{return!1}}function Fn(){return $n()&&navigator.cookieEnabled}var Nn=[_n.click,_n.custom,_n.search,_n.view],Ln=(e,t)=>Nn.indexOf(e)!==-1?Object.assign({language:qn()?document.documentElement.lang:"unknown",userAgent:$n()?navigator.userAgent:"unknown"},t):t,zn=class e{static set(e,t,r){var n,i,o,s;r&&(i=new Date,i.setTime(i.getTime()+r)),s=window.location.hostname,s.indexOf(".")===-1?Hn(e,t,i):(o=s.split("."),n=o[o.length-2]+"."+o[o.length-1],Hn(e,t,i,n))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(t,0)===0)return i.substring(t.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function Hn(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Vn(){return Mn()?localStorage:Fn()?new Bn:Pn()?sessionStorage:new Gn}var Bn=class e{getItem(t){return zn.get(`${e.prefix}${t}`)}removeItem(t){zn.erase(`${e.prefix}${t}`)}setItem(t,r,n){zn.set(`${e.prefix}${t}`,r,n)}};Bn.prefix="coveo_";var Qn=class{constructor(){this.cookieStorage=new Bn}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},Gn=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Yn="__coveo.analytics.history",Jn=20,Wn=1e3*60,Kn=75,Zn=class{constructor(e){this.store=e||Vn()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Tn(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return Tn(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Yn);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Tn(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Yn);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Yn,JSON.stringify(e.slice(0,Jn)))}catch{}}clear(){try{this.store.removeItem(Yn)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Kn)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Wn:!0}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},Xn=Object.freeze({__proto__:null,HistoryStore:Zn,MAX_NUMBER_OF_HISTORY_ELEMENTS:Jn,MAX_VALUE_SIZE:Kn,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Wn,STORE_KEY:Yn,default:Zn}),ei=(e,t)=>Tn(void 0,void 0,void 0,(function*(){return e===_n.view?(yield ti(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),ti=e=>Tn(void 0,void 0,void 0,(function*(){let t=new Zn,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),ri,ni=new Uint8Array(16);function ii(){if(!ri&&(ri=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ri))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ri(ni)}var oi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function si(e){return typeof e=="string"&&oi.test(e)}var ai=[];for(let e=0;e<256;++e)ai.push((e+256).toString(16).slice(1));function ui(e,t=0){return(ai[e[t+0]]+ai[e[t+1]]+ai[e[t+2]]+ai[e[t+3]]+"-"+ai[e[t+4]]+ai[e[t+5]]+"-"+ai[e[t+6]]+ai[e[t+7]]+"-"+ai[e[t+8]]+ai[e[t+9]]+"-"+ai[e[t+10]]+ai[e[t+11]]+ai[e[t+12]]+ai[e[t+13]]+ai[e[t+14]]+ai[e[t+15]]).toLowerCase()}function ci(e){if(!si(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function li(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var di="6ba7b810-9dad-11d1-80b4-00c04fd430c8",hi="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function fi(e,t,r){function n(e,n,i,o){var s;if(typeof e=="string"&&(e=li(e)),typeof n=="string"&&(n=ci(n)),((s=n)===null||s===void 0?void 0:s.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=a[6]&15|t,a[8]=a[8]&63|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return ui(a)}try{n.name=e}catch{}return n.DNS=di,n.URL=hi,n}var vi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),pi={randomUUID:vi};function mi(e,t,r){if(pi.randomUUID&&!t&&!e)return pi.randomUUID();e=e||{};let n=e.random||(e.rng||ii)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return ui(n)}function yi(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function gi(e,t){return e<<t|e>>>32-t}function wi(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[t*64+n*4]<<24|e[t*64+n*4+1]<<16|e[t*64+n*4+2]<<8|e[t*64+n*4+3];o[t]=r}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=o[e][t];for(let e=16;e<80;++e)n[e]=gi(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],s=r[1],a=r[2],u=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),o=gi(i,5)+yi(r,s,a,u)+c+t[r]+n[e]>>>0;c=u,u=a,a=gi(s,30)>>>0,s=i,i=o}r[0]=r[0]+i>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+a>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var bi=fi("v5",80,wi),Si=bi,ki="2.30.2",Oi={pageview:"pageview",event:"event"},Ii=class e{constructor(e,t){if(!si(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let o=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return si(o)?new e(o,Number.parseInt(i)*1e3):null}};Ii.cvo_cid="cvo_cid";Ii.expirationTime=120;var ji=Object.keys;function Ai(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Ei={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Di=ji(Ei).map((e=>Ei[e])),Ui=[...Di].join("|"),Ri=new RegExp(`^(${Ui}$)`),Ci={svcAction:"svc_action",svcActionData:"svc_action_data"},Ti=e=>Ri.test(e),_i=[Ti],xi={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},$i={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},qi={action:"pa",list:"pal",listSource:"pls"},Mi={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Pi=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Fi={id:"quoteId",affiliation:"quoteAffiliation"},Ni={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Li={add:qi,bookmark_add:qi,bookmark_remove:qi,click:qi,checkout:qi,checkout_option:qi,detail:qi,impression:qi,remove:qi,refund:Object.assign(Object.assign({},qi),Mi),purchase:Object.assign(Object.assign({},qi),Mi),quickview:qi,quote:Object.assign(Object.assign({},qi),Fi),review:Object.assign(Object.assign({},qi),Ni)},zi=ji(xi).map((e=>xi[e])),Hi=ji($i).map((e=>$i[e])),Vi=ji(qi).map((e=>qi[e])),Bi=ji(Mi).map((e=>Mi[e])),Qi=ji(Ni).map((e=>Ni[e])),Gi=ji(Fi).map((e=>Fi[e])),Yi=[...zi,"custom"].join("|"),Ji=[...Hi,"custom"].join("|"),Wi="(pr[0-9]+)",Ki="(il[0-9]+pi[0-9]+)",Zi=new RegExp(`^${Wi}(${Yi})$`),Xi=new RegExp(`^(${Ki}(${Ji}))|(il[0-9]+nm)$`),eo=new RegExp(`^(${Vi.join("|")})$`),to=new RegExp(`^(${Bi.join("|")})$`),ro=new RegExp(`^${Wi}custom$`),no=new RegExp(`^${Ki}custom$`),io=new RegExp(`^(${[...Pi,...Qi,...Gi].join("|")})$`),oo=e=>Zi.test(e),so=e=>Xi.test(e),ao=e=>eo.test(e),uo=e=>to.test(e),co=e=>io.test(e),lo=[so,oo,ao,uo,co],ho=[ro,no],fo={anonymizeIp:"aip"},vo={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},po={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},mo=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],yo=Object.assign(Object.assign(Object.assign(Object.assign({},fo),vo),po),mo.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),go=Object.assign(Object.assign({},yo),Ci),wo=e=>{let t=!!e.action&&Li[e.action]||{};return ji(e).reduce(((r,n)=>{let i=t[n]||go[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},bo=ji(go).map((e=>go[e])),So=e=>bo.indexOf(e)!==-1,ko=e=>e==="custom",Oo=e=>[...lo,..._i,So,ko].some((t=>t(e))),Io=e=>ji(e).reduce(((t,r)=>{let n=jo(r);return n?Object.assign(Object.assign({},t),Ao(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),jo=e=>{let t;return[...ho].every((r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t})),t},Ao=(e,t)=>ji(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),Eo=class{constructor(e){this.opts=e}sendEvent(e,t){return Tn(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:o,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),a=this.encodeForEventType(e,s),u=new Blob([a],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(o,u)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return Tn(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let o=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:s,body:a}=o;n=s||e;try{i=JSON.parse(a)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return Tn(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return[_n.click,_n.custom,_n.search,_n.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},Do=class{sendEvent(e,t){return Tn(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return Tn(this,void 0,void 0,(function*(){return Promise.resolve()}))}},Uo=window.fetch,Ro=class{constructor(e){this.opts=e}sendEvent(e,t){return Tn(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,o=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${r}/analytics/${e}${o}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},a=Object.assign(Object.assign({},s),i?yield i(s,"analyticsFetch"):{}),{url:u}=a,c=Cn(a,["url"]),l;try{l=yield Uo(u,c)}catch(e){console.error("An error has occured when sending the event.",e);return}if(l.ok){let e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}}))}deleteHttpCookieVisitorId(){return Tn(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield Uo(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return[_n.click,_n.custom,_n.search,_n.view].indexOf(e)!==-1}getVisitorIdParam(){return Tn(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Co=class{constructor(e,t){Mn()&&Fn()?this.storage=new Qn:Mn()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Gn),this.client=new Ro(e),this.beaconClient=new Eo(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},To=class{constructor(e,t){this.storage=t||new Gn,this.client=new Ro(e)}getClientDependingOnEventType(e){return this.client}},_o=class{constructor(){this.storage=new Gn,this.client=new Do}getClientDependingOnEventType(e){return this.client}},xo="xx",$o=e=>e?.startsWith(xo)||!1,qo=`\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the "coveo.analytics/react-native" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;function Mo(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Po=["1",1,"yes",!0];function Fo(){return $n()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>Po.indexOf(e)!==-1))}var No="v15",Lo={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function zo(e=Lo.default,t=No,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var Ho="38824e1f-37f5-42d3-8372-a4b8fa9df946",Vo=class{get defaultOptions(){return{endpoint:Lo.default,isCustomEndpoint:!1,token:"",version:No,beforeSendHooks:[],afterSendHooks:[]}}get version(){return ki}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[ei,Ln].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Fo()?this.runtime=new _o:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(_n.view,{newEventType:_n.view,addClientIdParameter:!0}),this.addEventTypeMapping(_n.click,{newEventType:_n.click,addClientIdParameter:!0}),this.addEventTypeMapping(_n.custom,{newEventType:_n.custom,addClientIdParameter:!0}),this.addEventTypeMapping(_n.search,{newEventType:_n.search,addClientIdParameter:!0})}initRuntime(e){return xn()&&qn()?new Co(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(Mo()&&console.warn(qo),new To(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Tn(this,void 0,void 0,(function*(){try{return xn()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||mi()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),mi()}}))}getCurrentVisitorId(){return Tn(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Tn(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return Tn(this,void 0,void 0,(function*(){if(si(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Si(e,Si(t,Ho)))}}))}getParameters(e,...t){return Tn(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Tn(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(mi()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Fo())return null;try{let t=new URL(e).searchParams.get(Ii.cvo_cid);if(t==null)return null;let r=Ii.fromString(t);return!r||!qn()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return Tn(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:o=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Tn(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>Tn(this,void 0,void 0,(function*(){return o?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Tn(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Tn(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Tn(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?wo(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>Tn(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return Tn(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>Tn(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return Tn(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Zn).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return Tn(this,void 0,void 0,(function*(){return this.makeEvent(_n.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Cn(e,["searchQueryUid"]);return Tn(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return Tn(this,void 0,void 0,(function*(){return this.makeEvent(_n.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Cn(e,["searchQueryUid"]);return Tn(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return Tn(this,void 0,void 0,(function*(){return this.makeEvent(_n.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Cn(e,["lastSearchQueryUid"]);return Tn(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return Tn(this,void 0,void 0,(function*(){return this.makeEvent(_n.view,e)}))}sendViewEvent(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return Tn(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Tn(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every((e=>typeof e=="string")))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[_n.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=e=>typeof e<"u"&&e!==null&&e!=="";return Object.keys(e).filter((n=>this.isKeyAllowedEmpty(t,n)||r(e[n]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(Oo(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Cn(e,["custom"]),n={};t&&Ai(t)&&(n=this.lowercaseKeys(t));let i=Io(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Cn(e,["custom"]);if(t&&Ai(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Cn(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==_n.view||t==_n.click||t==_n.search||t==_n.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==_n.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Cn(e,["userId"]);return $o(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Cn(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Ai(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Ai(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return zo(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Bo;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Bo||(Bo={}));var Qo;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(Qo||(Qo={}));var Go={[Qo.triggerNotify]:"queryPipelineTriggers",[Qo.triggerExecute]:"queryPipelineTriggers",[Qo.triggerQuery]:"queryPipelineTriggers",[Qo.triggerRedirect]:"queryPipelineTriggers",[Qo.queryError]:"errors",[Qo.queryErrorBack]:"errors",[Qo.queryErrorClear]:"errors",[Qo.queryErrorRetry]:"errors",[Qo.pagerNext]:"getMoreResults",[Qo.pagerPrevious]:"getMoreResults",[Qo.pagerNumber]:"getMoreResults",[Qo.pagerResize]:"getMoreResults",[Qo.pagerScrolling]:"getMoreResults",[Qo.facetSearch]:"facet",[Qo.facetShowLess]:"facet",[Qo.facetShowMore]:"facet",[Qo.recommendation]:"recommendation",[Qo.likeSmartSnippet]:"smartSnippet",[Qo.dislikeSmartSnippet]:"smartSnippet",[Qo.expandSmartSnippet]:"smartSnippet",[Qo.collapseSmartSnippet]:"smartSnippet",[Qo.openSmartSnippetFeedbackModal]:"smartSnippet",[Qo.closeSmartSnippetFeedbackModal]:"smartSnippet",[Qo.sendSmartSnippetReason]:"smartSnippet",[Qo.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qo.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qo.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qo.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qo.clearRecentQueries]:"recentQueries",[Qo.recentResultClick]:"recentlyClickedDocuments",[Qo.clearRecentResults]:"recentlyClickedDocuments",[Qo.showLessFoldedResults]:"folding",[Qo.caseDetach]:"case",[Qo.likeGeneratedAnswer]:"generatedAnswer",[Qo.dislikeGeneratedAnswer]:"generatedAnswer",[Qo.openGeneratedAnswerSource]:"generatedAnswer",[Qo.generatedAnswerStreamEnd]:"generatedAnswer",[Qo.generatedAnswerSourceHover]:"generatedAnswer",[Qo.generatedAnswerCopyToClipboard]:"generatedAnswer",[Qo.generatedAnswerHideAnswers]:"generatedAnswer",[Qo.generatedAnswerShowAnswers]:"generatedAnswer",[Qo.generatedAnswerExpand]:"generatedAnswer",[Qo.generatedAnswerCollapse]:"generatedAnswer",[Qo.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Bo.expandToFullUI]:"interface",[Bo.openUserActions]:"User Actions",[Bo.showPrecedingSessions]:"User Actions",[Bo.showFollowingSessions]:"User Actions",[Bo.clickViewedDocument]:"User Actions",[Bo.clickPageView]:"User Actions",[Bo.createArticle]:"createArticle"},Yo=class{constructor(){this.runtime=new _o,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(_n.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(_n.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(_n.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(_n.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return ki}};function Jo(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function Wo(e){return e.map((e=>e.replace(/;/g,"")))}function Ko(e){let t=e.join(";");return t.length<=256?t:Ko(e.slice(1))}var Zo=e=>{let t=Wo(e),r=Jo(t);return Ko(r)};function Xo(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Zo(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Zo(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var es=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Fo();this.coveoAnalyticsClient=r?new Yo:new Vo(e)}disable(){this.coveoAnalyticsClient=new Yo}enable(){this.coveoAnalyticsClient=new Vo(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(Qo.interfaceLoad)}logInterfaceLoad(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(Qo.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(Qo.recommendation)}logRecommendation(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(Qo.recommendationOpen,e,t)}logRecommendationOpen(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(Qo.staticFilterClearAll,e)}logStaticFilterClearAll(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(Qo.staticFilterSelect,e)}logStaticFilterSelect(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(Qo.staticFilterDeselect,e)}logStaticFilterDeselect(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(Qo.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(Qo.interfaceChange,e)}logInterfaceChange(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(Qo.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(Qo.didyoumeanClick)}logDidYouMeanClick(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(Qo.resultsSort,e)}logResultsSort(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(Qo.searchboxSubmit)}logSearchboxSubmit(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(Qo.searchboxClear)}logSearchboxClear(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(Qo.searchboxAsYouType)}logSearchboxAsYouType(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(Qo.breadcrumbFacet,e)}logBreadcrumbFacet(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(Qo.breadcrumbResetAll)}logBreadcrumbResetAll(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(Qo.documentQuickview,e,t)}logDocumentQuickview(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(Qo.documentOpen,e,t)}logDocumentOpen(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(Qo.omniboxAnalytics,Xo(e))}logOmniboxAnalytics(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(Qo.omniboxFromLink,Xo(e))}logOmniboxFromLink(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(Qo.searchFromLink)}logSearchFromLink(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(Qo.triggerNotify,e)}logTriggerNotify(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(Qo.triggerExecute,e)}logTriggerExecute(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(Qo.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(Qo.undoTriggerQuery,e)}logUndoTriggerQuery(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(Qo.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(Qo.pagerResize,e)}logPagerResize(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(Qo.pagerNumber,e)}logPagerNumber(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(Qo.pagerNext,e)}logPagerNext(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(Qo.pagerPrevious,e)}logPagerPrevious(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(Qo.pagerScrolling)}logPagerScrolling(){return Tn(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(Qo.facetClearAll,e)}logFacetClearAll(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(Qo.facetSearch,e)}logFacetSearch(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(Qo.facetSelect,e)}logFacetSelect(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(Qo.facetDeselect,e)}logFacetDeselect(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(Qo.facetExclude,e)}logFacetExclude(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(Qo.facetUnexclude,e)}logFacetUnexclude(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(Qo.facetSelectAll,e)}logFacetSelectAll(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(Qo.facetUpdateSort,e)}logFacetUpdateSort(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(Qo.facetShowMore,e)}logFacetShowMore(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(Qo.facetShowLess,e)}logFacetShowLess(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(Qo.queryError,e)}logQueryError(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return Tn(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Qo.queryErrorBack);return{description:e.description,log:()=>Tn(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Qo.queryErrorBack)}))}}))}logQueryErrorBack(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return Tn(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Qo.queryErrorRetry);return{description:e.description,log:()=>Tn(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Qo.queryErrorRetry)}))}}))}logQueryErrorRetry(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return Tn(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Qo.queryErrorClear);return{description:e.description,log:()=>Tn(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Qo.queryErrorClear)}))}}))}logQueryErrorClear(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(Qo.likeSmartSnippet)}logLikeSmartSnippet(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(Qo.dislikeSmartSnippet)}logDislikeSmartSnippet(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(Qo.expandSmartSnippet)}logExpandSmartSnippet(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(Qo.collapseSmartSnippet)}logCollapseSmartSnippet(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(Qo.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(Qo.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(Qo.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(Qo.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(Qo.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(Qo.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(Qo.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(Qo.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(Qo.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(Qo.copyToClipboard,e,t)}logCopyToClipboard(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(Qo.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(Qo.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(Qo.recentQueryClick)}logRecentQueryClick(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(Qo.clearRecentQueries)}logClearRecentQueries(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(Qo.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(Qo.clearRecentResults)}logClearRecentResults(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(Qo.noResultsBack)}logNoResultsBack(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(Qo.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(Qo.showLessFoldedResults)}logShowLessFoldedResults(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=Go[e]){return Tn(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),o=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:e})=>o.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=Go[e]){return Tn(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return Tn(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),o=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:e})=>o.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return Tn(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return Tn(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return Tn(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return Tn(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),o=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:e})=>o.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return Tn(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return Tn(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return Tn(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Vo?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(Qo.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(Qo.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(Qo.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(Qo.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(Qo.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(Qo.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(Qo.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(Qo.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(Qo.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(Qo.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(Qo.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(Qo.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return Tn(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(Qo.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return Tn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},ts=Object.assign({},Oi);Object.keys(ts).map((e=>ts[e]));var rs;(function(e){e.click="click",e.flowStart="flowStart"})(rs||(rs={}));var ns;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(ns||(ns={}));var is;(function(e){e.quit="Quit",e.solved="Solved"})(is||(is={}));var os=e=>new Vo(e).getCurrentVisitorId(),ss=new Xn.HistoryStore,as=(e,t)=>typeof t=="function"?(...r)=>{let n=be(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,us=(e,t)=>(...r)=>{let n=be(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};var cs=["uri","urihash","documentUri","documentUriHash","permanentid","ec_name","ec_brand","ec_category","ec_item_group_id","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"];var ls=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0});var ds=()=>"default";var hs=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},fs=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return hs(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=e?.contextValues||{},n={};for(let[e,t]of Object.entries(r)){let r=`context_${e}`;n[r]=t}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=wn),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||ds()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var vs=class extends fs{constructor(){super(...arguments);this.initialState=ls()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productRecommendations?.searchUid||this.initialState.searchUid}mapResultsToAnalyticsDocument(){return this.state.productRecommendations?.recommendations.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get responseTime(){return this.state.productRecommendations?.duration||this.initialState.duration}get numberOfResults(){return this.state.productRecommendations?.recommendations.length||this.initialState.recommendations.length}};function ps({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:o,mode:s}=e;s!=="disabled"&&(n.call(r),t.send(i,o,r))}var ms=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ys(e){return typeof e=="string"&&ms.test(e)}function gs(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),o=i&&ys(i)?i:r.generateUUID();return n.setItem(t,o),o},clear:()=>{e.get().storage.removeItem(t)}}}var ws="0.7.7";function bs(e){let{trackingId:t}=e;return{trackingId:t}}function Ss(e){return(e.source||[]).concat([`relay@${ws}`])}function ks(e,t,r,n){let{getReferrer:i,getLocation:o,getUserAgent:s}=r,a=bs(t),u=n.getClientId();return Object.freeze({type:e,config:a,ts:Date.now(),source:Ss(t),clientId:u,userAgent:s(),referrer:i(),location:o()})}function Os(e,t,r,n,i){return{...t,meta:ks(e,r,n,i)}}var Is="*";function js(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(e,t){return e.type==="*"||t===e.type}function n(r){return t(r)<0&&e.push(r),()=>a(r.type,r.callback)}function i(t){e.forEach((e=>{if(r(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))}function o(t){if(t===Is)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function s(r){let n=t(r);n>=0&&e.splice(n,1)}function a(e,t){t?s({type:e,callback:t}):o(e)}return{add:n,call:i,remove:a}}function As({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function Es(e){let t=As(e);return{get:()=>t,update:e=>{t=As({...t,...e})}}}function Ds(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Us=Rs();function Rs(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return t.length==2?t.join("."):""};return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(t.lastIndexOf(r,0)===0)return t.substring(r.length,t.length)}return null},setItem(r,n,i){let o=t(window.location.hostname),s=`;expires=${new Date((new Date).getTime()+i).toUTCString()}`,a=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${n}${s}${a};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function Cs(){return{getItem(e){return Us.getItem(e)||localStorage.getItem(e)},removeItem(e){Us.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Us.setItem(e,t,31556952e3)}}}function Ts(){let e=document.referrer;return e===""?null:e}function _s(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(Ds().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>Ts(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:Cs()}}function xs(){return{getItem(){return null},removeItem(){},setItem(){}}}function $s(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:xs()}}function qs(e){return e.get().mode!=="disabled"&&Ms()?_s():$s()}function Ms(){try{return typeof window=="object"}catch{return!1}}function Ps(e){return{get:()=>Object.freeze(qs(e))}}function Fs(e){let t=Es(e),r=js(),n=Ps(t),i=gs(n);return{emit:(e,o)=>{let s=t.get(),a=n.get(),u=Os(e,o,s,a,i);return ps({config:s,environment:a,event:u,listenerManager:r})},getMeta:e=>ks(e,t.get(),n.get(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:ws,clearStorage:()=>{i.clear()}}}var Ns=kr((e=>e.source),(e=>[`@coveo/headless@${wn}`].concat(Object.entries(e).map((([e,t])=>`${e}@${t}`)))));var Ls=kr((e=>e.configuration.accessToken),(e=>e.configuration.analytics),(e=>Ns(e.configuration.analytics)),((e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>Fs({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})));function zs(){return{desiredCount:5,numberOfValues:8,set:{}}}function Hs(e){let{activeValue:t,ancestryMap:r}=Vs(e);return t?Bs(t,r):[]}function Vs(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if(e.state==="selected")return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function Bs(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}var Qs=(e,t)=>e.categoryFacetSet[t]?.request;var Gs=(e,t)=>{let r=Qs(e,t);return Hs(r?.currentValues??[])};function Ys(){return{}}function Js(){return{}}function Ws(){return{}}function Ks(){return{}}function Zs(e){return{facetSet:e.facetSet??Ks(),categoryFacetSet:e.categoryFacetSet??Ys(),dateFacetSet:e.dateFacetSet??Js(),numericFacetSet:e.numericFacetSet??Ws(),automaticFacetSet:e.automaticFacetSet??zs()}}var Xs=e=>{let t=[];return ra(e).forEach(((r,n)=>{let i=fa(e,r.facetId),o=la(r,n+1);if(ta(r)){if(!!!Gs(e,r.facetId).length)return;t.push({...o,...ua(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach(((e,n)=>{if(e.state==="idle")return;let s=ia(e,n+1,i),a=ea(r)?sa(e):oa(e);t.push({...o,...s,...a})}))})),na(e).forEach(((e,r)=>{let n=ca(e,r+1);e.values.forEach(((e,r)=>{if(e.state==="idle")return;let i=ia(e,r+1,"specific"),o=sa(e);t.push({...n,...i,...o})}))})),t},ea=e=>e.type==="specific",ta=e=>e.type==="hierarchical",ra=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),na=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),ia=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),oa=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),sa=e=>({displayValue:e.value,value:e.value}),aa=(e,t)=>Gs(e,t).map((e=>e.value)).join(";"),ua=(e,t)=>{let r=aa(e,t);return{value:r,valuePosition:1,displayValue:r}},ca=(e,t)=>({title:da(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),la=(e,t)=>({title:da(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),da=(e,t)=>`${e}_${t}`,ha=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,fa=(e,t)=>{let r=ha(e,t);return r?r.type:"specific"};var va=()=>({q:"",enableQuerySyntax:!1});var pa=(e=>(e.Ascending="ascending",e.Descending="descending",e))(pa||{}),ma=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(ma||{}),ya=e=>{if(te(e))return e.map((e=>ya(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},ga=()=>({by:"relevancy"});new Z({values:{by:new re({enum:ma,required:!0}),order:new re({enum:pa}),field:new W}});function wa(){return ya(ga())}var ba=class e extends fs{constructor(){super(...arguments);this.getFacetRequest=e=>this.state.facetSet?.[e]?.request||this.state.categoryFacetSet?.[e]?.request||this.state.dateFacetSet?.[e]?.request||this.state.numericFacetSet?.[e]?.request||this.state.automaticFacetSet?.set[e]?.response}getFacetState(){return Xs(Zs(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let e=this.getState();return e.search?.searchResponseId||e.search?.response.searchUid||oe().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.search?.response.pipeline||this.state.pipeline||e.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){let e=this.getState(),t=super.getBaseMetadata(),r=e.search?.response?.extendedResults?.generativeQuestionAnsweringId;return r&&(t.generativeQuestionAnsweringId=r),t}getFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetValue:t,facetTitle:`${r}_${e}`}}getFacetClearAllMetadata(e){let t=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:t,facetTitle:`${t}_${e}`}}getFacetUpdateSortMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,criteria:t,facetTitle:`${r}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${r}_${e}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??wa()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:r,categoryFacetPath:t,categoryFacetTitle:`${r}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map((e=>e.expression)),i=r.partialQueries.length-1,o=r.partialQueries[i]||"",s=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:o,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){let e=this.getState(),t={};return e.generatedAnswer?.isVisible!==void 0&&(t.showGeneratedAnswer=e.generatedAnswer.isVisible),t}get resultURIs(){return this.results?.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||va().q}get responseTime(){return this.state.search?.duration||oe().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||oe().response.totalCountFiltered}};ba.fallbackPipelineName="default";var Sa=ba,ka=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Sa(t)})=>{let o=t(),s=o.configuration.accessToken,a=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new es({token:s,endpoint:a,runtimeEnvironment:u,preprocessRequest:as(e,n),beforeSendHooks:[us(e,r),(t,r)=>(e.info({...r,type:t,endpoint:a,token:s},"Analytics request"),r)]},i);return c||l.disable(),l};function Oa(e){return Object.assign(e,{instantlyCallable:!0})}function Ia(e,t){let r=t=>Oa(Xr(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:o,logger:s}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:o,logger:s})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:o})=>{let{description:s,log:a}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:o});return{description:s,action:r((async(e,{getState:t,extra:r})=>await a({state:t(),extra:r})))}}}),n}var ja=(e,t,r)=>{function n(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Da(i)}return n},Aa=e=>e.configuration.analytics.analyticsMode==="legacy",Ea=e=>e.configuration.analytics.analyticsMode==="next",Da=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:o,providerClass:s})=>(r??(r=e=>new s(e)),Ia(e,(async({getState:e,analyticsClientMiddleware:s,preprocessRequest:a,logger:u})=>{let c=[],l={log:async({state:e})=>{for(let t of c)await t(e)}},d=e(),h=o({getState:e,logger:u,analyticsClientMiddleware:s,preprocessRequest:a,provider:r(e)}),f=await t(h,e());l.description=f?.description,c.push((async e=>{Aa(e)&&await Ua(f,r,e,u,h.coveoAnalyticsClient)}));let{emit:v}=Ls(d);return c.push((async e=>{if(Ea(e)&&i&&n){let t=n(e);await Ta(v,i,t)}})),l})));async function Ua(e,t,r,n,i){t((()=>r));let o=await(e?.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:o},"Analytics response")}var Ra=ja(ka,(e=>e),Sa);var Ca={urihash:new W,sourcetype:new W,permanentid:new W};({uniqueId:ln,raw:new Z({values:Ca}),title:ln,uri:ln,clickUri:ln,rankingModifier:new W({required:!1,emptyAllowed:!0})});async function Ta(e,t,r){await e(t,r)}var _a=()=>Ra("analytics/productRecommendations/load",(e=>e.makeRecommendationInterfaceLoad()),(e=>new vs(e)));function xa(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var $a=Rr("productrecommendations/setId",(e=>mn(e,{id:ln}))),qa=Rr("productrecommendations/setSku",(e=>mn(e,{skus:new ee({required:!0,min:1,each:dn})}))),Ma=Rr("productrecommendations/setBrand",(e=>mn(e,{brand:new W({required:!0,emptyAllowed:!0})}))),Pa=Rr("productrecommendations/setCategory",(e=>mn(e,{category:new W({required:!0,emptyAllowed:!0})}))),Fa=Rr("productrecommendations/setAdditionalFields",(e=>mn(e,{additionalFields:new ee({required:!0,each:dn})}))),Na=Rr("productrecommendations/setMaxNumberOfRecommendations",(e=>mn(e,{number:new H({required:!0,max:50,min:1})}))),La=Xr("productRecommendations/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),o=(new Date).getTime(),s=await n.productRecommendations(await Ha(i)),a=(new Date).getTime()-o;if(Qe(s))return r(s.error);let u=i.productRecommendations.additionalFields||[];return{recommendations:s.success.results.map((e=>za(e,{additionalFields:u}))),analyticsAction:_a(),searchUid:s.success.searchUid,duration:a}})),za=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,i=e.raw.ec_in_stock,o={documentUri:e.uri,documentUriHash:e.raw.urihash,permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_item_group_id:e.raw.ec_item_group_id,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:i===void 0?void 0:i.toLowerCase()==="yes"||i.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce(((t,r)=>({...t,[r]:e.raw[r]})),{}),childResults:[],totalNumberOfChildResults:0};return xa(e)&&(o.childResults=e.childResults.map((e=>za(e,{additionalFields:t}))),o.totalNumberOfChildResults=e.totalNumberOfChildResults),o},Ha=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await os(e.configuration.analytics)},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...cs,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?ss.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}});var Va=Vr(ls(),(e=>{e.addCase($a,((e,t)=>{e.id=t.payload.id})).addCase(qa,((e,t)=>{e.skus=t.payload.skus})).addCase(Ma,((e,t)=>{e.filter.brand=t.payload.brand})).addCase(Pa,((e,t)=>{e.filter.category=t.payload.category})).addCase(Na,((e,t)=>{e.maxNumberOfRecommendations=t.payload.number})).addCase(Fa,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(La.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(La.fulfilled,((e,t)=>{e.error=null,e.searchUid=t.payload.searchUid,e.recommendations=t.payload.recommendations,e.isLoading=!1})).addCase(La.pending,(e=>{e.isLoading=!0}))}));var Ba=Rr("searchHub/set",(e=>mn(e,new W({required:!0,emptyAllowed:!0}))));var Qa=Rr("history/undo"),Ga=Rr("history/redo");Rr("history/snapshot");Xr("history/back",(async(e,{dispatch:t})=>{t(Qa()),await t(Ya())}));Xr("history/forward",(async(e,{dispatch:t})=>{t(Ga()),await t(Ya())}));var Ya=Xr("history/change",(async(e,{getState:t})=>t().history.present));var Ja=Vr(ds(),(e=>{e.addCase(Ba,((e,t)=>t.payload)).addCase(Ya.fulfilled,((e,t)=>t.payload?.searchHub??e)).addCase(In,((e,t)=>t.payload.searchHub||e))}));var Wa=Vr(wn,(e=>e));function Ka(){return typeof window<"u"&&typeof document<"u"}function Za(e){let t=e.payload?.analyticsAction;return Xa(e)&&!z(t)}function Xa(e){return"type"in e}var eu=e=>t=>r=>{let n;Za(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return Xa(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};var tu=h(D());var ru={q:new W,enableQuerySyntax:new Q,aq:new W,cq:new W,firstResult:new H({min:0}),numberOfResults:new H({min:0}),sortCriteria:new W,f:new Z,fExcluded:new Z,cf:new Z,nf:new Z,df:new Z,debug:new Q,sf:new Z,tab:new W,af:new Z};var nu=Rr("searchParameters/restore",(e=>mn(e,ru)));Rr("tab/register",(e=>{let t=new Z({values:{id:ln,expression:hn}});return mn(e,t)}));var iu=Rr("tab/updateActiveTab",(e=>mn(e,ln)));var ou=h(U()),su=h(R()),au=h(C());ou.default.extend(au.default);ou.default.extend(su.default);var uu="/rest/search/v2",cu="/rest/ua",lu=()=>({organizationId:"",accessToken:"",platformUrl:De(),search:{apiBaseUrl:`${De()}${uu}`,locale:"en-US",timezone:ou.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Ue()}${cu}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function du(e,t){if($e(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+cu;let r=qe(e,t);return r?Ee(t,r.environment).analytics:e}var hu=Vr(lu(),(e=>e.addCase(On,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${uu}`,e.analytics.apiBaseUrl=du(t.payload.platformUrl,e.organizationId))})).addCase(In,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(An,((e,t)=>{z(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),z(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),z(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),z(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),z(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),z(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),z(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),z(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),z(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,tu.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),z(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),z(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),z(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),z(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),z(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(En,(e=>{e.analytics.enabled=!1})).addCase(Dn,(e=>{e.analytics.enabled=!0})).addCase(Un,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(Rn,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(iu,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(nu,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}))));var fu=hu;function vu(e){return e.instantlyCallable}var pu=()=>e=>t=>e(vu(t)?t():t);var mu=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},yu=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var gu=()=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href}),wu=()=>({referrer:"default",userAgent:"Node.js",location:"default"});function bu(e,t){let r={...e},n,i=e=>(t,r)=>{let i=e(t,r);return n?n(i,r):i};return{get combinedReducer(){let e=we(Object.entries(t).filter((([e])=>!(e in r))).map((([e,t])=>[e,()=>t])));return i(lt({...e,...r}))},containsAll(e){return Object.keys(e).every((e=>e in r))},add(e){Object.keys(e).filter((e=>!(e in r))).forEach((t=>r[t]=e[t]))},addCrossReducer(e){n=e}}}function Su(e,t,r){var n,i,o;t===void 0&&(t=50),r===void 0&&(r={});var s=(n=r.isImmediate)!=null&&n,a=(i=r.callback)!=null&&i,u=r.maxWait,c=Date.now(),l=[];function d(){if(u!==void 0){var e=Date.now()-c;if(e+t>=u)return u-e}return t}var h=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var u=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,c=Date.now(),!s){var n=e.apply(r,t);a&&a(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),u){var h=e.apply(r,t);return a&&a(h),n(h)}l.push({resolve:n,reject:i})}))};return h.cancel=function(e){o!==void 0&&clearTimeout(o),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},h}function ku(e,t){let r=0,n=Su((()=>r=0),500);return i=>o=>async s=>{if(!(typeof s=="function"))return o(s);let a=await o(s);if(!Ou(a))return a;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),a;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),a;r++,n();let u=await Iu(t);i.dispatch(On({accessToken:u})),i.dispatch(s)}}function Ou(e){return e?.error?.name===(new pe).name}async function Iu(e){try{return await e()}catch{return""}}function ju({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return Lr({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:n}}).prepend(...r).concat(yu(n.logger))})}var Au={configuration:fu,version:Wa};function Eu(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},o={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(ge())return t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1};if(o.analyticsMode==="next"&&!i.trackingId)throw new $u('analytics.trackingId is required when analytics.analyticsMode="next"');return o}function Du(e,t){let r=Uu(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:o}=e.configuration,s=o?.platform||e.configuration.platformUrl;_u(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Tu(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):xu(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(On({accessToken:n,organizationId:i,platformUrl:s}));let a=Eu(e.configuration,r.logger);return a&&r.dispatch(An(a)),r}function Uu(e,t){let{reducers:r}=e,n=bu({...Au,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,o=e.navigatorContextProvider??Ka()?gu:wu,s={...t,get relay(){return Ls(u.state)},get navigatorContext(){return o()}},a=Ru(e,s,n),u={addReducers(e){n.containsAll(e)||(n.add(e),a.replaceReducer(n.combinedReducer))},dispatch:a.dispatch,subscribe:a.subscribe,enableAnalytics(){a.dispatch(Dn())},disableAnalytics(){a.dispatch(En())},get state(){return a.getState()},get relay(){return Ls(this.state)},get navigatorContext(){return o()},logger:i,store:a};return u}function Ru(e,t,r){let{preloadedState:n,configuration:i}=e,o=i.name||"coveo-headless",s=Cu(e,t.logger);return ju({preloadedState:n,reducer:r.combinedReducer,middlewares:s,thunkExtraArguments:t,name:o})}function Cu(e,t){let{renewAccessToken:r}=e.configuration,n=ku(t,r);return[pu,n,mu(t),eu].concat(e.middlewares||[])}function Tu(e){return N(e.organizationEndpoints)}function _u(e){return!z(e.platformUrl)||z(e.organizationEndpoints?.platform)}function xu(e){let{platform:t}=e.organizationEndpoints;if(N(t))return!1;let r=Me(t);return r&&r.organizationId!==e.organizationId}var $u=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}};var qu=h(_());function Mu(e){return(0,qu.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function Pu(e,t){let r=Fu(e),n=pn,i=Nu(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function Fu(e){let{analytics:t}=e,r=(e,t)=>t;return t?.analyticsClientMiddleware||r}function Nu(e){return e.preprocessRequest||ne}({organizationId:ln,accessToken:ln,platformUrl:new W({required:!1,emptyAllowed:!1}),name:new W({required:!1,emptyAllowed:!1}),analytics:new Z({options:{required:!1},values:{enabled:new Q({required:!1}),originContext:new W({required:!1}),originLevel2:new W({required:!1}),originLevel3:new W({required:!1}),analyticsMode:new W({constrainTo:["legacy","next"],required:!1})}})});function Lu(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Ee("searchuisamples")}}var zu={organizationId:ln,accessToken:ln,platformUrl:new W({required:!1,emptyAllowed:!1}),name:new W({required:!1,emptyAllowed:!1}),analytics:new Z({options:{required:!1},values:{enabled:new Q({required:!1}),originContext:new W({required:!1}),originLevel2:new W({required:!1}),originLevel3:new W({required:!1}),analyticsMode:new W({constrainTo:["legacy"],required:!1})}}),searchHub:dn,locale:dn,timezone:dn},Hu=new P(zu);function Vu(){return{...Lu(),searchHub:"default"}}var Bu={searchHub:Ja,productRecommendations:Va};function Qu(e){let t=Mu(e.loggerOptions);Gu(e.configuration,t);let r=Yu(e.configuration,t),n={...Pu(e.configuration,t),apiClient:r},i={...e,reducers:Bu},o=Du(i,n),{searchHub:s,timezone:a,locale:u}=e.configuration;return o.dispatch(In({timezone:a,locale:u})),z(s)||o.dispatch(Ba(s)),{...o,get state(){return o.state}}}function Gu(e,t){try{Hu.validate(e)}catch(e){throw t.error("Product Recommendation engine configuration error",e),e}}function Yu(e,t){return new Be({logger:t,preprocessRequest:e.preprocessRequest||ne,postprocessSearchResponseMiddleware:Ze,postprocessFacetSearchResponseMiddleware:Xe,postprocessQuerySuggestResponseMiddleware:et})}var Ju=new ee({each:ln,required:!0}),Wu=(e,t)=>(mn(e,ln),K(t)?mn(t,ln):mn(t,Ju),{payload:{contextKey:e,contextValue:t}}),Ku=Rr("context/set",(e=>{for(let[t,r]of Object.entries(e))Wu(t,r);return{payload:e}})),Zu=Rr("context/add",(e=>Wu(e.contextKey,e.contextValue))),Xu=Rr("context/remove",(e=>mn(e,ln)));function ec(){return{contextValues:{}}}Vr(ec(),(e=>{e.addCase(Ku,((e,t)=>{e.contextValues=t.payload})).addCase(Zu,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(Xu,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Ya.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)}))}));var tc=Rr("dictionaryFieldContext/set",(e=>{let t=new Z({options:{required:!0}}),r=mn(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new ee({each:hn}),o=mn(n,i).error;return o?{payload:e,error:o}:{payload:e}})),rc=Rr("dictionaryFieldContext/add",(e=>{let t=new Z({options:{required:!0},values:{field:hn,key:hn}});return mn(e,t)})),nc=Rr("dictionaryFieldContext/remove",(e=>mn(e,hn)));function ic(){return{contextValues:{}}}Vr(ic(),(e=>{e.addCase(tc,((e,t)=>{e.contextValues=t.payload})).addCase(rc,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(nc,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Ya.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));function oc(e){let t,r=new Map,n=()=>r.size===0,i=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(o){o();let s=Symbol(),a;return n()&&(t=JSON.stringify(this.state),a=e.subscribe((()=>{i(this.state)&&r.forEach((e=>e()))}))),r.set(s,o),()=>{r.delete(s),n()&&a&&a()}},get state(){return{}}}}var sc={additionalFields:new ee({required:!1,each:dn}),skus:new ee({required:!1,each:dn}),maxNumberOfRecommendations:new H({required:!1,max:50,min:1,default:5})},ac=new P({id:ln,...sc}),uc=(e,t={})=>{if(!cc(e));let r=oc(e),{dispatch:n}=e,i=()=>e.state,o=yn(e,ac,t.options,"buildBaseProductRecommendationsList");return n($a({id:o.id})),n(Na({number:o.maxNumberOfRecommendations})),o.additionalFields&&n(Fa({additionalFields:o.additionalFields})),o.skus&&n(qa({skus:o.skus})),{...r,setSkus(e){n(qa({skus:e}))},refresh(){n(La())},get state(){let{skus:e,maxNumberOfRecommendations:t,recommendations:r,error:n,isLoading:o}=i().productRecommendations;return{skus:e,maxNumberOfRecommendations:t,recommendations:r,error:n,isLoading:o}}}};function cc(e){return e.addReducers({productRecommendations:Va,configuration:fu}),!0}var lc=new P({sku:new W({required:!0,emptyAllowed:!1}),maxNumberOfRecommendations:sc.maxNumberOfRecommendations,additionalFields:sc.additionalFields});function dc(e,t){let r=yn(e,lc,t.options,"buildFrequentlyBoughtTogetherList"),n=uc(e,{...t,options:{maxNumberOfRecommendations:r.maxNumberOfRecommendations,additionalFields:r.additionalFields,skus:[r.sku],id:"frequentBought"}}),{setSkus:i,...o}=n;return{...o,setSku(e){i([e])},get state(){let{skus:e,...t}=n.state;return{...t,sku:e[0]}}}}new P({...sc});new P({...sc});new P({maxNumberOfRecommendations:sc.maxNumberOfRecommendations,additionalFields:sc.additionalFields});new P({maxNumberOfRecommendations:sc.maxNumberOfRecommendations,additionalFields:sc.additionalFields});new P({maxNumberOfRecommendations:sc.maxNumberOfRecommendations,additionalFields:sc.additionalFields});new P({values:new Z({options:{required:!1}})});new P({...sc});new P({...sc});$();
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=class{constructor(t){e(this,t);this.unsubscribe=()=>{};this.state=undefined}componentWillLoad(){const e=Vu();this.engine=Qu({configuration:{...e,searchHub:"frequently_bought_recommendations"}});this.frequentlyBoughtTogether=dc(this.engine,{options:{sku:"abc"}});this.unsubscribe=this.frequentlyBoughtTogether.subscribe((()=>this.updateState()));this.frequentlyBoughtTogether.refresh()}disconnectedCallback(){this.unsubscribe()}updateState(){this.state=this.frequentlyBoughtTogether.state}render(){return t("div",{key:"e07cbe6e7a04b44d19c229d38bb4e63323e59be5"},"FREQUENTLY BOUGHT TOGETHER:",t("ul",{key:"e63b0493ea3250561387732ba07a1ad253f83480"},this.state.recommendations.map((e=>t("li",null,e.ec_name)))))}};export{hc as atomic_frequently_bought_together};
//# sourceMappingURL=p-ae4b5e5a.entry.js.map