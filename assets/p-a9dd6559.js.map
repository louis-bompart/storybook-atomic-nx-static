{"version":3,"names":["LocalizedString","bindings","key","params","count","delimitingCharacter","placeholderPrefixCharacter","getPlaceholderForParamKey","paramKey","getParamFromPlaceholder","placeholder","slice","placeholdersMap","Object","fromEntries","keys","map","localizedStringWithPlaceholders","i18n","t","interpolation","escapeValue","h","Fragment","split","text","startsWith"],"sources":["src/utils/jsx-utils.tsx"],"sourcesContent":["import {Fragment, FunctionalComponent, h, VNode} from '@stencil/core';\r\nimport {AnyBindings} from '../components/common/interface/bindings';\r\n\r\nexport interface LocalizedStringProps {\r\n  bindings: AnyBindings;\r\n  key: string;\r\n  params: Record<string, VNode | string>;\r\n  count?: number;\r\n}\r\n\r\nexport const LocalizedString: FunctionalComponent<LocalizedStringProps> = ({\r\n  bindings,\r\n  key,\r\n  params,\r\n  count,\r\n}) => {\r\n  const delimitingCharacter = '\\u001d'; // Unicode group separator\r\n  const placeholderPrefixCharacter = '\\u001a'; // Unicode substitute character\r\n  const getPlaceholderForParamKey = (paramKey: string) =>\r\n    `${delimitingCharacter}${placeholderPrefixCharacter}${paramKey}${delimitingCharacter}`;\r\n  const getParamFromPlaceholder = (placeholder: string) =>\r\n    params[placeholder.slice(1)];\r\n\r\n  const placeholdersMap = Object.fromEntries(\r\n    Object.keys(params).map((paramKey) => [\r\n      paramKey,\r\n      getPlaceholderForParamKey(paramKey),\r\n    ])\r\n  );\r\n  const localizedStringWithPlaceholders = bindings.i18n.t(key, {\r\n    interpolation: {escapeValue: false},\r\n    count,\r\n    ...placeholdersMap,\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      {localizedStringWithPlaceholders\r\n        .split(delimitingCharacter)\r\n        .map((text) =>\r\n          text.startsWith(placeholderPrefixCharacter)\r\n            ? getParamFromPlaceholder(text)\r\n            : text\r\n        )}\r\n    </Fragment>\r\n  );\r\n};\r\n"],"mappings":"iDAUaA,EAA6D,EACxEC,WACAC,MACAC,SACAC,YAEA,MAAMC,EAAsB,IAC5B,MAAMC,EAA6B,IACnC,MAAMC,EAA6BC,GACjC,GAAGH,IAAsBC,IAA6BE,IAAWH,IACnE,MAAMI,EAA2BC,GAC/BP,EAAOO,EAAYC,MAAM,IAE3B,MAAMC,EAAkBC,OAAOC,YAC7BD,OAAOE,KAAKZ,GAAQa,KAAKR,GAAa,CACpCA,EACAD,EAA0BC,OAG9B,MAAMS,EAAkChB,EAASiB,KAAKC,EAAEjB,EAAK,CAC3DkB,cAAe,CAACC,YAAa,OAC7BjB,WACGQ,IAGL,OACEU,EAACC,EAAQ,KACNN,EACEO,MAAMnB,GACNW,KAAKS,GACJA,EAAKC,WAAWpB,GACZG,EAAwBgB,GACxBA,IAEC,S"}