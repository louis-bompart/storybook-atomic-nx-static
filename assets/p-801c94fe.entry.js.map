{"version":3,"names":["atomicIpxModalCss","AtomicIpxModalStyle0","AtomicIPXModal","this","isOpen","hasFooterSlotElements","updateBreakpoints","once","host","watchToggleOpen","modalOpenedClass","document","body","classList","add","bindings","interfaceElement","remove","getClasses","classes","push","onWindowTouchMove","e","preventDefault","componentWillLoad","querySelector","componentDidLoad","id","randomID","render","Body","h","key","displayFooterSlot","name","slot","Host","class","join","part","__decorate","InitializeBindings"],"sources":["src/components/ipx/atomic-ipx-modal/atomic-ipx-modal.pcss?tag=atomic-ipx-modal&encapsulation=shadow","src/components/ipx/atomic-ipx-modal/atomic-ipx-modal.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n\r\natomic-focus-trap {\r\n  @apply contents;\r\n  height: inherit;\r\n}\r\n\r\n:host {\r\n  width: var(--atomic-ipx-width, 31.25rem);\r\n  height: var(--atomic-ipx-height, 43.75rem);\r\n  box-shadow: rgb(0 0 0 / 50%) 0 0 0.5rem;\r\n  inset: auto 3rem 4.25rem auto;\r\n  position: fixed;\r\n  z-index: 2147483647;\r\n}\r\n\r\n:host(.open) {\r\n  display: block;\r\n\r\n  &::part(backdrop) {\r\n    @apply pointer-events-auto;\r\n    height: inherit;\r\n  }\r\n}\r\n\r\n:host {\r\n  display: none;\r\n\r\n  &::part(backdrop) {\r\n    @apply pointer-events-none;\r\n    height: inherit;\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  h,\r\n  State,\r\n  Prop,\r\n  Element,\r\n  Watch,\r\n  Event,\r\n  EventEmitter,\r\n  Host,\r\n  Listen,\r\n} from '@stencil/core';\r\nimport {\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {updateBreakpoints} from '../../../utils/replace-breakpoint';\r\nimport {once, randomID} from '../../../utils/utils';\r\nimport {AnyBindings} from '../../common/interface/bindings';\r\n\r\n/**\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-ipx-modal',\r\n  styleUrl: 'atomic-ipx-modal.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicIPXModal implements InitializableComponent<AnyBindings> {\r\n  @InitializeBindings() public bindings!: AnyBindings;\r\n  @Element() public host!: HTMLElement;\r\n\r\n  @State() public error!: Error;\r\n\r\n  @Prop({mutable: true}) source?: HTMLElement;\r\n\r\n  /**\r\n   * The container to hide from the tabindex and accessibility DOM when the modal is closed.\r\n   */\r\n  @Prop({mutable: true}) container?: HTMLElement;\r\n  @Prop({reflect: true, mutable: true}) isOpen = false;\r\n\r\n  @Event() animationEnded!: EventEmitter<never>;\r\n\r\n  @State() private hasFooterSlotElements = true;\r\n\r\n  @Watch('isOpen')\r\n  async watchToggleOpen(isOpen: boolean) {\r\n    const modalOpenedClass = 'atomic-ipx-modal-opened';\r\n\r\n    if (isOpen) {\r\n      //TODO: remove the addition of a class to the body in atomicV3\r\n      document.body.classList.add(modalOpenedClass);\r\n      this.bindings.interfaceElement.classList.add(modalOpenedClass);\r\n      return;\r\n    }\r\n    //TODO: remove the removal of a class to the body in atomicV3\r\n    document.body.classList.remove(modalOpenedClass);\r\n    this.bindings.interfaceElement.classList.remove(modalOpenedClass);\r\n  }\r\n\r\n  private getClasses() {\r\n    const classes: string[] = [];\r\n    if (this.isOpen) {\r\n      classes.push('open');\r\n    }\r\n\r\n    classes.push('dialog');\r\n\r\n    return classes;\r\n  }\r\n\r\n  @Listen('touchmove', {passive: false})\r\n  onWindowTouchMove(e: Event) {\r\n    this.isOpen && e.preventDefault();\r\n  }\r\n\r\n  public componentWillLoad(): void | Promise<void> {\r\n    this.hasFooterSlotElements = !!this.host.querySelector('[slot=\"footer\"]');\r\n  }\r\n\r\n  public componentDidLoad() {\r\n    const id = this.host.id || randomID('atomic-ipx-modal-');\r\n    this.host.id = id;\r\n    this.watchToggleOpen(this.isOpen);\r\n  }\r\n\r\n  private updateBreakpoints = once(() => updateBreakpoints(this.host));\r\n\r\n  public render() {\r\n    this.updateBreakpoints();\r\n\r\n    const Body = () => (\r\n      <atomic-ipx-body\r\n        isOpen={this.isOpen}\r\n        displayFooterSlot={this.hasFooterSlotElements}\r\n      >\r\n        <slot name=\"header\" slot=\"header\" />\r\n        <slot name=\"body\" slot=\"body\" />\r\n        <slot name=\"footer\" slot=\"footer\" />\r\n      </atomic-ipx-body>\r\n    );\r\n\r\n    return (\r\n      <Host class={this.getClasses().join(' ')} part=\"atomic-ipx-modal\">\r\n        <div part=\"backdrop\">\r\n          <Body />\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"8NAAA,MAAMA,EAAoB,+3uCAC1B,MAAAC,EAAeD,E,iXC2BFE,EAAc,M,wEAYaC,KAAAC,OAAS,MAI9BD,KAAAE,sBAAwB,KA2CjCF,KAAAG,kBAAoBC,GAAK,IAAMD,EAAkBH,KAAKK,Q,gFA/Cf,M,2BAIN,I,CAGzC,qBAAMC,CAAgBL,GACpB,MAAMM,EAAmB,0BAEzB,GAAIN,EAAQ,CAEVO,SAASC,KAAKC,UAAUC,IAAIJ,GAC5BP,KAAKY,SAASC,iBAAiBH,UAAUC,IAAIJ,GAC7C,M,CAGFC,SAASC,KAAKC,UAAUI,OAAOP,GAC/BP,KAAKY,SAASC,iBAAiBH,UAAUI,OAAOP,E,CAG1C,UAAAQ,GACN,MAAMC,EAAoB,GAC1B,GAAIhB,KAAKC,OAAQ,CACfe,EAAQC,KAAK,O,CAGfD,EAAQC,KAAK,UAEb,OAAOD,C,CAIT,iBAAAE,CAAkBC,GAChBnB,KAAKC,QAAUkB,EAAEC,gB,CAGZ,iBAAAC,GACLrB,KAAKE,wBAA0BF,KAAKK,KAAKiB,cAAc,kB,CAGlD,gBAAAC,GACL,MAAMC,EAAKxB,KAAKK,KAAKmB,IAAMC,EAAS,qBACpCzB,KAAKK,KAAKmB,GAAKA,EACfxB,KAAKM,gBAAgBN,KAAKC,O,CAKrB,MAAAyB,GACL1B,KAAKG,oBAEL,MAAMwB,EAAO,IACXC,EAAA,mBAAAC,IAAA,2CACE5B,OAAQD,KAAKC,OACb6B,kBAAmB9B,KAAKE,uBAExB0B,EAAA,QAAAC,IAAA,2CAAME,KAAK,SAASC,KAAK,WACzBJ,EAAA,QAAAC,IAAA,2CAAME,KAAK,OAAOC,KAAK,SACvBJ,EAAA,QAAAC,IAAA,2CAAME,KAAK,SAASC,KAAK,YAI7B,OACEJ,EAACK,EAAI,CAAAJ,IAAA,2CAACK,MAAOlC,KAAKe,aAAaoB,KAAK,KAAMC,KAAK,oBAC7CR,EAAA,OAAAC,IAAA,2CAAKO,KAAK,YACRR,EAACD,EAAI,CAAAE,IAAA,8C,sFA7EgBQ,EAAA,CAA5BC,K"}