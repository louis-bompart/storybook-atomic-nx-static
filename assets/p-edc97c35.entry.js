import{h as t,r as e,g as o}from"./p-00525453.js";import{M as r}from"./p-b6da4b1f.js";import{V as n}from"./p-794b93a9.js";import{e as i,f as s,b as c}from"./p-f5723aee.js";import{i as a}from"./p-053b4bcb.js";import{t as l}from"./p-4328fcc3.js";import"./p-7e7b1a62.js";import"./p-e9c4f463.js";function u(t){if(a(t)){return"section"}if(!s(t)){return"metadata"}if(c(t)&&t.tagName.toLowerCase()===l){return"table-column-definition"}return"other"}function m(t){return i(Array.from(t),(t=>u(t)))}class f{constructor({host:t,setError:e,validParents:o,allowEmpty:r=false}){this.matchConditions=[];this.host=t;this.validateTemplate(t,e,o,r)}validateTemplate(t,e,o,r=true){var n;const i=o.map((t=>t.toUpperCase())).includes(((n=t.parentElement)===null||n===void 0?void 0:n.nodeName)||"");const s=t.nodeName.toLowerCase();if(!i){e(new Error(`The "${s}" component has to be the child of one of the following: ${o.map((t=>`"${t.toLowerCase()}"`)).join(", ")}.`));return}const c=t.querySelector("template");if(!c){e(new Error(`The "${s}" component must contain a "template" element as a child.`));return}if(!r&&!c.innerHTML.trim()){e(new Error(`The "template" tag inside "${s}" cannot be empty.`));return}if(c.content.querySelector("script")){console.warn('Any "script" tags defined inside of "template" elements are not supported and will not be executed when the products are rendered.',t)}const{section:a,other:l}=m(c.content.childNodes);if((a===null||a===void 0?void 0:a.length)&&(l===null||l===void 0?void 0:l.length)){console.warn("Product templates should only contain section elements or non-section elements. Future updates could unpredictably affect this product template.",t,{sectionNodes:a,otherNodes:l})}}getTemplate(t,e){if(e){return null}return{conditions:t.concat(this.matchConditions),content:p(this.host).content,priority:1}}renderIfError(e){if(e){return t("atomic-component-error",{element:this.host,error:e})}}}function p(t){return t.querySelector("template")}function d(t,e){const o=[];for(const e in t){o.push(n.fieldMustMatch(e,t[e]))}for(const t in e){o.push(n.fieldMustNotMatch(t,e[t]))}return o}var h=undefined&&undefined.__decorate||function(t,e,o,r){var n=arguments.length,i=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,o):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)if(s=t[c])i=(n<3?s(i):n>3?s(e,o,i):s(e,o))||i;return n>3&&i&&Object.defineProperty(e,o,i),i};const b=class{constructor(t){e(this,t);this.conditions=[];this.mustMatch={};this.mustNotMatch={};this.error=undefined;this.conditions=[];this.productTemplateCommon=new f({host:this.host,setError:t=>{this.error=t},validParents:["atomic-commerce-product-list","atomic-commerce-recommendation-list"],allowEmpty:true})}componentWillLoad(){this.productTemplateCommon.matchConditions=d(this.mustMatch,this.mustNotMatch)}async getTemplate(){return this.productTemplateCommon.getTemplate(this.conditions,this.error)}render(){return this.productTemplateCommon.renderIfError(this.error)}get host(){return o(this)}};h([r({splitValues:true})],b.prototype,"mustMatch",void 0);h([r({splitValues:true})],b.prototype,"mustNotMatch",void 0);export{b as atomic_product_template};
//# sourceMappingURL=p-edc97c35.entry.js.map