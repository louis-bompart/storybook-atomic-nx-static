{"version":3,"names":["atomicFacetCss","AtomicFacetStyle0","AtomicFacet","this","label","numberOfValues","withSearch","sortCriteria","resultsMustMatch","displayValuesAs","isCollapsed","headingLevel","filterFacetCount","enableExclusion","injectionDepth","dependsOn","allowedValues","customSort","initialize","facet","buildFacet","bindings","engine","options","facetOptions","facetId","state","searchStatus","buildSearchStatus","initAriaLive","initConditionManager","initPopover","registerFacet","disconnectedCallback","_a","facetConditionsManager","stopWatching","componentShouldUpdate","next","prev","propName","isFacetState","shouldUpdateFacetSearchComponent","facetSearch","render","h","FacetGuard","key","enabled","facetState","hasError","searchStatusState","firstSearchExecuted","hasResults","values","length","FacetContainer","FacetHeader","i18n","definedLabel","onClearFilters","focusTargets","header","focusAfterSearch","deselectAll","numberOfActiveValues","activeValues","onToggleCollapse","headerRef","el","setTarget","renderBody","FacetPlaceholder","Fragment","FacetSearchInputGuard","canShowMoreValues","numberOfDisplayedValues","FacetSearchInput","onChange","value","clear","updateCaptions","getFieldCaptions","field","updateText","search","onClear","query","shouldDisplaySearchResults","renderSearchResults","renderMatches","renderValues","renderShowMoreLess","renderValuesContainer","children","classes","FacetValuesGroup","class","part","map","FacetSearchValue","facetValueProps","facetCount","count","onExclude","exclude","onSelect","singleSelect","select","facetValue","rawValue","i","shouldFocusOnShowLessAfterInteraction","shouldFocusOnShowMoreAfterInteraction","FacetValue","numberOfResults","toggleExclude","toggleSingleSelect","toggleSelect","setRef","btn","showLessFocus","_b","showMoreFocus","FacetShowMoreLess","onShowMore","showMore","showMoreValues","onShowLess","showLess","showLessValues","canShowLessValues","FacetSearchMatches","numberOfMatches","hasMoreMatches","moreValuesAvailable","filter","undefined","facetSearchQuery","isHidden","buildFacetConditionsManager","conditions","parseDependsOn","store","facetInfo","initializePopover","host","hasValues","announceFacetSearchResultsWithAriaLive","msg","facetSearchAriaMessage","t","element","FocusTargetController","headerFocus","__decorate","InitializeBindings","BindStateToController","MapProp","ArrayProp","AriaLiveRegion"],"sources":["src/components/search/facets/atomic-facet/atomic-facet.pcss?tag=atomic-facet&encapsulation=shadow","src/components/search/facets/atomic-facet/atomic-facet.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\r\n@import '../../../common/facets/facet-search/facet-search.pcss';\r\n@import '../../../common/facets/facet-common.pcss';\r\n@import '../../../common/facets/facet-value-checkbox/facet-value-checkbox.pcss';\r\n@import '../../../common/facets/facet-value-exclude/facet-value-exclude.pcss';\r\n@import '../../../common/facets/facet-value-box/facet-value-box.pcss';\r\n","import {\r\n  Facet,\r\n  buildFacet,\r\n  FacetState,\r\n  FacetOptions,\r\n  FacetSortCriterion,\r\n  SearchStatus,\r\n  SearchStatusState,\r\n  buildSearchStatus,\r\n  buildFacetConditionsManager,\r\n  FacetResultsMustMatch,\r\n  FacetConditionsManager,\r\n  FacetValueRequest,\r\n  CategoryFacetValueRequest,\r\n} from '@coveo/headless';\r\nimport {\r\n  Component,\r\n  h,\r\n  State,\r\n  Prop,\r\n  Element,\r\n  VNode,\r\n  Fragment,\r\n} from '@stencil/core';\r\nimport {\r\n  AriaLiveRegion,\r\n  FocusTargetController,\r\n} from '../../../../utils/accessibility-utils';\r\nimport {getFieldCaptions} from '../../../../utils/field-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../../utils/initialization-utils';\r\nimport {ArrayProp, MapProp} from '../../../../utils/props-utils';\r\nimport {parseDependsOn} from '../../../common/facets/depends-on';\r\nimport {FacetInfo} from '../../../common/facets/facet-common-store';\r\nimport {FacetContainer} from '../../../common/facets/facet-container/facet-container';\r\nimport {FacetGuard} from '../../../common/facets/facet-guard';\r\nimport {FacetHeader} from '../../../common/facets/facet-header/facet-header';\r\nimport {FacetPlaceholder} from '../../../common/facets/facet-placeholder/facet-placeholder';\r\nimport {announceFacetSearchResultsWithAriaLive} from '../../../common/facets/facet-search/facet-search-aria-live';\r\nimport {FacetSearchInput} from '../../../common/facets/facet-search/facet-search-input';\r\nimport {FacetSearchInputGuard} from '../../../common/facets/facet-search/facet-search-input-guard';\r\nimport {FacetSearchMatches} from '../../../common/facets/facet-search/facet-search-matches';\r\nimport {\r\n  shouldDisplaySearchResults,\r\n  shouldUpdateFacetSearchComponent,\r\n} from '../../../common/facets/facet-search/facet-search-utils';\r\nimport {FacetSearchValue} from '../../../common/facets/facet-search/facet-search-value';\r\nimport {FacetShowMoreLess} from '../../../common/facets/facet-show-more-less/facet-show-more-less';\r\nimport {\r\n  FacetValueProps,\r\n  FacetValue,\r\n} from '../../../common/facets/facet-value/facet-value';\r\nimport {FacetValuesGroup} from '../../../common/facets/facet-values-group/facet-values-group';\r\nimport {Bindings} from '../../atomic-search-interface/atomic-search-interface';\r\nimport {initializePopover} from '../atomic-popover/popover-type';\r\n\r\n/**\r\n * A facet is a list of values for a certain field occurring in the results, ordered using a configurable criteria (e.g., number of occurrences).\r\n * An `atomic-facet` displays a facet of the results for the current query.\r\n *\r\n * @part facet - The wrapper for the entire facet.\r\n * @part placeholder - The placeholder shown before the first search is executed.\r\n *\r\n * @part label-button - The button that displays the label and allows to expand/collapse the facet.\r\n * @part label-button-icon - The label button icon.\r\n * @part clear-button - The button that resets the actively selected facet values.\r\n * @part clear-button-icon - The clear button icon.\r\n *\r\n * @part search-wrapper - The search box wrapper.\r\n * @part search-input - The search box input.\r\n * @part search-icon - The search box submit button.\r\n * @part search-clear-button - The button to clear the search box of input.\r\n * @part more-matches - The label indicating there are more matches for the current facet search query.\r\n * @part no-matches - The label indicating there are no matches for the current facet search query.\r\n * @part matches-query - The highlighted query inside the matches labels.\r\n * @part search-highlight - The highlighted query inside the facet values.\r\n *\r\n * @part values - The facet values container.\r\n * @part value-label - The facet value label, common for all displays.\r\n * @part value-count - The facet value count, common for all displays.\r\n *\r\n * @part value-checkbox - The facet value checkbox, available when display is 'checkbox'.\r\n * @part value-checkbox-checked - The checked facet value checkbox, available when display is 'checkbox'.\r\n * @part value-checkbox-label - The facet value checkbox clickable label, available when display is 'checkbox'.\r\n * @part value-checkbox-icon - The facet value checkbox icon, available when display is 'checkbox'.\r\n * @part value-link - The facet value when display is 'link'.\r\n * @part value-link-selected - The selected facet value when display is 'link'.\r\n * @part value-box - The facet value when display is 'box'.\r\n * @part value-box-selected - The selected facet value when display is 'box'.\r\n * @part value-exclude-button - The button to exclude a facet value, available when display is 'checkbox'.\r\n *\r\n * @part show-more - The show more results button.\r\n * @part show-less - The show less results button.\r\n * @part show-more-less-icon - The icons of the show more & show less buttons.\r\n */\r\n@Component({\r\n  tag: 'atomic-facet',\r\n  styleUrl: 'atomic-facet.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicFacet implements InitializableComponent {\r\n  @InitializeBindings() public bindings!: Bindings;\r\n  public facet!: Facet;\r\n  public searchStatus!: SearchStatus;\r\n  @Element() private host!: HTMLElement;\r\n\r\n  @BindStateToController('facet')\r\n  @State()\r\n  public facetState!: FacetState;\r\n  @BindStateToController('searchStatus')\r\n  @State()\r\n  public searchStatusState!: SearchStatusState;\r\n  @State() public error!: Error;\r\n\r\n  /**\r\n   * Specifies a unique identifier for the facet.\r\n   */\r\n  @Prop({mutable: true, reflect: true}) public facetId?: string;\r\n  /**\r\n   * The non-localized label for the facet.\r\n   * Used in the `atomic-breadbox` component through the bindings store.\r\n   */\r\n  @Prop({reflect: true}) public label = 'no-label';\r\n  /**\r\n   * The field whose values you want to display in the facet.\r\n   */\r\n  @Prop({reflect: true}) public field!: string;\r\n  /**\r\n   * The number of values to request for this facet.\r\n   * Also determines the number of additional values to request each time more values are shown.\r\n   */\r\n  @Prop({reflect: true}) public numberOfValues = 8;\r\n  /**\r\n   * Whether this facet should contain a search box.\r\n   *\r\n   */\r\n  @Prop({reflect: true}) public withSearch = true;\r\n  /**\r\n   * The sort criterion to apply to the returned facet values.\r\n   * Possible values are 'score', 'alphanumeric', 'alphanumericDescending', 'occurrences', and 'automatic'.\r\n   */\r\n  @Prop({reflect: true}) public sortCriteria: FacetSortCriterion = 'automatic';\r\n  /**\r\n   * Specifies how a result must match the selected facet values.\r\n   * Allowed values:\r\n   * - `atLeastOneValue`: A result will match if at least one of the corresponding facet values is selected.\r\n   * - `allValues`: A result will match if all corresponding facet values are selected.\r\n   */\r\n  @Prop({reflect: true}) public resultsMustMatch: FacetResultsMustMatch =\r\n    'atLeastOneValue';\r\n  /**\r\n   * Whether to display the facet values as checkboxes (multiple selection), links (single selection) or boxes (multiple selection).\r\n   * Possible values are 'checkbox', 'link', and 'box'.\r\n   */\r\n  @Prop({reflect: true}) public displayValuesAs: 'checkbox' | 'link' | 'box' =\r\n    'checkbox';\r\n  /**\r\n   * Specifies whether the facet is collapsed. When the facet is the child of an `atomic-facet-manager` component, the facet manager controls this property.\r\n   */\r\n  @Prop({reflect: true, mutable: true}) public isCollapsed = false;\r\n  /**\r\n   * The [heading level](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) to use for the heading over the facet, from 1 to 6.\r\n   */\r\n  @Prop({reflect: true}) public headingLevel = 0;\r\n  /**\r\n   * Whether to exclude the parents of folded results when estimating the result count for each facet value.\r\n   */\r\n  @Prop({reflect: true}) public filterFacetCount = true;\r\n  /**\r\n   * Whether to allow excluding values from the facet.\r\n   */\r\n  @Prop({reflect: true}) public enableExclusion = false;\r\n  /**\r\n   * The maximum number of results to scan in the index to ensure that the facet lists all potential facet values.\r\n   * Note: A high injectionDepth may negatively impact the facet request performance.\r\n   * Minimum: `0`\r\n   * Default: `1000`\r\n   */\r\n  @Prop() public injectionDepth = 1000;\r\n\r\n  /**\r\n   * The required facets and values for this facet to be displayed.\r\n   * @example\r\n   * ```html\r\n   * <atomic-facet facet-id=\"abc\" field=\"objecttype\" ...></atomic-facet>\r\n   *\r\n   * <!-- To show the facet when any value is selected in the facet with id \"abc\": -->\r\n   * <atomic-facet\r\n   *   depends-on-abc\r\n   *   ...\r\n   * ></atomic-facet>\r\n   *\r\n   * <!-- To show the facet when value \"doc\" is selected in the facet with id \"abc\": -->\r\n   * <atomic-facet\r\n   *   depends-on-abc=\"doc\"\r\n   *   ...\r\n   * ></atomic-facet>\r\n   * ```\r\n   */\r\n  @MapProp() @Prop() public dependsOn: Record<string, string> = {};\r\n  /**\r\n   * Specifies an explicit list of `allowedValues` in the Search API request, as a JSON string representation.\r\n   *\r\n   * If you specify a list of values for this option, the facet uses only these values (if they are available in\r\n   * the current result set).\r\n   *\r\n   * @example\r\n   *\r\n   * The following facet only uses the `Contact`, `Account`, and `File` values of the `objecttype` field. Even if the\r\n   * current result set contains other `objecttype` values, such as `Message`, or `Product`, the facet does not use\r\n   * those other values.\r\n   *\r\n   * ```html\r\n   * <atomic-facet field=\"objecttype\" allowed-values='[\"Contact\",\"Account\",\"File\"]'></atomic-facet>\r\n   * ```\r\n   *\r\n   * The maximum amount of allowed values is 25.\r\n   *\r\n   * Default value is `undefined`, and the facet uses all available values for its `field` in the current result set.\r\n   */\r\n  @ArrayProp()\r\n  @Prop({mutable: true})\r\n  public allowedValues: string[] | string = '[]';\r\n\r\n  /**\r\n   * Identifies the facet values that must appear at the top, in this order.\r\n   * This parameter can be used in conjunction with the `sortCriteria` parameter.\r\n   *\r\n   * Facet values not part of the `customSort` list will be sorted according to the `sortCriteria`.\r\n   *\r\n   * @example\r\n   *\r\n   * The following facet will sort the `Contact`, `Account`, and `File` values at the top of the list for the `objecttype` field.\r\n   *\r\n   * If there are more than these 3 values available, the rest of the list will be sorted using `occurrences`.\r\n   *\r\n   * ```html\r\n   * <atomic-facet field=\"objecttype\" custom-sort='[\"Contact\",\"Account\",\"File\"]' sort-criteria='occurrences'></atomic-facet>\r\n   * ```\r\n   * The maximum amount of custom sort values is 25.\r\n   *\r\n   * The default value is `undefined`, and the facet values will be sorted using only the `sortCriteria`.\r\n   */\r\n  @ArrayProp()\r\n  @Prop({mutable: true})\r\n  public customSort: string[] | string = '[]';\r\n\r\n  private showLessFocus?: FocusTargetController;\r\n  private showMoreFocus?: FocusTargetController;\r\n  private headerFocus?: FocusTargetController;\r\n  private facetConditionsManager?: FacetConditionsManager;\r\n\r\n  @AriaLiveRegion('facet-search')\r\n  protected facetSearchAriaMessage!: string;\r\n\r\n  public initialize() {\r\n    this.facet = buildFacet(this.bindings.engine, {options: this.facetOptions});\r\n    this.facetId = this.facet.state.facetId;\r\n    this.searchStatus = buildSearchStatus(this.bindings.engine);\r\n    this.initAriaLive();\r\n    this.initConditionManager();\r\n    this.initPopover();\r\n    this.registerFacet();\r\n  }\r\n\r\n  public disconnectedCallback() {\r\n    this.facetConditionsManager?.stopWatching();\r\n  }\r\n\r\n  public componentShouldUpdate(\r\n    next: unknown,\r\n    prev: unknown,\r\n    propName: keyof AtomicFacet\r\n  ) {\r\n    if (\r\n      this.isFacetState(prev, propName) &&\r\n      this.isFacetState(next, propName)\r\n    ) {\r\n      return shouldUpdateFacetSearchComponent(\r\n        next.facetSearch,\r\n        prev.facetSearch\r\n      );\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <FacetGuard\r\n        enabled={this.facetState.enabled}\r\n        hasError={this.searchStatusState.hasError}\r\n        firstSearchExecuted={this.searchStatusState.firstSearchExecuted}\r\n        hasResults={this.facetState.values.length > 0}\r\n      >\r\n        {this.searchStatusState.firstSearchExecuted ? (\r\n          <FacetContainer>\r\n            <FacetHeader\r\n              i18n={this.bindings.i18n}\r\n              label={this.definedLabel}\r\n              onClearFilters={() => {\r\n                this.focusTargets.header.focusAfterSearch();\r\n                this.facet.deselectAll();\r\n              }}\r\n              numberOfActiveValues={this.activeValues.length}\r\n              isCollapsed={this.isCollapsed}\r\n              headingLevel={this.headingLevel}\r\n              onToggleCollapse={() => (this.isCollapsed = !this.isCollapsed)}\r\n              headerRef={(el) => this.focusTargets.header.setTarget(el)}\r\n            ></FacetHeader>\r\n            {this.renderBody()}\r\n          </FacetContainer>\r\n        ) : (\r\n          <FacetPlaceholder\r\n            numberOfValues={this.numberOfValues}\r\n            isCollapsed={this.isCollapsed}\r\n          />\r\n        )}\r\n      </FacetGuard>\r\n    );\r\n  }\r\n\r\n  private renderBody() {\r\n    if (this.isCollapsed) {\r\n      return;\r\n    }\r\n    return (\r\n      <Fragment>\r\n        <FacetSearchInputGuard\r\n          canShowMoreValues={this.facetState.canShowMoreValues}\r\n          numberOfDisplayedValues={this.facetState.values.length}\r\n          withSearch={this.withSearch}\r\n        >\r\n          <FacetSearchInput\r\n            i18n={this.bindings.i18n}\r\n            label={this.definedLabel}\r\n            onChange={(value) => {\r\n              if (value === '') {\r\n                this.facet.facetSearch.clear();\r\n                return;\r\n              }\r\n              this.facet.facetSearch.updateCaptions(\r\n                getFieldCaptions(this.field, this.bindings.i18n)\r\n              );\r\n              this.facet.facetSearch.updateText(value);\r\n              this.facet.facetSearch.search();\r\n            }}\r\n            onClear={() => this.facet.facetSearch.clear()}\r\n            query={this.facetState.facetSearch.query}\r\n          />\r\n        </FacetSearchInputGuard>\r\n        {shouldDisplaySearchResults(this.facetState.facetSearch)\r\n          ? [this.renderSearchResults(), this.renderMatches()]\r\n          : [this.renderValues(), this.renderShowMoreLess()]}\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  private renderValuesContainer(children: VNode[], query?: string) {\r\n    const classes = `mt-3 ${\r\n      this.displayValuesAs === 'box' ? 'box-container' : ''\r\n    }`;\r\n    return (\r\n      <FacetValuesGroup\r\n        i18n={this.bindings.i18n}\r\n        label={this.label}\r\n        query={query}\r\n      >\r\n        <ul class={classes} part=\"values\">\r\n          {children}\r\n        </ul>\r\n      </FacetValuesGroup>\r\n    );\r\n  }\r\n\r\n  private renderSearchResults() {\r\n    return this.renderValuesContainer(\r\n      this.facet.state.facetSearch.values.map((value) => (\r\n        <FacetSearchValue\r\n          {...this.facetValueProps}\r\n          facetCount={value.count}\r\n          onExclude={() => this.facet.facetSearch.exclude(value)}\r\n          onSelect={() =>\r\n            this.displayValuesAs === 'link'\r\n              ? this.facet.facetSearch.singleSelect(value)\r\n              : this.facet.facetSearch.select(value)\r\n          }\r\n          facetValue={value.rawValue}\r\n        />\r\n      ))\r\n    );\r\n  }\r\n\r\n  private renderValues() {\r\n    return this.renderValuesContainer(\r\n      this.facet.state.values.map((value, i) => {\r\n        const shouldFocusOnShowLessAfterInteraction = i === 0;\r\n        const shouldFocusOnShowMoreAfterInteraction =\r\n          i ===\r\n          (this.sortCriteria === 'automatic'\r\n            ? 0\r\n            : this.facet.state.values.length - this.numberOfValues);\r\n\r\n        return (\r\n          <FacetValue\r\n            {...this.facetValueProps}\r\n            facetCount={value.numberOfResults}\r\n            onExclude={() => this.facet.toggleExclude(value)}\r\n            onSelect={() =>\r\n              this.displayValuesAs === 'link'\r\n                ? this.facet.toggleSingleSelect(value)\r\n                : this.facet.toggleSelect(value)\r\n            }\r\n            facetValue={value.value}\r\n            facetState={value.state}\r\n            setRef={(btn) => {\r\n              if (shouldFocusOnShowLessAfterInteraction) {\r\n                this.showLessFocus?.setTarget(btn);\r\n              }\r\n              if (shouldFocusOnShowMoreAfterInteraction) {\r\n                this.showMoreFocus?.setTarget(btn);\r\n              }\r\n            }}\r\n          />\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  private renderShowMoreLess() {\r\n    return (\r\n      <FacetShowMoreLess\r\n        label={this.label}\r\n        i18n={this.bindings.i18n}\r\n        onShowMore={() => {\r\n          this.focusTargets.showMore.focusAfterSearch();\r\n          this.facet.showMoreValues();\r\n        }}\r\n        onShowLess={() => {\r\n          this.focusTargets.showLess.focusAfterSearch();\r\n          this.facet.showLessValues();\r\n        }}\r\n        canShowMoreValues={this.facet.state.canShowMoreValues}\r\n        canShowLessValues={this.facet.state.canShowLessValues}\r\n      ></FacetShowMoreLess>\r\n    );\r\n  }\r\n\r\n  private renderMatches() {\r\n    return (\r\n      <FacetSearchMatches\r\n        i18n={this.bindings.i18n}\r\n        query={this.facet.state.facetSearch.query}\r\n        numberOfMatches={this.facet.state.facetSearch.values.length}\r\n        hasMoreMatches={this.facet.state.facetSearch.moreValuesAvailable}\r\n      ></FacetSearchMatches>\r\n    );\r\n  }\r\n\r\n  private get activeValues() {\r\n    return this.facet.state.values.filter(({state}) => state !== 'idle');\r\n  }\r\n\r\n  private get facetOptions(): FacetOptions {\r\n    return {\r\n      facetId: this.facetId,\r\n      field: this.field,\r\n      numberOfValues: this.numberOfValues,\r\n      sortCriteria: this.sortCriteria,\r\n      resultsMustMatch: this.resultsMustMatch,\r\n      facetSearch: {numberOfValues: this.numberOfValues},\r\n      filterFacetCount: this.filterFacetCount,\r\n      injectionDepth: this.injectionDepth,\r\n      allowedValues: this.allowedValues.length\r\n        ? [...this.allowedValues]\r\n        : undefined,\r\n      customSort: this.customSort.length ? [...this.customSort] : undefined,\r\n    };\r\n  }\r\n\r\n  private get facetValueProps(): Pick<\r\n    FacetValueProps,\r\n    | 'displayValuesAs'\r\n    | 'facetSearchQuery'\r\n    | 'enableExclusion'\r\n    | 'field'\r\n    | 'i18n'\r\n  > {\r\n    return {\r\n      facetSearchQuery: this.facetState.facetSearch.query,\r\n      displayValuesAs: this.displayValuesAs,\r\n      enableExclusion: this.enableExclusion,\r\n      field: this.field,\r\n      i18n: this.bindings.i18n,\r\n    };\r\n  }\r\n\r\n  private get isHidden() {\r\n    return !this.facet.state.enabled || !this.facet.state.values.length;\r\n  }\r\n\r\n  private initConditionManager() {\r\n    this.facetConditionsManager = buildFacetConditionsManager(\r\n      this.bindings.engine,\r\n      {\r\n        facetId: this.facetId!,\r\n        conditions: parseDependsOn<\r\n          FacetValueRequest | CategoryFacetValueRequest\r\n        >(this.dependsOn),\r\n      }\r\n    );\r\n  }\r\n\r\n  private registerFacet() {\r\n    this.bindings.store.registerFacet('facets', this.facetInfo);\r\n  }\r\n\r\n  private initPopover() {\r\n    initializePopover(this.host, {\r\n      ...this.facetInfo,\r\n      hasValues: () => !!this.facet.state.values.length,\r\n      numberOfActiveValues: () => this.activeValues.length,\r\n    });\r\n  }\r\n\r\n  private initAriaLive() {\r\n    announceFacetSearchResultsWithAriaLive(\r\n      this.facet,\r\n      this.label,\r\n      (msg) => (this.facetSearchAriaMessage = msg),\r\n      this.bindings.i18n\r\n    );\r\n  }\r\n\r\n  private get facetInfo(): FacetInfo {\r\n    return {\r\n      label: () => this.bindings.i18n.t(this.label),\r\n      facetId: this.facetId!,\r\n      element: this.host,\r\n      isHidden: () => this.isHidden,\r\n    };\r\n  }\r\n\r\n  private get definedLabel() {\r\n    return this.label === 'no-label' && this.facetState?.label\r\n      ? this.facetState.label\r\n      : this.label;\r\n  }\r\n\r\n  private get focusTargets(): {\r\n    showLess: FocusTargetController;\r\n    showMore: FocusTargetController;\r\n    header: FocusTargetController;\r\n  } {\r\n    if (!this.showLessFocus) {\r\n      this.showLessFocus = new FocusTargetController(this);\r\n    }\r\n    if (!this.showMoreFocus) {\r\n      this.showMoreFocus = new FocusTargetController(this);\r\n    }\r\n    if (!this.headerFocus) {\r\n      this.headerFocus = new FocusTargetController(this);\r\n    }\r\n\r\n    return {\r\n      showLess: this.showLessFocus,\r\n      showMore: this.showMoreFocus,\r\n      header: this.headerFocus,\r\n    };\r\n  }\r\n\r\n  private isFacetState(state: unknown, propName: string): state is FacetState {\r\n    return (\r\n      propName === 'facetState' &&\r\n      typeof (state as FacetState)?.facetId === 'string'\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}