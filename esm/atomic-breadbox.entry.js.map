{"file":"atomic-breadbox.entry.js","mappings":"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","names":["buildBreadcrumbManager","buildFacetManager"],"sources":["src/components/search/atomic-breadbox/atomic-breadbox.pcss?tag=atomic-breadbox&encapsulation=shadow","src/components/search/atomic-breadbox/atomic-breadbox.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n@import '../../common/atomic-rating/atomic-rating.pcss';\r\n\r\n.max-w-snippet {\r\n  max-width: 30ch;\r\n}\r\n\r\n[part='breadcrumb-label'].excluded,\r\n[part='breadcrumb-value'].excluded {\r\n  text-decoration: line-through;\r\n  color: var(--atomic-error);\r\n}\r\n\r\n/* When excluded, strikethrough line must be continuous, so we must prepend empty character instead of margin */\r\n[part='breadcrumb-value']::before {\r\n  content: '\\00a0';\r\n}\r\n","import {NumberValue, Schema} from '@coveo/bueno';\r\nimport {\r\n  BreadcrumbManagerState,\r\n  BreadcrumbManager,\r\n  buildBreadcrumbManager,\r\n  FacetManager,\r\n  FacetManagerState,\r\n  buildFacetManager,\r\n  FacetValueState,\r\n} from '@coveo/headless';\r\nimport {Component, h, State, Element, VNode, Prop} from '@stencil/core';\r\nimport CloseIcon from '../../../images/close.svg';\r\nimport {FocusTargetController} from '../../../utils/accessibility-utils';\r\nimport {getFieldValueCaption} from '../../../utils/field-utils';\r\nimport {\r\n  InitializableComponent,\r\n  BindStateToController,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {Button} from '../../common/button';\r\nimport {Hidden} from '../../common/hidden';\r\nimport {Bindings} from '../atomic-search-interface/atomic-search-interface';\r\n\r\ninterface Breadcrumb {\r\n  facetId: string;\r\n  label: string;\r\n  formattedValue: string[];\r\n  state?: FacetValueState;\r\n  content?: VNode;\r\n  deselect: () => void;\r\n}\r\n\r\nconst SEPARATOR = ' / ';\r\nconst ELLIPSIS = '...';\r\n\r\n/**\r\n * The `atomic-breadbox` component creates breadcrumbs that display a summary of the currently active facet values.\r\n *\r\n * @part container - The container of the whole component, list & label.\r\n * @part breadcrumb-list-container - The container of the list of breadcrumb buttons.\r\n * @part breadcrumb-list - The list of breadcrumb buttons.\r\n * @part breadcrumb-button - A single breadcrumb button.\r\n * @part breadcrumb-label - The breadcrumb label, associated with the facet.\r\n * @part breadcrumb-value - The breadcrumb formatted value.\r\n * @part breadcrumb-clear - The button to clear individual filters.\r\n * @part show-more - The button to display all breadcrumbs.\r\n * @part show-less - The button to display less breadcrumbs.\r\n * @part label - The \"Filters\" label.\r\n * @part clear - The button to clear all filters.\r\n */\r\n@Component({\r\n  tag: 'atomic-breadbox',\r\n  styleUrl: 'atomic-breadbox.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicBreadbox implements InitializableComponent {\r\n  @InitializeBindings() public bindings!: Bindings;\r\n  private breadcrumbManager!: BreadcrumbManager;\r\n  private resizeObserver?: ResizeObserver;\r\n  private showMore!: HTMLButtonElement;\r\n  private showLess!: HTMLButtonElement;\r\n  private lastRemovedBreadcrumbIndex = 0;\r\n  private numberOfBreadcrumbs = 0;\r\n  private numberOfCollapsedBreadcrumbs = 0;\r\n  private firstExpandedBreadcrumbIndex?: number;\r\n  facetManager!: FacetManager;\r\n\r\n  @Element() private host!: HTMLElement;\r\n\r\n  @BindStateToController('breadcrumbManager')\r\n  @State()\r\n  private breadcrumbManagerState!: BreadcrumbManagerState;\r\n  @BindStateToController('facetManager')\r\n  @State()\r\n  public facetManagerState!: FacetManagerState;\r\n  @State() public error!: Error;\r\n  @State() private isCollapsed = true;\r\n\r\n  private breadcrumbRemovedFocus?: FocusTargetController;\r\n\r\n  private breadcrumbShowMoreFocus?: FocusTargetController;\r\n\r\n  private breadcrumbShowLessFocus?: FocusTargetController;\r\n\r\n  /**\r\n   * This prop allows you to control the display depth\r\n   * of the path by specifying the number of parent or ancestor\r\n   * breadcrumbs links relative to the currently selected value.\r\n   *\r\n   * If the path size is equal to or less than the pathLimit, all values in\r\n   * the path will be displayed without truncation.\r\n   *\r\n   * If the path size exceeds the pathLimit, it will truncate the path by\r\n   * replacing the middle values with ellipses ('...').\r\n   *\r\n   * Minimum: `1`\r\n   * @defaultValue `3`\r\n   */\r\n  @Prop() public pathLimit = 3;\r\n\r\n  public initialize() {\r\n    this.validateProps();\r\n    this.breadcrumbManager = buildBreadcrumbManager(this.bindings.engine);\r\n    this.facetManager = buildFacetManager(this.bindings.engine);\r\n\r\n    if (window.ResizeObserver) {\r\n      this.resizeObserver = new ResizeObserver(() => this.adaptBreadcrumbs());\r\n      this.resizeObserver.observe(this.host.parentElement!);\r\n    }\r\n  }\r\n\r\n  private validateProps() {\r\n    new Schema({\r\n      pathLimit: new NumberValue({\r\n        default: 3,\r\n        min: 1,\r\n        required: false,\r\n      }),\r\n    }).validate({\r\n      pathLimit: this.pathLimit,\r\n    });\r\n  }\r\n\r\n  public disconnectedCallback() {\r\n    this.resizeObserver?.disconnect();\r\n  }\r\n\r\n  private get focusTargets() {\r\n    if (!this.breadcrumbRemovedFocus) {\r\n      this.breadcrumbRemovedFocus = new FocusTargetController(this);\r\n    }\r\n    if (!this.breadcrumbShowLessFocus) {\r\n      this.breadcrumbShowLessFocus = new FocusTargetController(this);\r\n    }\r\n    if (!this.breadcrumbShowMoreFocus) {\r\n      this.breadcrumbShowMoreFocus = new FocusTargetController(this);\r\n    }\r\n    return {\r\n      breadcrumbRemovedFocus: this.breadcrumbRemovedFocus,\r\n      breadcrumbShowLessFocus: this.breadcrumbShowLessFocus,\r\n      breadcrumbShowMoreFocus: this.breadcrumbShowMoreFocus,\r\n    };\r\n  }\r\n\r\n  private get breadcrumbs() {\r\n    return Array.from(\r\n      this.host.shadowRoot!.querySelectorAll('li.breadcrumb')\r\n    ) as HTMLElement[];\r\n  }\r\n\r\n  private hide(element: HTMLElement) {\r\n    element.style.display = 'none';\r\n  }\r\n\r\n  private show(element: HTMLElement) {\r\n    element.style.display = '';\r\n  }\r\n\r\n  private showAllBreadcrumbs() {\r\n    this.breadcrumbs.forEach((breadcrumb) => this.show(breadcrumb));\r\n  }\r\n\r\n  private hideOverflowingBreadcrumbs() {\r\n    let hiddenBreadcrumbs = 0;\r\n    for (\r\n      let i = this.breadcrumbs.length - 1;\r\n      this.isOverflowing && i >= 0;\r\n      i--\r\n    ) {\r\n      this.hide(this.breadcrumbs[i]);\r\n      hiddenBreadcrumbs++;\r\n    }\r\n    this.updateShowMoreValue(hiddenBreadcrumbs);\r\n  }\r\n\r\n  private updateShowLessDisplay() {\r\n    this.show(this.showLess);\r\n    if (this.showLess.offsetTop === 0) {\r\n      this.hide(this.showLess);\r\n    }\r\n  }\r\n\r\n  private adaptBreadcrumbs() {\r\n    if (!this.breadcrumbs.length) {\r\n      return;\r\n    }\r\n    this.showAllBreadcrumbs();\r\n\r\n    if (!this.isCollapsed) {\r\n      this.updateShowLessDisplay();\r\n      return;\r\n    }\r\n\r\n    this.updateShowMoreValue(this.breadcrumbs.length);\r\n    this.hideOverflowingBreadcrumbs();\r\n  }\r\n\r\n  private get isOverflowing() {\r\n    const listElement = this.host.shadowRoot!.querySelector('ul');\r\n    if (!listElement) {\r\n      return false;\r\n    }\r\n    return listElement.scrollWidth > listElement.clientWidth;\r\n  }\r\n\r\n  private limitPath(path: string[]) {\r\n    if (path.length <= this.pathLimit) {\r\n      return path.join(SEPARATOR);\r\n    }\r\n\r\n    if (this.pathLimit === 1 && path.length > 1) {\r\n      return [ELLIPSIS, path[path.length - 1]].join(SEPARATOR);\r\n    }\r\n\r\n    const ellipsedPath = [\r\n      path[0],\r\n      ELLIPSIS,\r\n      ...path.slice(-(this.pathLimit - 1)),\r\n    ];\r\n    return ellipsedPath.join(SEPARATOR);\r\n  }\r\n\r\n  private renderBreadcrumb(\r\n    breadcrumb: Breadcrumb,\r\n    index: number,\r\n    totalBreadcrumbs: number\r\n  ) {\r\n    const classNames = [\r\n      'py-2',\r\n      'px-3',\r\n      'flex',\r\n      'items-center',\r\n      'btn-pill',\r\n      'group',\r\n    ];\r\n\r\n    const fullValue = Array.isArray(breadcrumb.formattedValue)\r\n      ? breadcrumb.formattedValue.join(SEPARATOR)\r\n      : breadcrumb.formattedValue;\r\n    const value = Array.isArray(breadcrumb.formattedValue)\r\n      ? this.limitPath(breadcrumb.formattedValue)\r\n      : breadcrumb.formattedValue;\r\n    const title = `${breadcrumb.label}: ${fullValue}`;\r\n    const isLastBreadcrumb = totalBreadcrumbs === 1;\r\n    const isExclusion = breadcrumb.state === 'excluded';\r\n    const activeColor = isExclusion ? 'error' : 'primary';\r\n\r\n    return (\r\n      <li class=\"breadcrumb\" key={value}>\r\n        <Button\r\n          part=\"breadcrumb-button\"\r\n          style={isExclusion ? 'outline-error' : 'outline-bg-neutral'}\r\n          class={classNames.join(' ')}\r\n          title={title}\r\n          // TODO: [KIT-2939] Replace `remove-filter-on` by `remove-include-filter-on`.\r\n          ariaLabel={this.bindings.i18n.t(\r\n            isExclusion ? 'remove-exclusion-filter-on' : 'remove-filter-on',\r\n            {\r\n              value: title,\r\n            }\r\n          )}\r\n          onClick={() => {\r\n            if (isLastBreadcrumb) {\r\n              this.bindings.store.state.resultList?.focusOnFirstResultAfterNextSearch();\r\n            } else if (this.numberOfBreadcrumbs > 1) {\r\n              this.focusTargets.breadcrumbRemovedFocus.focusAfterSearch();\r\n            }\r\n\r\n            this.lastRemovedBreadcrumbIndex = index;\r\n            breadcrumb.deselect();\r\n          }}\r\n          ref={(ref) => {\r\n            if (this.lastRemovedBreadcrumbIndex === index) {\r\n              this.focusTargets.breadcrumbRemovedFocus.setTarget(ref);\r\n            }\r\n            if (this.firstExpandedBreadcrumbIndex === index) {\r\n              this.focusTargets.breadcrumbShowMoreFocus.setTarget(ref);\r\n            }\r\n          }}\r\n        >\r\n          <span\r\n            part=\"breadcrumb-label\"\r\n            class={`max-w-snippet truncate group-hover:text-${activeColor} group-focus-visible:text-${activeColor} ${breadcrumb.state}`}\r\n          >\r\n            {this.bindings.i18n.t('with-colon', {text: breadcrumb.label})}\r\n          </span>\r\n          <span\r\n            part=\"breadcrumb-value\"\r\n            class={\r\n              breadcrumb.content\r\n                ? ''\r\n                : `max-w-snippet truncate ${breadcrumb.state}`\r\n            }\r\n          >\r\n            {breadcrumb.content ?? value}\r\n          </span>\r\n          <atomic-icon\r\n            part=\"breadcrumb-clear\"\r\n            class=\"w-2.5 h-2.5 ml-2 mt-px\"\r\n            icon={CloseIcon}\r\n          ></atomic-icon>\r\n        </Button>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  private updateShowMoreValue(value: number) {\r\n    this.numberOfCollapsedBreadcrumbs = value;\r\n    if (value === 0) {\r\n      this.hide(this.showMore);\r\n      return;\r\n    }\r\n\r\n    this.show(this.showMore);\r\n    this.showMore.textContent = `+ ${value.toLocaleString(\r\n      this.bindings.i18n.language\r\n    )}`;\r\n\r\n    this.showMore.setAttribute(\r\n      'aria-label',\r\n      this.bindings.i18n.t('show-n-more-filters', {\r\n        value,\r\n      })\r\n    );\r\n  }\r\n\r\n  private renderShowMore() {\r\n    return (\r\n      <li key=\"show-more\">\r\n        <Button\r\n          ref={(ref) => {\r\n            this.focusTargets.breadcrumbShowLessFocus.setTarget(ref!);\r\n            this.showMore = ref!;\r\n          }}\r\n          part=\"show-more\"\r\n          style=\"outline-primary\"\r\n          class=\"p-2 btn-pill whitespace-nowrap\"\r\n          onClick={() => {\r\n            this.firstExpandedBreadcrumbIndex =\r\n              this.numberOfBreadcrumbs - this.numberOfCollapsedBreadcrumbs;\r\n            this.focusTargets.breadcrumbShowMoreFocus.focusOnNextTarget();\r\n            this.isCollapsed = false;\r\n          }}\r\n        ></Button>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  private renderShowLess() {\r\n    return (\r\n      <li key=\"show-less\">\r\n        <Button\r\n          ref={(ref) => (this.showLess = ref!)}\r\n          part=\"show-less\"\r\n          style=\"outline-primary\"\r\n          text={this.bindings.i18n.t('show-less')}\r\n          class=\"p-2 btn-pill\"\r\n          onClick={() => {\r\n            this.focusTargets.breadcrumbShowLessFocus.focusOnNextTarget();\r\n            this.isCollapsed = true;\r\n          }}\r\n        ></Button>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  private renderClearAll() {\r\n    const isFocusTarget =\r\n      this.lastRemovedBreadcrumbIndex === this.numberOfBreadcrumbs;\r\n    return (\r\n      <li key=\"clear-all\">\r\n        <Button\r\n          part=\"clear\"\r\n          style=\"text-primary\"\r\n          text={this.bindings.i18n.t('clear')}\r\n          class=\"p-2 btn-pill\"\r\n          ariaLabel={this.bindings.i18n.t('clear-all-filters')}\r\n          onClick={async () => {\r\n            this.breadcrumbManager.deselectAll();\r\n            this.bindings.store.state.resultList?.focusOnFirstResultAfterNextSearch();\r\n          }}\r\n          ref={\r\n            isFocusTarget\r\n              ? this.focusTargets.breadcrumbRemovedFocus.setTarget\r\n              : undefined\r\n          }\r\n        ></Button>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  private get facetBreadcrumbs(): Breadcrumb[] {\r\n    return this.breadcrumbManagerState.facetBreadcrumbs\r\n      .map(({facetId, field, values}) =>\r\n        values.map((value) => ({value, facetId, field}))\r\n      )\r\n      .flat()\r\n      .filter(({facetId}) => this.bindings.store.state.facets[facetId])\r\n      .map(({value, facetId, field}) => ({\r\n        facetId,\r\n        label: this.bindings.store.state.facets[facetId]?.label(),\r\n        state: value.value.state,\r\n        deselect: value.deselect,\r\n        formattedValue: [\r\n          getFieldValueCaption(field, value.value.value, this.bindings.i18n),\r\n        ],\r\n      }));\r\n  }\r\n\r\n  private get categoryFacetBreadcrumbs(): Breadcrumb[] {\r\n    return this.breadcrumbManagerState.categoryFacetBreadcrumbs.map(\r\n      ({facetId, field, path, deselect}) => ({\r\n        facetId,\r\n        label: this.bindings.store.state.categoryFacets[facetId].label(),\r\n        deselect: deselect,\r\n        formattedValue: path.map((pathValue) =>\r\n          getFieldValueCaption(field, pathValue.value, this.bindings.i18n)\r\n        ),\r\n      })\r\n    );\r\n  }\r\n\r\n  private get numericFacetBreadcrumbs(): Breadcrumb[] {\r\n    return this.breadcrumbManagerState.numericFacetBreadcrumbs\r\n      .map(({facetId, field, values}) =>\r\n        values.map((value) => ({value, facetId, field}))\r\n      )\r\n      .flat()\r\n      .map(({value, facetId}) => ({\r\n        facetId,\r\n        label: this.bindings.store.state.numericFacets[facetId].label(),\r\n        state: value.value.state,\r\n        deselect: value.deselect,\r\n        formattedValue: [\r\n          this.bindings.store.state.numericFacets[facetId].format(value.value),\r\n        ],\r\n        content: this.bindings.store.state.numericFacets[facetId].content?.(\r\n          value.value\r\n        ),\r\n      }));\r\n  }\r\n\r\n  private get dateFacetBreadcrumbs(): Breadcrumb[] {\r\n    return this.breadcrumbManagerState.dateFacetBreadcrumbs\r\n      .map(({facetId, field, values}) =>\r\n        values.map((value) => ({value, facetId, field}))\r\n      )\r\n      .flat()\r\n      .map(({value, facetId}) => ({\r\n        facetId,\r\n        label: this.bindings.store.state.dateFacets[facetId].label(),\r\n        state: value.value.state,\r\n        deselect: value.deselect,\r\n        formattedValue: [\r\n          this.bindings.store.state.dateFacets[facetId].format(value.value),\r\n        ],\r\n      }));\r\n  }\r\n\r\n  private get automaticFacetBreadcrumbs(): Breadcrumb[] {\r\n    return this.breadcrumbManagerState.automaticFacetBreadcrumbs\r\n      .flatMap(({facetId, field, label, values}) =>\r\n        values.map((value) => ({value, facetId, field, label}))\r\n      )\r\n      .map(({value, facetId, field, label}) => ({\r\n        facetId,\r\n        state: value.value.state,\r\n        label: label ? label : field,\r\n        deselect: value.deselect,\r\n        formattedValue: [\r\n          getFieldValueCaption(field, value.value.value, this.bindings.i18n),\r\n        ],\r\n      }));\r\n  }\r\n\r\n  private get allBreadcrumbs(): Breadcrumb[] {\r\n    return [\r\n      ...this.facetBreadcrumbs,\r\n      ...this.categoryFacetBreadcrumbs,\r\n      ...this.numericFacetBreadcrumbs,\r\n      ...this.dateFacetBreadcrumbs,\r\n      ...this.automaticFacetBreadcrumbs,\r\n    ];\r\n  }\r\n\r\n  private renderBreadcrumbs(allBreadcrumbs: Breadcrumb[]) {\r\n    const sortedBreadcrumbs = allBreadcrumbs.sort((a, b) => {\r\n      const indexA = this.facetManagerState.facetIds.indexOf(a.facetId);\r\n      const indexB = this.facetManagerState.facetIds.indexOf(b.facetId);\r\n      return indexA - indexB;\r\n    });\r\n    this.numberOfBreadcrumbs = sortedBreadcrumbs.length;\r\n\r\n    return [\r\n      sortedBreadcrumbs.map((breadcrumb, i) =>\r\n        this.renderBreadcrumb(breadcrumb, i, allBreadcrumbs.length)\r\n      ),\r\n      this.isCollapsed && this.renderShowMore(),\r\n      !this.isCollapsed && this.renderShowLess(),\r\n      this.renderClearAll(),\r\n    ];\r\n  }\r\n\r\n  public render() {\r\n    const allBreadcrumbs = this.allBreadcrumbs;\r\n\r\n    if (!allBreadcrumbs.length) {\r\n      return <Hidden></Hidden>;\r\n    }\r\n\r\n    return (\r\n      <div part=\"container\" class=\"text-on-background text-sm flex\">\r\n        <span part=\"label\" class=\"font-bold py-[0.625rem] pl-0 pr-2\">\r\n          {this.bindings.i18n.t('with-colon', {\r\n            text: this.bindings.i18n.t('filters'),\r\n          })}\r\n        </span>\r\n        <div part=\"breadcrumb-list-container\" class=\"relative grow\">\r\n          <ul\r\n            part=\"breadcrumb-list\"\r\n            class={`flex gap-1 ${\r\n              this.isCollapsed ? 'flex-nowrap absolute w-full' : 'flex-wrap'\r\n            }`}\r\n          >\r\n            {this.renderBreadcrumbs(allBreadcrumbs)}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public componentDidRender() {\r\n    this.adaptBreadcrumbs();\r\n  }\r\n}\r\n"],"version":3}