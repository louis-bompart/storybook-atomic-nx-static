import{O as n,g as u,k as w,v as h}from"./atomic-breadbox.new.stories-D03zBEda.js";import{e as y}from"./p-1580513b-De1d4bsn.js";import{b as k}from"./p-9935af75-BsJQUBM3.js";const A=()=>u(w,{class:"atomic-hidden"}),$="atomic/initializeComponent",m=["atomic-recs-interface","atomic-search-interface","atomic-commerce-interface","atomic-relevance-inspector","atomic-insight-interface","atomic-commerce-interface","atomic-external"];class z extends Error{constructor(t){super(`The "${t}" element must be the child of the following elements: ${m.join(", ")}`)}}function U(i){if(i.shadowRoot){if(window.applyFocusVisiblePolyfill){window.applyFocusVisiblePolyfill(i.shadowRoot);return}window.addEventListener("focus-visible-polyfill-ready",()=>{var t;return(t=window.applyFocusVisiblePolyfill)===null||t===void 0?void 0:t.call(window,i.shadowRoot)},{once:!0})}}const c="data-atomic-rendered",d="data-atomic-loaded";function D({forceUpdate:i}={}){return(t,o)=>{const{componentWillLoad:l,render:a,componentDidRender:r,componentDidLoad:s,disconnectedCallback:f}=t;let b=()=>{};if(o!=="bindings")return console.error(`The InitializeBindings decorator should be used on a property called "bindings", and not "${o}"`,t);t.componentWillLoad=function(){const e=n(this);e.setAttribute(c,"false"),e.setAttribute(d,"false");const g=y($,C=>{this.bindings=C;const p=()=>h(this);this.bindings.i18n.on("languageChanged",p),b=()=>this.bindings.i18n.off("languageChanged",p);try{this.initialize?(this.initialize(),i&&h(this)):h(this)}catch(v){this.error=v}});if(e.dispatchEvent(g),!k(e,m.join(", "))){this.error=new z(e.nodeName.toLowerCase());return}return l&&l.call(this)},t.render=function(){return this.error?u("atomic-component-error",{element:n(this),error:this.error}):this.bindings?(n(this).setAttribute(c,"true"),a&&a.call(this)):u(A,null)},t.disconnectedCallback=function(){const e=n(this);e.setAttribute(c,"false"),e.setAttribute(d,"false"),b(),f&&f.call(this)},t.componentDidRender=function(){const e=n(this);e.getAttribute(c)!=="false"&&(r&&r.call(this),e.getAttribute(d)==="false"&&(e.setAttribute(d,"true"),U(n(this)),s&&s.call(this)))},t.componentDidLoad=function(){}}}function T(i,t){return(o,l)=>{const{disconnectedCallback:a,initialize:r}=o;o.initialize=function(){if(r&&r.call(this),!r)return console.error(`ControllerState: The "initialize" method has to be defined and instantiate a controller for the property ${i}`,o);if(this[i]){if(t!=null&&t.onUpdateCallbackMethod&&!this[t.onUpdateCallbackMethod])return console.error(`ControllerState: The onUpdateCallbackMethod property "${t.onUpdateCallbackMethod}" is not defined`,o);this.unsubscribeController=this[i].subscribe(()=>{this[l]=this[i].state,t!=null&&t.onUpdateCallbackMethod&&this[t.onUpdateCallbackMethod]()})}},o.disconnectedCallback=function(){var s;!n(this).isConnected&&((s=this.unsubscribeController)===null||s===void 0||s.call(this)),a&&a.call(this)}}}export{$ as a,U as d,D as m,T as p,A as r};
