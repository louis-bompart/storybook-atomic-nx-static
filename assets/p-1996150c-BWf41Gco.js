import{M as a}from"./p-abea0bd2-55DIQVI1.js";import{g as f}from"./preview-C4e5QyPH.js";import{S as p,d as h,m as w}from"./p-f5723aee-BNyovPuY.js";import{t as v}from"./p-4328fcc3-C1crOUOq.js";import{i as y}from"./p-053b4bcb-DAPY_EyZ.js";function g(t){return y(t)?"section":h(t)?w(t)&&t.tagName.toLowerCase()===v?"table-column-definition":"other":"metadata"}function M(t){return p(Array.from(t),e=>g(e))}class S{constructor({host:e,setError:o,validParents:n,allowEmpty:l=!1}){this.matchConditions=[],this.host=e,this.validateTemplate(e,o,n,l)}validateTemplate(e,o,n,l=!0){var c;const d=n.map(m=>m.toUpperCase()).includes(((c=e.parentElement)===null||c===void 0?void 0:c.nodeName)||""),u=e.nodeName.toLowerCase();if(!d){o(new Error(`The "${u}" component has to be the child of one of the following: ${n.map(m=>`"${m.toLowerCase()}"`).join(", ")}.`));return}const r=e.querySelector("template");if(!r){o(new Error(`The "${u}" component has to contain a "template" element as a child.`));return}if(!l&&!r.innerHTML.trim()){o(new Error(`The "template" tag inside "${u}" cannot be empty.`));return}r.content.querySelector("script")&&console.warn('Any "script" tags defined inside of "template" elements are not supported and will not be executed when the results are rendered.',e);const{section:i,other:s}=M(r.content.childNodes);i!=null&&i.length&&(s!=null&&s.length)&&console.warn("Result templates should only contain section elements or non-section elements. Future updates could unpredictably affect this result template.",e,{sectionNodes:i,otherNodes:s})}getTemplate(e,o){return o?null:{conditions:e.concat(this.matchConditions),content:N(this.host).content,priority:1}}renderIfError(e){if(e)return f("atomic-component-error",{element:this.host,error:e})}}function N(t){return t.querySelector("template")}function $(t,e){const o=[];for(const n in t)o.push(a.fieldMustMatch(n,t[n]));for(const n in e)o.push(a.fieldMustNotMatch(n,e[n]));return o}function q(t,e){const o=[];if(t){const n=t.split(",");o.push(a.fieldsMustBeDefined(n))}if(e){const n=e.split(",");o.push(a.fieldsMustNotBeDefined(n))}return o}export{S as l,q as m,$ as u};
