import{n as zu,a as Nu}from"./index-B-ZmIc0D.js";/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bu=Object.create,fr=Object.defineProperty,Hu=Object.getOwnPropertyDescriptor,Yu=Object.getOwnPropertyNames,Wu=Object.getPrototypeOf,Gu=Object.prototype.hasOwnProperty,Ju=(e,t,r)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ku=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),se=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Zu=(e,t)=>{for(var r in t)fr(e,r,{get:t[r],enumerable:!0})},Xu=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Yu(t))!Gu.call(e,n)&&n!==r&&fr(e,n,{get:()=>t[n],enumerable:!(a=Hu(t,n))||a.enumerable});return e},Ie=(e,t,r)=>(r=e!=null?Bu(Wu(e)):{},Xu(!e||!e.__esModule?fr(r,"default",{value:e,enumerable:!0}):r,e)),Vi=(e,t,r)=>Ju(e,t+"",r),ec=se((e,t)=>{function r(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}t.exports=a;function a(n,i,s){var o=s&&s.stringify||r,u=1;if(typeof n=="object"&&n!==null){var c=i.length+u;if(c===1)return n;var l=new Array(c);l[0]=o(n);for(var f=1;f<c;f++)l[f]=o(i[f]);return l.join(" ")}if(typeof n!="string")return n;var h=i.length;if(h===0)return n;for(var w="",q=1-u,d=-1,S=n&&n.length||0,C=0;C<S;){if(n.charCodeAt(C)===37&&C+1<S){switch(d=d>-1?d:0,n.charCodeAt(C+1)){case 100:case 102:if(q>=h||i[q]==null)break;d<C&&(w+=n.slice(d,C)),w+=Number(i[q]),d=C+2,C++;break;case 105:if(q>=h||i[q]==null)break;d<C&&(w+=n.slice(d,C)),w+=Math.floor(Number(i[q])),d=C+2,C++;break;case 79:case 111:case 106:if(q>=h||i[q]===void 0)break;d<C&&(w+=n.slice(d,C));var E=typeof i[q];if(E==="string"){w+="'"+i[q]+"'",d=C+2,C++;break}if(E==="function"){w+=i[q].name||"<anonymous>",d=C+2,C++;break}w+=o(i[q]),d=C+2,C++;break;case 115:if(q>=h)break;d<C&&(w+=n.slice(d,C)),w+=String(i[q]),d=C+2,C++;break;case 37:d<C&&(w+=n.slice(d,C)),w+="%",d=C+2,C++,q--;break}++q}++C}return d===-1?n:(d<S&&(w+=n.slice(d)),w)}}),_i=se((e,t)=>{var r=ec();t.exports=h;var a=O().console||{},n={mapHttpRequest:re,mapHttpResponse:re,wrapRequestSerializer:Q,wrapResponseSerializer:Q,wrapErrorSerializer:Q,req:re,res:re,err:L,errWithCause:L};function i(p,m){return p==="silent"?1/0:m.levels.values[p]}var s=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),u={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(p,m){let I={logger:m,parent:p[o]};m[o]=I}function l(p,m,I){let A={};m.forEach(R=>{A[R]=I[R]?I[R]:a[R]||a[u[R]||"log"]||P}),p[s]=A}function f(p,m){return Array.isArray(p)?p.filter(function(I){return I!=="!stdSerializers.err"}):p===!0?Object.keys(m):!1}function h(p){p=p||{},p.browser=p.browser||{};let m=p.browser.transmit;if(m&&typeof m.send!="function")throw Error("pino: transmit option must have a send function");let I=p.browser.write||a;p.browser.write&&(p.browser.asObject=!0);let A=p.serializers||{},R=f(p.browser.serialize,A),_=p.browser.serialize;Array.isArray(p.browser.serialize)&&p.browser.serialize.indexOf("!stdSerializers.err")>-1&&(_=!1);let Y=Object.keys(p.customLevels||{}),B=["error","fatal","warn","info","debug","trace"].concat(Y);typeof I=="function"&&B.forEach(function(ne){I[ne]=I}),(p.enabled===!1||p.browser.disabled)&&(p.level="silent");let G=p.level||"info",D=Object.create(I);D.log||(D.log=P),l(D,B,I),c({},D),Object.defineProperty(D,"levelVal",{get:pe}),Object.defineProperty(D,"level",{get:ke,set:oe});let ae={transmit:m,serialize:R,asObject:p.browser.asObject,formatters:p.browser.formatters,levels:B,timestamp:Z(p)};D.levels=w(p),D.level=G,D.setMaxListeners=D.getMaxListeners=D.emit=D.addListener=D.on=D.prependListener=D.once=D.prependOnceListener=D.removeListener=D.removeAllListeners=D.listeners=D.listenerCount=D.eventNames=D.write=D.flush=P,D.serializers=A,D._serialize=R,D._stdErrSerialize=_,D.child=me,m&&(D._logEvent=K());function pe(){return i(this.level,this)}function ke(){return this._level}function oe(ne){if(ne!=="silent"&&!this.levels.values[ne])throw Error("unknown level "+ne);this._level=ne,S(this,ae,D,"error"),S(this,ae,D,"fatal"),S(this,ae,D,"warn"),S(this,ae,D,"info"),S(this,ae,D,"debug"),S(this,ae,D,"trace"),Y.forEach(ve=>{S(this,ae,D,ve)})}function me(ne,ve){if(!ne)throw new Error("missing bindings for child Pino");ve=ve||{},R&&ne.serializers&&(ve.serializers=ne.serializers);let nt=ve.serializers;if(R&&nt){var _e=Object.assign({},A,nt),kn=p.browser.serialize===!0?Object.keys(_e):R;delete ne.serializers,W([ne],kn,_e,this._stdErrSerialize)}function On(An){this._childLevel=(An._childLevel|0)+1,this.bindings=ne,_e&&(this.serializers=_e,this._serialize=kn),m&&(this._logEvent=K([].concat(An._logEvent.bindings,ne)))}On.prototype=this;let Er=new On(this);return c(this,Er),Er.level=this.level,Er}return D}function w(p){let m=p.customLevels||{},I=Object.assign({},h.levels.values,m),A=Object.assign({},h.levels.labels,q(m));return{values:I,labels:A}}function q(p){let m={};return Object.keys(p).forEach(function(I){m[p[I]]=I}),m}h.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},h.stdSerializers=n,h.stdTimeFunctions=Object.assign({},{nullTime:ce,epochTime:be,unixTime:U,isoTime:x});function d(p){let m=[];p.bindings&&m.push(p.bindings);let I=p[o];for(;I.parent;)I=I.parent,I.logger.bindings&&m.push(I.logger.bindings);return m.reverse()}function S(p,m,I,A){if(Object.defineProperty(p,A,{value:i(p.level,I)>i(A,I)?P:I[s][A],writable:!0,enumerable:!0,configurable:!0}),!m.transmit&&p[A]===P)return;p[A]=E(p,m,I,A);let R=d(p);R.length!==0&&(p[A]=C(R,p[A]))}function C(p,m){return function(){return m.apply(this,[...p,...arguments])}}function E(p,m,I,A){return function(R){return function(){let _=m.timestamp(),Y=new Array(arguments.length),B=Object.getPrototypeOf&&Object.getPrototypeOf(this)===a?a:this;for(var G=0;G<Y.length;G++)Y[G]=arguments[G];if(m.serialize&&!m.asObject&&W(Y,this._serialize,this.serializers,this._stdErrSerialize),m.asObject||m.formatters?R.call(B,T(this,A,Y,_,m.formatters)):R.apply(B,Y),m.transmit){let D=m.transmit.level||p._level,ae=I.levels.values[D],pe=I.levels.values[A];if(pe<ae)return;V(this,{ts:_,methodLevel:A,methodValue:pe,transmitLevel:D,transmitValue:I.levels.values[m.transmit.level||p._level],send:m.transmit.send,val:i(p._level,I)},Y)}}}(p[s][A])}function T(p,m,I,A,R={}){let{level:_=()=>p.levels.values[m],log:Y=pe=>pe}=R;p._serialize&&W(I,p._serialize,p.serializers,p._stdErrSerialize);let B=I.slice(),G=B[0],D={};A&&(D.time=A),D.level=_(m,p.levels.values[m]);let ae=(p._childLevel|0)+1;if(ae<1&&(ae=1),G!==null&&typeof G=="object"){for(;ae--&&typeof B[0]=="object";)Object.assign(D,B.shift());G=B.length?r(B.shift(),B):void 0}else typeof G=="string"&&(G=r(B.shift(),B));return G!==void 0&&(D.msg=G),Y(D)}function W(p,m,I,A){for(let R in p)if(A&&p[R]instanceof Error)p[R]=h.stdSerializers.err(p[R]);else if(typeof p[R]=="object"&&!Array.isArray(p[R]))for(let _ in p[R])m&&m.indexOf(_)>-1&&_ in I&&(p[R][_]=I[_](p[R][_]))}function V(p,m,I){let A=m.send,R=m.ts,_=m.methodLevel,Y=m.methodValue,B=m.val,G=p._logEvent.bindings;W(I,p._serialize||Object.keys(p.serializers),p.serializers,p._stdErrSerialize===void 0?!0:p._stdErrSerialize),p._logEvent.ts=R,p._logEvent.messages=I.filter(function(D){return G.indexOf(D)===-1}),p._logEvent.level.label=_,p._logEvent.level.value=Y,A(_,p._logEvent,B),p._logEvent=K(G)}function K(p){return{ts:0,messages:[],bindings:p||[],level:{label:"",value:0}}}function L(p){let m={type:p.constructor.name,msg:p.message,stack:p.stack};for(let I in p)m[I]===void 0&&(m[I]=p[I]);return m}function Z(p){return typeof p.timestamp=="function"?p.timestamp:p.timestamp===!1?ce:be}function re(){return{}}function Q(p){return p}function P(){}function ce(){return!1}function be(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function O(){function p(m){return typeof m<"u"&&m}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return p(self)||p(window)||p(this)||{}}}t.exports.default=h,t.exports.pino=h}),Aa=se((e,t)=>{(function(r,a){typeof e=="object"&&typeof t<"u"?t.exports=a():typeof define=="function"&&define.amd?define(a):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=a()})(e,function(){var r=1e3,a=6e4,n=36e5,i="millisecond",s="second",o="minute",u="hour",c="day",l="week",f="month",h="quarter",w="year",q="date",d="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var x=["th","st","nd","rd"],O=U%100;return"["+U+(x[(O-20)%10]||x[O]||x[0])+"]"}},T=function(U,x,O){var p=String(U);return!p||p.length>=x?U:""+Array(x+1-p.length).join(O)+U},W={s:T,z:function(U){var x=-U.utcOffset(),O=Math.abs(x),p=Math.floor(O/60),m=O%60;return(x<=0?"+":"-")+T(p,2,"0")+":"+T(m,2,"0")},m:function U(x,O){if(x.date()<O.date())return-U(O,x);var p=12*(O.year()-x.year())+(O.month()-x.month()),m=x.clone().add(p,f),I=O-m<0,A=x.clone().add(p+(I?-1:1),f);return+(-(p+(O-m)/(I?m-A:A-m))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:f,y:w,w:l,d:c,D:q,h:u,m:o,s,ms:i,Q:h}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},V="en",K={};K[V]=E;var L="$isDayjsObject",Z=function(U){return U instanceof ce||!(!U||!U[L])},re=function U(x,O,p){var m;if(!x)return V;if(typeof x=="string"){var I=x.toLowerCase();K[I]&&(m=I),O&&(K[I]=O,m=I);var A=x.split("-");if(!m&&A.length>1)return U(A[0])}else{var R=x.name;K[R]=x,m=R}return!p&&m&&(V=m),m||!p&&V},Q=function(U,x){if(Z(U))return U.clone();var O=typeof x=="object"?x:{};return O.date=U,O.args=arguments,new ce(O)},P=W;P.l=re,P.i=Z,P.w=function(U,x){return Q(U,{locale:x.$L,utc:x.$u,x:x.$x,$offset:x.$offset})};var ce=function(){function U(O){this.$L=re(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[L]=!0}var x=U.prototype;return x.parse=function(O){this.$d=function(p){var m=p.date,I=p.utc;if(m===null)return new Date(NaN);if(P.u(m))return new Date;if(m instanceof Date)return new Date(m);if(typeof m=="string"&&!/Z$/i.test(m)){var A=m.match(S);if(A){var R=A[2]-1||0,_=(A[7]||"0").substring(0,3);return I?new Date(Date.UTC(A[1],R,A[3]||1,A[4]||0,A[5]||0,A[6]||0,_)):new Date(A[1],R,A[3]||1,A[4]||0,A[5]||0,A[6]||0,_)}}return new Date(m)}(O),this.init()},x.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},x.$utils=function(){return P},x.isValid=function(){return this.$d.toString()!==d},x.isSame=function(O,p){var m=Q(O);return this.startOf(p)<=m&&m<=this.endOf(p)},x.isAfter=function(O,p){return Q(O)<this.startOf(p)},x.isBefore=function(O,p){return this.endOf(p)<Q(O)},x.$g=function(O,p,m){return P.u(O)?this[p]:this.set(m,O)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(O,p){var m=this,I=!!P.u(p)||p,A=P.p(O),R=function(ke,oe){var me=P.w(m.$u?Date.UTC(m.$y,oe,ke):new Date(m.$y,oe,ke),m);return I?me:me.endOf(c)},_=function(ke,oe){return P.w(m.toDate()[ke].apply(m.toDate("s"),(I?[0,0,0,0]:[23,59,59,999]).slice(oe)),m)},Y=this.$W,B=this.$M,G=this.$D,D="set"+(this.$u?"UTC":"");switch(A){case w:return I?R(1,0):R(31,11);case f:return I?R(1,B):R(0,B+1);case l:var ae=this.$locale().weekStart||0,pe=(Y<ae?Y+7:Y)-ae;return R(I?G-pe:G+(6-pe),B);case c:case q:return _(D+"Hours",0);case u:return _(D+"Minutes",1);case o:return _(D+"Seconds",2);case s:return _(D+"Milliseconds",3);default:return this.clone()}},x.endOf=function(O){return this.startOf(O,!1)},x.$set=function(O,p){var m,I=P.p(O),A="set"+(this.$u?"UTC":""),R=(m={},m[c]=A+"Date",m[q]=A+"Date",m[f]=A+"Month",m[w]=A+"FullYear",m[u]=A+"Hours",m[o]=A+"Minutes",m[s]=A+"Seconds",m[i]=A+"Milliseconds",m)[I],_=I===c?this.$D+(p-this.$W):p;if(I===f||I===w){var Y=this.clone().set(q,1);Y.$d[R](_),Y.init(),this.$d=Y.set(q,Math.min(this.$D,Y.daysInMonth())).$d}else R&&this.$d[R](_);return this.init(),this},x.set=function(O,p){return this.clone().$set(O,p)},x.get=function(O){return this[P.p(O)]()},x.add=function(O,p){var m,I=this;O=Number(O);var A=P.p(p),R=function(B){var G=Q(I);return P.w(G.date(G.date()+Math.round(B*O)),I)};if(A===f)return this.set(f,this.$M+O);if(A===w)return this.set(w,this.$y+O);if(A===c)return R(1);if(A===l)return R(7);var _=(m={},m[o]=a,m[u]=n,m[s]=r,m)[A]||1,Y=this.$d.getTime()+O*_;return P.w(Y,this)},x.subtract=function(O,p){return this.add(-1*O,p)},x.format=function(O){var p=this,m=this.$locale();if(!this.isValid())return m.invalidDate||d;var I=O||"YYYY-MM-DDTHH:mm:ssZ",A=P.z(this),R=this.$H,_=this.$m,Y=this.$M,B=m.weekdays,G=m.months,D=m.meridiem,ae=function(oe,me,ne,ve){return oe&&(oe[me]||oe(p,I))||ne[me].slice(0,ve)},pe=function(oe){return P.s(R%12||12,oe,"0")},ke=D||function(oe,me,ne){var ve=oe<12?"AM":"PM";return ne?ve.toLowerCase():ve};return I.replace(C,function(oe,me){return me||function(ne){switch(ne){case"YY":return String(p.$y).slice(-2);case"YYYY":return P.s(p.$y,4,"0");case"M":return Y+1;case"MM":return P.s(Y+1,2,"0");case"MMM":return ae(m.monthsShort,Y,G,3);case"MMMM":return ae(G,Y);case"D":return p.$D;case"DD":return P.s(p.$D,2,"0");case"d":return String(p.$W);case"dd":return ae(m.weekdaysMin,p.$W,B,2);case"ddd":return ae(m.weekdaysShort,p.$W,B,3);case"dddd":return B[p.$W];case"H":return String(R);case"HH":return P.s(R,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return ke(R,_,!0);case"A":return ke(R,_,!1);case"m":return String(_);case"mm":return P.s(_,2,"0");case"s":return String(p.$s);case"ss":return P.s(p.$s,2,"0");case"SSS":return P.s(p.$ms,3,"0");case"Z":return A}return null}(oe)||A.replace(":","")})},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(O,p,m){var I,A=this,R=P.p(p),_=Q(O),Y=(_.utcOffset()-this.utcOffset())*a,B=this-_,G=function(){return P.m(A,_)};switch(R){case w:I=G()/12;break;case f:I=G();break;case h:I=G()/3;break;case l:I=(B-Y)/6048e5;break;case c:I=(B-Y)/864e5;break;case u:I=B/n;break;case o:I=B/a;break;case s:I=B/r;break;default:I=B}return m?I:P.a(I)},x.daysInMonth=function(){return this.endOf(f).$D},x.$locale=function(){return K[this.$L]},x.locale=function(O,p){if(!O)return this.$L;var m=this.clone(),I=re(O,p,!0);return I&&(m.$L=I),m},x.clone=function(){return P.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},U}(),be=ce.prototype;return Q.prototype=be,[["$ms",i],["$s",s],["$m",o],["$H",u],["$W",c],["$M",f],["$y",w],["$D",q]].forEach(function(U){be[U[1]]=function(x){return this.$g(x,U[0],U[1])}}),Q.extend=function(U,x){return U.$i||(U(x,ce,Q),U.$i=!0),Q},Q.locale=re,Q.isDayjs=Z,Q.unix=function(U){return Q(1e3*U)},Q.en=K[V],Q.Ls=K,Q.p={},Q})}),tc=se((e,t)=>{(function(r,a){typeof e=="object"&&typeof t<"u"?t.exports=a():typeof define=="function"&&define.amd?define(a):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=a()})(e,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function(n,i,s){var o,u=function(h,w,q){q===void 0&&(q={});var d=new Date(h),S=function(C,E){E===void 0&&(E={});var T=E.timeZoneName||"short",W=C+"|"+T,V=a[W];return V||(V=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:C,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:T}),a[W]=V),V}(w,q);return S.formatToParts(d)},c=function(h,w){for(var q=u(h,w),d=[],S=0;S<q.length;S+=1){var C=q[S],E=C.type,T=C.value,W=r[E];W>=0&&(d[W]=parseInt(T,10))}var V=d[3],K=V===24?0:V,L=d[0]+"-"+d[1]+"-"+d[2]+" "+K+":"+d[4]+":"+d[5]+":000",Z=+h;return(s.utc(L).valueOf()-(Z-=Z%1e3))/6e4},l=i.prototype;l.tz=function(h,w){h===void 0&&(h=o);var q=this.utcOffset(),d=this.toDate(),S=d.toLocaleString("en-US",{timeZone:h}),C=Math.round((d-new Date(S))/1e3/60),E=s(S,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(d.getTimezoneOffset()/15)-C,!0);if(w){var T=E.utcOffset();E=E.add(q-T,"minute")}return E.$x.$timezone=h,E},l.offsetName=function(h){var w=this.$x.$timezone||s.tz.guess(),q=u(this.valueOf(),w,{timeZoneName:h}).find(function(d){return d.type.toLowerCase()==="timezonename"});return q&&q.value};var f=l.startOf;l.startOf=function(h,w){if(!this.$x||!this.$x.$timezone)return f.call(this,h,w);var q=s(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(q,h,w).tz(this.$x.$timezone,!0)},s.tz=function(h,w,q){var d=q&&w,S=q||w||o,C=c(+s(),S);if(typeof h!="string")return s(h).tz(S);var E=function(K,L,Z){var re=K-60*L*1e3,Q=c(re,Z);if(L===Q)return[re,L];var P=c(re-=60*(Q-L)*1e3,Z);return Q===P?[re,Q]:[K-60*Math.min(Q,P)*1e3,Math.max(Q,P)]}(s.utc(h,d).valueOf(),C,S),T=E[0],W=E[1],V=s(T).utcOffset(W);return V.$x.$timezone=S,V},s.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},s.tz.setDefault=function(h){o=h}}})}),rc=se((e,t)=>{(function(r,a){typeof e=="object"&&typeof t<"u"?t.exports=a():typeof define=="function"&&define.amd?define(a):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=a()})(e,function(){var r="minute",a=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,s,o){var u=s.prototype;o.utc=function(d){var S={date:d,utc:!0,args:arguments};return new s(S)},u.utc=function(d){var S=o(this.toDate(),{locale:this.$L,utc:!0});return d?S.add(this.utcOffset(),r):S},u.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var c=u.parse;u.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),c.call(this,d)};var l=u.init;u.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else l.call(this)};var f=u.utcOffset;u.utcOffset=function(d,S){var C=this.$utils().u;if(C(d))return this.$u?0:C(this.$offset)?f.call(this):this.$offset;if(typeof d=="string"&&(d=function(V){V===void 0&&(V="");var K=V.match(a);if(!K)return null;var L=(""+K[0]).match(n)||["-",0,0],Z=L[0],re=60*+L[1]+ +L[2];return re===0?0:Z==="+"?re:-re}(d),d===null))return this;var E=Math.abs(d)<=16?60*d:d,T=this;if(S)return T.$offset=E,T.$u=d===0,T;if(d!==0){var W=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(T=this.local().add(E+W,r)).$offset=E,T.$x.$localOffset=W}else T=this.utc();return T};var h=u.format;u.format=function(d){var S=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,S)},u.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var w=u.toDate;u.toDate=function(d){return d==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():w.call(this)};var q=u.diff;u.diff=function(d,S,C){if(d&&this.$u===d.$u)return q.call(this,d,S,C);var E=this.local(),T=o(d).local();return q.call(E,T,S,C)}}})}),ac=se((e,t)=>{t.exports=fetch}),nc=se(e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(n){for(var i,s=1,o=arguments.length;s<o;s++){i=arguments[s];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function a(n){var i=t(t({},r),n);return i.numOfAttempts<1&&(i.numOfAttempts=1),i}e.getSanitizedOptions=a}),ic=se(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){var a=Math.random()*r;return Math.round(a)}e.fullJitter=t}),sc=se(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){return r}e.noJitter=t}),oc=se(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=ic(),r=sc();function a(n){switch(n.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=a}),Li=se(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=oc(),r=function(){function a(n){this.options=n,this.attempt=0}return a.prototype.apply=function(){var n=this;return new Promise(function(i){return setTimeout(i,n.jitteredDelay)})},a.prototype.setAttemptNumber=function(n){this.attempt=n},Object.defineProperty(a.prototype,"jitteredDelay",{get:function(){var n=t.JitterFactory(this.options);return n(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"delay",{get:function(){var n=this.options.startingDelay,i=this.options.timeMultiple,s=this.numOfDelayedAttempts,o=n*Math.pow(i,s);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),a}();e.Delay=r}),uc=se(e=>{var t=e&&e.__extends||function(){var s=function(o,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var f in l)l.hasOwnProperty(f)&&(c[f]=l[f])},s(o,u)};return function(o,u){s(o,u);function c(){this.constructor=o}o.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=e&&e.__awaiter||function(s,o,u,c){function l(f){return f instanceof u?f:new u(function(h){h(f)})}return new(u||(u=Promise))(function(f,h){function w(S){try{d(c.next(S))}catch(C){h(C)}}function q(S){try{d(c.throw(S))}catch(C){h(C)}}function d(S){S.done?f(S.value):l(S.value).then(w,q)}d((c=c.apply(s,o||[])).next())})},a=e&&e.__generator||function(s,o){var u={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,l,f,h;return h={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(d){return function(S){return q([d,S])}}function q(d){if(c)throw new TypeError("Generator is already executing.");for(;u;)try{if(c=1,l&&(f=d[0]&2?l.return:d[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,d[1])).done)return f;switch(l=0,f&&(d=[d[0]&2,f.value]),d[0]){case 0:case 1:f=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,l=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(f=u.trys,!(f=f.length>0&&f[f.length-1])&&(d[0]===6||d[0]===2)){u=0;continue}if(d[0]===3&&(!f||d[1]>f[0]&&d[1]<f[3])){u.label=d[1];break}if(d[0]===6&&u.label<f[1]){u.label=f[1],f=d;break}if(f&&u.label<f[2]){u.label=f[2],u.ops.push(d);break}f[2]&&u.ops.pop(),u.trys.pop();continue}d=o.call(s,u)}catch(S){d=[6,S],l=0}finally{c=f=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=Li(),i=function(s){t(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.apply=function(){return r(this,void 0,void 0,function(){return a(this,function(u){return[2,this.isFirstAttempt?!0:s.prototype.apply.call(this)]})})},Object.defineProperty(o.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),o}(n.Delay);e.SkipFirstDelay=i}),cc=se(e=>{var t=e&&e.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)u.hasOwnProperty(c)&&(o[c]=u[c])},n(i,s)};return function(i,s){n(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=Li(),a=function(n){t(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i}(r.Delay);e.AlwaysDelay=a}),lc=se(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=uc(),r=cc();function a(i,s){var o=n(i);return o.setAttemptNumber(s),o}e.DelayFactory=a;function n(i){return i.delayFirstAttempt?new r.AlwaysDelay(i):new t.SkipFirstDelay(i)}}),dc=se(e=>{var t=e&&e.__awaiter||function(o,u,c,l){function f(h){return h instanceof c?h:new c(function(w){w(h)})}return new(c||(c=Promise))(function(h,w){function q(C){try{S(l.next(C))}catch(E){w(E)}}function d(C){try{S(l.throw(C))}catch(E){w(E)}}function S(C){C.done?h(C.value):f(C.value).then(q,d)}S((l=l.apply(o,u||[])).next())})},r=e&&e.__generator||function(o,u){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},l,f,h,w;return w={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function q(S){return function(C){return d([S,C])}}function d(S){if(l)throw new TypeError("Generator is already executing.");for(;c;)try{if(l=1,f&&(h=S[0]&2?f.return:S[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,S[1])).done)return h;switch(f=0,h&&(S=[S[0]&2,h.value]),S[0]){case 0:case 1:h=S;break;case 4:return c.label++,{value:S[1],done:!1};case 5:c.label++,f=S[1],S=[0];continue;case 7:S=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(S[0]===6||S[0]===2)){c=0;continue}if(S[0]===3&&(!h||S[1]>h[0]&&S[1]<h[3])){c.label=S[1];break}if(S[0]===6&&c.label<h[1]){c.label=h[1],h=S;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(S);break}h[2]&&c.ops.pop(),c.trys.pop();continue}S=u.call(o,c)}catch(C){S=[6,C],f=0}finally{l=h=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=nc(),n=lc();function i(o,u){return u===void 0&&(u={}),t(this,void 0,void 0,function(){var c,l;return r(this,function(f){switch(f.label){case 0:return c=a.getSanitizedOptions(u),l=new s(o,c),[4,l.execute()];case 1:return[2,f.sent()]}})})}e.backOff=i;var s=function(){function o(u,c){this.request=u,this.options=c,this.attemptNumber=0}return o.prototype.execute=function(){return t(this,void 0,void 0,function(){var u,c;return r(this,function(l){switch(l.label){case 0:if(this.attemptLimitReached)return[3,7];l.label=1;case 1:return l.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return l.sent(),[4,this.request()];case 3:return[2,l.sent()];case 4:return u=l.sent(),this.attemptNumber++,[4,this.options.retry(u,this.attemptNumber)];case 5:if(c=l.sent(),!c||this.attemptLimitReached)throw u;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(o.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),o.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var u;return r(this,function(c){switch(c.label){case 0:return u=n.DelayFactory(this.options,this.attemptNumber),[4,u.apply()];case 1:return c.sent(),[2]}})})},o}()}),fc=se((e,t)=>{function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(i=`${i}`,i=i.replace(/[ \t\n\f\r]/g,""),i.length%4===0&&(i=i.replace(/==?$/,"")),i.length%4===1||/[^+/0-9A-Za-z]/.test(i))return null;let s="",o=0,u=0;for(let c=0;c<i.length;c++)o<<=6,o|=n(i[c]),u+=6,u===24&&(s+=String.fromCharCode((o&16711680)>>16),s+=String.fromCharCode((o&65280)>>8),s+=String.fromCharCode(o&255),o=u=0);return u===12?(o>>=4,s+=String.fromCharCode(o)):u===18&&(o>>=2,s+=String.fromCharCode((o&65280)>>8),s+=String.fromCharCode(o&255)),s}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function n(i){let s=a.indexOf(i);return s<0?void 0:s}t.exports=r}),pc=se((e,t)=>{function r(i){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let s;for(i=`${i}`,s=0;s<i.length;s++)if(i.charCodeAt(s)>255)return null;let o="";for(s=0;s<i.length;s+=3){let u=[void 0,void 0,void 0,void 0];u[0]=i.charCodeAt(s)>>2,u[1]=(i.charCodeAt(s)&3)<<4,i.length>s+1&&(u[1]|=i.charCodeAt(s+1)>>4,u[2]=(i.charCodeAt(s+1)&15)<<2),i.length>s+2&&(u[2]|=i.charCodeAt(s+2)>>6,u[3]=i.charCodeAt(s+2)&63);for(let c=0;c<u.length;c++)typeof u[c]>"u"?o+="=":o+=n(u[c])}return o}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function n(i){if(i>=0&&i<64)return a[i]}t.exports=r}),Qi=se((e,t)=>{var r=fc(),a=pc();t.exports={atob:r,btoa:a}}),hc=se((e,t)=>{(function(r,a){typeof e=="object"&&typeof t<"u"?t.exports=a():typeof define=="function"&&define.amd?define(a):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=a()})(e,function(){var r="month",a="quarter";return function(n,i){var s=i.prototype;s.quarter=function(c){return this.$utils().u(c)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(c-1))};var o=s.add;s.add=function(c,l){return c=Number(c),this.$utils().p(l)===a?this.add(3*c,r):o.bind(this)(c,l)};var u=s.startOf;s.startOf=function(c,l){var f=this.$utils(),h=!!f.u(l)||l;if(f.p(c)===a){var w=this.quarter()-1;return h?this.month(3*w).startOf(r).startOf("day"):this.month(3*w+2).endOf(r).endOf("day")}return u.bind(this)(c,l)}}})}),gc=se((e,t)=>{(function(r,a){typeof e=="object"&&typeof t<"u"?t.exports=a():typeof define=="function"&&define.amd?define(a):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=a()})(e,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},a=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,i=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,o={},u=function(d){return(d=+d)+(d>68?1900:2e3)},c=function(d){return function(S){this[d]=+S}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(d){(this.zone||(this.zone={})).offset=function(S){if(!S||S==="Z")return 0;var C=S.match(/([+-]|\d\d)/g),E=60*C[1]+(+C[2]||0);return E===0?0:C[0]==="+"?-E:E}(d)}],f=function(d){var S=o[d];return S&&(S.indexOf?S:S.s.concat(S.f))},h=function(d,S){var C,E=o.meridiem;if(E){for(var T=1;T<=24;T+=1)if(d.indexOf(E(T,0,S))>-1){C=T>12;break}}else C=d===(S?"pm":"PM");return C},w={A:[s,function(d){this.afternoon=h(d,!1)}],a:[s,function(d){this.afternoon=h(d,!0)}],S:[/\d/,function(d){this.milliseconds=100*+d}],SS:[n,function(d){this.milliseconds=10*+d}],SSS:[/\d{3}/,function(d){this.milliseconds=+d}],s:[i,c("seconds")],ss:[i,c("seconds")],m:[i,c("minutes")],mm:[i,c("minutes")],H:[i,c("hours")],h:[i,c("hours")],HH:[i,c("hours")],hh:[i,c("hours")],D:[i,c("day")],DD:[n,c("day")],Do:[s,function(d){var S=o.ordinal,C=d.match(/\d+/);if(this.day=C[0],S)for(var E=1;E<=31;E+=1)S(E).replace(/\[|\]/g,"")===d&&(this.day=E)}],M:[i,c("month")],MM:[n,c("month")],MMM:[s,function(d){var S=f("months"),C=(f("monthsShort")||S.map(function(E){return E.slice(0,3)})).indexOf(d)+1;if(C<1)throw new Error;this.month=C%12||C}],MMMM:[s,function(d){var S=f("months").indexOf(d)+1;if(S<1)throw new Error;this.month=S%12||S}],Y:[/[+-]?\d+/,c("year")],YY:[n,function(d){this.year=u(d)}],YYYY:[/\d{4}/,c("year")],Z:l,ZZ:l};function q(d){var S,C;S=d,C=o&&o.formats;for(var E=(d=S.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(re,Q,P){var ce=P&&P.toUpperCase();return Q||C[P]||r[P]||C[ce].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(be,U,x){return U||x.slice(1)})})).match(a),T=E.length,W=0;W<T;W+=1){var V=E[W],K=w[V],L=K&&K[0],Z=K&&K[1];E[W]=Z?{regex:L,parser:Z}:V.replace(/^\[|\]$/g,"")}return function(re){for(var Q={},P=0,ce=0;P<T;P+=1){var be=E[P];if(typeof be=="string")ce+=be.length;else{var U=be.regex,x=be.parser,O=re.slice(ce),p=U.exec(O)[0];x.call(Q,p),re=re.replace(p,"")}}return function(m){var I=m.afternoon;if(I!==void 0){var A=m.hours;I?A<12&&(m.hours+=12):A===12&&(m.hours=0),delete m.afternoon}}(Q),Q}}return function(d,S,C){C.p.customParseFormat=!0,d&&d.parseTwoDigitYear&&(u=d.parseTwoDigitYear);var E=S.prototype,T=E.parse;E.parse=function(W){var V=W.date,K=W.utc,L=W.args;this.$u=K;var Z=L[1];if(typeof Z=="string"){var re=L[2]===!0,Q=L[3]===!0,P=re||Q,ce=L[2];Q&&(ce=L[2]),o=this.$locale(),!re&&ce&&(o=C.Ls[ce]),this.$d=function(O,p,m){try{if(["x","X"].indexOf(p)>-1)return new Date((p==="X"?1e3:1)*O);var I=q(p)(O),A=I.year,R=I.month,_=I.day,Y=I.hours,B=I.minutes,G=I.seconds,D=I.milliseconds,ae=I.zone,pe=new Date,ke=_||(A||R?1:pe.getDate()),oe=A||pe.getFullYear(),me=0;A&&!R||(me=R>0?R-1:pe.getMonth());var ne=Y||0,ve=B||0,nt=G||0,_e=D||0;return ae?new Date(Date.UTC(oe,me,ke,ne,ve,nt,_e+60*ae.offset*1e3)):m?new Date(Date.UTC(oe,me,ke,ne,ve,nt,_e)):new Date(oe,me,ke,ne,ve,nt,_e)}catch{return new Date("")}}(V,Z,K),this.init(),ce&&ce!==!0&&(this.$L=this.locale(ce).$L),P&&V!=this.format(Z)&&(this.$d=new Date("")),o={}}else if(Z instanceof Array)for(var be=Z.length,U=1;U<=be;U+=1){L[1]=Z[U-1];var x=C.apply(this,L);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}U===be&&(this.$d=new Date(""))}else T.call(this,W)}}})}),yc=se((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>{var a;return((a=r.exec(document.cookie))==null?void 0:a.pop())||null}}),wt=()=>global.crypto,mc=()=>{typeof window<"u"||(wt()||(global.crypto=Ku("crypto")),!wt().getRandomValues&&wt().webcrypto&&(global.crypto.getRandomValues=wt().webcrypto.getRandomValues.bind(wt().webcrypto)))};Ie(_i());function vc(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}vc({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"});var Sc=10,zi=e=>({past:[],present:e,future:[]}),wc=e=>{let{past:t,present:r,future:a}=e;if(!r||t.length===0)return e;let n=t[t.length-1];return{past:t.slice(0,t.length-1),present:n,future:[r,...a]}},bc=e=>{let{past:t,present:r,future:a}=e;if(!r||a.length===0)return e;let n=a[0],i=a.slice(1);return{past:[...t,r],present:n,future:i}},Cc=e=>{let{action:t,state:r,reducer:a}=e,{past:n,present:i}=r,s=a(i,t);return i?i===s?r:{past:[...n,i].slice(-Sc),present:s,future:[]}:zi(s)},Ic=e=>{let{actionTypes:t,reducer:r}=e,a=zi();return(n=a,i)=>{switch(i.type){case t.undo:return wc(n);case t.redo:return bc(n);case t.snapshot:return Cc({state:n,reducer:r,action:i});default:return n}}},Ot=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),xa=Ie(Aa()),qc=Ie(tc()),kc=Ie(rc());Ie(ac());Ie(dc());var Oc=Ie(Qi());function Ac(e){return Array.isArray(e)}function Rr(e){return e.trim()===""}function xc(e,t){return[...e.reduce((r,a)=>{let n=t(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function Ec(e){return(typeof btoa<"u"?btoa:Oc.btoa)(encodeURI(e))}function Rc(e){return Ec(JSON.stringify(e))}var Fc=new Set(["1",1,"yes",!0]);function Dc(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>Fc.has(r))}function Ni(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Bi(e,t){return`https://${e}.cloud.coveo.com`}function Hi(e,t="prod"){let r=t==="prod"?"":t,a=`https://${e}.org${r}.coveo.com`,n=`https://${e}.analytics.org${r}.coveo.com`,i=`${a}/rest/search/v2`,s=`https://${e}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:i,admin:s}}function xn(e){return Bi("platform")}function Mc(e){return Bi("analytics")}xa.default.extend(kc.default);xa.default.extend(qc.default);var Yi="/rest/search/v2",Wi="/rest/ua",Uc=()=>({organizationId:"",accessToken:"",platformUrl:xn(),search:{apiBaseUrl:`${xn()}${Yi}`,locale:"en-US",timezone:xa.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Mc()}${Wi}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function Gi(){return{contextValues:{}}}var Ji=()=>!1;function Ki(){return{contextValues:{}}}var ia=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),Pc=()=>({correctedQuery:"",corrections:[],originalQuery:""});function Tc(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:ia(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}function jc(){return{length:void 0}}function bt(){return{enabled:!0}}function Zi(){return{freezeFacetOrder:!1,facets:{}}}function Ea(){return{desiredCount:5,numberOfValues:8,set:{}}}function Ra(){return{}}function Xi(){return[]}function $c(){return{}}function Vc(){return{}}function _c(e){return{request:e,hasBreadcrumbs:!0}}function Fa(){return{}}function Lc(e){return{request:e}}function Da(){return{}}function Qc(e){return{request:e}}function Ma(){return{}}var es=["author","language","urihash","objecttype","collection","source","permanentid"];[...es];var zc=()=>({fieldsToInclude:es,fetchAllFields:!1,fieldsDescription:[]}),ts=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function En(){return{id:"",isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default",contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1}}function Ua(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}var rs=()=>"";function as(){return{}}var gt=()=>({q:"",enableQuerySyntax:!1}),Pa=()=>"default";function Nc(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Ta(r)}var Ta=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},qe=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},a=[];for(let n in this.definition){let i=this.definition[n].validate(r[n]);i&&a.push(`${n}: ${i}`)}if(a.length)throw Nc(a,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},fe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&J(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ye(e){return e===void 0}function Bc(e){return e===null}function J(e){return ye(e)||Bc(e)}var $=class{constructor(e={}){this.config=e,this.value=new fe(e)}validate(e){return this.value.validate(e)||(Hc(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Hc(e){return ye(e)||ns(e)}function ns(e){return typeof e=="number"&&!isNaN(e)}var H=class{constructor(e={}){this.value=new fe(e)}validate(e){return this.value.validate(e)||(Yc(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Yc(e){return ye(e)||is(e)}function is(e){return typeof e=="boolean"}var Wc=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,k=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new fe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:a,constrainTo:n}=this.config;return this.value.validate(e)||(ye(e)?null:ja(e)?!t&&!e.length?"value is an empty string.":r&&!Wc.test(e)?"value is not a valid URL.":a&&!a.test(e)?`value did not match provided regex ${a}`:n&&!n.includes(e)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function ja(e){return Object.prototype.toString.call(e)==="[object String]"}var F=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ye(e))return this.config.options.required?"value is required and is currently undefined":null;if(!ss(e))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&J(e[r]))return`value does not contain ${r}`;let t="";for(let[r,a]of Object.entries(this.config.values)){let n=e[r],i=a.validate(n);i!==null&&(t+=" "+i)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function ss(e){return e!==void 0&&typeof e=="object"}var te=class{constructor(e={}){this.config=e,this.value=new fe(this.config)}validate(e){if(!J(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(J(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(a=>{this.config.each.required&&J(a)&&(r=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return is(e)||ja(e)||ns(e)||ss(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function os(e){return Array.isArray(e)}var Ge=class{constructor(e){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:ye(e)||Object.values(this.config.enum).find(r=>r===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},us=(e=>(e.Ascending="ascending",e.Descending="descending",e))(us||{}),$a=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))($a||{}),rr=e=>{if(os(e))return e.map(t=>rr(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Gc=()=>({by:"relevancy"});new F({values:{by:new Ge({enum:$a,required:!0}),order:new Ge({enum:us}),field:new k}});function Va(){return rr(Gc())}function cs(){return{}}function ls(){return{}}function Jc(){return Te({})}function Te(e){return{context:e.context||Gi(),dictionaryFieldContext:e.dictionaryFieldContext||Ki(),facetSet:e.facetSet||Fa(),numericFacetSet:e.numericFacetSet||Ma(),dateFacetSet:e.dateFacetSet||Da(),categoryFacetSet:e.categoryFacetSet||Ra(),automaticFacetSet:e.automaticFacetSet??Ea(),pagination:e.pagination||Ua(),query:e.query||gt(),tabSet:e.tabSet||ls(),advancedSearchQueries:e.advancedSearchQueries||Ot(),staticFilterSet:e.staticFilterSet||cs(),querySet:e.querySet||as(),sortCriteria:e.sortCriteria||Va(),pipeline:e.pipeline||rs(),searchHub:e.searchHub||Pa(),facetOptions:e.facetOptions||Zi(),facetOrder:e.facetOrder??Xi(),debug:e.debug??Ji()}}function Kc(){return{}}var Rn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});function Zc(){return{queries:[],maxLength:10}}function Xc(){return{results:[],maxLength:10}}function ds(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}function sa(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function ze(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:sa(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:sa(),extendedResults:{}}}function el(){return{}}var tl=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}}),rl={};Zu(rl,{escape:()=>it,getHighlightedSuggestion:()=>nl,highlightString:()=>al});function al(e){if(Rr(e.openingDelimiter)||Rr(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(J(e.content)||Rr(e.content))return e.content;if(e.highlights.length===0)return it(e.content);let t=e.content.length,r="",a=0;for(let n=0;n<e.highlights.length;n++){let i=e.highlights[n],s=i.offset,o=s+i.length;if(o>t)break;r+=it(e.content.slice(a,s)),r+=e.openingDelimiter,r+=it(e.content.slice(s,o)),r+=e.closingDelimiter,a=o}return a!==t&&(r+=it(e.content.slice(a))),r}function nl(e,t){return e=it(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,i)=>a?Fr(a,t.notMatchDelimiters):n?Fr(n,t.exactMatchDelimiters):i?Fr(i,t.correctionDelimiters):r)}function Fr(e,t){return t?t.open+e+t.close:e}function it(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(e)?e.replace(n,i=>t[i]):e}var Dr=()=>Math.random().toString(36).substring(7).split("").join(".");`${Dr()}`,`${Dr()}`;function il(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function sl(e){return il(e)&&"type"in e&&typeof e.type=="string"}var fs=Symbol.for("immer-nothing"),Fn=Symbol.for("immer-draftable"),Oe=Symbol.for("immer-state");function Ee(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ft=Object.getPrototypeOf;function Ne(e){return!!e&&!!e[Oe]}function je(e){var t;return e?ps(e)||Array.isArray(e)||!!e[Fn]||!!((t=e.constructor)!=null&&t[Fn])||hr(e)||gr(e):!1}var ol=Object.prototype.constructor.toString();function ps(e){if(!e||typeof e!="object")return!1;let t=ft(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===ol}function Et(e,t){pr(e)===0?Object.entries(e).forEach(([r,a])=>{t(r,a,e)}):e.forEach((r,a)=>t(a,r,e))}function pr(e){let t=e[Oe];return t?t.type_:Array.isArray(e)?1:hr(e)?2:gr(e)?3:0}function oa(e,t){return pr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hs(e,t,r){let a=pr(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function ul(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function hr(e){return e instanceof Map}function gr(e){return e instanceof Set}function He(e){return e.copy_||e.base_}function ua(e,t){if(hr(e))return new Map(e);if(gr(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ps(e))return ft(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[Oe];let a=Reflect.ownKeys(r);for(let n=0;n<a.length;n++){let i=a[n],s=r[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(ft(e),r)}function _a(e,t=!1){return yr(e)||Ne(e)||!je(e)||(pr(e)>1&&(e.set=e.add=e.clear=e.delete=cl),Object.freeze(e),t&&Et(e,(r,a)=>_a(a,!0))),e}function cl(){Ee(2)}function yr(e){return Object.isFrozen(e)}var ll={};function Je(e){let t=ll[e];return t||Ee(0,e),t}var Rt;function gs(){return Rt}function dl(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dn(e,t){t&&(Je("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ca(e){la(e),e.drafts_.forEach(fl),e.drafts_=null}function la(e){e===Rt&&(Rt=e.parent_)}function Mn(e){return Rt=dl(Rt,e)}function fl(e){let t=e[Oe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Un(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[Oe].modified_&&(ca(t),Ee(4)),je(e)&&(e=ar(t,e),t.parent_||nr(t,e)),t.patches_&&Je("Patches").generateReplacementPatches_(r[Oe].base_,e,t.patches_,t.inversePatches_)):e=ar(t,r,[]),ca(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fs?e:void 0}function ar(e,t,r){if(yr(t))return t;let a=t[Oe];if(!a)return Et(t,(n,i)=>Pn(e,a,t,n,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return nr(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;let n=a.copy_,i=n,s=!1;a.type_===3&&(i=new Set(n),n.clear(),s=!0),Et(i,(o,u)=>Pn(e,a,n,o,u,r,s)),nr(e,n,!1),r&&e.patches_&&Je("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function Pn(e,t,r,a,n,i,s){if(Ne(n)){let o=i&&t&&t.type_!==3&&!oa(t.assigned_,a)?i.concat(a):void 0,u=ar(e,n,o);if(hs(r,a,u),Ne(u))e.canAutoFreeze_=!1;else return}else s&&r.add(n);if(je(n)&&!yr(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ar(e,n),(!t||!t.scope_.parent_)&&nr(e,n)}}function nr(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_a(t,r)}function pl(e,t){let r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:gs(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},n=a,i=La;r&&(n=[a],i=Ft);let{revoke:s,proxy:o}=Proxy.revocable(n,i);return a.draft_=o,a.revoke_=s,o}var La={get(e,t){if(t===Oe)return e;let r=He(e);if(!oa(r,t))return hl(e,r,t);let a=r[t];return e.finalized_||!je(a)?a:a===Mr(e.base_,t)?(Ur(e),e.copy_[t]=fa(a,e)):a},has(e,t){return t in He(e)},ownKeys(e){return Reflect.ownKeys(He(e))},set(e,t,r){let a=ys(He(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){let n=Mr(He(e),t),i=n==null?void 0:n[Oe];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(ul(r,n)&&(r!==void 0||oa(e.base_,t)))return!0;Ur(e),da(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Mr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ur(e),da(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=He(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Ee(11)},getPrototypeOf(e){return ft(e.base_)},setPrototypeOf(){Ee(12)}},Ft={};Et(La,(e,t)=>{Ft[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ft.deleteProperty=function(e,t){return Ft.set.call(this,e,t,void 0)};Ft.set=function(e,t,r){return La.set.call(this,e[0],t,r,e[0])};function Mr(e,t){let r=e[Oe];return(r?He(r):e)[t]}function hl(e,t,r){var n;let a=ys(t,r);return a?"value"in a?a.value:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function ys(e,t){if(!(t in e))return;let r=ft(e);for(;r;){let a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=ft(r)}}function da(e){e.modified_||(e.modified_=!0,e.parent_&&da(e.parent_))}function Ur(e){e.copy_||(e.copy_=ua(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var gl=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){let i=r;r=t;let s=this;return function(o=i,...u){return s.produce(o,c=>r.call(this,c,...u))}}typeof r!="function"&&Ee(6),a!==void 0&&typeof a!="function"&&Ee(7);let n;if(je(t)){let i=Mn(this),s=fa(t,void 0),o=!0;try{n=r(s),o=!1}finally{o?ca(i):la(i)}return Dn(i,a),Un(n,i)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===fs&&(n=void 0),this.autoFreeze_&&_a(n,!0),a){let i=[],s=[];Je("Patches").generateReplacementPatches_(t,n,i,s),a(i,s)}return n}else Ee(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...s)=>this.produceWithPatches(i,o=>t(o,...s));let a,n;return[this.produce(t,r,(i,s)=>{a=i,n=s}),a,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){je(e)||Ee(8),Ne(e)&&(e=ms(e));let t=Mn(this),r=fa(e,void 0);return r[Oe].isManual_=!0,la(t),r}finishDraft(e,t){let r=e&&e[Oe];(!r||!r.isManual_)&&Ee(9);let{scope_:a}=r;return Dn(a,t),Un(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let a=Je("Patches").applyPatches_;return Ne(e)?a(e,t):this.produce(e,n=>a(n,t))}};function fa(e,t){let r=hr(e)?Je("MapSet").proxyMap_(e,t):gr(e)?Je("MapSet").proxySet_(e,t):pl(e,t);return(t?t.scope_:gs()).drafts_.push(r),r}function ms(e){return Ne(e)||Ee(10,e),vs(e)}function vs(e){if(!je(e)||yr(e))return e;let t=e[Oe],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ua(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ua(e,!0);return Et(r,(a,n)=>{hs(r,a,vs(n))}),t&&(t.finalized_=!1),r}var Ae=new gl,Ss=Ae.produce;Ae.produceWithPatches.bind(Ae);Ae.setAutoFreeze.bind(Ae);Ae.setUseStrictShallowCopy.bind(Ae);Ae.applyPatches.bind(Ae);Ae.createDraft.bind(Ae);Ae.finishDraft.bind(Ae);function yl(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ml(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vl(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var Tn=e=>Array.isArray(e)?e:[e];function Sl(e){let t=Array.isArray(e[0])?e[0]:e;return vl(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wl(e,t){let r=[],{length:a}=e;for(let n=0;n<a;n++)r.push(e[n].apply(null,t));return r}var bl=class{constructor(e){this.value=e}deref(){return this.value}},Cl=typeof WeakRef<"u"?WeakRef:bl,Il=0,jn=1;function Bt(){return{s:Il,v:void 0,o:null,p:null}}function Qa(e,t={}){let r=Bt(),{resultEqualityCheck:a}=t,n,i=0;function s(){var f;let o=r,{length:u}=arguments;for(let h=0,w=u;h<w;h++){let q=arguments[h];if(typeof q=="function"||typeof q=="object"&&q!==null){let d=o.o;d===null&&(o.o=d=new WeakMap);let S=d.get(q);S===void 0?(o=Bt(),d.set(q,o)):o=S}else{let d=o.p;d===null&&(o.p=d=new Map);let S=d.get(q);S===void 0?(o=Bt(),d.set(q,o)):o=S}}let c=o,l;if(o.s===jn?l=o.v:(l=e.apply(null,arguments),i++),c.s=jn,a){let h=((f=n==null?void 0:n.deref)==null?void 0:f.call(n))??n;h!=null&&a(h,l)&&(l=h,i!==0&&i--),n=typeof l=="object"&&l!==null||typeof l=="function"?new Cl(l):l}return c.v=l,l}return s.clearCache=()=>{r=Bt(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function ws(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...n)=>{let i=0,s=0,o,u={},c=n.pop();typeof c=="object"&&(u=c,c=n.pop()),yl(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);let l={...r,...u},{memoize:f,memoizeOptions:h=[],argsMemoize:w=Qa,argsMemoizeOptions:q=[],devModeChecks:d={}}=l,S=Tn(h),C=Tn(q),E=Sl(n),T=f(function(){return i++,c.apply(null,arguments)},...S),W=w(function(){s++;let V=wl(E,arguments);return o=T.apply(null,V),o},...C);return Object.assign(W,{resultFunc:c,memoizedResultFunc:T,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:w})};return Object.assign(a,{withTypes:()=>a}),a}var ie=ws(Qa),ql=Object.assign((e,t=ie)=>{ml(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),a=r.map(n=>e[n]);return t(a,(...n)=>n.reduce((i,s,o)=>(i[r[o]]=s,i),{}))},{withTypes:()=>ql}),kl=(...e)=>{let t=ws(...e),r=Object.assign((...a)=>{let n=t(...a),i=(s,...o)=>n(Ne(s)?ms(s):s,...o);return Object.assign(i,n),i},{withTypes:()=>r});return r};kl(Qa);var Ol=e=>e&&typeof e.match=="function";function g(e,t){function r(...a){if(t){let n=t(...a);if(!n)throw new Error(Ke(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>sl(a)&&a.type===e,r}function $n(e){return je(e)?Ss(e,()=>{}):e}function Al(e){let t={},r=[],a,n={addCase(i,s){let o=typeof i=="string"?i:i.type;if(!o)throw new Error(Ke(28));if(o in t)throw new Error(Ke(29));return t[o]=s,n},addMatcher(i,s){return r.push({matcher:i,reducer:s}),n},addDefaultCase(i){return a=i,n}};return e(n),[t,r,a]}function xl(e){return typeof e=="function"}function z(e,t){let[r,a,n]=Al(t),i;if(xl(e))i=()=>$n(e());else{let o=$n(e);i=()=>o}function s(o=i(),u){let c=[r[u.type],...a.filter(({matcher:l})=>l(u)).map(({reducer:l})=>l)];return c.filter(l=>!!l).length===0&&(c=[n]),c.reduce((l,f)=>{if(f)if(Ne(l)){let h=f(l,u);return h===void 0?l:h}else{if(je(l))return Ss(l,h=>f(h,u));{let h=f(l,u);if(h===void 0){if(l===null)return l;throw new Error(Ke(9))}return h}}return l},o)}return s.getInitialState=i,s}var El="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bs=(e=21)=>{let t="",r=e;for(;r--;)t+=El[Math.random()*64|0];return t},Rl=(e,t)=>Ol(e)?e.match(t):e(t);function Fl(...e){return t=>e.some(r=>Rl(r,t))}var Dl=["name","message","stack","code"],Pr=class{constructor(e,t){Vi(this,"_type"),this.payload=e,this.meta=t}},Vn=class{constructor(e,t){Vi(this,"_type"),this.payload=e,this.meta=t}},Ml=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Dl)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},j=(()=>{function e(t,r,a){let n=g(t+"/fulfilled",(u,c,l,f)=>({payload:u,meta:{...f||{},arg:l,requestId:c,requestStatus:"fulfilled"}})),i=g(t+"/pending",(u,c,l)=>({payload:void 0,meta:{...l||{},arg:c,requestId:u,requestStatus:"pending"}})),s=g(t+"/rejected",(u,c,l,f,h)=>({payload:f,error:(a&&a.serializeError||Ml)(u||"Rejected"),meta:{...h||{},arg:l,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"}}));function o(u){return(c,l,f)=>{let h=a!=null&&a.idGenerator?a.idGenerator(u):bs(),w=new AbortController,q,d;function S(E){d=E,w.abort()}let C=async function(){var T,W;let E;try{let V=(T=a==null?void 0:a.condition)==null?void 0:T.call(a,u,{getState:l,extra:f});if(Pl(V)&&(V=await V),V===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let K=new Promise((L,Z)=>{q=()=>{Z({name:"AbortError",message:d||"Aborted"})},w.signal.addEventListener("abort",q)});c(i(h,u,(W=a==null?void 0:a.getPendingMeta)==null?void 0:W.call(a,{requestId:h,arg:u},{getState:l,extra:f}))),E=await Promise.race([K,Promise.resolve(r(u,{dispatch:c,getState:l,extra:f,requestId:h,signal:w.signal,abort:S,rejectWithValue:(L,Z)=>new Pr(L,Z),fulfillWithValue:(L,Z)=>new Vn(L,Z)})).then(L=>{if(L instanceof Pr)throw L;return L instanceof Vn?n(L.payload,h,u,L.meta):n(L,h,u)})])}catch(V){E=V instanceof Pr?s(null,h,u,V.payload,V.meta):s(V,h,u)}finally{q&&w.signal.removeEventListener("abort",q)}return a&&!a.dispatchConditionRejection&&s.match(E)&&E.meta.condition||c(E),E}();return Object.assign(C,{abort:S,requestId:h,arg:u,unwrap(){return C.then(Ul)}})}}return Object.assign(o,{pending:i,rejected:s,fulfilled:n,settled:Fl(s,n),typePrefix:t})}return e.withTypes=()=>e,e})();function Ul(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Pl(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Tl=(e,t)=>{if(typeof e!="function")throw new Error(Ke(32))},za="listenerMiddleware",jl=e=>{let{type:t,actionCreator:r,matcher:a,predicate:n,effect:i}=e;if(t)n=g(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error(Ke(21));return Tl(i),{predicate:n,type:t,effect:i}},$l=Object.assign(e=>{let{type:t,predicate:r,effect:a}=jl(e);return{id:bs(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ke(22))}}},{withTypes:()=>$l}),Vl=Object.assign(g(`${za}/add`),{withTypes:()=>Vl});g(`${za}/removeAll`);var _l=Object.assign(g(`${za}/remove`),{withTypes:()=>_l});function Ke(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ll=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&")}`:this.basePath}},Ql=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),zl=(e,t)=>{let r=Nl(e);return r&&r.organizationId===t?r:null},Nl=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t!=null&&t.groups?t.groups:null},Bl=1,Hl=(e,t)=>{let r=new Ll(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},Cs=e=>e.success!==void 0,Re=e=>e.error!==void 0,M=new k({required:!0,emptyAllowed:!1}),ee=new k({required:!1,emptyAllowed:!1}),Se=new k({required:!0,emptyAllowed:!0}),Yl=new k({required:!1,emptyAllowed:!0}),Is=new te({each:M,required:!0}),Wl=new k({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Ze=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),yt=(e,t)=>{if("required"in t)return{payload:new qe({value:t}).validate({value:e}).value};let r=new F({options:{required:!0},values:t}).validate(e);if(r)throw new Ta(r);return{payload:e}},b=(e,t)=>{try{return yt(e,t)}catch(r){return{payload:e,error:Ze(r)}}};function Gl({config:e,environment:t,event:r,listenerManager:a}){let{url:n,token:i,mode:s}=e;s!=="disabled"&&(a.call(r),t.send(n,i,r))}var Jl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Kl(e){return typeof e=="string"&&Jl.test(e)}function Zl(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),a=r.storage,n=a.getItem(t),i=n&&Kl(n)?n:r.generateUUID();return a.setItem(t,i),i},clear:()=>{e.get().storage.removeItem(t)}}}var qs="0.7.7";function Xl(e){let{trackingId:t}=e;return{trackingId:t}}function ed(e){return(e.source||[]).concat([`relay@${qs}`])}function ks(e,t,r,a){let{getReferrer:n,getLocation:i,getUserAgent:s}=r,o=Xl(t),u=a.getClientId();return Object.freeze({type:e,config:o,ts:Date.now(),source:ed(t),clientId:u,userAgent:s(),referrer:n(),location:i()})}function td(e,t,r,a,n){return{...t,meta:ks(e,r,a,n)}}var rd="*";function ad(){let e=[];function t({type:u,callback:c}){return e.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function a(u){return t(u)<0&&e.push(u),()=>o(u.type,u.callback)}function n(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function i(u){if(u===rd)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1)}function s(u){let c=t(u);c>=0&&e.splice(c,1)}function o(u,c){c?s({type:u,callback:c}):i(u)}return{add:a,call:n,remove:o}}function _n({url:e,token:t,trackingId:r,...a}){return Object.freeze({url:e,token:t,trackingId:r,...!!a.mode&&{mode:a.mode},...!!a.source&&{source:a.source}})}function nd(e){let t=_n(e);return{get:()=>t,update:r=>{t=_n({...t,...r})}}}function id(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Tr=sd();function sd(){let e="coveo_",t=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${e}${r}=`,n=document.cookie.split(";");for(let i of n){let s=i.replace(/^\s+/,"");if(s.lastIndexOf(a,0)===0)return s.substring(a.length,s.length)}return null},setItem(r,a,n){let i=t(window.location.hostname),s=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,o=i?`;domain=${i}`:"";document.cookie=`${e}${r}=${a}${s}${o};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function od(){return{getItem(e){return Tr.getItem(e)||localStorage.getItem(e)},removeItem(e){Tr.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Tr.setItem(e,t,31556952e3)}}}function ud(){let e=document.referrer;return e===""?null:e}function cd(){return{runtime:"browser",send:(e,t,r)=>{let a=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(id().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>ud(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:od()}}function ld(){return{getItem(){return null},removeItem(){},setItem(){}}}function dd(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:ld()}}function fd(e){return e.get().mode!=="disabled"&&pd()?cd():dd()}function pd(){try{return typeof window=="object"}catch{return!1}}function hd(e){return{get:()=>Object.freeze(fd(e))}}function gd(e){let t=nd(e),r=ad(),a=hd(t),n=Zl(a);return{emit:(i,s)=>{let o=t.get(),u=a.get(),c=td(i,s,o,u,n);return Gl({config:o,environment:u,event:c,listenerManager:r})},getMeta:i=>ks(i,t.get(),a.get(),n),on:(i,s)=>r.add({type:i,callback:s}),off:(i,s)=>r.remove(i,s),updateConfig:i=>t.update(i),version:qs,clearStorage:()=>{n.clear()}}}var Na="2.63.4",yd=["@coveo/atomic","@coveo/quantic"],Os=ie(e=>e.source,e=>[`@coveo/headless@${Na}`].concat(Object.entries(e).map(([t,r])=>`${t}@${r}`))),md=ie(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>Os(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r,enabled:a},n)=>gd({mode:a?"emit":"disabled",url:r,token:e,trackingId:t,source:n}));function Ue(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function y(e,t,r,a){function n(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(l){try{c(a.next(l))}catch(f){s(f)}}function u(l){try{c(a.throw(l))}catch(f){s(f)}}function c(l){l.done?i(l.value):n(l.value).then(o,u)}c((a=a.apply(e,[])).next())})}var N;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(N||(N={}));function Ln(){return typeof window<"u"}function Ba(){return typeof navigator<"u"}function pa(){return typeof document<"u"}function ha(){try{return typeof localStorage<"u"}catch{return!1}}function vd(){try{return typeof sessionStorage<"u"}catch{return!1}}function As(){return Ba()&&navigator.cookieEnabled}var Sd=[N.click,N.custom,N.search,N.view],wd=(e,t)=>Sd.indexOf(e)!==-1?Object.assign({language:pa()?document.documentElement.lang:"unknown",userAgent:Ba()?navigator.userAgent:"unknown"},t):t,jr=class xs{static set(t,r,a){var n,i,s,o;a&&(i=new Date,i.setTime(i.getTime()+a)),o=window.location.hostname,o.indexOf(".")===-1?Qn(t,r,i):(s=o.split("."),n=s[s.length-2]+"."+s[s.length-1],Qn(t,r,i,n))}static get(t){for(var r=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var i=a[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(r,0)===0)return i.substring(r.length,i.length)}return null}static erase(t){xs.set(t,"",-1)}};function Qn(e,t,r,a){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function bd(){return ha()?localStorage:As()?new Ha:vd()?sessionStorage:new mr}var Ha=class Zt{getItem(t){return jr.get(`${Zt.prefix}${t}`)}removeItem(t){jr.erase(`${Zt.prefix}${t}`)}setItem(t,r,a){jr.set(`${Zt.prefix}${t}`,r,a)}};Ha.prefix="coveo_";var Cd=class{constructor(){this.cookieStorage=new Ha}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},mr=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},qt="__coveo.analytics.history",Es=20,Rs=1e3*60,Fs=75,ir=class{constructor(e){this.store=e||bd()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return y(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return y(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(qt);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return y(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(qt);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(qt,JSON.stringify(e.slice(0,Es)))}catch{}}clear(){try{this.store.removeItem(qt)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((t,r)=>(r.internalTime||0)-(t.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Fs)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Rs:!0}stripInternalTime(e){return Array.isArray(e)?e.map(t=>{let{name:r,time:a,value:n}=t;return{name:r,time:a,value:n}}):[]}stripEmptyQuery(e){let{name:t,time:r,value:a}=e;return t&&typeof a=="string"&&t.toLowerCase()==="query"&&a.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(t=>this.stripEmptyQuery(t))}},Id=Object.freeze({__proto__:null,HistoryStore:ir,MAX_NUMBER_OF_HISTORY_ELEMENTS:Es,MAX_VALUE_SIZE:Fs,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Rs,STORE_KEY:qt,default:ir}),qd=(e,t)=>y(void 0,void 0,void 0,function*(){return e===N.view?(yield kd(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),kd=e=>y(void 0,void 0,void 0,function*(){let t=new ir,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Ht,Od=new Uint8Array(16);function Ad(){if(!Ht&&(Ht=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ht))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ht(Od)}var xd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sr(e){return typeof e=="string"&&xd.test(e)}var de=[];for(let e=0;e<256;++e)de.push((e+256).toString(16).slice(1));function Ds(e,t=0){return(de[e[t+0]]+de[e[t+1]]+de[e[t+2]]+de[e[t+3]]+"-"+de[e[t+4]]+de[e[t+5]]+"-"+de[e[t+6]]+de[e[t+7]]+"-"+de[e[t+8]]+de[e[t+9]]+"-"+de[e[t+10]]+de[e[t+11]]+de[e[t+12]]+de[e[t+13]]+de[e[t+14]]+de[e[t+15]]).toLowerCase()}function Ed(e){if(!sr(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Rd(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Fd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Dd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Md(e,t,r){function a(n,i,s,o){var u;if(typeof n=="string"&&(n=Rd(n)),typeof i=="string"&&(i=Ed(i)),((u=i)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(i),c.set(n,i.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,s){o=o||0;for(let l=0;l<16;++l)s[o+l]=c[l];return s}return Ds(c)}try{a.name=e}catch{}return a.DNS=Fd,a.URL=Dd,a}var Ud=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zn={randomUUID:Ud};function $r(e,t,r){if(zn.randomUUID&&!t&&!e)return zn.randomUUID();e=e||{};let a=e.random||(e.rng||Ad)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Ds(a)}function Pd(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:return t^r^a;case 2:return t&r^t&a^r&a;case 3:return t^r^a}}function Vr(e,t){return e<<t|e>>>32-t}function Td(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let o=0;o<s.length;++o)e.push(s.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=e.length/4+2,n=Math.ceil(a/16),i=new Array(n);for(let s=0;s<n;++s){let o=new Uint32Array(16);for(let u=0;u<16;++u)o[u]=e[s*64+u*4]<<24|e[s*64+u*4+1]<<16|e[s*64+u*4+2]<<8|e[s*64+u*4+3];i[s]=o}i[n-1][14]=(e.length-1)*8/Math.pow(2,32),i[n-1][14]=Math.floor(i[n-1][14]),i[n-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<n;++s){let o=new Uint32Array(80);for(let w=0;w<16;++w)o[w]=i[s][w];for(let w=16;w<80;++w)o[w]=Vr(o[w-3]^o[w-8]^o[w-14]^o[w-16],1);let u=r[0],c=r[1],l=r[2],f=r[3],h=r[4];for(let w=0;w<80;++w){let q=Math.floor(w/20),d=Vr(u,5)+Pd(q,c,l,f)+h+t[q]+o[w]>>>0;h=f,f=l,l=Vr(c,30)>>>0,c=u,u=d}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var jd=Md("v5",80,Td),Nn=jd,Ms="2.30.2",$d={pageview:"pageview",event:"event"},or=class ga{constructor(t,r){if(!sr(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>ga.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let a=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let i=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return sr(i)?new ga(i,Number.parseInt(n)*1e3):null}};or.cvo_cid="cvo_cid";or.expirationTime=120;var Fe=Object.keys;function Yt(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Bn={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Vd=Fe(Bn).map(e=>Bn[e]),_d=[...Vd].join("|"),Ld=new RegExp(`^(${_d}$)`),Qd={svcAction:"svc_action",svcActionData:"svc_action_data"},zd=e=>Ld.test(e),Nd=[zd],Hn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Yn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ge={action:"pa",list:"pal",listSource:"pls"},ur={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Bd=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],ya={id:"quoteId",affiliation:"quoteAffiliation"},ma={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Hd={add:ge,bookmark_add:ge,bookmark_remove:ge,click:ge,checkout:ge,checkout_option:ge,detail:ge,impression:ge,remove:ge,refund:Object.assign(Object.assign({},ge),ur),purchase:Object.assign(Object.assign({},ge),ur),quickview:ge,quote:Object.assign(Object.assign({},ge),ya),review:Object.assign(Object.assign({},ge),ma)},Yd=Fe(Hn).map(e=>Hn[e]),Wd=Fe(Yn).map(e=>Yn[e]),Gd=Fe(ge).map(e=>ge[e]),Jd=Fe(ur).map(e=>ur[e]),Kd=Fe(ma).map(e=>ma[e]),Zd=Fe(ya).map(e=>ya[e]),Xd=[...Yd,"custom"].join("|"),ef=[...Wd,"custom"].join("|"),Us="(pr[0-9]+)",Ps="(il[0-9]+pi[0-9]+)",tf=new RegExp(`^${Us}(${Xd})$`),rf=new RegExp(`^(${Ps}(${ef}))|(il[0-9]+nm)$`),af=new RegExp(`^(${Gd.join("|")})$`),nf=new RegExp(`^(${Jd.join("|")})$`),sf=new RegExp(`^${Us}custom$`),of=new RegExp(`^${Ps}custom$`),uf=new RegExp(`^(${[...Bd,...Kd,...Zd].join("|")})$`),cf=e=>tf.test(e),lf=e=>rf.test(e),df=e=>af.test(e),ff=e=>nf.test(e),pf=e=>uf.test(e),hf=[lf,cf,df,ff,pf],gf=[sf,of],yf={anonymizeIp:"aip"},mf={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},vf={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Sf=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],wf=Object.assign(Object.assign(Object.assign(Object.assign({},yf),mf),vf),Sf.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),va=Object.assign(Object.assign({},wf),Qd),bf=e=>{let t=!!e.action&&Hd[e.action]||{};return Fe(e).reduce((r,a)=>{let n=t[a]||va[a]||a;return Object.assign(Object.assign({},r),{[n]:e[a]})},{})},Cf=Fe(va).map(e=>va[e]),If=e=>Cf.indexOf(e)!==-1,qf=e=>e==="custom",kf=e=>[...hf,...Nd,If,qf].some(t=>t(e)),Of=e=>Fe(e).reduce((t,r)=>{let a=Af(r);return a?Object.assign(Object.assign({},t),xf(a,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Af=e=>{let t;return[...gf].every(r=>{var a;return t=(a=r.exec(e))===null||a===void 0?void 0:a[1],!t}),t},xf=(e,t)=>Fe(t).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${e}${a}`]:t[a]}),{}),Ef=class{constructor(e){this.opts=e}sendEvent(e,t){return y(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:a}=this.opts,n=yield this.getQueryParamsForEventType(e),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${n}`,t,a),o=this.encodeForEventType(e,s),u=new Blob([o],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,u)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return y(this,void 0,void 0,function*(){let a=e,n=t;if(r){let i=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:s,body:o}=i;a=s||e;try{n=JSON.parse(o)}catch(u){console.error("Unable to process the request body as a JSON string",u)}}return{payload:n,url:a}})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return y(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,a=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",a?`visitorId=${a}`:"","discardVisitInfo=true"].filter(n=>!!n).join("&")})}isEventTypeLegacy(e){return[N.click,N.custom,N.search,N.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let a=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(a=`access_token=${encodeURIComponent(r)}&${a}`),a}},Rf=class{sendEvent(e,t){return y(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return y(this,void 0,void 0,function*(){return Promise.resolve()})}},Wn=window.fetch,Ts=class{constructor(e){this.opts=e}sendEvent(e,t){return y(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:a,preprocessRequest:n}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},o=Object.assign(Object.assign({},s),n?yield n(s,"analyticsFetch"):{}),{url:u}=o,c=Ue(o,["url"]),l;try{l=yield Wn(u,c)}catch(f){console.error("An error has occured when sending the event.",f);return}if(l.ok){let f=yield l.json();return f.visitorId&&a.setCurrentVisitorId(f.visitorId),f}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return y(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield Wn(t,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[N.click,N.custom,N.search,N.view].indexOf(e)!==-1}getVisitorIdParam(){return y(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Ff=class{constructor(e,t){ha()&&As()?this.storage=new Cd:ha()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new mr),this.client=new Ts(e),this.beaconClient=new Ef(e),window.addEventListener("beforeunload",()=>{let r=t();for(let{eventType:a,payload:n}of r)this.beaconClient.sendEvent(a,n)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Df=class{constructor(e,t){this.storage=t||new mr,this.client=new Ts(e)}getClientDependingOnEventType(e){return this.client}},js=class{constructor(){this.storage=new mr,this.client=new Rf}getClientDependingOnEventType(e){return this.client}},Mf="xx",Uf=e=>(e==null?void 0:e.startsWith(Mf))||!1,Pf=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Tf(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var jf=["1",1,"yes",!0];function Sa(){return Ba()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>jf.indexOf(e)!==-1)}var $s="v15",Vs={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function $f(e=Vs.default,t=$s,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let a=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${a?"":"/rest"}/${t}`}var Vf="38824e1f-37f5-42d3-8372-a4b8fa9df946",Xt=class{get defaultOptions(){return{endpoint:Vs.default,isCustomEndpoint:!1,token:"",version:$s,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Ms}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[qd,wd].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Sa()?this.runtime=new js:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(N.view,{newEventType:N.view,addClientIdParameter:!0}),this.addEventTypeMapping(N.click,{newEventType:N.click,addClientIdParameter:!0}),this.addEventTypeMapping(N.custom,{newEventType:N.custom,addClientIdParameter:!0}),this.addEventTypeMapping(N.search,{newEventType:N.search,addClientIdParameter:!0})}initRuntime(e){return Ln()&&pa()?new Ff(e,()=>{let t=[...this.bufferedRequests];return this.bufferedRequests=[],t}):(Tf()&&console.warn(Pf),new Df(e))}get storage(){return this.runtime.storage}determineVisitorId(){return y(this,void 0,void 0,function*(){try{return Ln()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||$r()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),$r()}})}getCurrentVisitorId(){return y(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return y(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,t){return y(this,void 0,void 0,function*(){if(sr(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Nn(e,Nn(t,Vf)))}})}getParameters(e,...t){return y(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return y(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId($r()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Sa())return null;try{let t=new URL(e).searchParams.get(or.cvo_cid);if(t==null)return null;let r=or.fromString(t);return!r||!pa()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return y(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:a=!1,usesMeasurementProtocol:n=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[s=>r.length>0?this.parseVariableArgumentsPayload(r,s):s[0],s=>y(this,void 0,void 0,function*(){return Object.assign(Object.assign({},s),{visitorId:a?yield this.getCurrentVisitorId():""})}),s=>y(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},s),{clientId:yield this.getCurrentVisitorId()}):s}),s=>n?this.ensureAnonymousUserWhenUsingApiKey(s):s,s=>this.beforeSendHooks.reduce((o,u)=>y(this,void 0,void 0,function*(){let c=yield o;return yield u(e,c)}),s)].reduce((s,o)=>y(this,void 0,void 0,function*(){let u=yield s;return yield o(u)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return y(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[a=>this.setTrackingIdIfTrackingIdNotPresent(a),a=>this.removeEmptyPayloadValues(a,e),a=>this.validateParams(a,e),a=>r?bf(a):a,a=>r?this.removeUnknownParameters(a):a,a=>r?this.processCustomParameters(a):this.mapCustomParametersToCustomData(a)].reduce((a,n)=>y(this,void 0,void 0,function*(){let i=yield a;return yield n(i)}),Promise.resolve(t))})}makeEvent(e,...t){return y(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},a=yield this.resolveParameters(e,...t),n=yield this.resolvePayloadForParameters(e,a);return{eventType:r,payload:n,log:i=>y(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},n),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},a),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...t){return y(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...t)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return y(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new ir().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return y(this,void 0,void 0,function*(){return this.makeEvent(N.search,e)})}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Ue(e,["searchQueryUid"]);return y(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})})}makeClickEvent(e){return y(this,void 0,void 0,function*(){return this.makeEvent(N.click,e)})}sendClickEvent(e){var{searchQueryUid:t}=e,r=Ue(e,["searchQueryUid"]);return y(this,void 0,void 0,function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})})}makeCustomEvent(e){return y(this,void 0,void 0,function*(){return this.makeEvent(N.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Ue(e,["lastSearchQueryUid"]);return y(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})})}makeViewEvent(e){return y(this,void 0,void 0,function*(){return this.makeEvent(N.view,e)})}sendViewEvent(e){return y(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return y(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return y(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(t=>typeof t=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let a=0,n=t.length;a<n;a++){let i=t[a];if(typeof i=="string")r[e[a]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[N.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=a=>typeof a<"u"&&a!==null&&a!=="";return Object.keys(e).filter(a=>this.isKeyAllowedEmpty(t,a)||r(e[a])).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:e[n]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(t=>{if(kf(t))return!0;console.log(t,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=Ue(e,["custom"]),a={};t&&Yt(t)&&(a=this.lowercaseKeys(t));let n=Of(r);return Object.assign(Object.assign({},a),n)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Ue(e,["custom"]);if(t&&Yt(t)){let a=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},a),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach(a=>{r[a.toLowerCase()]=e[a]}),r}validateParams(e,t){let{anonymizeIp:r}=e,a=Ue(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(a.anonymizeIp=1),(t==N.view||t==N.click||t==N.search||t==N.custom)&&(a.originLevel3=this.limit(a.originLevel3,128)),t==N.view&&(a.location=this.limit(a.location,128)),(t=="pageview"||t=="event")&&(a.referrer=this.limit(a.referrer,2048),a.location=this.limit(a.location,2048),a.page=this.limit(a.page,2048)),a}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Ue(e,["userId"]);return Uf(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Ue(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Yt(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Yt(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return $f(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Pe;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Pe||(Pe={}));var v;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(v||(v={}));var Gn={[v.triggerNotify]:"queryPipelineTriggers",[v.triggerExecute]:"queryPipelineTriggers",[v.triggerQuery]:"queryPipelineTriggers",[v.triggerRedirect]:"queryPipelineTriggers",[v.queryError]:"errors",[v.queryErrorBack]:"errors",[v.queryErrorClear]:"errors",[v.queryErrorRetry]:"errors",[v.pagerNext]:"getMoreResults",[v.pagerPrevious]:"getMoreResults",[v.pagerNumber]:"getMoreResults",[v.pagerResize]:"getMoreResults",[v.pagerScrolling]:"getMoreResults",[v.facetSearch]:"facet",[v.facetShowLess]:"facet",[v.facetShowMore]:"facet",[v.recommendation]:"recommendation",[v.likeSmartSnippet]:"smartSnippet",[v.dislikeSmartSnippet]:"smartSnippet",[v.expandSmartSnippet]:"smartSnippet",[v.collapseSmartSnippet]:"smartSnippet",[v.openSmartSnippetFeedbackModal]:"smartSnippet",[v.closeSmartSnippetFeedbackModal]:"smartSnippet",[v.sendSmartSnippetReason]:"smartSnippet",[v.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.clearRecentQueries]:"recentQueries",[v.recentResultClick]:"recentlyClickedDocuments",[v.clearRecentResults]:"recentlyClickedDocuments",[v.showLessFoldedResults]:"folding",[v.caseDetach]:"case",[v.likeGeneratedAnswer]:"generatedAnswer",[v.dislikeGeneratedAnswer]:"generatedAnswer",[v.openGeneratedAnswerSource]:"generatedAnswer",[v.generatedAnswerStreamEnd]:"generatedAnswer",[v.generatedAnswerSourceHover]:"generatedAnswer",[v.generatedAnswerCopyToClipboard]:"generatedAnswer",[v.generatedAnswerHideAnswers]:"generatedAnswer",[v.generatedAnswerShowAnswers]:"generatedAnswer",[v.generatedAnswerExpand]:"generatedAnswer",[v.generatedAnswerCollapse]:"generatedAnswer",[v.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Pe.expandToFullUI]:"interface",[Pe.openUserActions]:"User Actions",[Pe.showPrecedingSessions]:"User Actions",[Pe.showFollowingSessions]:"User Actions",[Pe.clickViewedDocument]:"User Actions",[Pe.clickPageView]:"User Actions",[Pe.createArticle]:"createArticle"},Jn=class{constructor(){this.runtime=new js,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(N.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(N.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(N.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(N.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Ms}};function _f(e){let t="";return e.filter(r=>{let a=r!==t;return t=r,a})}function Lf(e){return e.map(t=>t.replace(/;/g,""))}function _s(e){let t=e.join(";");return t.length<=256?t:_s(e.slice(1))}var Kn=e=>{let t=Lf(e),r=_f(t);return _s(r)};function Zn(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Kn(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Kn(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ls=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Sa();this.coveoAnalyticsClient=r?new Jn:new Xt(e)}disable(){this.coveoAnalyticsClient=new Jn}enable(){this.coveoAnalyticsClient=new Xt(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(v.interfaceLoad)}logInterfaceLoad(){return y(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(v.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return y(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(v.recommendation)}logRecommendation(){return y(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,t){return this.makeClickEvent(v.recommendationOpen,e,t)}logRecommendationOpen(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(v.staticFilterClearAll,e)}logStaticFilterClearAll(e){return y(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(v.staticFilterSelect,e)}logStaticFilterSelect(e){return y(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(v.staticFilterDeselect,e)}logStaticFilterDeselect(e){return y(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(v.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return y(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(v.interfaceChange,e)}logInterfaceChange(e){return y(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(v.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return y(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(v.didyoumeanClick)}logDidYouMeanClick(){return y(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(v.resultsSort,e)}logResultsSort(e){return y(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(v.searchboxSubmit)}logSearchboxSubmit(){return y(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(v.searchboxClear)}logSearchboxClear(){return y(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(v.searchboxAsYouType)}logSearchboxAsYouType(){return y(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(v.breadcrumbFacet,e)}logBreadcrumbFacet(e){return y(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(v.breadcrumbResetAll)}logBreadcrumbResetAll(){return y(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,t){return this.makeClickEvent(v.documentQuickview,e,t)}logDocumentQuickview(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,t){return this.makeClickEvent(v.documentOpen,e,t)}logDocumentOpen(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(v.omniboxAnalytics,Zn(e))}logOmniboxAnalytics(e){return y(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(v.omniboxFromLink,Zn(e))}logOmniboxFromLink(e){return y(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(v.searchFromLink)}logSearchFromLink(){return y(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(v.triggerNotify,e)}logTriggerNotify(e){return y(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(v.triggerExecute,e)}logTriggerExecute(e){return y(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(v.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return y(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(v.undoTriggerQuery,e)}logUndoTriggerQuery(e){return y(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(v.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return y(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(v.pagerResize,e)}logPagerResize(e){return y(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(v.pagerNumber,e)}logPagerNumber(e){return y(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(v.pagerNext,e)}logPagerNext(e){return y(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(v.pagerPrevious,e)}logPagerPrevious(e){return y(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(v.pagerScrolling)}logPagerScrolling(){return y(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(v.facetClearAll,e)}logFacetClearAll(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(v.facetSearch,e)}logFacetSearch(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(v.facetSelect,e)}logFacetSelect(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(v.facetDeselect,e)}logFacetDeselect(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(v.facetExclude,e)}logFacetExclude(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(v.facetUnexclude,e)}logFacetUnexclude(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(v.facetSelectAll,e)}logFacetSelectAll(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(v.facetUpdateSort,e)}logFacetUpdateSort(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(v.facetShowMore,e)}logFacetShowMore(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(v.facetShowLess,e)}logFacetShowLess(e){return y(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(v.queryError,e)}logQueryError(e){return y(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return y(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(v.queryErrorBack);return{description:e.description,log:()=>y(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(v.queryErrorBack)})}})}logQueryErrorBack(){return y(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return y(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(v.queryErrorRetry);return{description:e.description,log:()=>y(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(v.queryErrorRetry)})}})}logQueryErrorRetry(){return y(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return y(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(v.queryErrorClear);return{description:e.description,log:()=>y(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(v.queryErrorClear)})}})}logQueryErrorClear(){return y(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(v.likeSmartSnippet)}logLikeSmartSnippet(){return y(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(v.dislikeSmartSnippet)}logDislikeSmartSnippet(){return y(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(v.expandSmartSnippet)}logExpandSmartSnippet(){return y(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(v.collapseSmartSnippet)}logCollapseSmartSnippet(){return y(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(v.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return y(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(v.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return y(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(v.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(v.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return y(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(v.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return y(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(v.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return y(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(v.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return y(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(v.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(v.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(v.copyToClipboard,e,t)}logCopyToClipboard(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(v.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(v.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(v.recentQueryClick)}logRecentQueryClick(){return y(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(v.clearRecentQueries)}logClearRecentQueries(){return y(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,t){return this.makeCustomEvent(v.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(v.clearRecentResults)}logClearRecentResults(){return y(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(v.noResultsBack)}logNoResultsBack(){return y(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(v.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(v.showLessFoldedResults)}logShowLessFoldedResults(){return y(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=Gn[e]){return y(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseEventRequest(a)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(e,t,r=Gn[e]){return y(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,t,r){return y(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseEventRequest(a)),{eventType:t,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,t,r){return y(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,t){return y(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,t){return y(this,void 0,void 0,function*(){let r=yield this.getBaseSearchEventRequest(e,t),a=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(a,e),log:({searchUID:n})=>a.log({searchQueryUid:n})}})}makeClickEvent(e,t,r,a){return y(this,void 0,void 0,function*(){let n=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),a))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(n);return{description:this.makeEventDescription(i,e),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(e,t,r,a){return y(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,t,r,a)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){var r,a;return y(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(a=(r=this.provider).getGeneratedAnswerMetadata)===null||a===void 0?void 0:a.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return y(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Xt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(v.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return y(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(v.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return y(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(v.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return y(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(v.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(v.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(v.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(v.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(v.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(v.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(v.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(v.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return y(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(v.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return y(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(v.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return y(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},Xn=Object.assign({},$d);Object.keys(Xn).map(e=>Xn[e]);var ei;(function(e){e.click="click",e.flowStart="flowStart"})(ei||(ei={}));var ti;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(ti||(ti={}));var ri;(function(e){e.quit="Quit",e.solved="Solved"})(ri||(ri={}));var $e=e=>new Xt(e).getCurrentVisitorId(),Xe=new Id.HistoryStore,Qs=(e,t)=>typeof t=="function"?(...r)=>{let a=Ni(r[0]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,zs=(e,t)=>(...r)=>{let a=Ni(r[1]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics hook. Returning original request."),a}},Qf=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),zf=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Ns=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return zf(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=(e==null?void 0:e.contextValues)||{},a={};for(let[n,i]of Object.entries(r)){let s=`context_${n}`;a[s]=i}return t.analytics.analyticsMode==="legacy"&&(a.coveoHeadlessVersion=Na),a}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Pa()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};function Dt(e){let{activeValue:t,ancestryMap:r}=Nf(e);return t?Bf(t,r):[]}function Nf(e){let t=[...e],r=new Map;for(;t.length>0;){let a=t.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);t.unshift(...a.children)}return{}}function Bf(e,t){let r=[];if(!e)return[];let a=e;do r.unshift(a),a=t.get(a);while(a);return r}var Hf=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},Bs=(e,t)=>{let r=Hf(e,t);return Dt((r==null?void 0:r.currentValues)??[])};function Yf(e){return{facetSet:e.facetSet??Fa(),categoryFacetSet:e.categoryFacetSet??Ra(),dateFacetSet:e.dateFacetSet??Da(),numericFacetSet:e.numericFacetSet??Ma(),automaticFacetSet:e.automaticFacetSet??Ea()}}var Wf=e=>{let t=[];return Kf(e).forEach((r,a)=>{let n=ip(e,r.facetId),i=ap(r,a+1);if(Jf(r)){if(!Bs(e,r.facetId).length)return;t.push({...i,...tp(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((s,o)=>{if(s.state==="idle")return;let u=ai(s,o+1,n),c=Gf(r)?ni(s):Xf(s);t.push({...i,...u,...c})})}),Zf(e).forEach((r,a)=>{let n=rp(r,a+1);r.values.forEach((i,s)=>{if(i.state==="idle")return;let o=ai(i,s+1,"specific"),u=ni(i);t.push({...n,...o,...u})})}),t},Gf=e=>e.type==="specific",Jf=e=>e.type==="hierarchical",Kf=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),Zf=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),ai=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Xf=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),ni=e=>({displayValue:e.value,value:e.value}),ep=(e,t)=>Bs(e,t).map(r=>r.value).join(";"),tp=(e,t)=>{let r=ep(e,t);return{value:r,valuePosition:1,displayValue:r}},rp=(e,t)=>({title:Hs(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),ap=(e,t)=>({title:Hs(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Hs=(e,t)=>`${e}_${t}`,np=(e,t)=>{var r,a,n,i,s;return((r=e.facetSet[t])==null?void 0:r.request)||((a=e.categoryFacetSet[t])==null?void 0:a.request)||((n=e.dateFacetSet[t])==null?void 0:n.request)||((i=e.numericFacetSet[t])==null?void 0:i.request)||((s=e.automaticFacetSet.set[t])==null?void 0:s.response)},ip=(e,t)=>{let r=np(e,t);return r?r.type:"specific"},Ya=class extends Ns{constructor(){super(...arguments),this.initialState=Qf()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.getState().productListing)==null?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(t=>({documentUri:t.documentUri,documentUriHash:t.documentUriHash,permanentid:t.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},sp=({logger:e,getState:t,analyticsClientMiddleware:r=(i,s)=>s,preprocessRequest:a,provider:n=new Ya(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Ls({token:s,endpoint:o,runtimeEnvironment:u,preprocessRequest:Qs(e,a),beforeSendHooks:[zs(e,r),(f,h)=>(e.info({...h,type:f,endpoint:o,token:s},"Analytics request"),h)]},n);return c||l.disable(),l},Ys=class wa extends Ns{constructor(){super(...arguments),this.getFacetRequest=t=>{var r,a,n,i,s,o,u,c,l,f;return((a=(r=this.state.facetSet)==null?void 0:r[t])==null?void 0:a.request)||((i=(n=this.state.categoryFacetSet)==null?void 0:n[t])==null?void 0:i.request)||((o=(s=this.state.dateFacetSet)==null?void 0:s[t])==null?void 0:o.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[t])==null?void 0:c.request)||((f=(l=this.state.automaticFacetSet)==null?void 0:l.set[t])==null?void 0:f.response)}}getFacetState(){return Wf(Yf(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||wa.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||ze().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var a;let t=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||wa.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var n,i,s;let t=this.getState(),r=super.getBaseMetadata(),a=(s=(i=(n=t.search)==null?void 0:n.response)==null?void 0:i.extendedResults)==null?void 0:s.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(t,r){var n;let a=((n=this.getFacetRequest(t))==null?void 0:n.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:a,facetValue:r,facetTitle:`${a}_${t}`}}getFacetClearAllMetadata(t){var a;let r=((a=this.getFacetRequest(t))==null?void 0:a.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:r,facetTitle:`${r}_${t}`}}getFacetUpdateSortMetadata(t,r){var n;let a=((n=this.getFacetRequest(t))==null?void 0:n.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:a,criteria:r,facetTitle:`${a}_${t}`}}getRangeBreadcrumbFacetMetadata(t,r){var n;let a=((n=this.getFacetRequest(t))==null?void 0:n.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:a,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${a}_${t}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Va()}}getStaticFilterToggleMetadata(t,r){return{...this.getBaseMetadata(),staticFilterId:t,staticFilterValue:r}}getStaticFilterClearAllMetadata(t){return{...this.getBaseMetadata(),staticFilterId:t}}getUndoTriggerQueryMetadata(t){return{...this.getBaseMetadata(),undoneQuery:t}}getCategoryBreadcrumbFacetMetadata(t,r){var n;let a=((n=this.getFacetRequest(t))==null?void 0:n.field)??"";return{...this.getBaseMetadata(),categoryFacetId:t,categoryFacetField:a,categoryFacetPath:r,categoryFacetTitle:`${a}_${t}`}}getOmniboxAnalyticsMetadata(t,r){let a=this.state.querySuggest&&this.state.querySuggest[t],n=a.completions.map(u=>u.expression),i=a.partialQueries.length-1,s=a.partialQueries[i]||"",o=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:s,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(t){return{...this.getBaseMetadata(),...t}}getGeneratedAnswerMetadata(){var a;let t=this.getState(),r={};return((a=t.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||gt().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||ze().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||ze().response.totalCountFiltered}};Ys.fallbackPipelineName="default";var vr=Ys,op=({logger:e,getState:t,analyticsClientMiddleware:r=(i,s)=>s,preprocessRequest:a,provider:n=new vr(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,c=i.configuration.analytics.enabled,l=new Ls({token:s,endpoint:o,runtimeEnvironment:u,preprocessRequest:Qs(e,a),beforeSendHooks:[zs(e,r),(f,h)=>(e.info({...h,type:f,endpoint:o,token:s},"Analytics request"),h)]},n);return c||l.disable(),l},ii=()=>{let e=Xe.getHistory().reverse().find(t=>t.name==="PageView"&&t.value);return e?e.value:""};function up(e){let t=Ws(e),r=[e,...t].filter(a=>a.parentResult).map(a=>a.parentResult);return xc([e,...t,...r],a=>a.uniqueId)}function Ws(e){return e.childResults?e.childResults.flatMap(t=>[t,...Ws(t)]):[]}function cp(e,t){return{...new vr(t).getBaseMetadata(),actionCause:e,type:e}}function lp(e){return Object.assign(e,{instantlyCallable:!0})}function dp(e,t){let r=n=>lp(j(e,n)),a=r(async(n,{getState:i,extra:s})=>{let{analyticsClientMiddleware:o,preprocessRequest:u,logger:c}=s;return await(await t({getState:i,analyticsClientMiddleware:o,preprocessRequest:u,logger:c})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:n,analyticsClientMiddleware:i,preprocessRequest:s,logger:o})=>{let{description:u,log:c}=await t({getState:n,analyticsClientMiddleware:i,preprocessRequest:s,logger:o});return{description:u,action:r(async(l,{getState:f,extra:h})=>await c({state:f(),extra:h}))}}}),a}var Gs=(e,t,r)=>{function a(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return hp(i)}return a},fp=e=>e.configuration.analytics.analyticsMode==="legacy",pp=e=>e.configuration.analytics.analyticsMode==="next",hp=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:i,providerClass:s})=>(r??(r=o=>new s(o)),dp(e,async({getState:o,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let f=[],h={log:async({state:C})=>{for(let E of f)await E(C)}},w=o(),q=i({getState:o,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(o)}),d=await t(q,o());h.description=d==null?void 0:d.description,f.push(async C=>{fp(C)&&await gp(d,r,C,l,q.coveoAnalyticsClient)});let{emit:S}=md(w);return f.push(async C=>{if(pp(C)&&n&&a){let E=a(C);await wp(S,n,E)}}),h}));async function gp(e,t,r,a,n){t(()=>r);let i=await(e==null?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));a.info({client:n,response:i},"Analytics response")}var et=Gs(op,e=>e,vr),yp=Gs(sp,e=>e,Ya),Js={urihash:new k,sourcetype:new k,permanentid:new k},Wa={uniqueId:M,raw:new F({values:Js}),title:M,uri:M,clickUri:M,rankingModifier:new k({required:!1,emptyAllowed:!0})};function mp(e){return Object.assign({},...Object.keys(Js).map(t=>({[t]:e[t]})))}function vp(e){return Object.assign({},...Object.keys(Wa).map(t=>({[t]:e[t]})),{raw:mp(e.raw)})}var Sp=e=>new qe(Wa).validate(vp(e));async function wp(e,t,r){await e(t,r)}var _r=()=>ee,Ks=()=>M,bp=g("configuration/updateBasicConfiguration",e=>b(e,{accessToken:ee,organizationId:ee,platformUrl:ee})),Ga=g("configuration/updateSearchConfiguration",e=>b(e,{apiBaseUrl:ee,pipeline:new k({required:!1,emptyAllowed:!0}),searchHub:ee,timezone:ee,locale:ee,authenticationProviders:new te({required:!1,each:M})})),Cp={enabled:new H({default:!0}),originContext:_r(),originLevel2:_r(),originLevel3:_r(),apiBaseUrl:ee,nextApiBaseUrl:ee,runtimeEnvironment:new fe,anonymous:new H({default:!1}),deviceId:ee,userDisplayName:ee,documentLocation:ee,trackingId:ee,analyticsMode:new k({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new F({options:{required:!1},values:yd.reduce((e,t)=>(e[t]=Wl,e),{})})},Ip=g("configuration/updateAnalyticsConfiguration",e=>(Dc()&&(e.enabled=!1),b(e,Cp))),qp=g("configuration/analytics/disable"),kp=g("configuration/analytics/enable"),Op=g("configuration/analytics/originlevel2",e=>b(e,{originLevel2:Ks()})),Ap=g("configuration/analytics/originlevel3",e=>b(e,{originLevel3:Ks()})),Zs={q:new k,enableQuerySyntax:new H,aq:new k,cq:new k,firstResult:new $({min:0}),numberOfResults:new $({min:0}),sortCriteria:new k,f:new F,fExcluded:new F,cf:new F,nf:new F,df:new F,debug:new H,sf:new F,tab:new k,af:new F},we=g("searchParameters/restore",e=>b(e,Zs)),xp=g("debug/enable"),Ep=g("debug/disable");z(Ji(),e=>{e.addCase(xp,()=>!0).addCase(Ep,()=>!1).addCase(we,(t,r)=>r.payload.debug??t)});var Xs=g("history/undo"),eo=g("history/redo"),De=g("history/snapshot");j("history/back",async(e,{dispatch:t})=>{t(Xs()),await t(le())});j("history/forward",async(e,{dispatch:t})=>{t(eo()),await t(le())});var le=j("history/change",async(e,{getState:t})=>t().history.present),Rp=g("pipeline/set",e=>b(e,new k({required:!0,emptyAllowed:!0})));z(rs(),e=>{e.addCase(Rp,(t,r)=>r.payload).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.pipeline)??t}).addCase(Ga,(t,r)=>r.payload.pipeline||t)});var Fp=g("searchHub/set",e=>b(e,new k({required:!0,emptyAllowed:!0})));z(Pa(),e=>{e.addCase(Fp,(t,r)=>r.payload).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.searchHub)??t}).addCase(Ga,(t,r)=>r.payload.searchHub||t)});var Me=g("breadcrumb/deselectAll"),Sr=g("breadcrumb/deselectAllNonBreadcrumbs"),Ut=g("facet/updateFacetAutoSelection",e=>b(e,{allow:new H({required:!0})})),Dp=class extends vr{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){return this.activeInstantResultQuery??gt().q}get responseTime(){var e;return((e=this.activeInstantResultCache)==null?void 0:e.duration)??ze().duration}get numberOfResults(){var e;return((e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)??ze().response.totalCountFiltered}getSearchUID(){var e;return((e=this.activeInstantResultCache)==null?void 0:e.searchUid)||super.getSearchUID()}},Mp=()=>et("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Dp(e)),Up=()=>({actionCause:"searchboxAsYouType"}),Ja={id:M},Pp={...Ja,q:Se},Tp=g("instantResults/register",e=>b(e,Ja)),Ka=g("instantResults/updateQuery",e=>b(e,Pp)),jp=g("instantResults/clearExpired",e=>b(e,Ja)),wr=new $({required:!0,min:0}),$p=g("pagination/registerNumberOfResults",e=>b(e,wr)),Vp=g("pagination/updateNumberOfResults",e=>b(e,wr)),_p=g("pagination/registerPage",e=>b(e,wr)),br=g("pagination/updatePage",e=>b(e,wr)),Lp=g("pagination/nextPage"),Qp=g("pagination/previousPage"),Pt=g("query/updateQuery",e=>b(e,{q:new k,enableQuerySyntax:new H})),Cr=async(e,t)=>{let r=e.analyticsMode==="next",a=e.originLevel3==="default";return{analytics:{clientId:await $e(e),clientTimestamp:new Date().toISOString(),documentReferrer:r&&a?null:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...ii()&&{pageId:ii()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:Os(e)}}}},Za=async(e,t)=>{var r,a,n,i;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await $e(e.configuration.analytics),actionsHistory:Xe.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((a=e.advancedSearchQueries)==null?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((i=e.advancedSearchQueries)==null?void 0:i.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Cr(e.configuration.analytics,t),...e.excerptLength&&!J(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},Xa=async(e,t)=>{var r,a,n,i;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await $e(e.configuration.analytics),actionsHistory:Xe.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((a=e.advancedSearchQueries)==null?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((i=e.advancedSearchQueries)==null?void 0:i.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Cr(e.configuration.analytics,t),...e.excerptLength&&!J(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},si=()=>et("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),xe=e=>et("search/queryError",(t,r)=>{var a,n,i,s;return t.makeQueryError({query:((a=r.query)==null?void 0:a.q)||gt().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||Ot().aq,cq:((i=r.advancedSearchQueries)==null?void 0:i.cq)||Ot().cq,dq:((s=r.advancedSearchQueries)==null?void 0:s.dq)||Ot().dq,errorType:e.type,errorMessage:e.message})}),er=Ie(Aa()),zp=Ie(hc()),ba=Ie(Aa()),Np=Ie(gc());ba.default.extend(Np.default);var to="YYYY/MM/DD@HH:mm:ss",Bp="1401-01-01";function cr(e,t){let r=(0,ba.default)(e,t);return!r.isValid()&&!t?(0,ba.default)(e,to):r}function ro(e){return e.format(to)}function Hp(e,t){let r=cr(e,t);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:a}`)}ao(r)}function ao(e){if(e.isBefore(Bp))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}er.default.extend(zp.default);var no=["past","now","next"],io=["minute","hour","day","week","month","quarter","year"],Yp=e=>{let t=e==="now";return{amount:new $({required:!t,min:1}),unit:new k({required:!t,constrainTo:io}),period:new k({required:!0,constrainTo:no})}};function oi(e){if(typeof e=="string"&&!Mt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?uo(e):e;new qe(Yp(t.period)).validate(t);let r=so(t),a=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);ao(r)}function Wp(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":case"next":return`${t}-${r}-${a}`;case"now":return t}}function so(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":return(0,er.default)().subtract(r,a);case"next":return(0,er.default)().add(r,a);case"now":return(0,er.default)()}}function Ca(e){return ro(so(uo(e)))}function oo(e){return e.toLocaleLowerCase().split("-")}function Mt(e){let[t,r,a]=oo(e);if(t==="now")return!0;if(!no.includes(t)||!io.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function Gp(e){return!!e&&typeof e=="object"&&"period"in e}function uo(e){let[t,r,a]=oo(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:a||void 0}}function Jp(e){return e.type==="dateRange"}function co(e){return`start${e}`}function lo(e){return`end${e}`}var Kp=()=>({dateFacetValueMap:{}});function Zp(e,t,r){let a=e.start,n=e.end;return Mt(a)&&(a=Ca(a),r.dateFacetValueMap[t][co(a)]=e.start),Mt(n)&&(n=Ca(n),r.dateFacetValueMap[t][lo(n)]=e.end),{...e,start:a,end:n}}function Xp(e,t){if(Jp(e)){let{facetId:r,currentValues:a}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:a.map(n=>Zp(n,r,t))}}return e}function en(e){var r;let t=Kp();return{request:{...e,facets:(r=e.facets)==null?void 0:r.map(a=>Xp(a,t))},mappings:t}}function eh(e,t,r){return{...e,start:r.dateFacetValueMap[t][co(e.start)]||e.start,end:r.dateFacetValueMap[t][lo(e.end)]||e.end}}function th(e,t){return e.facetId in t.dateFacetValueMap}function rh(e,t){return th(e,t)?{...e,values:e.values.map(r=>eh(r,e.facetId,t))}:e}function fo(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(a=>rh(a,t))}}:e}function po(e,t){let r={};e.forEach(i=>r[i.facetId]=i);let a=[];t.forEach(i=>{i in r&&(a.push(r[i]),delete r[i])});let n=Object.values(r);return[...a,...n]}function Ye(e){return Object.values(e).map(t=>t.request)}var Ce=async(e,t)=>{var o;let r=ch(e),a=ah(e),n=nh(e),i=e.configuration.analytics.analyticsMode==="legacy"?await Xa(e,t):await Za(e,t),s=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return en({...i,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...a.length&&{facets:a},...e.pagination&&{numberOfResults:s(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((o=e.folding)==null?void 0:o.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function ah(e){return po(sh(e),e.facetOrder??[])}function nh(e){var r;let t=(r=e.automaticFacetSet)==null?void 0:r.set;return t?Object.values(t).map(a=>a.response).map(ih).filter(a=>a.currentValues.length>0):void 0}function ih(e){let{field:t,label:r,values:a}=e,n=a.filter(i=>i.state==="selected");return{field:t,label:r,currentValues:n}}function sh(e){return oh(e).filter(({facetId:t})=>{var r,a;return((a=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:a.enabled)??!0})}function oh(e){return[...uh(e.facetSet??{}),...ui(e.numericFacetSet??{}),...ui(e.dateFacetSet??{}),...Ye(e.categoryFacetSet??{})]}function uh(e){return Ye(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function ui(e){return Ye(e).map(t=>{let r=t.currentValues.some(({state:a})=>a!=="idle");return t.generateAutomaticRanges&&!r?{...t,currentValues:[]}:t})}function ch(e){var n,i;let t=((n=e.advancedSearchQueries)==null?void 0:n.cq.trim())||"",r=((i=Object.values(e.tabSet||{}).find(s=>s.isActive))==null?void 0:i.expression.trim())||"",a=lh(e);return[t,r,...a].filter(s=>!!s).join(" AND ")}function lh(e){return Object.values(e.staticFilterSet||{}).map(t=>{let r=t.values.filter(n=>n.state==="selected"&&!!n.expression.trim()),a=r.map(n=>n.expression).join(" OR ");return r.length>1?`(${a})`:a})}var dh=g("didYouMean/enable"),fh=g("didYouMean/disable"),ph=g("didYouMean/automaticCorrections/disable"),hh=g("didYouMean/automaticCorrections/enable"),Ir=g("didYouMean/correction",e=>b(e,M)),gh=g("didYouMean/automaticCorrections/mode",e=>b(e,new k({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))),ci=()=>et("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),yh=()=>({actionCause:"didyoumeanAutomatic"});new F({values:{undoneQuery:Se},options:{required:!0}});var mh=()=>et("analytics/trigger/query",(e,t)=>{var r;return(r=t.triggers)!=null&&r.queryModification.newQuery?e.makeTriggerQuery():null}),tn=g("trigger/query/ignore",e=>b(e,new k({emptyAllowed:!0,required:!0}))),rn=g("trigger/query/modification",e=>b(e,new F({values:{originalQuery:ee,modification:ee}}))),Tt=class{constructor(e,t=r=>{this.dispatch(Pt({q:r}))}){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var o;let a=new Date().getTime(),n=fo(await this.extra.apiClient.search(t,r),e),i=new Date().getTime()-a,s=((o=this.getState().query)==null?void 0:o.q)||"";return{response:n,duration:i,queryExecuted:s,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Re(e.response)?(this.dispatch(xe(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:n}=t.didYouMean,{results:i,queryCorrections:s,queryCorrection:o}=r;if(!a||!n)return null;let u=i.length===0&&s&&s.length!==0,c=!J(o)&&!J(o.correctedQuery);if(!u&&!c)return null;let l=u?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(De(Te(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:a}=r.queryCorrections[0],n=await this.automaticallyRetryQueryWithCorrection(a);return Re(n.response)?(this.dispatch(xe(n.response.error)),this.rejectWithValue(n.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(De(Te(this.getState()))),{...n,response:{...n.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:ci()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:a}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:a,analyticsAction:ci()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r),this.extra)}async processQueryTriggersOrContinue(e){var i,s;let t=this.getSuccessResponse(e);if(!t)return null;let r=((i=t.triggers.find(o=>o.type==="query"))==null?void 0:i.content)||"";if(!r)return null;if(((s=this.getState().triggers)==null?void 0:s.queryModification.queryToIgnore)===r)return this.dispatch(tn("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),n=await this.automaticallyRetryQueryWithTriggerModification(r);return Re(n.response)?(this.dispatch(xe(n.response.error)),this.rejectWithValue(n.response.error)):(this.dispatch(De(Te(this.getState()))),{...n,response:{...n.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:mh()})}getStateAfterResponse(e,t,r,a){var n;return{...r,query:{q:e,enableQuerySyntax:((n=r.query)==null?void 0:n.enableQuerySyntax)??gt().enableQuerySyntax},search:{...ze(),duration:t,response:a,results:a.results}}}processSuccessResponse(e){return this.dispatch(De(Te(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Cs(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await Ce(this.getState()),{origin:"mainSearch"});return this.dispatch(Ir(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(rn({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Ce(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var t;let e=this.getState();return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};j("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new k,enableQuerySyntax:new H,clearFilters:new H}),e.clearFilters&&(r(Me()),r(Sr())),r(Ut({allow:!0})),r(Pt({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(br(1))});var Lr=j("search/executeSearch",async(e,t)=>{let r=t.getState();return await an(r,t,e)}),Qr=j("search/fetchPage",async(e,t)=>{let r=t.getState();return await yo(r,t,e)}),zr=j("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await mo(t,r)}),vh=j("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await Ch(t,e,r)});j("search/fetchInstantResults",async(e,t)=>go(e,t));var Sh=async(e,t)=>{var a,n;let r=await Ce(e,t);return r.request={...r.request,firstResult:(((a=e.pagination)==null?void 0:a.firstResult)??0)+(((n=e.search)==null?void 0:n.results.length)??0)},r},wh=async(e,t,r)=>{let a=await Xa(e);return en({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},bh=async(e,t)=>{let r=await Ce(e,t);return r.request.numberOfResults=0,r},ho=e=>{var t;e.configuration.analytics.enabled&&Xe.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function go(e,t){b(e,{id:M,q:M,maxResultsPerQuery:new $({required:!0,min:1}),cacheTimeout:new $});let{q:r,maxResultsPerQuery:a}=e,n=t.getState(),i=new Tt({...t,analyticsAction:Mp()},c=>{t.dispatch(Ka({q:c,id:e.id}))}),s=await wh(n,r,a),o=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),u=await i.process(o);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function yo(e,t,r){ho(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:i}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:i}),o=new Tt({...t,analyticsAction:r}),u=await Ce(e,s),c=await o.fetchFromAPI(u,{origin:"mainSearch"});return await o.process(c)}async function mo(e,t){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=e.extra,{description:i}=await si().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),s=new Tt({...e,analyticsAction:si()}),o=await Sh(t,i),u=await s.fetchFromAPI(o,{origin:"mainSearch"});return await s.process(u)}async function Ch(e,t,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:i}=e.extra,{description:s}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:i}),o=new Tt({...e,analyticsAction:t}),u=await bh(r,s),c=await o.fetchFromAPI(u,{origin:"facetValues"});return await o.process(c)}async function an(e,t,r){ho(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:i}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:i}),o=await Ce(e,s),u=new Tt({...t,analyticsAction:r}),c=await u.fetchFromAPI(o,{origin:"mainSearch"});return await u.process(c)}var jt=class{constructor(e,t=r=>{this.dispatch(Pt({q:r}))}){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var o;let a=new Date().getTime(),n=fo(await this.extra.apiClient.search(t,r),e),i=new Date().getTime()-a,s=((o=this.getState().query)==null?void 0:o.q)||"";return{response:n,duration:i,queryExecuted:s,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Re(e.response)?(this.dispatch(xe(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:a,automaticallyCorrectQuery:n}=t.didYouMean,{results:i,queryCorrections:s,queryCorrection:o}=r;if(!a||!n)return null;let u=i.length===0&&s&&s.length!==0,c=!J(o)&&!J(o.correctedQuery);if(!u&&!c)return null;let l=u?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(De(Te(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:a}=r.queryCorrections[0],n=await this.automaticallyRetryQueryWithCorrection(a);return Re(n.response)?(this.dispatch(xe(n.response.error)),this.rejectWithValue(n.response.error)):(this.dispatch(De(Te(this.getState()))),{...n,response:{...n.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:a}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:a}}async processQueryTriggersOrContinue(e){var i,s;let t=this.getSuccessResponse(e);if(!t)return null;let r=((i=t.triggers.find(o=>o.type==="query"))==null?void 0:i.content)||"";if(!r)return null;if(((s=this.getState().triggers)==null?void 0:s.queryModification.queryToIgnore)===r)return this.dispatch(tn("")),null;let a=this.getCurrentQuery(),n=await this.automaticallyRetryQueryWithTriggerModification(r);return Re(n.response)?(this.dispatch(xe(n.response.error)),this.rejectWithValue(n.response.error)):(this.dispatch(De(Te(this.getState()))),{...n,response:{...n.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(e){return this.dispatch(De(Te(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return Cs(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=yh(),a=await this.fetchFromAPI(await Ce(t,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(Ir(e)),a}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(rn({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Ce(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var t;let e=this.getState();return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};j("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new k,enableQuerySyntax:new H,clearFilters:new H}),e.clearFilters&&(r(Me()),r(Sr())),r(Ut({allow:!0})),r(Pt({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(br(1))});var ue=j("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return an(r,t,e.legacy);bo(r);let a=nn(e.next),n=await Ce(r,a),i=new jt({...t,analyticsAction:a}),s=await i.fetchFromAPI(n,{origin:"mainSearch"});return await i.process(s)}),vo=j("search/fetchPage",async(e,t)=>{let r=t.getState();if(bo(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return yo(r,t,e.legacy);let a=new jt({...t,analyticsAction:e.next}),n=await Ce(r,e.next),i=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(i)}),So=j("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return mo(t,r);let a=cp("pagerScrolling",t.getState),n=new jt({...t,analyticsAction:a}),i=await Ih(r,a),s=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(s)}),wo=j("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return an(r,t,e.legacy);let a=nn(e.next),n=new jt({...t,analyticsAction:a}),i=await kh(r,a),s=await n.fetchFromAPI(i,{origin:"facetValues"});return await n.process(s)}),Nr=j("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return go(e,t);b(e,{id:M,q:M,maxResultsPerQuery:new $({required:!0,min:1}),cacheTimeout:new $});let{q:a,maxResultsPerQuery:n}=e,i=nn(Up()),s=await qh(r,a,n,i),o=new jt({...t,analyticsAction:i},l=>{t.dispatch(Ka({q:l,id:e.id}))}),u=await o.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),Ih=async(e,t)=>{var a,n;let r=await Ce(e,t);return r.request={...r.request,firstResult:(((a=e.pagination)==null?void 0:a.firstResult)??0)+(((n=e.search)==null?void 0:n.results.length)??0)},r},qh=async(e,t,r,a)=>{let n=await Za(e,a);return en({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},kh=async(e,t)=>{let r=await Ce(e,t);return r.request.numberOfResults=0,r},bo=e=>{var t;e.configuration.analytics.enabled&&Xe.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},nn=e=>({actionCause:e.actionCause,type:e.actionCause});function Br(e,t){let r=t.payload??null;r&&(e.response=ze().response,e.results=[],e.questionAnswer=sa()),e.error=r,e.isLoading=!1}function Ia(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Oh(e,t){Ia(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Hr(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}z(ze(),e=>{e.addCase(Lr.rejected,(t,r)=>Br(t,r)),e.addCase(zr.rejected,(t,r)=>Br(t,r)),e.addCase(Qr.rejected,(t,r)=>Br(t,r)),e.addCase(Lr.fulfilled,(t,r)=>{Oh(t,r)}),e.addCase(zr.fulfilled,(t,r)=>{Ia(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(Qr.fulfilled,(t,r)=>{Ia(t,r),t.results=r.payload.response.results}),e.addCase(vh.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(Lr.pending,Hr),e.addCase(zr.pending,Hr),e.addCase(Qr.pending,Hr)});z(Na,e=>e);var Ah=Ie(yc()),xh=g("tab/register",e=>{let t=new F({values:{id:M,expression:Se}});return b(e,t)}),sn=g("tab/updateActiveTab",e=>b(e,M));function Eh(e,t){if(Ql(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Wi;let r=zl(e,t);return r?Hi(t,r.environment).analytics:e}z(Uc(),e=>e.addCase(bp,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Yi}`,t.analytics.apiBaseUrl=Eh(r.payload.platformUrl,t.organizationId))}).addCase(Ga,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Ip,(t,r)=>{J(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),J(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),J(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),J(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),J(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),J(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),J(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),J(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),J(r.payload.source)||(t.analytics.source=r.payload.source);let a=(0,Ah.default)();a&&(t.analytics.analyticsMode="next",t.analytics.trackingId=a),J(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),J(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),J(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),J(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),J(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(qp,t=>{t.analytics.enabled=!1}).addCase(kp,t=>{t.analytics.enabled=!0}).addCase(Op,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Ap,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(sn,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(we,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));Ie(_i());Ie(Qi());var Rh={organizationId:M,accessToken:M,platformUrl:new k({required:!1,emptyAllowed:!1}),name:new k({required:!1,emptyAllowed:!1}),analytics:new F({options:{required:!1},values:{enabled:new H({required:!1}),originContext:new k({required:!1}),originLevel2:new k({required:!1}),originLevel3:new k({required:!1}),analyticsMode:new k({constrainTo:["legacy","next"],required:!1})}})};function Fh(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Hi("searchuisamples")}}new qe({...Rh,search:new F({options:{required:!1},values:{pipeline:new k({required:!1,emptyAllowed:!0}),searchHub:ee,locale:ee,timezone:ee,authenticationProviders:new te({required:!1,each:M})}})});function Dh(){return{...Fh(),search:{searchHub:"default"}}}var Mh=g("fields/registerFieldsToInclude",e=>b(e,Is)),Uh=g("fields/fetchall/enable"),Ph=g("fields/fetchall/disable"),Th=j("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:i,organizationId:s}=n.configuration,{apiBaseUrl:o}=n.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:s,url:o});return Re(u)?a(u.error):u.success.fields}),jh={collectionField:new k({emptyAllowed:!1,required:!1}),parentField:new k({emptyAllowed:!1,required:!1}),childField:new k({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new $({min:0,required:!1})},Co=g("folding/register",e=>b(e,jh)),Yr=j("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let n=t(),i=n.configuration.analytics.analyticsMode==="legacy"?await Xa(n):await Za(n),s=await a.search({...i,q:$h(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${e}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Re(s)?r(s.error):{collectionId:e,results:s.success.results,rootResult:n.folding.collections[e].result}});function $h(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}z(zc(),e=>e.addCase(Mh,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Uh,t=>{t.fetchAllFields=!0}).addCase(Ph,t=>{t.fetchAllFields=!1}).addCase(Th.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Co,(t,{payload:r})=>{let a=ts().fields;t.fieldsToInclude.push(r.collectionField??a.collection,r.parentField??a.parent,r.childField??a.child)}));var Vh=new te({each:M,required:!0}),Io=(e,t)=>(b(e,M),ja(t)?b(t,M):b(t,Vh),{payload:{contextKey:e,contextValue:t}}),_h=g("context/set",e=>{for(let[t,r]of Object.entries(e))Io(t,r);return{payload:e}}),Lh=g("context/add",e=>Io(e.contextKey,e.contextValue)),Qh=g("context/remove",e=>b(e,M));z(Gi(),e=>{e.addCase(_h,(t,r)=>{t.contextValues=r.payload}).addCase(Lh,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Qh,(t,r)=>{delete t.contextValues[r.payload]}).addCase(le.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});new qe({values:new F({options:{required:!1}})});var zh=g("dictionaryFieldContext/set",e=>{let t=new F({options:{required:!0}}),r=b(e,t).error;if(r)return{payload:e,error:r};let a=Object.values(e),n=new te({each:Se}),i=b(a,n).error;return i?{payload:e,error:i}:{payload:e}}),Nh=g("dictionaryFieldContext/add",e=>{let t=new F({options:{required:!0},values:{field:Se,key:Se}});return b(e,t)}),Bh=g("dictionaryFieldContext/remove",e=>b(e,Se));z(Ki(),e=>{e.addCase(zh,(t,r)=>{t.contextValues=r.payload}).addCase(Nh,(t,r)=>{let{field:a,key:n}=r.payload;t.contextValues[a]=n}).addCase(Bh,(t,r)=>{delete t.contextValues[r.payload]}).addCase(le.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});ie(e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!=="",e=>e);var Hh=(e,t)=>{var a;let r={...Pc(),...t,correctedQuery:(t==null?void 0:t.correctedQuery)||((a=t==null?void 0:t.corrections[0])==null?void 0:a.correctedQuery)||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};z(Tc(),e=>{e.addCase(dh,t=>{t.enableDidYouMean=!0}).addCase(fh,t=>{t.enableDidYouMean=!1}).addCase(hh,t=>{t.automaticallyCorrectQuery=!0}).addCase(ph,t=>{t.automaticallyCorrectQuery=!1}).addCase(ue.pending,t=>{t.queryCorrection=ia(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(ue.fulfilled,(t,r)=>{let{queryCorrection:a,queryCorrections:n}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let i=n&&n[0]?n[0]:ia();t.queryCorrection=i}t.queryCorrectionMode==="next"&&Hh(t,a),t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery}).addCase(Ir,(t,r)=>{t.wasCorrectedTo=r.payload}).addCase(gh,(t,r)=>{t.queryCorrectionMode=r.payload})});var X=M,tt=g("facetOptions/update",(e={freezeFacetOrder:!0})=>b(e,{freezeFacetOrder:new H({required:!1})})),Yh=g("facetOptions/facet/enable",e=>b(e,X)),$t=g("facetOptions/facet/disable",e=>b(e,X)),on={facetId:X,captions:new F({options:{required:!1}}),numberOfValues:new $({required:!1,min:1}),query:new k({required:!1,emptyAllowed:!0})},Wh={path:new te({required:!0,each:M}),displayValue:Se,rawValue:Se,count:new $({required:!0,min:0})},qo=g("categoryFacet/selectSearchResult",e=>b(e,{facetId:X,value:new F({values:Wh})})),Gh=g("categoryFacetSearch/register",e=>b(e,on));function un(e,t){var i;let{facetId:r,criterion:a}=t,n=(i=e[r])==null?void 0:i.request;n&&(n.sortCriteria=a)}function Wt(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function ko(e,t){e&&(e.numberOfValues=t)}function Wr(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function li(e,t,r){e.currentValues=Jh(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function Jh(e,t){if(!e.length)return[];let r=di(e[0],t),a=r;for(let n of e.splice(1)){let i=di(n,t);a.children.push(i),a=i}return a.state="selected",a.retrieveChildren=!0,[r]}function di(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var Kh={state:new fe({required:!0}),numberOfResults:new $({required:!0,min:0}),value:new k({required:!0,emptyAllowed:!0}),path:new te({required:!0,each:M}),moreValuesAvailable:new H({required:!1})};function Oo(e){e.children.forEach(t=>{Oo(t)}),yt({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Kh)}var pt={facetId:X,field:M,delimitingCharacter:new k({required:!1,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new $({required:!1,min:0}),numberOfValues:new $({required:!1,min:1}),sortCriteria:new fe({required:!1}),basePath:new te({required:!1,each:M}),filterByBasePath:new H({required:!1})},Ao=g("categoryFacet/register",e=>b(e,pt)),xo=g("categoryFacet/toggleSelectValue",e=>{try{return yt(e.facetId,M),Oo(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Ze(t)}}}),Eo=g("categoryFacet/deselectAll",e=>b(e,pt.facetId)),Zh=g("categoryFacet/updateNumberOfValues",e=>b(e,{facetId:pt.facetId,numberOfValues:pt.numberOfValues})),Xh=g("categoryFacet/updateSortCriterion",e=>b(e,{facetId:pt.facetId,criterion:new fe})),eg=g("categoryFacet/updateBasePath",e=>b(e,{facetId:pt.facetId,basePath:new te({each:M})}));z(Ra(),e=>{e.addCase(Ao,(t,r)=>{let a=r.payload,{facetId:n}=a;if(n in t)return;let i=ag(a),s=i.numberOfValues;t[n]={request:i,initialNumberOfValues:s}}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.categoryFacetSet)??t}).addCase(we,(t,r)=>{let a=r.payload.cf||{};Object.keys(t).forEach(n=>{let i=t[n].request,s=a[n]||[];(s.length||i.currentValues.length)&&li(i,s,t[n].initialNumberOfValues)})}).addCase(Xh,(t,r)=>{var s;let{facetId:a,criterion:n}=r.payload,i=(s=t[a])==null?void 0:s.request;i&&(i.sortCriteria=n)}).addCase(eg,(t,r)=>{var s;let{facetId:a,basePath:n}=r.payload,i=(s=t[a])==null?void 0:s.request;i&&(i.basePath=[...n])}).addCase(xo,(t,r)=>{var f;let{facetId:a,selection:n,retrieveCount:i}=r.payload,s=(f=t[a])==null?void 0:f.request;if(!s)return;let{path:o}=n,u=o.slice(0,o.length-1),c=rg(s,u,i);if(c.length){let h=c[0];h.retrieveChildren=!0,h.state="selected",h.children=[];return}let l=Ro(n.value,i);l.state="selected",c.push(l),s.numberOfValues=1}).addCase(Eo,(t,r)=>{let a=r.payload;Wr(t,a)}).addCase(Me,t=>{Object.keys(t).forEach(r=>Wr(t,r))}).addCase(Ut,(t,r)=>Object.keys(t).forEach(a=>{t[a].request.preventAutoSelect=!r.payload.allow})).addCase(Zh,(t,r)=>{var s;let{facetId:a,numberOfValues:n}=r.payload,i=(s=t[a])==null?void 0:s.request;if(i){if(!i.currentValues.length)return ko(i,n);ng(t,r.payload)}}).addCase(qo,(t,r)=>{let{facetId:a,value:n}=r.payload,i=t[a];if(!i)return;let s=[...n.path,n.rawValue];li(i.request,s,i.initialNumberOfValues)}).addCase(wo.fulfilled,(t,r)=>{fi(t,r.payload.response.facets)}).addCase(ue.fulfilled,(t,r)=>{fi(t,r.payload.response.facets)}).addCase($t,(t,r)=>{Wr(t,r.payload)})});var tg={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function rg(e,t,r){let a=e.currentValues;for(let n of t){let i=a[0];(!i||n!==i.value)&&(i=Ro(n,r),a.length=0,a.push(i)),i.retrieveChildren=!1,i.state="idle",a=i.children}return a}function ag(e){return{...tg,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function Ro(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function fi(e,t){t.forEach(r=>{var s;if(!ig(e,r))return;let a=r.facetId,n=(s=e[a])==null?void 0:s.request;if(!n)return;let i=sg(n,r);n.currentValues=i?[]:n.currentValues,n.preventAutoSelect=!1})}function ng(e,t){var i;let{facetId:r,numberOfValues:a}=t,n=(i=e[r])==null?void 0:i.request.currentValues[0];if(n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function ig(e,t){return t.facetId in e}function sg(e,t){let r=Dt(e.currentValues),a=Dt(t.values);return r.length!==a.length}var Fo=e=>og(e.cartItems,e.cart);function og(e,t){let r=e.reduce((a,n)=>{let{productId:i,quantity:s}=t[n];return i in a||(a[i]={productId:i,quantity:0}),a[i].quantity+=s,a},{});return[...Object.values(r)]}var cn=(e=>(e.Relevance="relevance",e.Fields="fields",e))(cn||{}),ln=(e=>(e.Ascending="asc",e.Descending="desc",e))(ln||{});new F({options:{required:!1},values:{by:new Ge({enum:cn,required:!0}),fields:new te({each:new F({values:{name:new k,direction:new Ge({enum:ln})}})})}});new F({options:{required:!1},values:{by:new Ge({enum:cn,required:!0}),fields:new te({each:new F({values:{field:new k({required:!0}),direction:new Ge({enum:ln}),displayName:new k}})})}});var rt=async e=>({...await ug(e),facets:lg(e),...e.commerceSort&&{sort:dg(e.commerceSort.appliedSort)}}),ug=async(e,t)=>{let{view:r,user:a,...n}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...n,clientId:await $e(e.configuration.analytics),context:{user:a,view:r,cart:Fo(e.cart)},...cg(e,t)}},cg=(e,t)=>{var a,n;let r=t?(a=e.commercePagination)==null?void 0:a.recommendations[t]:(n=e.commercePagination)==null?void 0:n.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function lg(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map(t=>e.commerceFacetSet[t].request).filter(t=>t.values.length>0)}function dg(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var fg=async(e,t,r)=>{var E,T;let a=`*${t.categoryFacetSearchSet[e].options.query}*`,n=(E=t.commerceFacetSet[e])==null?void 0:E.request,i=n&&pg(n)?n&&hg(n):[],s=i.length?[i]:[],o=(T=t.commerceQuery)==null?void 0:T.query,{url:u,accessToken:c,organizationId:l,trackingId:f,language:h,country:w,currency:q,clientId:d,context:S,...C}=await rt(t);return{url:u,accessToken:c,organizationId:l,facetId:e,facetQuery:a,ignorePaths:s,trackingId:f,language:h,country:w,currency:q,clientId:d,context:S,...C,query:o}};function pg(e){return e.type==="hierarchical"}var hg=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t},gg=async(e,t,r)=>{var d;let a=`*${t.facetSearchSet[e].options.query}*`,n=(d=t.commerceQuery)==null?void 0:d.query;n===void 0&&(n="");let{url:i,accessToken:s,organizationId:o,trackingId:u,language:c,country:l,currency:f,clientId:h,context:w,...q}=await rt(t);return{url:i,accessToken:s,organizationId:o,facetId:e,facetQuery:a,trackingId:u,language:c,country:l,currency:f,clientId:h,context:w,...q,query:n}},Do=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let i=r();n(t,M);let s=yg(i,t)||mg(i,t)?gg(t,i):fg(t,i),o=await a.facetSearch(await s);return{facetId:t,response:o}},st=j("commerce/facetSearch/executeSearch",Do()),ot=j("commerce/facetSearch/facetFieldSuggest",Do()),yg=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,mg=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,at=e=>e.error!==void 0,Mo=ie(e=>{var t;return((t=e.commercePagination)==null?void 0:t.principal.perPage)||0},e=>e);ie((e,t)=>{var r,a;return((a=(r=e.commercePagination)==null?void 0:r.recommendations[t])==null?void 0:a.perPage)||0},e=>e);var Uo=ie(e=>{var t;return((t=e.commercePagination)==null?void 0:t.principal.totalEntries)||0},e=>e);ie((e,t)=>{var r,a;return((a=(r=e.commercePagination)==null?void 0:r.recommendations[t])==null?void 0:a.totalEntries)||0},e=>e);ie(e=>{var t;return((t=e.commercePagination)==null?void 0:t.principal.page)||0},e=>e);ie((e,t)=>{var r,a;return((a=(r=e.commercePagination)==null?void 0:r.recommendations[t])==null?void 0:a.page)||0},e=>e);ie(e=>e.productListing.responseId,e=>e);ie(e=>e.productListing.requestId,e=>e);var Po=ie(e=>{var t;return((t=e.productListing)==null?void 0:t.products.length)||0},e=>e),vg=ie(e=>({total:Uo(e),current:Po(e)}),({current:e,total:t})=>e<t);ie(e=>{var t;return(t=e.productListing)==null?void 0:t.isLoading},e=>J(e)?!1:e);ie(e=>{var t;return(t=e.productListing)==null?void 0:t.error},e=>e);var dn=j("commerce/productListing/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let i=t(),{apiClient:s}=n,o=await s.getProductListing(await rt(i));return at(o)?(r(xe(o.error)),a(o.error)):{response:o.success}});j("commerce/productListing/fetchMoreProducts",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let i=t();if(!vg(i))return null;let{apiClient:s}=n,o=Mo(i),u=Po(i)/o,c=await s.getProductListing({...await rt(i),page:u});return at(c)?(r(xe(c.error)),a(c.error)):{response:c.success}});var mt={id:M},Sg=g("querySuggest/register",e=>b(e,{...mt,count:new $({min:0})})),wg=g("querySuggest/unregister",e=>b(e,mt)),To=g("querySuggest/selectSuggestion",e=>b(e,{...mt,expression:Se})),bg=g("querySuggest/clear",e=>b(e,mt)),Gr=j("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,mt);let i=e.id,s=await Cg(i,t()),o=await a.querySuggest(s);return Re(o)?r(o.error):{id:i,q:s.q,...o.success}}),Cg=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Xe.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await $e(t.configuration.analytics),...t.configuration.analytics.enabled&&await Cr(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}),At=j("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,mt);let i=t(),s=await Ig(e.id,i),o=await a.querySuggest(s);return at(o)?r(o.error):{id:e.id,query:s.query,...o.success}}),Ig=async(e,t)=>{let{view:r,user:a,...n}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...n,clientId:await $e(t.configuration.analytics),context:{user:a,view:r,cart:Fo(t.cart)}}},qg=g("query/updateQuery",e=>b(e,{query:new k}));ie(e=>e.commerceSearch.responseId,e=>e);ie(e=>e.commerceSearch.requestId,e=>e);var jo=ie(e=>{var t;return((t=e.commerceSearch)==null?void 0:t.products.length)||0},e=>e),kg=ie(e=>({total:Uo(e),current:jo(e)}),({current:e,total:t})=>e<t);ie(e=>{var t;return(t=e.commerceSearch)==null?void 0:t.isLoading},e=>J(e)?!1:e);ie(e=>{var t;return(t=e.commerceSearch)==null?void 0:t.error},e=>e);var fn=ie(e=>{var t;return(t=e.commerceQuery)==null?void 0:t.query},e=>e??"");ie(e=>{var t;return(t=e.commerceSearch)==null?void 0:t.queryExecuted},e=>e);var $o=(e,t)=>{var r,a;return((r=t.queryCorrection)==null?void 0:r.correctedQuery)!==void 0?(a=t.queryCorrection)==null?void 0:a.correctedQuery:fn(e)},pn=j("commerce/search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let i=t(),{apiClient:s}=n,o=fn(i),u=await s.search({...await rt(i),query:o});return at(u)?(r(xe(u.error)),a(u.error)):{response:u.success,originalQuery:o,queryExecuted:$o(i,u.success)}});j("commerce/search/fetchMoreProducts",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let i=t();if(!kg(i))return null;let{apiClient:s}=n,o=Mo(i),u=jo(i)/o,c=fn(i),l=await s.search({...await rt(i),query:c,page:u});return at(l)?(r(xe(l.error)),a(l.error)):{response:l.success,originalQuery:c,queryExecuted:$o(i,l.success)}});j("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{query:new k,clearFilters:new H}),e.clearFilters&&(r(Me()),r(Sr())),r(Ut({allow:!0})),r(qg({query:e.query})),r(br(1))});j("commerce/search/fetchInstantProducts",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let i=t(),{q:s}=e,{apiClient:o}=n,u=await o.productSuggestions({...await rt(i),query:s});if(at(u))return r(xe(u.error)),a(u.error);let c=u.success.products.slice(0,5);return{response:{...u.success,products:c}}});function hn(e,t,r){let{facetId:a}=t;if(e[a])return;let n=!1,i={...ht,...t},s=r();e[a]={options:i,isLoading:n,response:s,initialNumberOfValues:i.numberOfValues,requestId:""}}function Vo(e,t){let{facetId:r,...a}=t,n=e[r];n&&(n.options={...n.options,...a})}function ut(e,t,r){let a=e[t];a&&(a.requestId=r,a.isLoading=!0)}function ct(e,t){let r=e[t];r&&(r.isLoading=!1)}function _o(e,t,r){let{facetId:a,response:n}=t,i=e[a];i&&i.requestId===r&&(i.isLoading=!1,i.response=n)}function Lo(e,t,r){let{facetId:a,response:n}=t,i=e[a];i&&i.requestId===r&&(i.isLoading=!1,"success"in n&&(i.response=n.success))}function Qo(e,t,r,a){let{facetId:n,response:i}=t,s=e[n];if(!s)hn(e,{facetId:n},a),s=e[n];else if(s.requestId!==r)return;s.isLoading=!1,"success"in i&&(s.response=i.success)}function Og(e,t,r,a){if(t.fieldSuggestionsFacets)for(let n of t.fieldSuggestionsFacets)n.facetId in e||n.type!=="regular"||(e[n.facetId]={options:{...ht,query:t.query??""},isLoading:!1,response:a(),initialNumberOfValues:ht.numberOfValues,requestId:r})}function Ag(e,t,r,a){if(t.fieldSuggestionsFacets)for(let n of t.fieldSuggestionsFacets)n.facetId in e||n.type!=="hierarchical"||(e[n.facetId]={options:{...ht,query:t.query??""},isLoading:!1,response:a(),initialNumberOfValues:ht.numberOfValues,requestId:r})}function gn(e,t,r){let{facetId:a}=t,n=e[a];n&&(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=ht.query)}function We(e,t){Object.keys(e).forEach(r=>gn(e,{facetId:r},t))}var ht={captions:{},numberOfValues:10,query:""},xg=async(e,t,r)=>{let a=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:i,query:s,numberOfValues:o}=a,{field:u,delimitingCharacter:c,basePath:l,filterFacetCount:f}=n,h=Eg(n),w=h.length?[h]:[],q=`*${s}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:i,numberOfValues:o,query:q,field:u,delimitingCharacter:c,ignorePaths:w,filterFacetCount:f,type:"hierarchical",...r?{}:{searchContext:(await Ce(t)).request}}},Eg=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},Rg=async(e,t,r)=>{let{captions:a,query:n,numberOfValues:i}=t.facetSearchSet[e].options,{field:s,currentValues:o,filterFacetCount:u}=t.facetSet[e].request,c=o.filter(f=>f.state!=="idle").map(f=>f.value),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:i,query:l,field:s,ignoreValues:c,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await Ce(t)).request}}},zo=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let i=r(),s;n(t,M),Fg(i,t)?s=await Rg(t,i,e):s=await xg(t,i,e);let o=await a.facetSearch(s);return{facetId:t,response:o}},lt=j("facetSearch/executeSearch",zo(!1));j("facetSearch/executeSearch",zo(!0));var No=g("facetSearch/clearResults",e=>b(e,{facetId:X})),Fg=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0,Bo={facetId:X,value:new F({values:{displayValue:Se,rawValue:Se,count:new $({required:!0,min:0})}})},Dg=g("facetSearch/register",e=>b(e,on)),Ho=g("facetSearch/update",e=>b(e,on)),Yo=g("facetSearch/toggleSelectValue",e=>b(e,Bo)),Wo=g("facetSearch/toggleExcludeValue",e=>b(e,Bo));z($c(),e=>{e.addCase(Gh,(t,r)=>{let a=r.payload;hn(t,a,Be)}).addCase(Ho,(t,r)=>{Vo(t,r.payload)}).addCase(st.pending,(t,r)=>{let a=r.meta.arg;ut(t,a,r.meta.requestId)}).addCase(ot.pending,(t,r)=>{let a=r.meta.arg;ut(t,a,r.meta.requestId)}).addCase(lt.pending,(t,r)=>{let a=r.meta.arg;ut(t,a,r.meta.requestId)}).addCase(st.rejected,(t,r)=>{let a=r.meta.arg;ct(t,a)}).addCase(ot.rejected,(t,r)=>{let a=r.meta.arg;ct(t,a)}).addCase(lt.rejected,(t,r)=>{let a=r.meta.arg;ct(t,a)}).addCase(st.fulfilled,(t,r)=>{Lo(t,r.payload,r.meta.requestId)}).addCase(ot.fulfilled,(t,r)=>{Qo(t,r.payload,r.meta.requestId,Be)}).addCase(At.fulfilled,(t,r)=>{Ag(t,r.payload,r.meta.requestId,Be)}).addCase(lt.fulfilled,(t,r)=>{_o(t,r.payload,r.meta.requestId)}).addCase(No,(t,{payload:{facetId:r}})=>{gn(t,{facetId:r},Be)}).addCase(dn.fulfilled,t=>We(t,Be)).addCase(pn.fulfilled,t=>We(t,Be)).addCase(ue.fulfilled,t=>{We(t,Be)})});function Be(){return{moreValuesAvailable:!1,values:[]}}var Vt=new k({regex:/^[a-zA-Z0-9-_]+$/}),_t=new k({required:!0}),Mg=new te({each:new k}),Ug=new k,Pg=new H,Lt=new H,Qt=new $({min:0}),vt=new $({min:1}),Go=new H({required:!0}),Tg=new F,jg=new k,$g={captions:Tg,numberOfValues:vt,query:jg},yn=new F({values:$g}),Jo=new F({options:{required:!1},values:{type:new k({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new te({required:!0,max:25,each:new k({emptyAllowed:!1,required:!0})})}}),Vg=new H,Ko=new te({min:1,max:25,required:!1,each:new k({emptyAllowed:!1,required:!0})}),qr={value:M,numberOfResults:new $({min:0}),state:M},_g={facetId:X,field:new k({required:!0,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new $({required:!1,min:0}),numberOfValues:new $({required:!1,min:1}),sortCriteria:new fe({required:!1}),resultsMustMatch:new fe({required:!1}),allowedValues:Jo,customSort:Ko},Zo=g("facet/register",e=>b(e,_g)),mn=g("facet/toggleSelectValue",e=>b(e,{facetId:X,selection:new F({values:qr})})),vn=g("facet/toggleExcludeValue",e=>b(e,{facetId:X,selection:new F({values:qr})})),kr=g("facet/deselectAll",e=>b(e,X)),Lg=g("facet/updateSortCriterion",e=>b(e,{facetId:X,criterion:new fe({required:!0})})),Qg=g("facet/updateNumberOfValues",e=>b(e,{facetId:X,numberOfValues:new $({required:!0,min:1})})),zg=g("facet/updateIsFieldExpanded",e=>b(e,{facetId:X,isFieldExpanded:new H({required:!0})})),Ng=g("facet/updateFreezeCurrentValues",e=>b(e,{facetId:X,freezeCurrentValues:new H({required:!0})}));function Bg(e){let t=pi(e.start,e),r=pi(e.end,e),a=e.endInclusive??!1,n=e.state??"idle";return{start:t,end:r,endInclusive:a,state:n}}function pi(e,t){let{dateFormat:r}=t;return Gp(e)?(oi(e),Wp(e)):typeof e=="string"&&Mt(e)?(oi(e),e):(Hp(e,r),ro(cr(e,r)))}var Xo=g("rangeFacet/updateSortCriterion",e=>b(e,{facetId:X,criterion:new fe({required:!0})})),zt={state:M,start:new $({required:!0}),end:new $({required:!0}),endInclusive:new H({required:!0}),numberOfResults:new $({required:!0,min:0})},Nt={start:M,end:M,endInclusive:new H({required:!0}),state:M,numberOfResults:new $({required:!0,min:0})},eu=e=>({facetId:X,selection:typeof e.start=="string"?new F({values:Nt}):new F({values:zt})}),Hg={start:M,end:M,endInclusive:new H({required:!0}),state:M},Yg={facetId:X,field:M,currentValues:new te({required:!1,each:new F({values:Hg})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new $({required:!1,min:0}),numberOfValues:new $({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function hi(e){return Mt(e)?Ca(e):e}function tu(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:a}=Bg(t);if(cr(hi(r)).isAfter(cr(hi(a))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var ru=g("dateFacet/register",e=>{try{return yt(e,Yg),tu(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ze(t)}}}),Sn=g("dateFacet/toggleSelectValue",e=>b(e,{facetId:X,selection:new F({values:Nt})})),wn=g("dateFacet/toggleExcludeValue",e=>b(e,{facetId:X,selection:new F({values:Nt})})),au=g("dateFacet/updateFacetValues",e=>{try{return yt(e,{facetId:X,values:new te({each:new F({values:Nt})})}),tu({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ze(t)}}}),Wg=Xo,Gg=kr,Jg={state:M,start:new $({required:!0}),end:new $({required:!0}),endInclusive:new H({required:!0})},Kg={facetId:X,field:M,currentValues:new te({required:!1,each:new F({values:Jg})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new $({required:!1,min:0}),numberOfValues:new $({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function nu(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var iu=g("numericFacet/register",e=>{try{return b(e,Kg),nu(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ze(t)}}}),bn=g("numericFacet/toggleSelectValue",e=>b(e,{facetId:X,selection:new F({values:zt})})),Cn=g("numericFacet/toggleExcludeValue",e=>b(e,{facetId:X,selection:new F({values:zt})})),su=g("numericFacet/updateFacetValues",e=>{try{return yt(e,{facetId:X,values:new te({each:new F({values:zt})})}),nu({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ze(t)}}}),Zg=Xo,Xg=kr;z(Zi(),e=>{e.addCase(tt,(t,r)=>({...t,...r.payload})).addCase(ue.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(ue.rejected,t=>{t.freezeFacetOrder=!1}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.facetOptions)??t}).addCase(Ao,(t,r)=>{t.facets[r.payload.facetId]=bt()}).addCase(Zo,(t,r)=>{t.facets[r.payload.facetId]=bt()}).addCase(ru,(t,r)=>{t.facets[r.payload.facetId]=bt()}).addCase(iu,(t,r)=>{t.facets[r.payload.facetId]=bt()}).addCase(Yh,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase($t,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(we,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(a=>{a in t||(t.facets[a]=bt()),t.facets[a].enabled=!0})})});var ey=["alphanumeric","occurrences"];new qe({field:_t,basePath:Mg,delimitingCharacter:Ug,facetId:Vt,facetSearch:yn,filterByBasePath:Pg,filterFacetCount:Lt,injectionDepth:Qt,numberOfValues:vt,sortCriteria:new k({constrainTo:ey})});var ty=Intl.supportedValuesOf("currency"),ry=new k({required:!0,emptyAllowed:!1,constrainTo:ty}),ou={url:M,referrer:Yl},uu={userId:ee,email:ee,userIp:ee,userAgent:ee};new F({options:{required:!0},values:{productId:ee,sku:ee,name:ee,price:ee,quantity:ee}});var ay={language:M,country:M,currency:ry,user:new F({values:uu}),view:new F({options:{required:!0},values:ou})};g("commerce/setContext",e=>b(e,ay));g("commerce/setUser",e=>J(e.userId)&&J(e.email)?{payload:e,error:Ze(new Ta("Either userId or email is required"))}:b(e,uu));var ny=g("commerce/setView",e=>b(e,ou));z(Vc(),e=>{e.addCase(Dg,(t,r)=>{let a=r.payload;hn(t,a,Le)}).addCase(Ho,(t,r)=>{Vo(t,r.payload)}).addCase(st.pending,(t,r)=>{let a=r.meta.arg;ut(t,a,r.meta.requestId)}).addCase(ot.pending,(t,r)=>{let a=r.meta.arg;ut(t,a,r.meta.requestId)}).addCase(lt.pending,(t,r)=>{let a=r.meta.arg;ut(t,a,r.meta.requestId)}).addCase(st.rejected,(t,r)=>{let a=r.meta.arg;ct(t,a)}).addCase(ot.rejected,(t,r)=>{let a=r.meta.arg;ct(t,a)}).addCase(lt.rejected,(t,r)=>{let a=r.meta.arg;ct(t,a)}).addCase(st.fulfilled,(t,r)=>{Lo(t,r.payload,r.meta.requestId)}).addCase(ot.fulfilled,(t,r)=>{Qo(t,r.payload,r.meta.requestId,Le)}).addCase(At.fulfilled,(t,r)=>{Og(t,r.payload,r.meta.requestId,Le)}).addCase(lt.fulfilled,(t,r)=>{_o(t,r.payload,r.meta.requestId)}).addCase(No,(t,{payload:r})=>{gn(t,r,Le)}).addCase(ue.fulfilled,t=>{We(t,Le)}).addCase(dn.fulfilled,t=>We(t,Le)).addCase(pn.fulfilled,t=>We(t,Le)).addCase(ny,t=>We(t,Le))});function Le(){return{moreValuesAvailable:!1,values:[]}}var iy=()=>yp("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new Ya(e));g("productlisting/setUrl",e=>b(e,{url:new k({required:!0,url:!0})}));g("productlisting/setAdditionalFields",e=>b(e,{additionalFields:new te({required:!0,each:new k({required:!0,emptyAllowed:!1})})}));var Or=j("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let i=t(),{apiClient:s}=n,o=await s.getProducts(await sy(i));return at(o)?(r(xe(o.error)),a(o.error)):{response:o.success,analyticsAction:iy()}}),sy=async e=>{var a,n,i;let t=uy(e),r=await $e(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(a=e.productListing)==null?void 0:a.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...(n=e.productListing.additionalFields)!=null&&n.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&oy(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((i=e.sort)==null?void 0:i.by)||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function oy(e){return e.debug}function uy(e){return po(cy(e),e.facetOrder??[])}function cy(e){return[...Ye(e.facetSet??{}),...Ye(e.numericFacetSet??{}),...Ye(e.dateFacetSet??{}),...Ye(e.categoryFacetSet??{})]}z(Fa(),e=>{e.addCase(Zo,(t,r)=>{let{facetId:a}=r.payload;a in t||(t[a]=_c(dy(r.payload)))}).addCase(le.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(we,(t,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],o=a[i]||[],u=n[i]||[],c=o.length+u.length,l=s.currentValues.filter(f=>!o.includes(f.value)&&!u.includes(f.value));s.currentValues=[...o.map(gi),...u.map(yi),...l.map(py)],s.preventAutoSelect=c>0,s.numberOfValues=Math.max(c,s.numberOfValues)})}).addCase(mn,(t,r)=>{var u;let{facetId:a,selection:n}=r.payload,i=(u=t[a])==null?void 0:u.request;if(!i)return;i.preventAutoSelect=!0;let s=i.currentValues.find(c=>c.value===n.value);if(!s){Gt(i,n);return}let o=s.state==="selected";s.state=o?"idle":"selected",i.freezeCurrentValues=!0}).addCase(vn,(t,r)=>{var u;let{facetId:a,selection:n}=r.payload,i=(u=t[a])==null?void 0:u.request;if(!i)return;i.preventAutoSelect=!0;let s=i.currentValues.find(c=>c.value===n.value);if(!s){Gt(i,n);return}let o=s.state==="excluded";s.state=o?"idle":"excluded",i.freezeCurrentValues=!0}).addCase(Ng,(t,r)=>{var s;let{facetId:a,freezeCurrentValues:n}=r.payload,i=(s=t[a])==null?void 0:s.request;i&&(i.freezeCurrentValues=n)}).addCase(kr,(t,r)=>{var a;Wt((a=t[r.payload])==null?void 0:a.request)}).addCase(Me,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Wt(r))}).addCase(Sr,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Wt(r))}).addCase(Ut,(t,r)=>Object.values(t).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(Lg,(t,r)=>{un(t,r.payload)}).addCase(Qg,(t,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload;ko((i=t[a])==null?void 0:i.request,n)}).addCase(zg,(t,r)=>{var s;let{facetId:a,isFieldExpanded:n}=r.payload,i=(s=t[a])==null?void 0:s.request;i&&(i.isFieldExpanded=n)}).addCase(ue.fulfilled,(t,r)=>{r.payload.response.facets.forEach(a=>{var n;return Jr((n=t[a.facetId])==null?void 0:n.request,a)})}).addCase(Or.fulfilled,(t,r)=>{var a,n;(((n=(a=r.payload.response)==null?void 0:a.facets)==null?void 0:n.results)||[]).forEach(i=>{var s;return Jr((s=t[i.facetId])==null?void 0:s.request,i)})}).addCase(wo.fulfilled,(t,r)=>{r.payload.response.facets.forEach(a=>{var n;return Jr((n=t[a.facetId])==null?void 0:n.request,a)})}).addCase(Yo,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,i=(l=t[a])==null?void 0:l.request;if(!i)return;let{rawValue:s}=n,{currentValues:o}=i,u=o.find(f=>f.value===s);if(u){u.state="selected";return}let c=gi(s);Gt(i,c),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(Wo,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,i=(l=t[a])==null?void 0:l.request;if(!i)return;let{rawValue:s}=n,{currentValues:o}=i,u=o.find(f=>f.value===s);if(u){u.state="excluded";return}let c=yi(s);Gt(i,c),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase($t,(t,r)=>{if(!(r.payload in t))return;let{request:a}=t[r.payload];Wt(a)})});function Gt(e,t){let{currentValues:r}=e,a=r.findIndex(o=>o.state==="idle"),n=a===-1?r.length:a,i=r.slice(0,n),s=r.slice(n+1);e.currentValues=[...i,t,...s],e.numberOfValues=e.currentValues.length}function Jr(e,t){e&&(e.currentValues=t.values.map(fy),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var ly={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function dy(e){return{...ly,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function fy(e){let{value:t,state:r}=e;return{value:t,state:r}}function gi(e){return{value:e,state:"selected"}}function yi(e){return{value:e,state:"excluded"}}function py(e){return{...e,state:"idle"}}var cu={facetId:X,selection:new F({values:qr})};j("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},cu),a(mn({facetId:e,selection:t})),a(tt())});j("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},cu),a(vn({facetId:e,selection:t})),a(tt())});var In=["allValues","atLeastOneValue"],lu=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];new qe({facetId:Vt,field:_t,filterFacetCount:Lt,injectionDepth:Qt,numberOfValues:vt,sortCriteria:new k({constrainTo:lu}),resultsMustMatch:new k({constrainTo:In}),facetSearch:yn});new qe({facetId:Vt,field:_t,filterFacetCount:Lt,injectionDepth:Qt,numberOfValues:vt,sortCriteria:new k({constrainTo:lu}),resultsMustMatch:new k({constrainTo:In}),facetSearch:yn,allowedValues:Jo,hasBreadcrumbs:Vg,customSort:Ko});var du=g("rangeFacet/executeToggleSelect",e=>b(e,eu(e.selection))),fu=g("rangeFacet/executeToggleExclude",e=>b(e,eu(e.selection))),pu={facetId:X,selection:new F({values:Nt})};j("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,pu),t(Sn(e)),t(du(e)),t(tt())});j("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,pu),t(wn(e)),t(fu(e)),t(tt())});var hu={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function gu(e,t){let{request:r}=t,{facetId:a}=r;if(a in e)return;let n=wu(r);r.numberOfValues=n,e[a]=t}function yu(e,t,r){var n;let a=(n=e[t])==null?void 0:n.request;a&&(a.currentValues=r,a.numberOfValues=wu(a))}function mu(e,t,r){var s;let a=(s=e[t])==null?void 0:s.request;if(!a)return;let n=dr(a.currentValues,r);if(!n)return;let i=n.state==="selected";n.state=i?"idle":"selected",a.preventAutoSelect=!0}function vu(e,t,r){var s;let a=(s=e[t])==null?void 0:s.request;if(!a)return;let n=dr(a.currentValues,r);if(!n)return;let i=n.state==="excluded";n.state=i?"idle":"excluded",a.preventAutoSelect=!0}function dt(e,t){var a;let r=(a=e[t])==null?void 0:a.request;r&&r.currentValues.forEach(n=>n.state="idle")}function Su(e,t){Object.entries(e).forEach(([r,{request:a}])=>{let n=t[r]||[];a.currentValues.forEach(o=>{let u=!!dr(n,o);return o.state=u?"selected":"idle",o});let i=n.filter(o=>!dr(a.currentValues,o)),s=a.currentValues;s.push(...i),a.numberOfValues=Math.max(a.numberOfValues,s.length)})}function lr(e,t,r){t.forEach(a=>{var o;let n=a.facetId,i=(o=e[n])==null?void 0:o.request;if(!i)return;let s=r(a.values);i.currentValues=s,i.preventAutoSelect=!1})}function dr(e,t){let{start:r,end:a}=t;return e.find(n=>n.start===r&&n.end===a)}function wu(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:a}=e;return t?Math.max(a,r.length):r.length}z(Da(),e=>{e.addCase(ru,(t,r)=>{let{payload:a}=r,n=hy(a);gu(t,Lc(n))}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.dateFacetSet)??t}).addCase(we,(t,r)=>{let a=r.payload.df||{};Su(t,a)}).addCase(Sn,(t,r)=>{let{facetId:a,selection:n}=r.payload;mu(t,a,n)}).addCase(wn,(t,r)=>{let{facetId:a,selection:n}=r.payload;vu(t,a,n)}).addCase(au,(t,r)=>{let{facetId:a,values:n}=r.payload;yu(t,a,n)}).addCase(Gg,(t,r)=>{dt(t,r.payload)}).addCase(Me,t=>{Object.keys(t).forEach(r=>{dt(t,r)})}).addCase(Wg,(t,r)=>{un(t,r.payload)}).addCase(ue.fulfilled,(t,r)=>{let a=r.payload.response.facets;lr(t,a,mi)}).addCase(Or.fulfilled,(t,r)=>{var n,i;let a=((i=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:i.results)||[];lr(t,a,mi)}).addCase($t,(t,r)=>{dt(t,r.payload)})});function hy(e){return{...hu,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function mi(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var bu=["idle","selected","excluded"],Cu=["ascending","descending"],Iu=["even","equiprobable"],gy={start:new k,end:new k,endInclusive:new H,state:new k({constrainTo:bu})};new qe({facetId:Vt,field:_t,generateAutomaticRanges:Go,filterFacetCount:Lt,injectionDepth:Qt,numberOfValues:vt,currentValues:new te({each:new F({values:gy})}),sortCriteria:new k({constrainTo:Cu}),rangeAlgorithm:new k({constrainTo:Iu})});z(Ma(),e=>{e.addCase(iu,(t,r)=>{let{payload:a}=r,n=yy(a);gu(t,Qc(n))}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.numericFacetSet)??t}).addCase(we,(t,r)=>{let a=r.payload.nf||{};Su(t,a)}).addCase(bn,(t,r)=>{let{facetId:a,selection:n}=r.payload;mu(t,a,n)}).addCase(Cn,(t,r)=>{let{facetId:a,selection:n}=r.payload;vu(t,a,n)}).addCase(su,(t,r)=>{let{facetId:a,values:n}=r.payload;yu(t,a,n)}).addCase(Xg,(t,r)=>{dt(t,r.payload)}).addCase(Me,t=>{Object.keys(t).forEach(r=>{dt(t,r)})}).addCase(Zg,(t,r)=>{un(t,r.payload)}).addCase(ue.fulfilled,(t,r)=>{let a=r.payload.response.facets;lr(t,a,vi)}).addCase(Or.fulfilled,(t,r)=>{var n,i;let a=((i=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:i.results)||[];lr(t,a,vi)}).addCase($t,(t,r)=>{dt(t,r.payload)})});function yy(e){return{...hu,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function vi(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var qu={facetId:X,selection:new F({values:zt})};j("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,qu),t(bn(e)),t(du(e)),t(tt())});j("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,qu),t(Cn(e)),t(fu(e)),t(tt())});var my={start:new $,end:new $,endInclusive:new H,state:new k({constrainTo:bu})};new qe({facetId:Vt,field:_t,generateAutomaticRanges:Go,filterFacetCount:Lt,injectionDepth:Qt,numberOfValues:vt,currentValues:new te({each:new F({values:my})}),sortCriteria:new k({constrainTo:Cu}),resultsMustMatch:new k({constrainTo:In}),rangeAlgorithm:new k({constrainTo:Iu})});z(Xi(),e=>{e.addCase(ue.fulfilled,Kr).addCase(dn.fulfilled,Kr).addCase(pn.fulfilled,Kr).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.facetOrder)??t})});function Kr(e,t){return t.payload.response.facets.map(r=>r.facetId)}var vy=Object.getOwnPropertyNames,Sy=Object.getOwnPropertySymbols,wy=Object.prototype.hasOwnProperty;function Si(e,t){return function(r,a,n){return e(r,a,n)&&t(r,a,n)}}function Jt(e){return function(t,r,a){if(!t||!r||typeof t!="object"||typeof r!="object")return e(t,r,a);var n=a.cache,i=n.get(t),s=n.get(r);if(i&&s)return i===r&&s===t;n.set(t,r),n.set(r,t);var o=e(t,r,a);return n.delete(t),n.delete(r),o}}function wi(e){return vy(e).concat(Sy(e))}var ku=Object.hasOwn||function(e,t){return wy.call(e,t)};function St(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var Ou="_owner",bi=Object.getOwnPropertyDescriptor,Ci=Object.keys;function by(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Cy(e,t){return St(e.getTime(),t.getTime())}function Ii(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.entries(),i=0,s,o;(s=n.next())&&!s.done;){for(var u=t.entries(),c=!1,l=0;(o=u.next())&&!o.done;){var f=s.value,h=f[0],w=f[1],q=o.value,d=q[0],S=q[1];!c&&!a[l]&&(c=r.equals(h,d,i,l,e,t,r)&&r.equals(w,S,h,d,e,t,r))&&(a[l]=!0),l++}if(!c)return!1;i++}return!0}function Iy(e,t,r){var a=Ci(e),n=a.length;if(Ci(t).length!==n)return!1;for(var i;n-- >0;)if(i=a[n],i===Ou&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!ku(t,i)||!r.equals(e[i],t[i],i,i,e,t,r))return!1;return!0}function Ct(e,t,r){var a=wi(e),n=a.length;if(wi(t).length!==n)return!1;for(var i,s,o;n-- >0;)if(i=a[n],i===Ou&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!ku(t,i)||!r.equals(e[i],t[i],i,i,e,t,r)||(s=bi(e,i),o=bi(t,i),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function qy(e,t){return St(e.valueOf(),t.valueOf())}function ky(e,t){return e.source===t.source&&e.flags===t.flags}function qi(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.values(),i,s;(i=n.next())&&!i.done;){for(var o=t.values(),u=!1,c=0;(s=o.next())&&!s.done;)!u&&!a[c]&&(u=r.equals(i.value,s.value,i.value,s.value,e,t,r))&&(a[c]=!0),c++;if(!u)return!1}return!0}function Oy(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Ay="[object Arguments]",xy="[object Boolean]",Ey="[object Date]",Ry="[object Map]",Fy="[object Number]",Dy="[object Object]",My="[object RegExp]",Uy="[object Set]",Py="[object String]",Ty=Array.isArray,ki=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Oi=Object.assign,jy=Object.prototype.toString.call.bind(Object.prototype.toString);function $y(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areMapsEqual,n=e.areObjectsEqual,i=e.arePrimitiveWrappersEqual,s=e.areRegExpsEqual,o=e.areSetsEqual,u=e.areTypedArraysEqual;return function(c,l,f){if(c===l)return!0;if(c==null||l==null||typeof c!="object"||typeof l!="object")return c!==c&&l!==l;var h=c.constructor;if(h!==l.constructor)return!1;if(h===Object)return n(c,l,f);if(Ty(c))return t(c,l,f);if(ki!=null&&ki(c))return u(c,l,f);if(h===Date)return r(c,l,f);if(h===RegExp)return s(c,l,f);if(h===Map)return a(c,l,f);if(h===Set)return o(c,l,f);var w=jy(c);return w===Ey?r(c,l,f):w===My?s(c,l,f):w===Ry?a(c,l,f):w===Uy?o(c,l,f):w===Dy?typeof c.then!="function"&&typeof l.then!="function"&&n(c,l,f):w===Ay?n(c,l,f):w===xy||w===Fy||w===Py?i(c,l,f):!1}}function Vy(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,n={areArraysEqual:a?Ct:by,areDatesEqual:Cy,areMapsEqual:a?Si(Ii,Ct):Ii,areObjectsEqual:a?Ct:Iy,arePrimitiveWrappersEqual:qy,areRegExpsEqual:ky,areSetsEqual:a?Si(qi,Ct):qi,areTypedArraysEqual:a?Ct:Oy};if(r&&(n=Oi({},n,r(n))),t){var i=Jt(n.areArraysEqual),s=Jt(n.areMapsEqual),o=Jt(n.areObjectsEqual),u=Jt(n.areSetsEqual);n=Oi({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:u})}return n}function _y(e){return function(t,r,a,n,i,s,o){return e(t,r,o)}}function Ly(e){var t=e.circular,r=e.comparator,a=e.createState,n=e.equals,i=e.strict;if(a)return function(o,u){var c=a(),l=c.cache,f=l===void 0?t?new WeakMap:void 0:l,h=c.meta;return r(o,u,{cache:f,equals:n,meta:h,strict:i})};if(t)return function(o,u){return r(o,u,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};var s={cache:void 0,equals:n,meta:void 0,strict:i};return function(o,u){return r(o,u,s)}}Ve();Ve({strict:!0});Ve({circular:!0});Ve({circular:!0,strict:!0});Ve({createInternalComparator:function(){return St}});Ve({strict:!0,createInternalComparator:function(){return St}});Ve({circular:!0,createInternalComparator:function(){return St}});Ve({circular:!0,createInternalComparator:function(){return St},strict:!0});function Ve(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,n=e.createState,i=e.strict,s=i===void 0?!1:i,o=Vy(e),u=$y(o),c=a?a(u):_y(u);return Ly({circular:r,comparator:u,createState:n,equals:c,strict:s})}function Qy(e,t,r=(a,n)=>a===n){return e.length===t.length&&e.findIndex((a,n)=>!r(t[n],a))===-1}function zy(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(a=>Ny(r,a))!==-1)}var Ny=Ve({createCustomConfig:e=>({...e,areArraysEqual:zy})}),By=z(Jc(),e=>{e.addCase(De,(t,r)=>Hy(t,r.payload)?void 0:r.payload)}),Hy=(e,t)=>Yy(e.context,t.context)&&Wy(e.dictionaryFieldContext,t.dictionaryFieldContext)&&tm(e.advancedSearchQueries,t.advancedSearchQueries)&&Gy(e.tabSet,t.tabSet)&&Jy(e.staticFilterSet,t.staticFilterSet)&&Zr(e.facetSet,t.facetSet)&&Zr(e.dateFacetSet,t.dateFacetSet)&&Zr(e.numericFacetSet,t.numericFacetSet)&&Zy(e.automaticFacetSet,t.automaticFacetSet)&&Ky(e.categoryFacetSet,t.categoryFacetSet)&&Xy(e.pagination,t.pagination)&&em(e.query,t.query)&&rm(e,t)&&am(e.pipeline,t.pipeline)&&nm(e.searchHub,t.searchHub)&&im(e.facetOrder,t.facetOrder)&&sm(e.debug,t.debug),Yy=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Wy=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Gy=(e,t)=>{let r=Ai(e),a=Ai(t);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},Ai=e=>Object.values(e).find(t=>t.isActive),Jy=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=xi(e[r]),i=xi(a);if(JSON.stringify(n)!==JSON.stringify(i))return!1}return!0},xi=e=>e.values.filter(t=>t.state!=="idle"),Zr=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=e[r].request.currentValues.filter(s=>s.state!=="idle"),i=a.request.currentValues.filter(s=>s.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(i))return!1}return!0},Ky=(e,t)=>{var r;for(let[a,n]of Object.entries(t)){if(!e[a])return!1;let i=Dt((r=e[a])==null?void 0:r.request.currentValues).map(({value:o})=>o),s=Dt(n==null?void 0:n.request.currentValues).map(({value:o})=>o);if(JSON.stringify(i)!==JSON.stringify(s))return!1}return!0},Zy=(e,t)=>{for(let[r,a]of Object.entries(t.set)){if(!e.set[r])return!1;let n=e.set[r].response.values.filter(s=>s.state!=="idle"),i=a.response.values.filter(s=>s.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(i))return!1}return!0},Xy=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,em=(e,t)=>JSON.stringify(e)===JSON.stringify(t),tm=(e,t)=>JSON.stringify(e)===JSON.stringify(t),rm=(e,t)=>e.sortCriteria===t.sortCriteria,am=(e,t)=>e===t,nm=(e,t)=>e===t,im=(e,t)=>Qy(e,t),sm=(e,t)=>e===t;Ic({actionTypes:{redo:eo.type,undo:Xs.type,snapshot:De.type},reducer:By});var om=new $({min:1,default:8,required:!1}),um=new $({min:1,max:20,default:5,required:!1}),cm={desiredCount:um,numberOfValues:om},lm=g("automaticFacet/setOptions",e=>b(e,cm)),dm=g("automaticFacet/deselectAll",e=>b(e,X)),fm=M,Au=g("automaticFacet/toggleSelectValue",e=>b(e,{field:fm,selection:new F({values:qr})}));z(Ua(),e=>{e.addCase($p,(t,r)=>{let a=Xr(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=It(a,n)}).addCase(Vp,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(sn,t=>{t.firstResult=0}).addCase(_p,(t,r)=>{let a=r.payload;t.firstResult=It(a,t.numberOfResults)}).addCase(br,(t,r)=>{let a=r.payload;t.firstResult=It(a,t.numberOfResults)}).addCase(Qp,t=>{let r=Xr(t),a=Math.max(r-1,1);t.firstResult=It(a,t.numberOfResults)}).addCase(Lp,t=>{let r=Xr(t),a=pm(t),n=Math.min(r+1,a);t.firstResult=It(n,t.numberOfResults)}).addCase(le.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(we,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(ue.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.totalCountFiltered}).addCase(Or.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.pagination.totalCount}).addCase(kr,t=>{he(t)}).addCase(wn,t=>{he(t)}).addCase(vn,t=>{he(t)}).addCase(Cn,t=>{he(t)}).addCase(Wo,t=>{he(t)}).addCase(mn,t=>{he(t)}).addCase(Eo,t=>{he(t)}).addCase(xo,t=>{he(t)}).addCase(qo,t=>{he(t)}).addCase(Sn,t=>{he(t)}).addCase(bn,t=>{he(t)}).addCase(Me,t=>{he(t)}).addCase(au,t=>{he(t)}).addCase(su,t=>{he(t)}).addCase(Yo,t=>{he(t)}).addCase(Au,t=>{he(t)})});function he(e){e.firstResult=Ua().firstResult}function Xr(e){let{firstResult:t,numberOfResults:r}=e;return hm(t,r)}function pm(e){let{totalCountFiltered:t,numberOfResults:r}=e;return gm(t,r)}function It(e,t){return(e-1)*t}function hm(e,t){return Math.round(e/t)+1}function gm(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}new qe({fieldsToInclude:new te({required:!1,each:new k({required:!0,emptyAllowed:!1})})});var ym={results:new te({required:!0,each:new F({values:Wa})}),maxLength:new $({required:!0,min:1,default:10})},mm=g("recentResults/registerRecentResults",e=>b(e,ym)),vm=g("recentResults/pushRecentResult",e=>(Sp(e),{payload:e})),Sm=g("recentResults/clearRecentResults"),xu={id:M,query:Se},wm=g("querySet/register",e=>b(e,xu)),bm=g("querySet/update",e=>b(e,xu)),Cm={q:new k},Im={},qm=g("commerce/searchParameters/restore",e=>b(e,Cm));g("commerce/productListingParameters/restore",e=>b(e,Im));z(as(),e=>{e.addCase(wm,(t,r)=>{let{id:a,query:n}=r.payload;a in t||(t[a]=n)}).addCase(bm,(t,r)=>{let{id:a,query:n}=r.payload;ea(t,a,n)}).addCase(To,(t,r)=>{let{id:a,expression:n}=r.payload;ea(t,a,n)}).addCase(ue.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;Eu(t,a)}).addCase(we,Ei).addCase(qm,Ei).addCase(le.fulfilled,(t,r)=>{if(r.payload)for(let[a,n]of Object.entries(r.payload.querySet))ea(t,a,n)})});function Ei(e,t){J(t.payload.q)||Eu(e,t.payload.q)}function Eu(e,t){Object.keys(e).forEach(r=>e[r]=t)}var ea=(e,t,r)=>{t in e&&(e[t]=r)},km=()=>({});z(km(),e=>e.addCase(Sg,(t,r)=>{let a=r.payload.id;a in t||(t[a]=Om(r.payload))}).addCase(wg,(t,r)=>{delete t[r.payload.id]}).addCase(Gr.pending,Ri).addCase(Gr.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(Gr.rejected,Fi).addCase(At.pending,Ri).addCase(At.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{query:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions.map(i=>({expression:i.expression,highlighted:i.highlighted,score:0,executableConfidence:0})),a.isLoading=!1,a.error=null}).addCase(At.rejected,Fi).addCase(bg,(t,r)=>{let a=t[r.payload.id];a&&(a.responseId="",a.completions=[],a.partialQueries=[])}));function Om(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function Ri(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function Fi(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}z(gt(),e=>e.addCase(Pt,(t,r)=>({...t,...r.payload})).addCase(Ir,(t,r)=>{t.q=r.payload}).addCase(To,(t,r)=>{t.q=r.payload.expression}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.query)??t}).addCase(we,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));var ta={open:new k,close:new k},Am={id:M,numberOfSuggestions:new $({min:0}),enableQuerySyntax:new H,highlightOptions:new F({values:{notMatchDelimiters:new F({values:ta}),exactMatchDelimiters:new F({values:ta}),correctionDelimiters:new F({values:ta})}}),clearFilters:new H};function xm(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var Em=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},Rm=(e,t)=>{let{q:r,id:a}=e;r&&(t[a].q=r)},Fm=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([a,n])=>{xm(n)&&delete t[r].cache[a]})},Dm=(e,t,r)=>{for(let n in t)for(let i in t[n].cache)t[n].cache[i].isActive=!1;if(!qa(e,t)){Pm(e,t,r);return}let a=qa(e,t);a.isLoading=!0,a.isActive=!0,a.error=null},Mm=(e,t,r)=>{let{id:a,q:n,searchUid:i,cacheTimeout:s,totalCountFiltered:o,duration:u}=e;t[a].cache[n]={...qa(e,t),...r,isActive:!0,searchUid:i,isLoading:!1,error:null,expiresAt:s?s+Date.now():0,totalCountFiltered:o,duration:u}},Um=(e,t)=>{let{id:r,q:a,error:n}=e;t[r].cache[a].error=n||null,t[r].cache[a].isLoading=!1,t[r].cache[a].isActive=!1},qa=(e,t)=>{let{q:r,id:a}=e;return t[a].cache[r]||null},Pm=(e,t,r)=>{let{q:a,id:n}=e;t[n].cache[a]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};z(Kc(),e=>{e.addCase(Tp,(t,r)=>{Em(r.payload,t)}),e.addCase(Ka,(t,r)=>{Rm(r.payload,t)}),e.addCase(jp,(t,r)=>{Fm(r.payload,t)}),e.addCase(Nr.pending,(t,r)=>{Dm(r.meta.arg,t,{results:[]})}),e.addCase(Nr.fulfilled,(t,r)=>{let{results:a}=r.payload;Mm({...r.payload,...r.meta.arg},t,{results:a})}),e.addCase(Nr.rejected,(t,r)=>{Um(r.meta.arg,t)})});var Di={by:new Ge({enum:$a,required:!0})},Tm=g("sortCriteria/register",e=>Ru(e)),jm=g("sortCriteria/update",e=>Ru(e)),Ru=e=>os(e)?(e.forEach(t=>b(t,Di)),{payload:e}):b(e,Di);z(Va(),e=>{e.addCase(Tm,(t,r)=>rr(r.payload)).addCase(jm,(t,r)=>rr(r.payload)).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.sortCriteria)??t}).addCase(we,(t,r)=>r.payload.sortCriteria??t)});var Ar=M,qn=new F({options:{required:!0},values:{caption:Se,expression:Se,state:new k({constrainTo:["idle","selected","excluded"]})}}),$m=new te({required:!0,each:qn}),Vm=g("staticFilter/register",e=>b(e,{id:Ar,values:$m})),_m=g("staticFilter/toggleSelect",e=>b(e,{id:Ar,value:qn})),Lm=g("staticFilter/toggleExclude",e=>b(e,{id:Ar,value:qn})),Qm=g("staticFilter/deselectAllFilterValues",e=>b(e,Ar));z(cs(),e=>e.addCase(Vm,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]=a)}).addCase(_m,(t,r)=>{let{id:a,value:n}=r.payload,i=t[a];if(!i)return;let s=i.values.find(u=>u.caption===n.caption);if(!s)return;let o=s.state==="selected";s.state=o?"idle":"selected"}).addCase(Lm,(t,r)=>{let{id:a,value:n}=r.payload,i=t[a];if(!i)return;let s=i.values.find(u=>u.caption===n.caption);if(!s)return;let o=s.state==="excluded";s.state=o?"idle":"excluded"}).addCase(Qm,(t,r)=>{let a=r.payload,n=t[a];n&&n.values.forEach(i=>i.state="idle")}).addCase(Me,t=>{Object.values(t).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(we,(t,r)=>{let a=r.payload.sf||{};Object.entries(t).forEach(([n,i])=>{let s=a[n]||[];i.values.forEach(o=>{o.state=s.includes(o.caption)?"selected":"idle"})})}));z(ls(),e=>{e.addCase(xh,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]={...a,isActive:!1})}).addCase(sn,(t,r)=>{let a=r.payload;Mi(t,a)}).addCase(we,(t,r)=>{let a=r.payload.tab||"";Mi(t,a)}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.tabSet)??t})});function Mi(e,t){t in e&&Object.keys(e).forEach(r=>{e[r].isActive=r===t})}function zm(e){return e.type==="redirect"}var Nm=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(zm);return e.length?e[0].content:null}},Bm=g("standaloneSearchBox/register",e=>b(e,{id:M,redirectionUrl:M})),Hm=g("standaloneSearchBox/reset",e=>b(e,{id:M})),Ym=g("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>b(e,{id:M})),Wm=g("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),ra=j("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:i}})=>{i(e,{id:new k({emptyAllowed:!1})});let s=await Jm(r()),o=await n.plan(s);if(Re(o))return a(o.error);let{redirectionUrl:u}=new Nm(o.success);return u&&t(Gm(u)),u||""}),Gm=e=>et("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),Jm=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await $e(e.configuration.analytics)},...e.configuration.analytics.enabled&&await Cr(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});z(el(),e=>e.addCase(Bm,(t,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in t||(t[a]=Ui(n))}).addCase(Hm,(t,r)=>{let{id:a}=r.payload,n=t[a];if(n){t[a]=Ui(n.defaultRedirectionUrl);return}}).addCase(ra.pending,(t,r)=>{let a=t[r.meta.arg.id];a&&(a.isLoading=!0)}).addCase(ra.fulfilled,(t,r)=>{let a=r.payload,n=t[r.meta.arg.id];n&&(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(ra.rejected,(t,r)=>{let a=t[r.meta.arg.id];a&&(a.isLoading=!1)}).addCase(Ym,(t,r)=>{let a=t[r.payload.id];a&&(a.analytics.cause="searchFromLink")}).addCase(Wm,(t,r)=>{let a=t[r.payload.id];a&&(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function Ui(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}new qe({...Am,redirectionUrl:new k({required:!0,emptyAllowed:!1})});new qe({parameters:new F({options:{required:!0},values:Zs})});new qe({fragment:new k});async function Km(e,t){var o;let{search:r,accessToken:a,organizationId:n,analytics:i}=e.configuration,s=((o=e.query)==null?void 0:o.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...i.enabled&&{visitorId:await $e(e.configuration.analytics)},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Pi=j("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),i=await Km(n,e),s=await t.apiClient.html(i);return Re(s)?a(s.error):{content:s.success,uniqueId:e.uniqueId}}),Zm=g("resultPreview/next"),Xm=g("resultPreview/previous"),ev=g("resultPreview/prepare",e=>b(e,{results:new te({required:!0})})),Ti=2048,tv=j("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let a=t(),n=Hl(await e.buildResultPreviewRequest(a,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(n==null?void 0:n.length)>Ti&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Ti} characters.`),{contentURL:n}}),aa=e=>{let{content:t,isLoading:r,uniqueId:a,contentURL:n}=ds();e.content=t,e.isLoading=r,e.uniqueId=a,e.contentURL=n},na=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId);z(ds(),e=>{e.addCase(Pi.pending,t=>{t.isLoading=!0}).addCase(Pi.fulfilled,(t,r)=>{let{content:a,uniqueId:n}=r.payload;t.position=t.resultsWithPreview.indexOf(n),t.content=a,t.uniqueId=n,t.isLoading=!1}).addCase(ue.fulfilled,(t,r)=>{aa(t),t.resultsWithPreview=na(r.payload.response.results)}).addCase(So.fulfilled,(t,r)=>{aa(t),t.resultsWithPreview=t.resultsWithPreview.concat(na(r.payload.response.results))}).addCase(vo.fulfilled,aa).addCase(ev,(t,r)=>{t.resultsWithPreview=na(r.payload.results)}).addCase(Zm,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(Xm,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(tv.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function rv(e,t){return e.raw[t.collection]}function ka(e,t){return e.raw[t.parent]}function xt(e,t){let r=e.raw[t.child];return Ac(r)?r[0]:r}function av(e,t){return(e||t)!==void 0&&e===t}function Fu(e,t,r,a=[]){let n=xt(e,r);return n?a.indexOf(n)!==-1?[]:t.filter(i=>{let s=xt(i,r)===xt(e,r);return ka(i,r)===n&&!s}).map(i=>({result:i,children:Fu(i,t,r,[...a,n])})):[]}function nv(e,t){return e.find(r=>{let a=ka(r,t)===void 0,n=av(ka(r,t),xt(r,t));return a||n})}function Du(e){return e.parentResult?Du(e.parentResult):e}function iv(e,t,r){let a=up(e),n=r??nv(a,t)??Du(e);return{result:n,children:Fu(n,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Kt(e,t,r){let a={};return e.forEach(n=>{let i=rv(n,t);i&&(!xt(n,t)&&!n.parentResult||(a[i]=iv(n,t,r)))}),a}function ji(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}z(ts(),e=>e.addCase(ue.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Kt(r.response.results,t.fields):{}}).addCase(vo.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Kt(r.response.results,t.fields):{}}).addCase(So.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Kt(r.response.results,t.fields)}:{}}).addCase(Co,(t,{payload:r})=>t.enabled?t:{enabled:!0,collections:{},fields:{collection:r.collectionField??t.fields.collection,parent:r.parentField??t.fields.parent,child:r.childField??t.fields.child},filterFieldRange:r.numberOfFoldedResults??t.filterFieldRange}).addCase(Yr.pending,(t,{meta:r})=>{let a=r.arg;ji(t,a).isLoadingMoreResults=!0}).addCase(Yr.rejected,(t,{meta:r})=>{let a=r.arg;ji(t,a).isLoadingMoreResults=!1}).addCase(Yr.fulfilled,(t,{payload:{collectionId:r,results:a,rootResult:n}})=>{let i=Kt(a,t.fields,n);if(!i||!i[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);t.collections[r]=i[r],t.collections[r].moreResultsAvailable=!1}));function sv(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function ov(e,t){let r=[],a=[],n=[],i=[];return t.forEach(s=>{switch(s.type){case"redirect":r.push(s.content);break;case"query":a.push(s.content);break;case"execute":n.push({functionName:s.content.name,params:s.content.params});break;case"notify":i.push(s.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=n,e.notifications=i,e}function uv(e,t){return e.queryModification={...t,queryToIgnore:""},e}function cv(e,t){return e.queryModification.queryToIgnore=t,e}z(tl(),e=>e.addCase(ue.pending,sv).addCase(ue.fulfilled,(t,r)=>ov(t,r.payload.response.triggers)).addCase(rn,(t,r)=>uv(t,r.payload)).addCase(tn,(t,r)=>cv(t,r.payload)));var lv=()=>new F({values:{questionAnswerId:M},options:{required:!0}});function Mu(e){return b(e,lv())}var dv=g("smartSnippet/expand"),fv=g("smartSnippet/collapse"),pv=g("smartSnippet/like"),hv=g("smartSnippet/dislike"),gv=g("smartSnippet/feedbackModal/open"),yv=g("smartSnippet/feedbackModal/close"),mv=g("smartSnippet/related/expand",e=>Mu(e)),vv=g("smartSnippet/related/collapse",e=>Mu(e)),$i=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function Uu({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:a}}){return Rc({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:a})}function Sv(e,t){let r=Uu(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}z(Rn(),e=>e.addCase(dv,t=>{t.expanded=!0}).addCase(fv,t=>{t.expanded=!1}).addCase(pv,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(hv,t=>{t.liked=!1,t.disliked=!0}).addCase(gv,t=>{t.feedbackModalOpen=!0}).addCase(yv,t=>{t.feedbackModalOpen=!1}).addCase(ue.fulfilled,(t,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((i,s)=>Sv(i,t.relatedQuestions[s])),n=Uu(r.payload.response.questionAnswer);return t.questionAnswerId===n?{...t,relatedQuestions:a}:{...Rn(),relatedQuestions:a,questionAnswerId:n}}).addCase(mv,(t,r)=>{let a=$i(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!0)}).addCase(vv,(t,r)=>{let a=$i(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!1)}));var wv={queries:new te({required:!0,each:new k({emptyAllowed:!1})}),maxLength:new $({required:!0,min:1,default:10})},bv=g("recentQueries/registerRecentQueries",e=>b(e,wv)),Cv=g("recentQueries/clearRecentQueries");z(Zc(),e=>{e.addCase(bv,Iv).addCase(Cv,qv).addCase(ue.fulfilled,(t,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;!a.length||!n.length||kv(a,t)})});function Iv(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function qv(e){e.queries=[]}function kv(e,t){t.queries=t.queries.filter(a=>a!==e);let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}z(Xc(),e=>{e.addCase(mm,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Sm,t=>{t.results=[]}).addCase(vm,(t,r)=>{let a=r.payload;t.results=t.results.filter(i=>i.uniqueId!==a.uniqueId);let n=t.results.slice(0,t.maxLength-1);t.results=[a,...n]})});z(Ea(),e=>{e.addCase(ue.fulfilled,(t,r)=>{var a,n;t.set={},(n=(a=r.payload.response.generateAutomaticFacets)==null?void 0:a.facets)==null||n.forEach(i=>{t.set[i.field]={response:i}})}).addCase(lm,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(Au,(t,r)=>{var u;let{field:a,selection:n}=r.payload,i=(u=t.set[a])==null?void 0:u.response;if(!i)return;let s=i.values.find(c=>c.value===n.value);if(!s)return;let o=s.state==="selected";s.state=o?"idle":"selected"}).addCase(dm,(t,r)=>{var i;let a=r.payload,n=(i=t.set[a])==null?void 0:i.response;if(n)for(let s of n.values)s.state="idle"}).addCase(we,(t,r)=>{var i,s;let a=r.payload.af??{},n=Object.keys(t.set);for(let o in a)if(!t.set[o]){let u=Ov(o),c=a[o].map(l=>Av(l));u.values.push(...c),t.set[o]={response:u}}for(let o of n)if(!(o in a)){let u=(i=t.set[o])==null?void 0:i.response;for(let c of u.values)c.state="idle"}for(let o in a){let u=(s=t.set[o])==null?void 0:s.response;if(u){let c=u.values;for(let l of c)a[o].includes(l.value)?l.state==="idle"&&(l.state="selected"):l.state="idle"}}}).addCase(le.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Me,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function Ov(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function Av(e){return{value:e,state:"selected",numberOfResults:0}}function xv(e){var t,r,a;return(a=(r=(t=e.search)==null?void 0:t.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var Ev=e=>et("analytics/generatedAnswer/streamEnd",(t,r)=>{var i,s;let a=xv(r),n=e?!((i=r.generatedAnswer)!=null&&i.answer)||!((s=r.generatedAnswer)!=null&&s.answer.length):void 0;return a?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:e,answerTextIsEmpty:n}):null}),Rv=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:(t=e.search.extendedResults)==null?void 0:t.generativeQuestionAnsweringId}},Fv=["default","bullet","step","concise"],Dv=["text/plain","text/markdown"],kt=new k({required:!0}),Pu=new k,xr=new H({required:!0}),Mv={id:kt,title:kt,uri:kt,permanentid:kt,clickUri:Pu},Tu=new k({required:!0,constrainTo:Dv}),Uv=g("generatedAnswer/setIsVisible",e=>b(e,xr)),ju=g("generatedAnswer/updateMessage",e=>b(e,{textDelta:kt})),$u=g("generatedAnswer/updateCitations",e=>b(e,{citations:new te({required:!0,each:new F({values:Mv})})})),Vu=g("generatedAnswer/updateError",e=>b(e,{message:Pu,code:new $({min:0})})),_u=g("generatedAnswer/resetAnswer"),Pv=g("generatedAnswer/like"),Tv=g("generatedAnswer/dislike"),jv=g("generatedAnswer/feedbackModal/open"),$v=g("generatedAnswer/expand"),Vv=g("generatedAnswer/collapse"),_v=g("generatedAnswer/setId",e=>b(e,{id:new k({required:!0})})),Lv=g("generatedAnswer/feedbackModal/close"),Qv=g("generatedAnswer/sendFeedback"),tr=g("generatedAnswer/setIsLoading",e=>b(e,xr)),Oa=g("generatedAnswer/setIsStreaming",e=>b(e,xr)),Lu=g("generatedAnswer/setAnswerContentFormat",e=>b(e,Tu)),zv=g("generatedAnswer/updateResponseFormat",e=>b(e,{answerStyle:new k({required:!0,constrainTo:Fv}),contentFormat:new te({each:Tu,default:["text/plain"]})})),Nv=g("generatedAnswer/registerFieldsToIncludeInCitations",e=>b(e,Is)),Qu=g("generatedAnswer/setIsAnswerGenerated",e=>b(e,xr));j("generatedAnswer/streamAnswer",async(e,t)=>{var l;let r=t.getState(),{dispatch:a,extra:n}=t,{setAbortControllerRef:i}=e,s=await Rv(r),o=(f,h)=>{switch(f){case"genqa.headerMessageType":{let w=JSON.parse(h);a(Lu(w.contentFormat));break}case"genqa.messageType":a(ju(JSON.parse(h)));break;case"genqa.citationsType":a($u(JSON.parse(h)));break;case"genqa.endOfStreamType":{let w=JSON.parse(h).answerGenerated;a(Oa(!1)),a(Qu(w)),a(Ev(w));break}default:r.debug&&n.logger.warn(`Unknown payloadType: "${f}"`)}};a(tr(!0));let u=f=>f.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(s,{write:f=>{u(s)&&(a(tr(!1)),f.payload&&f.payloadType&&o(f.payloadType,f.payload))},abort:f=>{u(s)&&a(Vu(f))},close:()=>{u(s)&&a(Oa(!1))},resetAnswer:()=>{u(s)&&a(_u())}});c?i(c):a(tr(!1))});z(En(),e=>e.addCase(Uv,(t,{payload:r})=>{t.isVisible=r}).addCase(_v,(t,{payload:r})=>{t.id=r.id}).addCase(ju,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase($u,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=t.citations.concat(r.citations),delete t.error}).addCase(Vu,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===Bl},t.citations=[],delete t.answer}).addCase(Pv,t=>{t.liked=!0,t.disliked=!1}).addCase(Tv,t=>{t.liked=!1,t.disliked=!0}).addCase(jv,t=>{t.feedbackModalOpen=!0}).addCase(Lv,t=>{t.feedbackModalOpen=!1}).addCase(Qv,t=>{t.feedbackSubmitted=!0}).addCase(_u,t=>({...En(),responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(tr,(t,{payload:r})=>{t.isLoading=r}).addCase(Oa,(t,{payload:r})=>{t.isStreaming=r}).addCase(Lu,(t,{payload:r})=>{t.answerContentFormat=r}).addCase(zv,(t,{payload:r})=>{t.responseFormat=r}).addCase(Nv,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))]}).addCase(Qu,(t,{payload:r})=>{t.isAnswerGenerated=r}).addCase($v,t=>{t.expanded=!0}).addCase(Vv,t=>{t.expanded=!1}));var Qe=()=>new k({required:!1,emptyAllowed:!0}),Bv=g("advancedSearchQueries/update",e=>b(e,{aq:Qe(),cq:Qe(),lq:Qe(),dq:Qe()})),Hv=g("advancedSearchQueries/register",e=>b(e,{aq:Qe(),cq:Qe(),lq:Qe(),dq:Qe()}));z(Ot(),e=>{e.addCase(Bv,(t,r)=>{let{aq:a,cq:n,lq:i,dq:s}=r.payload;ye(a)||(t.aq=a,t.aqWasSet=!0),ye(n)||(t.cq=n,t.cqWasSet=!0),ye(i)||(t.lq=i,t.lqWasSet=!0),ye(s)||(t.dq=s,t.dqWasSet=!0)}).addCase(Hv,(t,r)=>{let{aq:a,cq:n,lq:i,dq:s}=r.payload;ye(a)||(t.defaultFilters.aq=a,t.aqWasSet||(t.aq=a)),ye(n)||(t.defaultFilters.cq=n,t.cqWasSet||(t.cq=n)),ye(i)||(t.defaultFilters.lq=i,t.lqWasSet||(t.lq=i)),ye(s)||(t.defaultFilters.dq=s,t.dqWasSet||(t.dq=s))}).addCase(le.fulfilled,(t,r)=>{var a;return((a=r.payload)==null?void 0:a.advancedSearchQueries)??t}).addCase(we,(t,r)=>{let{aq:a,cq:n}=r.payload;ye(a)||(t.aq=a,t.aqWasSet=!0),ye(n)||(t.cq=n,t.cqWasSet=!0)})});var Yv=g("excerptLength/set",e=>b(e,new $({min:0,required:!0})));z(jc(),e=>{e.addCase(Yv,(t,r)=>{t.length=r.payload})});j("analytics/addPageViewEntry",async(e,{getState:t})=>{t().configuration.analytics.enabled&&Xe.addElement({name:"PageView",value:e,time:JSON.stringify(new Date)})});mc();/**
* @license
*
* Copyright 2024 Coveo Solutions Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
* 
*       http://www.apache.org/licenses/LICENSE-2.0
* 
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gv=e=>({decorator:t=>zu`
    <atomic-search-interface data-testid="root-interface">
      ${t()}
    </atomic-search-interface>
  `,play:async({canvasElement:t,step:r})=>{await customElements.whenDefined("atomic-search-interface");const n=await Nu(t).findByTestId("root-interface");await r("Render the Search Interface",async()=>{await n.initialize({...Dh(),...e})}),await r("Execute the first search",async()=>{await n.executeFirstSearch()})}});export{Gv as w};
