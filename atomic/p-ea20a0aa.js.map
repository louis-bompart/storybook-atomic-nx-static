{"version":3,"names":["announceFacetSearchResultsWithAriaLive","facet","label","setAriaLive","i18n","prevState","state","facetSearch","subscribe","shouldUpdateFacetSearchComponent","query","t","count","values","length","FacetSearchInput","props","search","clear","inputRef","h","class","part","type","placeholder","value","onInput","e","onChange","target","ref","icon","SearchIcon","Button","style","title","onClick","onClear","focus","CloseIcon","matchesFound","key","escape","interpolation","escapeValue","FacetSearchMatches","numberOfMatches","innerHTML","hasMoreMatches","FacetShowMoreLess","showMore","showMoreFacetValues","showLess","showLessFacetValues","btnClasses","iconClasses","canShowLessValues","canShowMoreValues","ariaLabel","onShowLess","showLessRef","MinusIcon","onShowMore","showMoreRef","PlusIcon"],"sources":["src/components/common/facets/facet-search/facet-search-aria-live.ts","src/components/common/facets/facet-search/facet-search-input.tsx","src/components/common/facets/facet-search/facet-search-matches.tsx","src/components/common/facets/facet-show-more-less/facet-show-more-less.tsx"],"sourcesContent":["import {i18n} from 'i18next';\nimport {Facet, FacetSearchState} from '../../types';\nimport {shouldUpdateFacetSearchComponent} from './facet-search-utils';\n\nexport function announceFacetSearchResultsWithAriaLive(\n  facet: Pick<Facet, 'subscribe'> & {state: {facetSearch: FacetSearchState}},\n  label: string,\n  setAriaLive: (msg: string) => void,\n  i18n: i18n\n) {\n  let prevState = facet.state.facetSearch;\n  facet.subscribe(() => {\n    if (\n      shouldUpdateFacetSearchComponent(facet.state.facetSearch, prevState) &&\n      facet.state.facetSearch.query\n    ) {\n      prevState = facet.state.facetSearch;\n\n      setAriaLive(\n        i18n.t('facet-search-results-count', {\n          count: facet.state.facetSearch.values.length,\n          label,\n        })\n      );\n    }\n  });\n}\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport CloseIcon from '../../../../images/close.svg';\nimport SearchIcon from '../../../../images/search.svg';\nimport {Button} from '../../button';\n\ninterface FacetSearchInputProps {\n  label: string;\n  query: string;\n  i18n: i18n;\n  onClear(): void;\n  onChange(value: string): void;\n}\n\nexport const FacetSearchInput: FunctionalComponent<FacetSearchInputProps> = (\n  props\n) => {\n  const label = props.i18n.t(props.label);\n  const search = props.i18n.t('facet-search-input');\n  const facetSearch = props.i18n.t('facet-search', {label});\n  const clear = props.i18n.t('clear');\n  let inputRef: HTMLInputElement | undefined;\n\n  return (\n    <div class=\"px-2 mt-3\" part=\"search-wrapper\">\n      <div class=\"relative h-10\">\n        <input\n          part=\"search-input\"\n          class=\"input-primary w-full h-full px-9 placeholder-neutral-dark text-sm group\"\n          type=\"text\"\n          placeholder={search}\n          aria-label={facetSearch}\n          value={props.query}\n          onInput={(e) => props.onChange((e.target as HTMLInputElement).value)}\n          ref={(ref) => (inputRef = ref)}\n        />\n        <div class=\"search-icon pointer-events-none absolute inline-flex justify-center items-center left-0 w-9 h-full text-on-background\">\n          <atomic-icon part=\"search-icon\" icon={SearchIcon}></atomic-icon>\n        </div>\n        {props.query !== '' && (\n          <Button\n            style=\"text-transparent\"\n            title={clear}\n            class=\"search-clear-button absolute inline-flex justify-center items-center right-px w-9 top-px bottom-px\"\n            onClick={() => {\n              props.onClear();\n              inputRef!.focus();\n            }}\n          >\n            <atomic-icon\n              part=\"search-clear-button\"\n              icon={CloseIcon}\n            ></atomic-icon>\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport escape from 'escape-html';\nimport {i18n} from 'i18next';\n\ninterface FacetSearchMatchesProps {\n  i18n: i18n;\n  query: string;\n  numberOfMatches: number;\n  hasMoreMatches: boolean;\n}\n\nfunction matchesFound(\n  key: 'more-matches-for' | 'no-matches-found-for',\n  query: string,\n  i18n: i18n\n) {\n  return i18n.t(key, {\n    query: `<span class=\"font-bold italic text-on-background\" part=\"matches-query\">${escape(\n      query\n    )}</span>`,\n    interpolation: {escapeValue: false},\n  });\n}\n\nexport const FacetSearchMatches: FunctionalComponent<\n  FacetSearchMatchesProps\n> = (props) => {\n  if (!props.numberOfMatches) {\n    return (\n      <div class=\"px-2\">\n        {/* file deepcode ignore ReactSetInnerHtml: This is not React code */}\n        <div\n          part=\"no-matches\"\n          class=\"truncate p-3 bg-neutral-light text-neutral-dark text-sm rounded\"\n          innerHTML={matchesFound(\n            'no-matches-found-for',\n            props.query,\n            props.i18n\n          )}\n        ></div>\n      </div>\n    );\n  }\n\n  if (props.hasMoreMatches) {\n    return (\n      <div class=\"px-2\">\n        <div\n          part=\"more-matches\"\n          class=\"truncate mt-3 text-neutral-dark text-sm\"\n          innerHTML={matchesFound('more-matches-for', props.query, props.i18n)}\n        ></div>\n      </div>\n    );\n  }\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport MinusIcon from '../../../../images/minus.svg';\nimport PlusIcon from '../../../../images/plus.svg';\nimport {Button} from '../../button';\n\ninterface FacetShowMoreProps {\n  label: string;\n  i18n: i18n;\n  canShowLessValues: boolean;\n  canShowMoreValues: boolean;\n  onShowMore(): void;\n  onShowLess(): void;\n  showMoreRef?: (element?: HTMLButtonElement) => void;\n  showLessRef?: (element?: HTMLButtonElement) => void;\n}\n\nexport const FacetShowMoreLess: FunctionalComponent<FacetShowMoreProps> = (\n  props\n) => {\n  const label = props.i18n.t(props.label);\n  const showMore = props.i18n.t('show-more');\n  const showMoreFacetValues = props.i18n.t('show-more-facet-values', {\n    label,\n  });\n  const showLess = props.i18n.t('show-less');\n  const showLessFacetValues = props.i18n.t('show-less-facet-values', {\n    label,\n  });\n  const btnClasses = 'flex items-baseline text-left p-2 text-sm max-w-full';\n  const iconClasses = 'w-2 h-2 mr-1';\n  if (!props.canShowLessValues && !props.canShowMoreValues) {\n    return;\n  }\n\n  return (\n    <div class=\"mt-2\">\n      <Button\n        style=\"text-primary\"\n        part=\"show-less\"\n        class={`${btnClasses} ${props.canShowLessValues ? '' : 'hidden'}`}\n        ariaLabel={showLessFacetValues}\n        onClick={() => props.onShowLess()}\n        ref={props.showLessRef}\n      >\n        <atomic-icon\n          part=\"show-more-less-icon\"\n          class={iconClasses}\n          icon={MinusIcon}\n        ></atomic-icon>\n        <span class=\"truncate\">{showLess}</span>\n      </Button>\n      <Button\n        style=\"text-primary\"\n        part=\"show-more\"\n        class={`${btnClasses} ${props.canShowMoreValues ? '' : 'hidden'}`}\n        ariaLabel={showMoreFacetValues}\n        onClick={() => props.onShowMore()}\n        ref={props.showMoreRef}\n      >\n        <atomic-icon\n          part=\"show-more-less-icon\"\n          class={iconClasses}\n          icon={PlusIcon}\n        ></atomic-icon>\n        <span class=\"truncate\">{showMore}</span>\n      </Button>\n    </div>\n  );\n};\n"],"mappings":"mOAIgBA,EACdC,EACAC,EACAC,EACAC,GAEA,IAAIC,EAAYJ,EAAMK,MAAMC,YAC5BN,EAAMO,WAAU,KACd,GACEC,EAAiCR,EAAMK,MAAMC,YAAaF,IAC1DJ,EAAMK,MAAMC,YAAYG,MACxB,CACAL,EAAYJ,EAAMK,MAAMC,YAExBJ,EACEC,EAAKO,EAAE,6BAA8B,CACnCC,MAAOX,EAAMK,MAAMC,YAAYM,OAAOC,OACtCZ,U,IAKV,C,MCZaa,EACXC,IAEA,MAAMd,EAAQc,EAAMZ,KAAKO,EAAEK,EAAMd,OACjC,MAAMe,EAASD,EAAMZ,KAAKO,EAAE,sBAC5B,MAAMJ,EAAcS,EAAMZ,KAAKO,EAAE,eAAgB,CAACT,UAClD,MAAMgB,EAAQF,EAAMZ,KAAKO,EAAE,SAC3B,IAAIQ,EAEJ,OACEC,EAAA,OAAKC,MAAM,YAAYC,KAAK,kBAC1BF,EAAA,OAAKC,MAAM,iBACTD,EAAA,SACEE,KAAK,eACLD,MAAM,0EACNE,KAAK,OACLC,YAAaP,EAAM,aACPV,EACZkB,MAAOT,EAAMN,MACbgB,QAAUC,GAAMX,EAAMY,SAAUD,EAAEE,OAA4BJ,OAC9DK,IAAMA,GAASX,EAAWW,IAE5BV,EAAA,OAAKC,MAAM,yHACTD,EAAA,eAAaE,KAAK,cAAcS,KAAMC,KAEvChB,EAAMN,QAAU,IACfU,EAACa,EAAM,CACLC,MAAM,mBACNC,MAAOjB,EACPG,MAAM,qGACNe,QAAS,KACPpB,EAAMqB,UACNlB,EAAUmB,OAAO,GAGnBlB,EAAA,eACEE,KAAK,sBACLS,KAAMQ,MAKV,EC7CV,SAASC,EACPC,EACA/B,EACAN,GAEA,OAAOA,EAAKO,EAAE8B,EAAK,CACjB/B,MAAO,0EAA0EgC,EAC/EhC,YAEFiC,cAAe,CAACC,YAAa,QAEjC,C,MAEaC,EAER7B,IACH,IAAKA,EAAM8B,gBAAiB,CAC1B,OACE1B,EAAA,OAAKC,MAAM,QAETD,EAAA,OACEE,KAAK,aACLD,MAAM,kEACN0B,UAAWP,EACT,uBACAxB,EAAMN,MACNM,EAAMZ,Q,CAOhB,GAAIY,EAAMgC,eAAgB,CACxB,OACE5B,EAAA,OAAKC,MAAM,QACTD,EAAA,OACEE,KAAK,eACLD,MAAM,0CACN0B,UAAWP,EAAa,mBAAoBxB,EAAMN,MAAOM,EAAMZ,Q,wHCjC5D6C,EACXjC,IAEA,MAAMd,EAAQc,EAAMZ,KAAKO,EAAEK,EAAMd,OACjC,MAAMgD,EAAWlC,EAAMZ,KAAKO,EAAE,aAC9B,MAAMwC,EAAsBnC,EAAMZ,KAAKO,EAAE,yBAA0B,CACjET,UAEF,MAAMkD,EAAWpC,EAAMZ,KAAKO,EAAE,aAC9B,MAAM0C,EAAsBrC,EAAMZ,KAAKO,EAAE,yBAA0B,CACjET,UAEF,MAAMoD,EAAa,uDACnB,MAAMC,EAAc,eACpB,IAAKvC,EAAMwC,oBAAsBxC,EAAMyC,kBAAmB,CACxD,M,CAGF,OACErC,EAAA,OAAKC,MAAM,QACTD,EAACa,EAAM,CACLC,MAAM,eACNZ,KAAK,YACLD,MAAO,GAAGiC,KAActC,EAAMwC,kBAAoB,GAAK,WACvDE,UAAWL,EACXjB,QAAS,IAAMpB,EAAM2C,aACrB7B,IAAKd,EAAM4C,aAEXxC,EAAA,eACEE,KAAK,sBACLD,MAAOkC,EACPxB,KAAM8B,IAERzC,EAAA,QAAMC,MAAM,YAAY+B,IAE1BhC,EAACa,EAAM,CACLC,MAAM,eACNZ,KAAK,YACLD,MAAO,GAAGiC,KAActC,EAAMyC,kBAAoB,GAAK,WACvDC,UAAWP,EACXf,QAAS,IAAMpB,EAAM8C,aACrBhC,IAAKd,EAAM+C,aAEX3C,EAAA,eACEE,KAAK,sBACLD,MAAOkC,EACPxB,KAAMiC,IAER5C,EAAA,QAAMC,MAAM,YAAY6B,IAEtB,S"}