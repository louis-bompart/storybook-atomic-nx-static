{"version":3,"names":["atomicCommerceRecommendationListCss","AtomicCommerceRecommendationListStyle0","AtomicCommerceRecommendationList","this","loadingFlag","randomID","productTemplateRegistered","templateHasError","currentPage","slotId","display","gridCellLinkTarget","density","imageSize","headingLevel","watchNumberOfRecommendationsPerPage","setRenderFunction","productRenderingFunction","itemRenderingFunction","previousPage","numberOfPages","nextPage","initialize","validateProductsPerPage","validateSlotID","recommendations","buildRecommendations","bindings","engine","options","refresh","productTemplateProvider","ProductTemplateProvider","includeDefaultTemplate","templateElements","Array","from","host","querySelectorAll","getResultTemplateRegistered","getTemplateHasError","setResultTemplateRegistered","value","setTemplateHasError","itemListCommon","ItemListCommon","engineSubscribe","subscribe","getCurrentNumberOfItems","recommendationsState","products","length","getIsLoading","isLoading","nextNewItemTarget","focusTarget","store","nextNewProductTarget","FocusTargetController","augmentedRecommendationListState","firstRequestExecuted","responseId","hasError","error","hasItems","subsetRecommendations","msg","NumberValue","min","validate","productsPerPage","Error","recListWithRecommendation","document","logger","warn","renderHeading","headline","h","Heading","level","part","class","i18n","t","currentIndex","Math","abs","slice","ceil","hasPagination","shouldRenderPagination","getAtomicProductProps","recommendation","interactiveProduct","product","name","_a","ec_name","price","getPrice","productId","permanentid","position","renderingFunction","key","getResultId","content","getTemplateContent","ec_price","undefined","ec_promo_price","computeListDisplayClasses","displayPlaceholders","isAppLoaded","getItemListDisplayClasses","renderAsGrid","i","atomicProductProps","DisplayGrid","item","clickUri","title","setRef","element","setNewResultRef","renderRecommendationList","updateBreakpoints","listClasses","DisplayWrapper","ResultsPlaceholdersGuard","numberOfPlaceholders","ItemDisplayGuard","map","render","Fragment","Carousel","__decorate","InitializeBindings","BindStateToController"],"sources":["src/components/commerce/atomic-commerce-recommendation-carousel/atomic-commerce-recommendation-list.pcss?tag=atomic-commerce-recommendation-list&encapsulation=shadow","src/components/commerce/atomic-commerce-recommendation-carousel/atomic-commerce-recommendation-list.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n@import '../../common/item-list/styles/mixins.pcss';\r\n@import '../../common/item-list/styles/placeholders.pcss';\r\n\r\n@mixin atomic-grid-clickable-elements;\r\n@mixin atomic-grid-display-common;\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\n/**\r\n * @prop --atomic-recs-number-of-columns: Number of columns for the recommendation list.\r\n */\r\n.list-root {\r\n  @mixin atomic-grid-with-cards;\r\n  grid-template-columns: repeat(var(--atomic-recs-number-of-columns, 1), minmax(0, 1fr));\r\n}\r\n\r\n[part='label'] {\r\n  font-family: var(--atomic-font-family);\r\n  font-size: var(--atomic-text-2xl);\r\n  font-weight: var(--atomic-font-bold);\r\n}\r\n","import {NumberValue} from '@coveo/bueno';\r\nimport {\r\n  Product,\r\n  Recommendations,\r\n  RecommendationsState,\r\n  buildRecommendations,\r\n} from '@coveo/headless/commerce';\r\nimport {\r\n  Component,\r\n  Element,\r\n  Fragment,\r\n  Method,\r\n  Prop,\r\n  State,\r\n  Watch,\r\n  h,\r\n} from '@stencil/core';\r\nimport {FocusTargetController} from '../../../utils/accessibility-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {randomID} from '../../../utils/utils';\r\nimport {ResultsPlaceholdersGuard} from '../../common/atomic-result-placeholder/placeholders';\r\nimport {Carousel} from '../../common/carousel';\r\nimport {Heading} from '../../common/heading';\r\nimport {DisplayGrid} from '../../common/item-list/display-grid';\r\nimport {DisplayWrapper} from '../../common/item-list/display-wrapper';\r\nimport {ItemDisplayGuard} from '../../common/item-list/item-display-guard';\r\nimport {\r\n  ItemListCommon,\r\n  ItemRenderingFunction,\r\n} from '../../common/item-list/item-list-common';\r\nimport {\r\n  ItemDisplayBasicLayout,\r\n  ItemDisplayDensity,\r\n  ItemDisplayImageSize,\r\n  ItemTarget,\r\n  getItemListDisplayClasses,\r\n} from '../../common/layout/display-options';\r\nimport {CommerceBindings} from '../atomic-commerce-interface/atomic-commerce-interface';\r\nimport {ProductTemplateProvider} from '../product-list/product-template-provider';\r\n\r\n/**\r\n * The `atomic-commerce-recommendation-list` component displays a list of product recommendations by applying one or more product templates.\r\n * @internal\r\n *\r\n * @part result-list - The element containing the list of product recommendations.\r\n * @part result-list-grid-clickable-container - The parent of a recommended product and the clickable link encompassing it.\r\n * @part result-list-grid-clickable - The clickable link encompassing a recommended product.\r\n * @part label - The label of the recommendation list.\r\n * @part previous-button - The previous button.\r\n * @part next-button - The next button.\r\n * @part indicators - The list of indicators.\r\n * @part indicator - A single indicator.\r\n * @part active-indicator - The active indicator.\r\n */\r\n@Component({\r\n  tag: 'atomic-commerce-recommendation-list',\r\n  styleUrl: 'atomic-commerce-recommendation-list.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicCommerceRecommendationList\r\n  implements InitializableComponent<CommerceBindings>\r\n{\r\n  @InitializeBindings() public bindings!: CommerceBindings;\r\n  public recommendations!: Recommendations;\r\n  private loadingFlag = randomID('firstRecommendationLoaded-');\r\n  private itemRenderingFunction: ItemRenderingFunction;\r\n  private nextNewProductTarget?: FocusTargetController;\r\n  private productTemplateProvider!: ProductTemplateProvider;\r\n  private itemListCommon!: ItemListCommon;\r\n\r\n  @Element() public host!: HTMLDivElement;\r\n\r\n  @BindStateToController('recommendations')\r\n  @State()\r\n  public recommendationsState!: RecommendationsState;\r\n  @State() public error!: Error;\r\n  @State() private productTemplateRegistered = false;\r\n  @State() private templateHasError = false;\r\n  @State() private currentPage = 0;\r\n\r\n  /**\r\n   * The identifier used by the Commerce API to retrieve the desired recommendation list for the component.\r\n   * You can configure recommendation lists and get their respective slot IDs through the Coveo Merchandising Hub (CMH).\r\n   * You can include multiple `atomic-commerce-recommendation-list` components with different slot IDs in the same page to display several recommendation lists.\r\n   */\r\n  @Prop({reflect: true})\r\n  public slotId = 'Recommendation';\r\n\r\n  /**\r\n   * The layout to apply when displaying the products. This does not affect the display of the surrounding list itself.\r\n   * To modify the number of products per column, modify the `--atomic-recs-number-of-columns` CSS variable.\r\n   */\r\n  @Prop({reflect: true}) public display: ItemDisplayBasicLayout = 'list';\r\n  /**\r\n   * The [target](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target) location to open the product link.\r\n   * This property is ignored unless the `display` property is set to `grid`.\r\n   * @defaultValue `_self`\r\n   */\r\n  @Prop() gridCellLinkTarget: ItemTarget = '_self';\r\n  /**\r\n   * The spacing of various elements in the product list, including the gap between products, the gap between parts of a product, and the font sizes of the parts of a product.\r\n   */\r\n  @Prop({reflect: true}) public density: ItemDisplayDensity = 'normal';\r\n  /**\r\n   * The expected size of the image displayed on the recommended products.\r\n   */\r\n  @Prop({reflect: true})\r\n  public imageSize: ItemDisplayImageSize = 'small';\r\n\r\n  /**\r\n   * The number of products to display per page.\r\n   * The products will be displayed in a carousel if this property is set.\r\n   * This does not affect the display of the list itself, only the number of recommendation pages.\r\n   * If you want to display the recommendations in a carousel with a single row, set the `--atomic-recs-number-fof-columns` CSS variable to the same value as this property.\r\n   */\r\n  @Prop({reflect: true}) public productsPerPage?: number;\r\n\r\n  /**\r\n   * The [heading level](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) to use for the heading label, from 1 to 6.\r\n   */\r\n  @Prop({reflect: true}) public headingLevel = 0;\r\n\r\n  @Watch('productsPerPage')\r\n  public async watchNumberOfRecommendationsPerPage() {\r\n    this.currentPage = 0;\r\n  }\r\n\r\n  /**\r\n   * Sets a rendering function to bypass the standard HTML template mechanism when rendering products.\r\n   * You can use this function while working with web frameworks that don't use plain HTML syntax, e.g., React, Angular, or Vue.\r\n   *\r\n   * Do not use this method if you integrate Atomic in a plain HTML implementation.\r\n   *\r\n   * @param productRenderingFunction\r\n   */\r\n  @Method() public async setRenderFunction(\r\n    productRenderingFunction: ItemRenderingFunction\r\n  ) {\r\n    this.itemRenderingFunction = productRenderingFunction;\r\n  }\r\n\r\n  /**\r\n   * Moves to the previous page, when the carousel is activated.\r\n   */\r\n  @Method() public async previousPage() {\r\n    this.currentPage =\r\n      this.currentPage - 1 < 0 ? this.numberOfPages - 1 : this.currentPage - 1;\r\n  }\r\n\r\n  /**\r\n   * Moves to the next page, when the carousel is activated.\r\n   */\r\n  @Method() public async nextPage() {\r\n    this.currentPage = (this.currentPage + 1) % this.numberOfPages;\r\n  }\r\n\r\n  public initialize() {\r\n    this.validateProductsPerPage();\r\n    this.validateSlotID();\r\n\r\n    this.recommendations = buildRecommendations(this.bindings.engine, {\r\n      options: {\r\n        slotId: this.slotId,\r\n      },\r\n    });\r\n\r\n    this.recommendations.refresh();\r\n\r\n    this.productTemplateProvider = new ProductTemplateProvider({\r\n      includeDefaultTemplate: true,\r\n      templateElements: Array.from(\r\n        this.host.querySelectorAll('atomic-product-template')\r\n      ),\r\n      getResultTemplateRegistered: () => this.productTemplateRegistered,\r\n      getTemplateHasError: () => this.templateHasError,\r\n      setResultTemplateRegistered: (value: boolean) => {\r\n        this.productTemplateRegistered = value;\r\n      },\r\n      setTemplateHasError: (value: boolean) => {\r\n        this.templateHasError = value;\r\n      },\r\n    });\r\n\r\n    this.itemListCommon = new ItemListCommon({\r\n      engineSubscribe: this.bindings.engine.subscribe,\r\n      getCurrentNumberOfItems: () => this.recommendationsState.products.length,\r\n      getIsLoading: () => this.recommendationsState.isLoading,\r\n      host: this.host,\r\n      loadingFlag: this.loadingFlag,\r\n      nextNewItemTarget: this.focusTarget,\r\n      store: this.bindings.store,\r\n    });\r\n  }\r\n\r\n  public get focusTarget() {\r\n    if (!this.nextNewProductTarget) {\r\n      this.nextNewProductTarget = new FocusTargetController(this);\r\n    }\r\n    return this.nextNewProductTarget;\r\n  }\r\n\r\n  private get augmentedRecommendationListState() {\r\n    return {\r\n      ...this.recommendationsState,\r\n      firstRequestExecuted: this.recommendationsState.responseId !== '',\r\n      hasError: this.recommendationsState.error !== null,\r\n      hasItems: this.recommendationsState.products.length > 0,\r\n      products: this.subsetRecommendations,\r\n    };\r\n  }\r\n\r\n  private validateProductsPerPage() {\r\n    const msg = new NumberValue({\r\n      min: 1,\r\n    }).validate(this.productsPerPage!);\r\n\r\n    if (msg) {\r\n      this.error = new Error(`The \"productsPerPage\" is invalid: ${msg}`);\r\n    }\r\n  }\r\n\r\n  private validateSlotID() {\r\n    const recListWithRecommendation = document.querySelectorAll(\r\n      `atomic-commerce-recommendation-list[slot-id=\"${this.slotId}\"]`\r\n    );\r\n\r\n    if (recListWithRecommendation.length > 1) {\r\n      this.bindings.engine.logger.warn(\r\n        `There are multiple atomic-commerce-recommendation-list in this page with the same slot-id property \"${this.slotId}\". Make sure to set a different recommendation property for each.`\r\n      );\r\n    }\r\n  }\r\n\r\n  private renderHeading() {\r\n    if (!this.augmentedRecommendationListState.headline) {\r\n      return;\r\n    }\r\n    if (this.augmentedRecommendationListState.hasError) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      this.augmentedRecommendationListState.firstRequestExecuted &&\r\n      !this.augmentedRecommendationListState.hasItems\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return (\r\n      <Heading level={this.headingLevel} part=\"label\" class=\"m-0 mb-2\">\r\n        {this.bindings.i18n.t(this.recommendationsState.headline)}\r\n      </Heading>\r\n    );\r\n  }\r\n\r\n  private get currentIndex() {\r\n    return Math.abs(\r\n      (this.currentPage * this.productsPerPage!) %\r\n        this.recommendationsState.products.length\r\n    );\r\n  }\r\n\r\n  private get subsetRecommendations() {\r\n    if (!this.productsPerPage) {\r\n      return this.recommendationsState.products;\r\n    }\r\n\r\n    return this.recommendationsState.products.slice(\r\n      this.currentIndex,\r\n      this.currentIndex + this.productsPerPage\r\n    );\r\n  }\r\n\r\n  private get numberOfPages() {\r\n    return Math.ceil(\r\n      this.recommendationsState.products.length / this.productsPerPage!\r\n    );\r\n  }\r\n\r\n  private get hasPagination() {\r\n    return !!this.productsPerPage;\r\n  }\r\n\r\n  private get shouldRenderPagination() {\r\n    return this.hasPagination && this.augmentedRecommendationListState.hasItems;\r\n  }\r\n\r\n  private getAtomicProductProps(recommendation: Product) {\r\n    return {\r\n      interactiveProduct: this.recommendations.interactiveProduct({\r\n        options: {\r\n          product: {\r\n            ...recommendation,\r\n            name: recommendation.ec_name ?? '',\r\n            price: this.getPrice(recommendation),\r\n            productId: recommendation.permanentid,\r\n          },\r\n          position: this.currentIndex,\r\n        },\r\n      }),\r\n      product: recommendation,\r\n      renderingFunction: this.itemRenderingFunction,\r\n      loadingFlag: this.loadingFlag,\r\n      key: this.itemListCommon.getResultId(\r\n        recommendation.permanentid,\r\n        this.recommendationsState.responseId,\r\n        this.density,\r\n        this.imageSize\r\n      ),\r\n      content: this.productTemplateProvider.getTemplateContent(recommendation),\r\n      store: this.bindings.store,\r\n      density: this.density,\r\n      display: this.display,\r\n      imageSize: this.imageSize,\r\n    };\r\n  }\r\n\r\n  private getPrice(recommendation: Product) {\r\n    if (recommendation.ec_price === undefined) {\r\n      return 0;\r\n    }\r\n\r\n    if (recommendation.ec_promo_price === undefined) {\r\n      return recommendation.ec_price;\r\n    }\r\n\r\n    return recommendation.ec_promo_price > recommendation.ec_price\r\n      ? recommendation.ec_promo_price\r\n      : recommendation.ec_price;\r\n  }\r\n\r\n  private computeListDisplayClasses() {\r\n    const displayPlaceholders = !this.bindings.store.isAppLoaded();\r\n\r\n    return getItemListDisplayClasses(\r\n      'grid',\r\n      this.density,\r\n      this.imageSize,\r\n      this.recommendationsState.isLoading,\r\n      displayPlaceholders\r\n    );\r\n  }\r\n\r\n  private renderAsGrid(product: Product, i: number) {\r\n    const atomicProductProps = this.getAtomicProductProps(product);\r\n    return (\r\n      <DisplayGrid\r\n        item={{\r\n          ...product,\r\n          clickUri: product.clickUri,\r\n          title: product.ec_name ?? '',\r\n        }}\r\n        {...atomicProductProps.interactiveProduct}\r\n        setRef={(element) =>\r\n          element && this.itemListCommon.setNewResultRef(element, i)\r\n        }\r\n      >\r\n        <atomic-product {...atomicProductProps}></atomic-product>\r\n      </DisplayGrid>\r\n    );\r\n  }\r\n\r\n  private renderRecommendationList() {\r\n    this.itemListCommon.updateBreakpoints();\r\n    const listClasses = this.computeListDisplayClasses();\r\n\r\n    if (\r\n      !this.productTemplateRegistered ||\r\n      this.productTemplateProvider.hasError ||\r\n      this.error\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return (\r\n      <DisplayWrapper listClasses={listClasses} display=\"grid\">\r\n        <ResultsPlaceholdersGuard\r\n          density={this.density}\r\n          display={this.display}\r\n          imageSize={this.imageSize}\r\n          displayPlaceholders={!this.bindings.store.isAppLoaded()}\r\n          numberOfPlaceholders={\r\n            this.productsPerPage ?? this.recommendationsState.products.length\r\n          }\r\n        ></ResultsPlaceholdersGuard>\r\n        <ItemDisplayGuard {...this.augmentedRecommendationListState}>\r\n          {this.subsetRecommendations.map((recommendation, i) => {\r\n            return this.renderAsGrid(recommendation, i);\r\n          })}\r\n        </ItemDisplayGuard>\r\n      </DisplayWrapper>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <Fragment>\r\n        {this.renderHeading()}\r\n        {this.shouldRenderPagination ? (\r\n          <Carousel\r\n            bindings={this.bindings}\r\n            currentPage={this.currentPage}\r\n            nextPage={() => this.nextPage()}\r\n            previousPage={() => this.previousPage()}\r\n            numberOfPages={this.numberOfPages}\r\n          >\r\n            {this.renderRecommendationList()}\r\n          </Carousel>\r\n        ) : (\r\n          this.renderRecommendationList()\r\n        )}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}