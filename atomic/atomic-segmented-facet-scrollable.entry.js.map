{"file":"atomic-segmented-facet-scrollable.entry.esm.js","mappings":"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","names":[],"sources":["src/components/search/facets/atomic-segmented-facet-scrollable/atomic-segmented-facet-scrollable.pcss?tag=atomic-segmented-facet-scrollable&encapsulation=shadow","src/components/search/facets/atomic-segmented-facet-scrollable/atomic-segmented-facet-scrollable.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\r\n\r\n.wrapper-segmented {\r\n  @mixin hide-scrollbar;\r\n}\r\n\r\n::slotted(atomic-segmented-facet:not(.atomic-hidden)) {\r\n  @apply mr-2;\r\n}\r\n","import {\r\n  buildSearchStatus,\r\n  SearchStatus,\r\n  SearchStatusState,\r\n} from '@coveo/headless';\r\nimport {Component, Element, h, Listen, State} from '@stencil/core';\r\nimport {Bindings} from '../../../..';\r\nimport ArrowLeftIcon from '../../../../images/arrow-left-rounded.svg';\r\nimport ArrowRightIcon from '../../../../images/arrow-right-rounded.svg';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../../utils/initialization-utils';\r\nimport {Button} from '../../../common/button';\r\nimport {Hidden} from '../../../common/hidden';\r\n\r\ntype ArrowDirection = 'right' | 'left';\r\n\r\n/**\r\n * The 'atomic-segmented-facet-scrollable' component wraps around one or several 'atomic-segmented-facet' to provide horizontal scrolling capabilities.\r\n *\r\n * @slot default - One or multiple atomic-segmented-facet components\r\n *\r\n * @part scrollable-container - The wrapper for the entire component including the horizontal-scroll container and the arrow buttons.\r\n * @part horizontal-scroll - The scrollable container for the segmented facets.\r\n * @part left-arrow-wrapper - The wrapper for the arrow button & fade on the left.\r\n * @part right-arrow-wrapper - The wrapper for the arrow button & fade on the right.\r\n * @part left-arrow-button - The arrow button used to scroll on the left.\r\n * @part right-arrow-button - The arrow button used to scroll on the right.\r\n * @part left-arrow-icon - The arrow icon on the left.\r\n * @part right-arrow-icon - The arrow icon on the right.\r\n * @part left-fade - The white to transparent gradient on the left.\r\n * @part right-fade - The white to transparent gradient on the right.\r\n */\r\n@Component({\r\n  tag: 'atomic-segmented-facet-scrollable',\r\n  styleUrl: 'atomic-segmented-facet-scrollable.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicSegmentedFacetScrollable implements InitializableComponent {\r\n  @Element() private host!: HTMLElement;\r\n  private horizontalScrollRef?: HTMLElement;\r\n  private arrowRef?: HTMLElement;\r\n  private observer!: ResizeObserver;\r\n\r\n  @InitializeBindings()\r\n  public bindings!: Bindings;\r\n  public searchStatus!: SearchStatus;\r\n  @BindStateToController('searchStatus')\r\n  @State()\r\n  public searchStatusState!: SearchStatusState;\r\n  @State()\r\n  public error!: Error;\r\n  @State() private hideLeftArrow = true;\r\n  @State() private hideRightArrow = true;\r\n\r\n  public initialize() {\r\n    this.searchStatus = buildSearchStatus(this.bindings.engine);\r\n  }\r\n\r\n  public componentDidLoad() {\r\n    this.observer = new ResizeObserver(() => {\r\n      this.handleScroll();\r\n    });\r\n\r\n    Array.from(this.host.children).forEach((el) => this.observer.observe(el));\r\n    this.observer.observe(this.horizontalScrollRef!);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.observer.disconnect();\r\n  }\r\n\r\n  @Listen('wheel')\r\n  @Listen('touchmove')\r\n  @Listen('keydown')\r\n  public handleScroll() {\r\n    if (!this.horizontalScrollRef) {\r\n      return;\r\n    }\r\n    const container = this.horizontalScrollRef;\r\n    const isScrollable = container.clientWidth < container.scrollWidth;\r\n\r\n    const isLeftEdge = Math.floor(container.scrollLeft) <= 0;\r\n    const isRightEdge =\r\n      Math.ceil(container.scrollLeft) >=\r\n      container.scrollWidth - container.clientWidth;\r\n\r\n    this.hideLeftArrow = !isScrollable || isLeftEdge;\r\n    this.hideRightArrow = !isScrollable || isRightEdge;\r\n  }\r\n\r\n  private slideHorizontally(direction: ArrowDirection) {\r\n    const container = this.horizontalScrollRef!;\r\n    const arrowsWidth = this.arrowRef!.clientWidth * 2;\r\n\r\n    const pixelsToScroll = (container.clientWidth - arrowsWidth) * 0.7;\r\n\r\n    const isLeftEdge = Math.floor(container.scrollLeft - pixelsToScroll) <= 0;\r\n    const isRightEdge =\r\n      Math.ceil(container.scrollLeft + pixelsToScroll) >=\r\n      container.scrollWidth - container.clientWidth;\r\n\r\n    this.hideLeftArrow = false;\r\n    this.hideRightArrow = false;\r\n\r\n    if (direction === 'left') {\r\n      container.scrollLeft -= pixelsToScroll;\r\n      this.hideLeftArrow = isLeftEdge;\r\n      return;\r\n    }\r\n\r\n    container.scrollLeft += pixelsToScroll;\r\n    this.hideRightArrow = isRightEdge;\r\n  }\r\n\r\n  private renderArrow(direction: ArrowDirection) {\r\n    const hide =\r\n      (direction === 'left' && this.hideLeftArrow) ||\r\n      (direction === 'right' && this.hideRightArrow);\r\n    const hiddenClass = hide ? 'invisible opacity-0' : '';\r\n    const transitionClass = this.bindings.store.isAppLoaded()\r\n      ? 'transition-visi-opacity ease-in-out duration-300'\r\n      : '';\r\n\r\n    return (\r\n      <div\r\n        part={`${direction}-arrow-wrapper`}\r\n        class={`${hiddenClass} ${transitionClass}`}\r\n      >\r\n        <Button\r\n          part={`${direction}-arrow-button`}\r\n          style=\"square-neutral\"\r\n          class={`flex shrink-0 basis-8 justify-center items-center rounded absolute z-1 h-10 w-10 top-0 bottom-0 ${\r\n            direction === 'left' ? 'left-0' : 'right-0'\r\n          }`}\r\n          ariaHidden=\"true\"\r\n          tabIndex=\"-1\"\r\n          onClick={() => this.slideHorizontally(direction)}\r\n          ref={(el) => (this.arrowRef = el)}\r\n        >\r\n          <atomic-icon\r\n            part={`${direction}-arrow-icon`}\r\n            class=\"w-3.5\"\r\n            icon={direction === 'left' ? ArrowLeftIcon : ArrowRightIcon}\r\n          ></atomic-icon>\r\n        </Button>\r\n        <div\r\n          part={`${direction}-fade`}\r\n          class={`w-20 h-10 absolute top-0 z-0 pointer-events-none from-background-60 ${\r\n            direction === 'left'\r\n              ? 'left-0 bg-gradient-to-r'\r\n              : 'right-0 bg-gradient-to-l'\r\n          }`}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    if (this.searchStatus.state.hasError) {\r\n      return <Hidden></Hidden>;\r\n    }\r\n\r\n    return (\r\n      <div part=\"scrollable-container\" class=\"flex relative\">\r\n        {this.renderArrow('left')}\r\n        <div\r\n          part=\"horizontal-scroll\"\r\n          class=\"wrapper-segmented flex flex-row overflow-x-scroll scroll-smooth\"\r\n          ref={(el) => (this.horizontalScrollRef = el)}\r\n        >\r\n          <slot></slot>\r\n        </div>\r\n        {this.renderArrow('right')}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"version":3}