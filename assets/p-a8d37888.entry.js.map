{"version":3,"names":["atomicPagerCss","AtomicPagerStyle0","AtomicPager","this","numberOfPages","previousButtonIcon","ArrowLeftIcon","nextButtonIcon","ArrowRightIcon","radioGroupName","randomID","initialize","searchStatus","buildSearchStatus","bindings","engine","pager","buildPager","options","render","h","PagerGuard","key","searchStatusState","isAppLoaded","store","PagerNavigation","label","i18n","t","PagerPreviousButton","icon","disabled","pagerState","hasPreviousPage","ariaLabel","onClick","previousPage","focusOnFirstResultAndScrollToTop","PagerPageButtons","currentPages","map","pageNumber","PagerPageButton","isSelected","isCurrentPage","onChecked","selectPage","page","groupName","ref","el","focusTarget","setTarget","text","toLocaleString","language","PagerNextButton","hasNextPage","nextPage","_a","state","resultList","focusOnFirstResultAfterNextSearch","scrollToTopEvent","emit","activePage","FocusTargetController","__decorate","InitializeBindings","BindStateToController"],"sources":["src/components/search/atomic-pager/atomic-pager.pcss?tag=atomic-pager&encapsulation=shadow","src/components/search/atomic-pager/atomic-pager.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n","import {\r\n  buildPager,\r\n  buildSearchStatus,\r\n  Pager,\r\n  PagerState,\r\n  SearchStatus,\r\n  SearchStatusState,\r\n} from '@coveo/headless';\r\nimport {Component, Event, EventEmitter, h, Prop, State} from '@stencil/core';\r\nimport ArrowLeftIcon from '../../../images/arrow-left-rounded.svg';\r\nimport ArrowRightIcon from '../../../images/arrow-right-rounded.svg';\r\nimport {FocusTargetController} from '../../../utils/accessibility-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {randomID} from '../../../utils/utils';\r\nimport {\r\n  PagerNextButton,\r\n  PagerPageButton,\r\n  PagerPageButtons,\r\n  PagerPreviousButton,\r\n} from '../../common/pager/pager-buttons';\r\nimport {PagerGuard} from '../../common/pager/pager-guard';\r\nimport {PagerNavigation} from '../../common/pager/pager-navigation';\r\nimport {Bindings} from '../atomic-search-interface/atomic-search-interface';\r\n\r\n/**\r\n * The `atomic-pager` provides buttons that allow the end user to navigate through the different result pages.\r\n *\r\n * @part buttons - The list of the next/previous buttons and page-buttons.\r\n * @part page-buttons - The list of page buttons.\r\n * @part page-button - The page button.\r\n * @part active-page-button - The active page button.\r\n * @part previous-button - The previous button.\r\n * @part next-button - The next button.\r\n * @part previous-button-icon - Icon of the previous button.\r\n * @part next-button-icon - Icon of the next button.\r\n */\r\n@Component({\r\n  tag: 'atomic-pager',\r\n  styleUrl: 'atomic-pager.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicPager implements InitializableComponent {\r\n  @InitializeBindings() public bindings!: Bindings;\r\n  public pager!: Pager;\r\n  public searchStatus!: SearchStatus;\r\n\r\n  @BindStateToController('pager')\r\n  @State()\r\n  public pagerState!: PagerState;\r\n  @BindStateToController('searchStatus')\r\n  @State()\r\n  public searchStatusState!: SearchStatusState;\r\n  @State() error!: Error;\r\n\r\n  @Event({\r\n    eventName: 'atomic/scrollToTop',\r\n  })\r\n  private scrollToTopEvent!: EventEmitter;\r\n\r\n  /**\r\n   * Specifies how many page buttons to display in the pager.\r\n   */\r\n  @Prop({reflect: true}) numberOfPages = 5;\r\n\r\n  /**\r\n   * The SVG icon to use to display the Previous button.\r\n   *\r\n   * - Use a value that starts with `http://`, `https://`, `./`, or `../`, to fetch and display an icon from a given location.\r\n   * - Use a value that starts with `assets://`, to display an icon from the Atomic package.\r\n   * - Use a stringified SVG to display it directly.\r\n   */\r\n  @Prop({reflect: true}) previousButtonIcon = ArrowLeftIcon;\r\n\r\n  /**\r\n   * The SVG icon to use to display the Next button.\r\n   *\r\n   * - Use a value that starts with `http://`, `https://`, `./`, or `../`, to fetch and display an icon from a given location.\r\n   * - Use a value that starts with `assets://`, to display an icon from the Atomic package.\r\n   * - Use a stringified SVG to display it directly.\r\n   */\r\n  @Prop({reflect: true}) nextButtonIcon = ArrowRightIcon;\r\n\r\n  private activePage?: FocusTargetController;\r\n  private radioGroupName = randomID('atomic-pager-');\r\n\r\n  public initialize() {\r\n    this.searchStatus = buildSearchStatus(this.bindings.engine);\r\n    this.pager = buildPager(this.bindings.engine, {\r\n      options: {numberOfPages: this.numberOfPages},\r\n    });\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <PagerGuard\r\n        {...this.searchStatusState}\r\n        isAppLoaded={this.bindings.store.isAppLoaded()}\r\n      >\r\n        <PagerNavigation label={this.bindings.i18n.t('pagination')}>\r\n          <PagerPreviousButton\r\n            icon={this.previousButtonIcon}\r\n            disabled={!this.pagerState.hasPreviousPage}\r\n            ariaLabel={this.bindings.i18n.t('previous')}\r\n            onClick={() => {\r\n              this.pager.previousPage();\r\n              this.focusOnFirstResultAndScrollToTop();\r\n            }}\r\n          />\r\n          <PagerPageButtons>\r\n            {this.pagerState.currentPages.map((pageNumber) => {\r\n              return (\r\n                <PagerPageButton\r\n                  isSelected={this.pager.isCurrentPage(pageNumber)}\r\n                  ariaLabel={this.bindings.i18n.t('page-number', {pageNumber})}\r\n                  onChecked={() => {\r\n                    this.pager.selectPage(pageNumber);\r\n                    this.focusOnFirstResultAndScrollToTop();\r\n                  }}\r\n                  page={pageNumber}\r\n                  groupName={this.radioGroupName}\r\n                  ref={(el) => {\r\n                    const isSelected = this.pager.isCurrentPage(pageNumber);\r\n                    if (isSelected && el) {\r\n                      this.focusTarget.setTarget(el);\r\n                    }\r\n                  }}\r\n                  text={pageNumber.toLocaleString(this.bindings.i18n.language)}\r\n                />\r\n              );\r\n            })}\r\n          </PagerPageButtons>\r\n          <PagerNextButton\r\n            icon={this.nextButtonIcon}\r\n            disabled={!this.pagerState.hasNextPage}\r\n            ariaLabel={this.bindings.i18n.t('next')}\r\n            onClick={() => {\r\n              this.pager.nextPage();\r\n              this.focusOnFirstResultAndScrollToTop();\r\n            }}\r\n          />\r\n        </PagerNavigation>\r\n      </PagerGuard>\r\n    );\r\n  }\r\n\r\n  private async focusOnFirstResultAndScrollToTop() {\r\n    await this.bindings.store.state.resultList?.focusOnFirstResultAfterNextSearch();\r\n    this.scrollToTopEvent.emit();\r\n  }\r\n\r\n  private get focusTarget() {\r\n    if (!this.activePage) {\r\n      this.activePage = new FocusTargetController(this);\r\n    }\r\n    return this.activePage;\r\n  }\r\n}\r\n"],"mappings":"kgBAAA,MAAMA,EAAiB,w+tCACvB,MAAAC,EAAeD,E,iXC4CFE,EAAW,M,8EAqBCC,KAAAC,cAAgB,EAShBD,KAAAE,mBAAqBC,EASrBH,KAAAI,eAAiBC,EAGhCL,KAAAM,eAAiBC,EAAS,iB,mGArBK,E,wBASKJ,E,oBASJE,C,CAKjC,UAAAG,GACLR,KAAKS,aAAeC,EAAkBV,KAAKW,SAASC,QACpDZ,KAAKa,MAAQC,EAAWd,KAAKW,SAASC,OAAQ,CAC5CG,QAAS,CAACd,cAAeD,KAAKC,gB,CAI3B,MAAAe,GACL,OACEC,EAACC,EAAU,CAAAC,IAAA,8CACLnB,KAAKoB,kBACTC,YAAarB,KAAKW,SAASW,MAAMD,eAEjCJ,EAACM,EAAe,CAAAJ,IAAA,2CAACK,MAAOxB,KAAKW,SAASc,KAAKC,EAAE,eAC3CT,EAACU,EAAmB,CAAAR,IAAA,2CAClBS,KAAM5B,KAAKE,mBACX2B,UAAW7B,KAAK8B,WAAWC,gBAC3BC,UAAWhC,KAAKW,SAASc,KAAKC,EAAE,YAChCO,QAAS,KACPjC,KAAKa,MAAMqB,eACXlC,KAAKmC,kCAAkC,IAG3ClB,EAACmB,EAAgB,CAAAjB,IAAA,4CACdnB,KAAK8B,WAAWO,aAAaC,KAAKC,GAE/BtB,EAACuB,EAAe,CACdC,WAAYzC,KAAKa,MAAM6B,cAAcH,GACrCP,UAAWhC,KAAKW,SAASc,KAAKC,EAAE,cAAe,CAACa,eAChDI,UAAW,KACT3C,KAAKa,MAAM+B,WAAWL,GACtBvC,KAAKmC,kCAAkC,EAEzCU,KAAMN,EACNO,UAAW9C,KAAKM,eAChByC,IAAMC,IACJ,MAAMP,EAAazC,KAAKa,MAAM6B,cAAcH,GAC5C,GAAIE,GAAcO,EAAI,CACpBhD,KAAKiD,YAAYC,UAAUF,E,GAG/BG,KAAMZ,EAAWa,eAAepD,KAAKW,SAASc,KAAK4B,eAK3DpC,EAACqC,EAAe,CAAAnC,IAAA,2CACdS,KAAM5B,KAAKI,eACXyB,UAAW7B,KAAK8B,WAAWyB,YAC3BvB,UAAWhC,KAAKW,SAASc,KAAKC,EAAE,QAChCO,QAAS,KACPjC,KAAKa,MAAM2C,WACXxD,KAAKmC,kCAAkC,K,CAQ3C,sCAAMA,G,aACNsB,EAAAzD,KAAKW,SAASW,MAAMoC,MAAMC,cAAU,MAAAF,SAAA,SAAAA,EAAEG,qCAC5C5D,KAAK6D,iBAAiBC,M,CAGxB,eAAYb,GACV,IAAKjD,KAAK+D,WAAY,CACpB/D,KAAK+D,WAAa,IAAIC,EAAsBhE,K,CAE9C,OAAOA,KAAK+D,U,GAhHeE,EAAA,CAA5BC,K,+BAMMD,EAAA,CAFNE,EAAsB,U,iCAKhBF,EAAA,CAFNE,EAAsB,iB"}