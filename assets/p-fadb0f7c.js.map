{"version":3,"names":["TriStateCheckbox","props","isSelected","state","isExcluded","partName","_a","part","classNames","parts","push","class","attributes","key","id","join","_b","ariaLabel","text","value","ref","h","role","onClick","onToggle","call","onMouseDown","e","style","stroke","fill","icon","Tick","Close","iconPart","FacetValueExclude","onMouseEnter","FacetValueCheckbox","children","randomID","count","numberOfResults","toLocaleString","i18n","language","ariaLabelAttributes","displayValue","interpolation","escapeValue","selectedAriaLabel","t","excludedAriaLabel","labelRef","isTriStateCheckbox","a","renderCheckbox","buttonRef","createRipple","color","parent","Checkbox","checked","renderExclusion","onExclude","htmlFor"],"sources":["src/components/common/triStateCheckbox.tsx","src/components/common/facets/facet-value-exclude/facet-value-exclude.tsx","src/components/common/facets/facet-value-checkbox/facet-value-checkbox.tsx"],"sourcesContent":["import {FacetValueState} from '@coveo/headless';\r\nimport {FunctionalComponent, h} from '@stencil/core';\r\nimport Tick from '../../images/checkbox.svg';\r\nimport Close from '../../images/close.svg';\r\nimport {CheckboxProps} from './checkbox';\r\n\r\nexport type TriStateCheckboxProps = Omit<CheckboxProps, 'checked'> & {\r\n  state: FacetValueState;\r\n};\r\n\r\nexport const TriStateCheckbox: FunctionalComponent<TriStateCheckboxProps> = (\r\n  props\r\n) => {\r\n  const isSelected = props.state === 'selected';\r\n  const isExcluded = props.state === 'excluded';\r\n  const partName = props.part ?? 'checkbox';\r\n\r\n  const classNames = [\r\n    'w-4 h-4 grid place-items-center rounded no-outline hover:border-primary-light focus-visible:border-primary-light',\r\n  ];\r\n  const parts = [partName];\r\n  if (isSelected) {\r\n    classNames.push(\r\n      'selected bg-primary hover:bg-primary-light focus-visible:bg-primary-light'\r\n    );\r\n    parts.push(`${partName}-checked`);\r\n  } else if (isExcluded) {\r\n    classNames.push(\r\n      'excluded bg-error hover:bg-error focus-visible:bg-error hover:border-error focus-visible:border-error'\r\n    );\r\n    parts.push(`${partName}-checked`);\r\n  } else {\r\n    classNames.push('border border-neutral-dark');\r\n  }\r\n  if (props.class) {\r\n    classNames.push(props.class);\r\n  }\r\n\r\n  const attributes = {\r\n    key: props.key,\r\n    id: props.id,\r\n    class: classNames.join(' '),\r\n    part: parts.join(' '),\r\n    'aria-pressed': isSelected ? 'true' : isExcluded ? 'mixed' : 'false',\r\n    'aria-label': props.ariaLabel ?? props.text,\r\n    value: props.text,\r\n    ref: props.ref,\r\n  };\r\n\r\n  return (\r\n    <button\r\n      {...attributes}\r\n      role=\"button\"\r\n      onClick={() => props.onToggle?.(!isSelected)}\r\n      onMouseDown={(e) => props.onMouseDown?.(e)}\r\n    >\r\n      <atomic-icon\r\n        style={{stroke: 'white', fill: 'white'}}\r\n        class={`w-3/5 ${isSelected || isExcluded ? 'block' : 'hidden'}`}\r\n        icon={isSelected ? Tick : Close}\r\n        part={props.iconPart}\r\n      ></atomic-icon>\r\n    </button>\r\n  );\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport Tick from '../../../../images/clear.svg';\r\n\r\nexport interface ExcludeProps {\r\n  onClick(): void;\r\n  key?: string | number;\r\n  class?: string;\r\n  text?: string;\r\n  ariaLabel?: string;\r\n  ref?(element?: HTMLElement): void;\r\n  onMouseEnter?(evt: MouseEvent): void;\r\n}\r\n\r\nexport const FacetValueExclude: FunctionalComponent<ExcludeProps> = (props) => {\r\n  const classNames = [\r\n    'value-exclude-button',\r\n    'peer',\r\n    'order-last',\r\n    'flex',\r\n    'ml-auto',\r\n  ];\r\n  if (props.class) {\r\n    classNames.push(props.class);\r\n  }\r\n\r\n  const attributes = {\r\n    class: classNames.join(' '),\r\n    part: 'value-exclude-button',\r\n    ref: props.ref,\r\n    key: props.key,\r\n    'aria-label': props.ariaLabel ?? props.text,\r\n    value: props.text,\r\n  };\r\n\r\n  return (\r\n    <button\r\n      {...attributes}\r\n      onClick={() => props.onClick?.()}\r\n      onMouseEnter={(e) => props.onMouseEnter?.(e)}\r\n    >\r\n      <atomic-icon\r\n        class={\r\n          'w-4 p-1 rounded bg-neutral order-last hover:bg-error hover:fill-white invisible group-hover:visible'\r\n        }\r\n        icon={Tick}\r\n      ></atomic-icon>\r\n    </button>\r\n  );\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {createRipple} from '../../../../utils/ripple';\r\nimport {randomID} from '../../../../utils/utils';\r\nimport {Checkbox} from '../../checkbox';\r\nimport {TriStateCheckbox} from '../../triStateCheckbox';\r\nimport {FacetValueProps} from '../facet-common';\r\nimport {FacetValueExclude} from '../facet-value-exclude/facet-value-exclude';\r\n\r\ntype TriStateFacetValueProps = Omit<FacetValueProps, 'isSelected'> & {\r\n  state: 'idle' | 'selected' | 'excluded';\r\n  onExclude(): void;\r\n};\r\n\r\nexport const FacetValueCheckbox: FunctionalComponent<\r\n  FacetValueProps | TriStateFacetValueProps\r\n> = (props, children) => {\r\n  const id = randomID('facet-value-');\r\n  const count = props.numberOfResults.toLocaleString(props.i18n.language);\r\n  const ariaLabelAttributes = {\r\n    value: props.displayValue,\r\n    count: props.numberOfResults,\r\n    interpolation: {escapeValue: false},\r\n  };\r\n  const selectedAriaLabel = props.i18n.t('facet-value', ariaLabelAttributes);\r\n  const excludedAriaLabel = props.i18n.t(\r\n    'facet-value-exclude',\r\n    ariaLabelAttributes\r\n  );\r\n  let labelRef: HTMLLabelElement;\r\n\r\n  const isTriStateCheckbox = (\r\n    a: FacetValueProps | TriStateFacetValueProps\r\n  ): a is TriStateFacetValueProps => {\r\n    return 'state' in a && 'isSelected' in a;\r\n  };\r\n\r\n  const renderCheckbox = () => {\r\n    const attributes = {\r\n      id,\r\n      onToggle: () => props.onClick(),\r\n      part: 'value-checkbox',\r\n      class: 'value-checkbox',\r\n      ariaLabel: selectedAriaLabel,\r\n      ref: props.buttonRef,\r\n      onMouseDown: (e: MouseEvent) =>\r\n        createRipple(e, {color: 'neutral', parent: labelRef}),\r\n      iconPart: 'value-checkbox-icon',\r\n    };\r\n\r\n    if (isTriStateCheckbox(props)) {\r\n      return <TriStateCheckbox {...attributes} state={props.state} />;\r\n    }\r\n\r\n    return <Checkbox {...attributes} checked={props.isSelected} />;\r\n  };\r\n\r\n  const renderExclusion = () => {\r\n    if (isTriStateCheckbox(props)) {\r\n      return (\r\n        <FacetValueExclude\r\n          onClick={() => props.onExclude?.()}\r\n          ariaLabel={excludedAriaLabel}\r\n        ></FacetValueExclude>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <li key={props.displayValue} class=\"relative flex items-center\">\r\n      {renderCheckbox()}\r\n      <label\r\n        ref={(ref) => (labelRef = ref!)}\r\n        htmlFor={id}\r\n        part=\"value-checkbox-label\"\r\n        class=\"group items-center\"\r\n        onMouseDown={(e) => createRipple(e, {color: 'neutral'})}\r\n        aria-hidden=\"true\"\r\n      >\r\n        {children}\r\n        {renderExclusion()}\r\n        <span part=\"value-count\" class=\"value-count\">\r\n          {props.i18n.t('between-parentheses', {\r\n            text: count,\r\n          })}\r\n        </span>\r\n      </label>\r\n    </li>\r\n  );\r\n};\r\n"],"mappings":"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"}