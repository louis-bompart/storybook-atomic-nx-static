{"version":3,"names":["QueryErrorContainer","_","children","h","class","getErrorTitleFromErrorType","i18n","organizationId","errorType","t","org","getErrorDescriptionFromErrorType","url","getAriaMessageFromErrorType","platformUrl","QueryErrorDescription","part","QueryErrorDetails","error","show","JSON","stringify","QueryErrorGuard","hasError","Fragment","QueryErrorIcon","getIconFromErrorType","NoConnection","Indexing","CannotAccess","SearchInactive","SomethingWrong","icon","QueryErrorLink","getErrorLink","link","href","QueryErrorShowMore","onShowMore","Button","style","onClick","text","QueryErrorTitle"],"sources":["src/components/common/query-error/container.tsx","src/components/common/query-error/utils.ts","src/components/common/query-error/description.tsx","src/components/common/query-error/details.tsx","src/components/common/query-error/guard.tsx","src/components/common/query-error/icon.tsx","src/components/common/query-error/link.tsx","src/components/common/query-error/show-more.tsx","src/components/common/query-error/title.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\r\n\r\nexport const QueryErrorContainer: FunctionalComponent = (_, children) => {\r\n  return <div class=\"text-center p-8\">{children}</div>;\r\n};\r\n","import {i18n} from 'i18next';\r\nimport {KnownErrorType} from './known-error-types';\r\n\r\nexport const getErrorTitleFromErrorType = (\r\n  i18n: i18n,\r\n  organizationId: string,\r\n  errorType?: string\r\n) => {\r\n  switch (errorType as KnownErrorType) {\r\n    case 'Disconnected':\r\n      return i18n.t('disconnected');\r\n\r\n    case 'NoEndpointsException':\r\n      return i18n.t('no-endpoints', {org: organizationId});\r\n    case 'InvalidTokenException':\r\n      return i18n.t('cannot-access', {org: organizationId});\r\n    case 'OrganizationIsPausedException':\r\n      return i18n.t('organization-is-paused', {org: organizationId});\r\n    default:\r\n      return i18n.t('something-went-wrong');\r\n  }\r\n};\r\n\r\nexport const getErrorDescriptionFromErrorType = (\r\n  i18n: i18n,\r\n  organizationId: string,\r\n  url: string,\r\n  errorType?: string\r\n) => {\r\n  switch (errorType as KnownErrorType) {\r\n    case 'Disconnected':\r\n      return i18n.t('check-your-connection', {url});\r\n    case 'NoEndpointsException':\r\n      return i18n.t('add-sources');\r\n    case 'InvalidTokenException':\r\n      return i18n.t('invalid-token');\r\n    case 'OrganizationIsPausedException':\r\n      return i18n.t('organization-will-resume', {\r\n        org: organizationId,\r\n      });\r\n    default:\r\n      return i18n.t('if-problem-persists');\r\n  }\r\n};\r\n\r\nexport const getAriaMessageFromErrorType = (\r\n  i18n: i18n,\r\n  organizationId: string,\r\n  platformUrl: string,\r\n  errorType?: string\r\n) => {\r\n  return `${getErrorTitleFromErrorType(i18n, organizationId, errorType)} ${getErrorDescriptionFromErrorType(i18n, organizationId, platformUrl, errorType)}`;\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport {getErrorDescriptionFromErrorType} from './utils';\r\n\r\ninterface QueryErrorDescriptionProps {\r\n  errorType?: string;\r\n  i18n: i18n;\r\n  url: string;\r\n  organizationId: string;\r\n}\r\n\r\nexport const QueryErrorDescription: FunctionalComponent<\r\n  QueryErrorDescriptionProps\r\n> = ({errorType, i18n, url, organizationId}) => {\r\n  return (\r\n    <p part=\"description\" class=\"text-lg text-neutral-dark mt-2.5\">\r\n      {getErrorDescriptionFromErrorType(i18n, organizationId, url, errorType)}\r\n    </p>\r\n  );\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\n\r\ninterface QueryErrorDetailsProps {\r\n  error: unknown;\r\n  show: boolean;\r\n}\r\nexport const QueryErrorDetails: FunctionalComponent<QueryErrorDetailsProps> = ({\r\n  error,\r\n  show,\r\n}) => {\r\n  if (!show) {\r\n    return;\r\n  }\r\n  return (\r\n    <pre\r\n      part=\"error-info\"\r\n      class=\"text-left border border-neutral bg-neutral-light p-3 rounded mt-8 whitespace-pre-wrap\"\r\n    >\r\n      <code>{JSON.stringify(error, null, 2)}</code>\r\n    </pre>\r\n  );\r\n};\r\n","import {Fragment, FunctionalComponent, h} from '@stencil/core';\r\n\r\ninterface QueryErrorGuardProps {\r\n  hasError: boolean;\r\n}\r\n\r\nexport const QueryErrorGuard: FunctionalComponent<QueryErrorGuardProps> = (\r\n  {hasError},\r\n  children\r\n) => {\r\n  if (!hasError) {\r\n    return;\r\n  }\r\n\r\n  return <Fragment>{children}</Fragment>;\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport CannotAccess from '../../../images/cannot-access.svg';\r\nimport Indexing from '../../../images/indexing.svg';\r\nimport NoConnection from '../../../images/no-connection.svg';\r\nimport SearchInactive from '../../../images/search-inactive.svg';\r\nimport SomethingWrong from '../../../images/something-wrong.svg';\r\nimport {KnownErrorType} from './known-error-types';\r\n\r\ninterface QueryErrorIconProps {\r\n  errorType?: string;\r\n}\r\n\r\nexport const QueryErrorIcon: FunctionalComponent<QueryErrorIconProps> = ({\r\n  errorType,\r\n}) => {\r\n  const getIconFromErrorType = () => {\r\n    switch (errorType as KnownErrorType) {\r\n      case 'Disconnected':\r\n        return NoConnection;\r\n\r\n      case 'NoEndpointsException':\r\n        return Indexing;\r\n\r\n      case 'InvalidTokenException':\r\n        return CannotAccess;\r\n      case 'OrganizationIsPausedException':\r\n        return SearchInactive;\r\n      default:\r\n        return SomethingWrong;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <atomic-icon\r\n      part=\"icon\"\r\n      icon={getIconFromErrorType()}\r\n      class=\"w-1/2 max-w-lg\"\r\n    ></atomic-icon>\r\n  );\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport {KnownErrorType} from './known-error-types';\r\n\r\ninterface QueryErrorLinkProps {\r\n  errorType?: string;\r\n  i18n: i18n;\r\n}\r\n\r\nexport const QueryErrorLink: FunctionalComponent<QueryErrorLinkProps> = ({\r\n  errorType,\r\n  i18n,\r\n}) => {\r\n  const getErrorLink = () => {\r\n    switch (errorType as KnownErrorType) {\r\n      case 'NoEndpointsException':\r\n        return 'https://docs.coveo.com/en/mcc80216';\r\n      case 'InvalidTokenException':\r\n        return 'https://docs.coveo.com/en/102';\r\n      case 'OrganizationIsPausedException':\r\n        return 'https://docs.coveo.com/l6af0467';\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const link = getErrorLink();\r\n\r\n  return link ? (\r\n    <a href={link} part=\"doc-link\" class=\"btn-primary p-3 mt-10 inline-block\">\r\n      {i18n.t('coveo-online-help')}\r\n    </a>\r\n  ) : null;\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport {Button} from '../button';\r\nimport {QueryErrorLink} from './link';\r\n\r\ninterface QueryErrorShowMoreProps {\r\n  onShowMore: () => void;\r\n  i18n: i18n;\r\n  link?: typeof QueryErrorLink;\r\n}\r\n\r\nexport const QueryErrorShowMore: FunctionalComponent<\r\n  QueryErrorShowMoreProps\r\n> = ({i18n, onShowMore, link}) => {\r\n  if (link) {\r\n    return link;\r\n  }\r\n  return (\r\n    <Button\r\n      part=\"more-info-btn\"\r\n      style=\"primary\"\r\n      class=\"p-3 mt-8\"\r\n      onClick={() => {\r\n        onShowMore();\r\n      }}\r\n      text={i18n.t('more-info')}\r\n    ></Button>\r\n  );\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport {getErrorTitleFromErrorType} from './utils';\r\n\r\ninterface QueryErrorTitleProps {\r\n  errorType?: string;\r\n  i18n: i18n;\r\n  organizationId: string;\r\n}\r\n\r\nexport const QueryErrorTitle: FunctionalComponent<QueryErrorTitleProps> = ({\r\n  errorType,\r\n  i18n,\r\n  organizationId,\r\n}) => {\r\n  return (\r\n    <p part=\"title\" class=\"text-2xl text-on-background mt-8\">\r\n      {getErrorTitleFromErrorType(i18n, organizationId, errorType)}\r\n    </p>\r\n  );\r\n};\r\n"],"mappings":"qFAEaA,EAA2C,CAACC,EAAGC,IACnDC,EAAA,OAAKC,MAAM,mBAAmBF,GCAhC,MAAMG,EAA6B,CACxCC,EACAC,EACAC,KAEA,OAAQA,GACN,IAAK,eACH,OAAOF,EAAKG,EAAE,gBAEhB,IAAK,uBACH,OAAOH,EAAKG,EAAE,eAAgB,CAACC,IAAKH,IACtC,IAAK,wBACH,OAAOD,EAAKG,EAAE,gBAAiB,CAACC,IAAKH,IACvC,IAAK,gCACH,OAAOD,EAAKG,EAAE,yBAA0B,CAACC,IAAKH,IAChD,QACE,OAAOD,EAAKG,EAAE,wB,EAIb,MAAME,EAAmC,CAC9CL,EACAC,EACAK,EACAJ,KAEA,OAAQA,GACN,IAAK,eACH,OAAOF,EAAKG,EAAE,wBAAyB,CAACG,QAC1C,IAAK,uBACH,OAAON,EAAKG,EAAE,eAChB,IAAK,wBACH,OAAOH,EAAKG,EAAE,iBAChB,IAAK,gCACH,OAAOH,EAAKG,EAAE,2BAA4B,CACxCC,IAAKH,IAET,QACE,OAAOD,EAAKG,EAAE,uB,QAIPI,EAA8B,CACzCP,EACAC,EACAO,EACAN,IAEO,GAAGH,EAA2BC,EAAMC,EAAgBC,MAAcG,EAAiCL,EAAMC,EAAgBO,EAAaN,K,MCxClIO,EAET,EAAEP,YAAWF,OAAMM,MAAKL,oBAExBJ,EAAA,KAAGa,KAAK,cAAcZ,MAAM,oCACzBO,EAAiCL,EAAMC,EAAgBK,EAAKJ,I,MCVtDS,EAAiE,EAC5EC,QACAC,WAEA,IAAKA,EAAM,CACT,M,CAEF,OACEhB,EAAA,OACEa,KAAK,aACLZ,MAAM,yFAEND,EAAA,YAAOiB,KAAKC,UAAUH,EAAO,KAAM,IAC/B,E,MCbGI,EAA6D,EACvEC,YACDrB,KAEA,IAAKqB,EAAU,CACb,M,CAGF,OAAOpB,EAACqB,EAAQ,KAAEtB,EAAoB,E,kgjFCF3BuB,EAA2D,EACtEjB,gBAEA,MAAMkB,EAAuB,KAC3B,OAAQlB,GACN,IAAK,eACH,OAAOmB,EAET,IAAK,uBACH,OAAOC,EAET,IAAK,wBACH,OAAOC,EACT,IAAK,gCACH,OAAOC,EACT,QACE,OAAOC,E,EAIb,OACE5B,EAAA,eACEa,KAAK,OACLgB,KAAMN,IACNtB,MAAM,kBACO,E,MC5BN6B,EAA2D,EACtEzB,YACAF,WAEA,MAAM4B,EAAe,KACnB,OAAQ1B,GACN,IAAK,uBACH,MAAO,qCACT,IAAK,wBACH,MAAO,gCACT,IAAK,gCACH,MAAO,kCACT,QACE,OAAO,K,EAIb,MAAM2B,EAAOD,IAEb,OAAOC,EACLhC,EAAA,KAAGiC,KAAMD,EAAMnB,KAAK,WAAWZ,MAAM,sCAClCE,EAAKG,EAAE,sBAER,IAAI,E,MCrBG4B,EAET,EAAE/B,OAAMgC,aAAYH,WACtB,GAAIA,EAAM,CACR,OAAOA,C,CAET,OACEhC,EAACoC,EAAM,CACLvB,KAAK,gBACLwB,MAAM,UACNpC,MAAM,WACNqC,QAAS,KACPH,GAAY,EAEdI,KAAMpC,EAAKG,EAAE,cACL,E,MChBDkC,EAA6D,EACxEnC,YACAF,OACAC,oBAGEJ,EAAA,KAAGa,KAAK,QAAQZ,MAAM,oCACnBC,EAA2BC,EAAMC,EAAgBC,W"}