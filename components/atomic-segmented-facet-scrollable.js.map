{"file":"atomic-segmented-facet-scrollable.js","mappings":"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","names":["AtomicSegmentedFacetScrollable","buildSearchStatus"],"sources":["src/components/search/facets/atomic-segmented-facet-scrollable/atomic-segmented-facet-scrollable.pcss?tag=atomic-segmented-facet-scrollable&encapsulation=shadow","src/components/search/facets/atomic-segmented-facet-scrollable/atomic-segmented-facet-scrollable.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\n\n.wrapper-segmented {\n  @mixin hide-scrollbar;\n}\n\n::slotted(atomic-segmented-facet:not(.atomic-hidden)) {\n  @apply mr-2;\n}\n","import {\n  buildSearchStatus,\n  SearchStatus,\n  SearchStatusState,\n} from '@coveo/headless';\nimport {Component, Element, h, Listen, State} from '@stencil/core';\nimport {Bindings} from '../../../..';\nimport ArrowLeftIcon from '../../../../images/arrow-left-rounded.svg';\nimport ArrowRightIcon from '../../../../images/arrow-right-rounded.svg';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {Button} from '../../../common/button';\nimport {Hidden} from '../../../common/hidden';\n\ntype ArrowDirection = 'right' | 'left';\n\n/**\n * The 'atomic-segmented-facet-scrollable' component wraps around one or several 'atomic-segmented-facet' to provide horizontal scrolling capabilities.\n *\n * @slot default - One or multiple atomic-segmented-facet components\n *\n * @part scrollable-container - The wrapper for the entire component including the horizontal-scroll container and the arrow buttons.\n * @part horizontal-scroll - The scrollable container for the segmented facets.\n * @part left-arrow-wrapper - The wrapper for the arrow button & fade on the left.\n * @part right-arrow-wrapper - The wrapper for the arrow button & fade on the right.\n * @part left-arrow-button - The arrow button used to scroll on the left.\n * @part right-arrow-button - The arrow button used to scroll on the right.\n * @part left-arrow-icon - The arrow icon on the left.\n * @part right-arrow-icon - The arrow icon on the right.\n * @part left-fade - The white to transparent gradient on the left.\n * @part right-fade - The white to transparent gradient on the right.\n */\n@Component({\n  tag: 'atomic-segmented-facet-scrollable',\n  styleUrl: 'atomic-segmented-facet-scrollable.pcss',\n  shadow: true,\n})\nexport class AtomicSegmentedFacetScrollable implements InitializableComponent {\n  @Element() private host!: HTMLElement;\n  private horizontalScrollRef?: HTMLElement;\n  private arrowRef?: HTMLElement;\n  private observer!: ResizeObserver;\n\n  @InitializeBindings()\n  public bindings!: Bindings;\n  public searchStatus!: SearchStatus;\n  @BindStateToController('searchStatus')\n  @State()\n  public searchStatusState!: SearchStatusState;\n  @State()\n  public error!: Error;\n  @State() private hideLeftArrow = true;\n  @State() private hideRightArrow = true;\n\n  public initialize() {\n    this.searchStatus = buildSearchStatus(this.bindings.engine);\n  }\n\n  public componentDidLoad() {\n    this.observer = new ResizeObserver(() => {\n      this.handleScroll();\n    });\n\n    Array.from(this.host.children).forEach((el) => this.observer.observe(el));\n    this.observer.observe(this.horizontalScrollRef!);\n  }\n\n  disconnectedCallback() {\n    this.observer.disconnect();\n  }\n\n  @Listen('wheel')\n  @Listen('touchmove')\n  @Listen('keydown')\n  public handleScroll() {\n    if (!this.horizontalScrollRef) {\n      return;\n    }\n    const container = this.horizontalScrollRef;\n    const isScrollable = container.clientWidth < container.scrollWidth;\n\n    const isLeftEdge = Math.floor(container.scrollLeft) <= 0;\n    const isRightEdge =\n      Math.ceil(container.scrollLeft) >=\n      container.scrollWidth - container.clientWidth;\n\n    this.hideLeftArrow = !isScrollable || isLeftEdge;\n    this.hideRightArrow = !isScrollable || isRightEdge;\n  }\n\n  private slideHorizontally(direction: ArrowDirection) {\n    const container = this.horizontalScrollRef!;\n    const arrowsWidth = this.arrowRef!.clientWidth * 2;\n\n    const pixelsToScroll = (container.clientWidth - arrowsWidth) * 0.7;\n\n    const isLeftEdge = Math.floor(container.scrollLeft - pixelsToScroll) <= 0;\n    const isRightEdge =\n      Math.ceil(container.scrollLeft + pixelsToScroll) >=\n      container.scrollWidth - container.clientWidth;\n\n    this.hideLeftArrow = false;\n    this.hideRightArrow = false;\n\n    if (direction === 'left') {\n      container.scrollLeft -= pixelsToScroll;\n      this.hideLeftArrow = isLeftEdge;\n      return;\n    }\n\n    container.scrollLeft += pixelsToScroll;\n    this.hideRightArrow = isRightEdge;\n  }\n\n  private renderArrow(direction: ArrowDirection) {\n    const hide =\n      (direction === 'left' && this.hideLeftArrow) ||\n      (direction === 'right' && this.hideRightArrow);\n    const hiddenClass = hide ? 'invisible opacity-0' : '';\n    const transitionClass = this.bindings.store.isAppLoaded()\n      ? 'transition-visi-opacity ease-in-out duration-300'\n      : '';\n\n    return (\n      <div\n        part={`${direction}-arrow-wrapper`}\n        class={`${hiddenClass} ${transitionClass}`}\n      >\n        <Button\n          part={`${direction}-arrow-button`}\n          style=\"square-neutral\"\n          class={`flex shrink-0 basis-8 justify-center items-center rounded absolute z-1 h-10 w-10 top-0 bottom-0 ${\n            direction === 'left' ? 'left-0' : 'right-0'\n          }`}\n          ariaHidden=\"true\"\n          tabIndex=\"-1\"\n          onClick={() => this.slideHorizontally(direction)}\n          ref={(el) => (this.arrowRef = el)}\n        >\n          <atomic-icon\n            part={`${direction}-arrow-icon`}\n            class=\"w-3.5\"\n            icon={direction === 'left' ? ArrowLeftIcon : ArrowRightIcon}\n          ></atomic-icon>\n        </Button>\n        <div\n          part={`${direction}-fade`}\n          class={`w-20 h-10 absolute top-0 z-0 pointer-events-none from-background-60 ${\n            direction === 'left'\n              ? 'left-0 bg-gradient-to-r'\n              : 'right-0 bg-gradient-to-l'\n          }`}\n        ></div>\n      </div>\n    );\n  }\n\n  public render() {\n    if (this.searchStatus.state.hasError) {\n      return <Hidden></Hidden>;\n    }\n\n    return (\n      <div part=\"scrollable-container\" class=\"flex relative\">\n        {this.renderArrow('left')}\n        <div\n          part=\"horizontal-scroll\"\n          class=\"wrapper-segmented flex flex-row overflow-x-scroll scroll-smooth\"\n          ref={(el) => (this.horizontalScrollRef = el)}\n        >\n          <slot></slot>\n        </div>\n        {this.renderArrow('right')}\n      </div>\n    );\n  }\n}\n"],"version":3}