import{N as p,g as d,O as f}from"./atomic-breadbox.new.stories-CUAu_TQj.js";import{n as h,a as g}from"./p-7e7b1a62-C6-3oFSh.js";import{S as m}from"./p-e12016d2-bJLTunAq.js";import{m as F,p as u}from"./p-107c3d7f-BhxinPh-.js";import{s as b,t as v,a as y,r as A}from"./p-d1aad506-D1ww1j4r.js";import"./p-f5723aee-kxsZMmLK.js";import"./index-Bqoxw6Vv.js";import"./_commonjsHelpers-BosuxZz1.js";import"./iframe-DuucGJVn.js";import"../sb-preview/runtime.js";import"./p-1580513b-3LX64KEr.js";import"./p-e9c4f463-BPmi-3c5.js";var c=function(i,a,s,e){var o=arguments.length,t=o<3?a:e===null?e=Object.getOwnPropertyDescriptor(a,s):e,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(i,a,s,e);else for(var n=i.length-1;n>=0;n--)(r=i[n])&&(t=(o<3?r(t):o>3?r(a,s,t):r(a,s))||t);return o>3&&t&&Object.defineProperty(a,s,t),t};const l=class{constructor(i){p(this,i),this.collapseFacetsAfter=4,this.sortFacets=()=>{const a=b(this.host),s=this.sortFacetsUsingManager(a,this.facetManager),{visibleFacets:e,invisibleFacets:o}=v(s,this.bindings.store.getAllFacets()),t=y(this.host);A(e,this.collapseFacetsAfter),t==null||t.updateCollapseFacetsDependingOnFacetsVisibility(this.collapseFacetsAfter,e.length),this.host.append(...e,...o,...t?[t]:[])},this.facetManagerState=void 0,this.error=void 0,this.collapseFacetsAfter=4}initialize(){this.validateProps(),this.facetManager=m(this.bindings.engine),this.bindings.i18n.on("languageChanged",this.sortFacets)}validateProps(){new h({collapseFacetAfter:new g({min:-1,required:!0})}).validate({collapseFacetAfter:this.collapseFacetsAfter})}sortFacetsUsingManager(i,a){const s=i.map(e=>({facetId:e.facetId,payload:e}));return a.sort(s).map(e=>e.payload)}disconnectedCallback(){this.bindings.i18n.off("languageChanged",this.sortFacets)}render(){return d("slot",{key:"819e77edd04efd80dcd32fc46525388d9ca71045"})}get host(){return f(this)}};c([F()],l.prototype,"bindings",void 0);c([u("facetManager",{onUpdateCallbackMethod:"sortFacets"})],l.prototype,"facetManagerState",void 0);export{l as atomic_facet_manager};
