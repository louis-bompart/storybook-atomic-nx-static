import{r as t,h as e,g as r}from"./p-00525453.js";import{r as s,o as i}from"./p-e12016d2.js";import{g as l}from"./p-55d2bcf3.js";import{I as n}from"./p-6fadd170.js";import{t as u}from"./p-9935af75.js";import{R as a}from"./p-5a302484.js";import"./p-1580513b.js";import"./p-e9c4f463.js";import"./p-231defbf.js";const o=":host>ul{display:flex;list-style:none;margin:0;padding:0}:host>ul li{display:inline-block}.separator::before{display:inline;content:',\\00a0'}";const h=o;var f=undefined&&undefined.__decorate||function(t,e,r,s){var i=arguments.length,l=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")l=Reflect.decorate(t,e,r,s);else for(var u=t.length-1;u>=0;u--)if(n=t[u])l=(i<3?n(l):i>3?n(e,r,l):n(e,r))||l;return i>3&&l&&Object.defineProperty(e,r,l),l};const p=class{constructor(e){t(this,e);this.maxValuesToDisplay=3;this.delimiter=null;this.sortedValues=null;this.error=undefined;this.field=undefined;this.maxValuesToDisplay=3;this.delimiter=null}initialize(){this.breadcrumbManager=s(this.bindings.engine)}get resultValues(){const t=i.getResultProperty(this.result,this.field);if(t===null){return null}if(Array.isArray(t)){return t.map((t=>`${t}`.trim()))}if(typeof t!=="string"||t.trim()===""){this.error=new Error(`Could not parse "${t}" from field "${this.field}" as a string array.`);return null}return this.delimiter?t.split(this.delimiter).map((t=>t.trim())):[t]}get facetSelectedValues(){return this.breadcrumbManager.state.facetBreadcrumbs.filter((t=>t.field===this.field)).reduce(((t,e)=>[...t,...e.values.map((({value:t})=>t.value))]),[])}updateSortedValues(){const t=this.resultValues;if(t===null){this.sortedValues=null;return}const e=new Set(t);const r=this.facetSelectedValues.filter((t=>e.has(t)));this.sortedValues=Array.from(t.reduce(((t,e)=>t.add(e)),new Set(r)))}getShouldDisplayLabel(t){return this.maxValuesToDisplay>0&&t.length>this.maxValuesToDisplay}getNumberOfValuesToDisplay(t){if(t.length<=this.maxValuesToDisplay){return t.length}if(this.maxValuesToDisplay<2){return this.maxValuesToDisplay}return Math.min(t.length-2,this.maxValuesToDisplay)}renderValue(t){const r=l(this.field,t,this.bindings.i18n);const s=u(t);return e("li",{key:t,part:"result-multi-value-text-value"},e("slot",{name:`result-multi-value-text-value-${s}`},r))}renderSeparator(t,r){return e("li",{"aria-hidden":"true",part:"result-multi-value-text-separator",key:`${t}~${r}`,class:"separator"})}renderMoreLabel(t){return e("li",{key:"more-field-values",part:"result-multi-value-text-value-more"},this.bindings.i18n.t("n-more",{value:t}))}renderListItems(t){const e=this.getNumberOfValuesToDisplay(t);const r=[];for(let s=0;s<e;s++){if(s>0){r.push(this.renderSeparator(t[s-1],t[s]))}r.push(this.renderValue(t[s]))}if(this.getShouldDisplayLabel(t)){r.push(this.renderSeparator(t[e-1],"more-field-values"));r.push(this.renderMoreLabel(t.length-e))}return r}componentWillRender(){this.updateSortedValues()}render(){if(this.sortedValues===null){this.host.remove();return}return e("ul",{part:"result-multi-value-text-list"},...this.renderListItems(this.sortedValues))}get host(){return r(this)}};f([n()],p.prototype,"bindings",void 0);f([a()],p.prototype,"result",void 0);p.style=h;export{p as atomic_result_multi_value_text};
//# sourceMappingURL=p-f16032a2.entry.js.map