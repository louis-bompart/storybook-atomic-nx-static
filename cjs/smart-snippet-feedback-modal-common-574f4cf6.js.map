{"file":"smart-snippet-feedback-modal-common-574f4cf6.js","mappings":"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","names":["once","updateBreakpoints","h","Button"],"sources":["src/components/common/smart-snippets/atomic-smart-snippet-feedback-modal/smart-snippet-feedback-modal-common.tsx"],"sourcesContent":["import {SmartSnippet, SmartSnippetFeedback} from '@coveo/headless';\r\nimport {EventEmitter, h} from '@stencil/core';\r\nimport {updateBreakpoints} from '../../../../utils/replace-breakpoint';\r\nimport {once} from '../../../../utils/utils';\r\nimport {Button} from '../../button';\r\nimport {AnyBindings} from '../../interface/bindings';\r\n\r\ninterface SmartSnippetFeedbackModalProps {\r\n  formId: string;\r\n  getHost: () => HTMLElement;\r\n  getBindings: () => AnyBindings;\r\n  getCurrentAnswer: () => SmartSnippetFeedback | 'other' | undefined;\r\n  getSmartSnippet: () => SmartSnippet;\r\n  getDetailsInputRef: () => HTMLTextAreaElement | undefined;\r\n  getFeedbackSent: () => EventEmitter;\r\n  getSource: () => HTMLElement | undefined;\r\n  getIsOpen: () => boolean;\r\n  setIsOpen: (isOpen: boolean) => void;\r\n  setCurrentAnswer: (answer: SmartSnippetFeedback | 'other') => void;\r\n  setDetailsInputRef: (ref?: HTMLTextAreaElement) => void;\r\n}\r\n\r\nexport class SmartSnippetFeedbackModalCommon {\r\n  constructor(private props: SmartSnippetFeedbackModalProps) {}\r\n\r\n  public sendFeedback() {\r\n    if (this.props.getCurrentAnswer() === 'other') {\r\n      this.props\r\n        .getSmartSnippet()\r\n        .sendDetailedFeedback(this.props.getDetailsInputRef()!.value);\r\n    } else {\r\n      this.props\r\n        .getSmartSnippet()\r\n        .sendFeedback(this.props.getCurrentAnswer() as SmartSnippetFeedback);\r\n    }\r\n    this.props.getFeedbackSent().emit();\r\n    this.props.setIsOpen(false);\r\n  }\r\n\r\n  public close() {\r\n    this.props.setIsOpen(false);\r\n    this.props.getSmartSnippet().closeFeedbackModal();\r\n  }\r\n\r\n  private renderHeader() {\r\n    return (\r\n      <h1 slot=\"header\">\r\n        {this.props.getBindings().i18n.t('smart-snippet-feedback-explain-why')}\r\n      </h1>\r\n    );\r\n  }\r\n\r\n  private renderOptions() {\r\n    const options: {\r\n      id: string;\r\n      localeKey: string;\r\n      correspondingAnswer: SmartSnippetFeedback | 'other';\r\n    }[] = [\r\n      {\r\n        id: 'does-not-answer',\r\n        localeKey: 'smart-snippet-feedback-reason-does-not-answer',\r\n        correspondingAnswer: 'does_not_answer',\r\n      },\r\n      {\r\n        id: 'partially-answers',\r\n        localeKey: 'smart-snippet-feedback-reason-partially-answers',\r\n        correspondingAnswer: 'partially_answers',\r\n      },\r\n      {\r\n        id: 'was-not-a-question',\r\n        localeKey: 'smart-snippet-feedback-reason-was-not-a-question',\r\n        correspondingAnswer: 'was_not_a_question',\r\n      },\r\n      {\r\n        id: 'other',\r\n        localeKey: 'smart-snippet-feedback-reason-other',\r\n        correspondingAnswer: 'other',\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <fieldset>\r\n        <legend\r\n          part=\"reason-title\"\r\n          class=\"font-bold text-on-background text-lg\"\r\n        >\r\n          {this.props\r\n            .getBindings()\r\n            .i18n.t('smart-snippet-feedback-select-reason')}\r\n        </legend>\r\n        {options.map(({id, localeKey, correspondingAnswer}) => (\r\n          <div class=\"flex items-center\" key={id} part=\"reason\">\r\n            <input\r\n              part=\"reason-radio\"\r\n              type=\"radio\"\r\n              name=\"answer\"\r\n              id={id}\r\n              checked={this.props.getCurrentAnswer() === correspondingAnswer}\r\n              onChange={(e) =>\r\n                (e.currentTarget as HTMLInputElement | null)?.checked &&\r\n                this.props.setCurrentAnswer(correspondingAnswer)\r\n              }\r\n              class=\"mr-2 w-4 h-4\"\r\n              required\r\n            />\r\n            <label part=\"reason-label\" htmlFor={id}>\r\n              {this.props.getBindings().i18n.t(localeKey)}\r\n            </label>\r\n          </div>\r\n        ))}\r\n      </fieldset>\r\n    );\r\n  }\r\n\r\n  private renderDetails() {\r\n    if (this.props.getCurrentAnswer() !== 'other') {\r\n      return;\r\n    }\r\n\r\n    return (\r\n      <fieldset>\r\n        <legend\r\n          part=\"details-title\"\r\n          class=\"font-bold text-on-background text-lg\"\r\n        >\r\n          {this.props.getBindings().i18n.t('details')}\r\n        </legend>\r\n        <textarea\r\n          part=\"details-input\"\r\n          name=\"answer-details\"\r\n          ref={(detailsInput) => this.props.setDetailsInputRef(detailsInput)}\r\n          class=\"mt-2 p-2 w-full text-base leading-5 border border-neutral resize-none rounded\"\r\n          rows={4}\r\n          required\r\n        ></textarea>\r\n      </fieldset>\r\n    );\r\n  }\r\n\r\n  private renderBody() {\r\n    return (\r\n      <form\r\n        part=\"form\"\r\n        id={this.props.formId}\r\n        slot=\"body\"\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          this.sendFeedback();\r\n        }}\r\n        class=\"flex flex-col gap-8\"\r\n      >\r\n        {this.renderOptions()}\r\n        {this.renderDetails()}\r\n      </form>\r\n    );\r\n  }\r\n\r\n  private renderFooter() {\r\n    return (\r\n      <div part=\"buttons\" slot=\"footer\" class=\"flex justify-end gap-2\">\r\n        <Button\r\n          part=\"cancel-button\"\r\n          style=\"outline-neutral\"\r\n          class=\"text-primary\"\r\n          onClick={() => this.close()}\r\n        >\r\n          {this.props.getBindings().i18n.t('cancel')}\r\n        </Button>\r\n        <Button\r\n          part=\"submit-button\"\r\n          style=\"primary\"\r\n          type=\"submit\"\r\n          form={this.props.formId}\r\n        >\r\n          {this.props.getBindings().i18n.t('feedback-send')}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private updateBreakpoints = once(() =>\r\n    updateBreakpoints(this.props.getHost())\r\n  );\r\n\r\n  public render() {\r\n    this.updateBreakpoints();\r\n\r\n    return (\r\n      <atomic-modal\r\n        fullscreen={false}\r\n        source={this.props.getSource()}\r\n        container={this.props.getHost()}\r\n        isOpen={this.props.getIsOpen()}\r\n        close={() => this.close()}\r\n        exportparts=\"backdrop,container,header,header-wrapper,header-ruler,body,body-wrapper,footer,footer-wrapper,footer-wrapper\"\r\n      >\r\n        {this.renderHeader()}\r\n        {this.renderBody()}\r\n        {this.renderFooter()}\r\n      </atomic-modal>\r\n    );\r\n  }\r\n}\r\n"],"version":3}