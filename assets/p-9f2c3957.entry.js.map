{"version":3,"names":["atomicInsightFacetCss","AtomicInsightFacetStyle0","AtomicInsightFacet","this","withSearch","dependsOn","label","numberOfValues","sortCriteria","resultsMustMatch","displayValuesAs","isCollapsed","headingLevel","filterFacetCount","injectionDepth","enableExclusion","initialize","options","facetId","field","facetSearch","facet","buildInsightFacet","bindings","engine","state","searchStatus","buildInsightSearchStatus","initAriaLive","initConditionManager","initPopover","registerFacet","focusTargets","showLessFocus","FocusTargetController","showMoreFocus","headerFocus","showLess","showMore","header","disconnectedCallback","_a","facetConditionsManager","stopWatching","render","h","FacetGuard","key","enabled","facetState","hasError","searchStatusState","firstSearchExecuted","hasResults","values","length","FacetContainer","FacetHeader","i18n","onClearFilters","focusAfterSearch","deselectAll","numberOfActiveValues","activeValues","onToggleCollapse","headerRef","el","setTarget","FacetSearchInputGuard","canShowMoreValues","numberOfDisplayedValues","FacetSearchInput","onChange","value","clear","updateCaptions","getFieldCaptions","updateText","search","onClear","query","shouldDisplaySearchResults","renderSearchResults","renderMatches","renderValues","renderShowMoreLess","FacetPlaceholder","renderValuesContainer","children","classes","FacetValuesGroup","class","part","map","FacetSearchValue","facetValueProps","facetCount","count","onExclude","exclude","onSelect","select","facetValue","rawValue","i","shouldFocusOnShowLessAfterInteraction","shouldFocusOnShowMoreAfterInteraction","FacetValue","numberOfResults","toggleExclude","toggleSelect","setRef","btn","_b","FacetShowMoreLess","onShowMore","showMoreValues","onShowLess","showLessValues","canShowLessValues","FacetSearchMatches","numberOfMatches","hasMoreMatches","moreValuesAvailable","filter","facetSearchQuery","announceFacetSearchResultsWithAriaLive","msg","facetSearchAriaMessage","buildInsightFacetConditionsManager","conditions","parseDependsOn","initializePopover","host","facetInfo","hasValues","isHidden","t","element","store","__decorate","InitializeBindings","BindStateToController","AriaLiveRegion"],"sources":["src/components/insight/atomic-insight-facet/atomic-insight-facet.pcss?tag=atomic-insight-facet&encapsulation=shadow","src/components/insight/atomic-insight-facet/atomic-insight-facet.tsx"],"sourcesContent":["@import '../../common/facets/facet-common.pcss';\r\n@import '../../common/facets/facet-search/facet-search.pcss';\r\n@import '../../common/facets/facet-value-checkbox/facet-value-checkbox.pcss';\r\n@import '../../common/facets/facet-value-exclude/facet-value-exclude.pcss';\r\n@import '../../common/facets/facet-value-box/facet-value-box.pcss';\r\n","import {FacetResultsMustMatch} from '@coveo/headless';\r\nimport {Component, h, State, Prop, Element, VNode} from '@stencil/core';\r\nimport {\r\n  buildInsightFacet,\r\n  buildInsightFacetConditionsManager,\r\n  buildInsightSearchStatus,\r\n  InsightCategoryFacetValueRequest,\r\n  InsightFacet,\r\n  InsightFacetConditionsManager,\r\n  InsightFacetOptions,\r\n  InsightFacetSortCriterion,\r\n  InsightFacetState,\r\n  InsightFacetValueRequest,\r\n  InsightSearchStatus,\r\n  InsightSearchStatusState,\r\n} from '..';\r\nimport {\r\n  AriaLiveRegion,\r\n  FocusTargetController,\r\n} from '../../../utils/accessibility-utils';\r\nimport {getFieldCaptions} from '../../../utils/field-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {parseDependsOn} from '../../common/facets/depends-on';\r\nimport {FacetInfo} from '../../common/facets/facet-common-store';\r\nimport {FacetContainer} from '../../common/facets/facet-container/facet-container';\r\nimport {FacetGuard} from '../../common/facets/facet-guard';\r\nimport {FacetHeader} from '../../common/facets/facet-header/facet-header';\r\nimport {FacetPlaceholder} from '../../common/facets/facet-placeholder/facet-placeholder';\r\nimport {announceFacetSearchResultsWithAriaLive} from '../../common/facets/facet-search/facet-search-aria-live';\r\nimport {FacetSearchInput} from '../../common/facets/facet-search/facet-search-input';\r\nimport {FacetSearchInputGuard} from '../../common/facets/facet-search/facet-search-input-guard';\r\nimport {FacetSearchMatches} from '../../common/facets/facet-search/facet-search-matches';\r\nimport {shouldDisplaySearchResults} from '../../common/facets/facet-search/facet-search-utils';\r\nimport {FacetSearchValue} from '../../common/facets/facet-search/facet-search-value';\r\nimport {FacetShowMoreLess} from '../../common/facets/facet-show-more-less/facet-show-more-less';\r\nimport {\r\n  FacetValueProps,\r\n  FacetValue,\r\n} from '../../common/facets/facet-value/facet-value';\r\nimport {FacetValuesGroup} from '../../common/facets/facet-values-group/facet-values-group';\r\nimport {initializePopover} from '../../search/facets/atomic-popover/popover-type';\r\nimport {InsightBindings} from '../atomic-insight-interface/atomic-insight-interface';\r\n\r\n/**\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-insight-facet',\r\n  styleUrl: 'atomic-insight-facet.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicInsightFacet\r\n  implements InitializableComponent<InsightBindings>\r\n{\r\n  @InitializeBindings() public bindings!: InsightBindings;\r\n  public facet!: InsightFacet;\r\n  public searchStatus!: InsightSearchStatus;\r\n  public withSearch = false;\r\n  public dependsOn = {};\r\n  @Element() private host!: HTMLElement;\r\n\r\n  @BindStateToController('facet')\r\n  @State()\r\n  public facetState!: InsightFacetState;\r\n  @BindStateToController('searchStatus')\r\n  @State()\r\n  public searchStatusState!: InsightSearchStatusState;\r\n  @State() public error!: Error;\r\n\r\n  /**\r\n   * Specifies a unique identifier for the facet.\r\n   */\r\n  @Prop({mutable: true, reflect: true}) public facetId?: string;\r\n  /**\r\n   * The non-localized label for the facet.\r\n   */\r\n  @Prop({reflect: true}) public label = 'no-label';\r\n  /**\r\n   * The field whose values you want to display in the facet.\r\n   */\r\n  @Prop({reflect: true}) public field!: string;\r\n  /**\r\n   * The number of values to request for this facet.\r\n   * Also determines the number of additional values to request each time more values are shown.\r\n   */\r\n  @Prop({reflect: true}) public numberOfValues = 8;\r\n  /**\r\n   * The sort criterion to apply to the returned facet values.\r\n   * Possible values are 'score', 'alphanumeric', 'occurrences', and 'automatic'.\r\n   */\r\n  @Prop({reflect: true}) public sortCriteria: InsightFacetSortCriterion =\r\n    'automatic';\r\n  /**\r\n   * Specifies how a result must match the selected facet values.\r\n   * Allowed values:\r\n   * - `atLeastOneValue`: A result will match if at least one of the corresponding facet values is selected.\r\n   * - `allValues`: A result will match if all corresponding facet values are selected.\r\n   */\r\n  @Prop({reflect: true}) public resultsMustMatch: FacetResultsMustMatch =\r\n    'atLeastOneValue';\r\n  /**\r\n   * Whether to display the facet values as checkboxes (multiple selection), links (single selection) or boxes (multiple selection).\r\n   * Possible values are 'checkbox', 'link', and 'box'.\r\n   */\r\n  @Prop({reflect: true}) public displayValuesAs: 'checkbox' | 'link' | 'box' =\r\n    'checkbox';\r\n  /**\r\n   * Specifies if the facet is collapsed.\r\n   */\r\n  @Prop({reflect: true, mutable: true}) public isCollapsed = false;\r\n  /**\r\n   * The [heading level](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) to use for the heading over the facet, from 1 to 6.\r\n   */\r\n  @Prop({reflect: true}) public headingLevel = 0;\r\n  /**\r\n   * Whether to exclude the parents of folded results when estimating the result count for each facet value.\r\n   */\r\n  @Prop({reflect: true}) public filterFacetCount = true;\r\n  /**\r\n   * The maximum number of results to scan in the index to ensure that the facet lists all potential facet values.\r\n   * Note: A high injectionDepth may negatively impact the facet request performance.\r\n   * Minimum: `0`\r\n   * Default: `1000`\r\n   */\r\n  @Prop() public injectionDepth = 1000;\r\n  /**\r\n   * Whether to allow excluding values from the facet.\r\n   */\r\n  @Prop({reflect: true}) public enableExclusion = false;\r\n\r\n  private showLessFocus?: FocusTargetController;\r\n  private showMoreFocus?: FocusTargetController;\r\n  private headerFocus?: FocusTargetController;\r\n  private facetConditionsManager?: InsightFacetConditionsManager;\r\n\r\n  @AriaLiveRegion('facet-search')\r\n  protected facetSearchAriaMessage!: string;\r\n\r\n  public initialize() {\r\n    const options: InsightFacetOptions = {\r\n      facetId: this.facetId,\r\n      field: this.field,\r\n      numberOfValues: this.numberOfValues,\r\n      sortCriteria: this.sortCriteria,\r\n      facetSearch: {numberOfValues: this.numberOfValues},\r\n      filterFacetCount: this.filterFacetCount,\r\n      injectionDepth: this.injectionDepth,\r\n    };\r\n\r\n    this.facet = buildInsightFacet(this.bindings.engine, {options});\r\n    this.facetId = this.facet.state.facetId;\r\n    this.searchStatus = buildInsightSearchStatus(this.bindings.engine);\r\n    this.initAriaLive();\r\n    this.initConditionManager();\r\n    this.initPopover();\r\n    this.registerFacet();\r\n  }\r\n\r\n  private get focusTargets(): {\r\n    showLess: FocusTargetController;\r\n    showMore: FocusTargetController;\r\n    header: FocusTargetController;\r\n  } {\r\n    if (!this.showLessFocus) {\r\n      this.showLessFocus = new FocusTargetController(this);\r\n    }\r\n    if (!this.showMoreFocus) {\r\n      this.showMoreFocus = new FocusTargetController(this);\r\n    }\r\n    if (!this.headerFocus) {\r\n      this.headerFocus = new FocusTargetController(this);\r\n    }\r\n    return {\r\n      showLess: this.showLessFocus,\r\n      showMore: this.showMoreFocus,\r\n      header: this.headerFocus,\r\n    };\r\n  }\r\n\r\n  public disconnectedCallback() {\r\n    this.facetConditionsManager?.stopWatching();\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <FacetGuard\r\n        enabled={this.facetState.enabled}\r\n        hasError={this.searchStatusState.hasError}\r\n        firstSearchExecuted={this.searchStatusState.firstSearchExecuted}\r\n        hasResults={this.facetState.values.length > 0}\r\n      >\r\n        {this.searchStatusState.firstSearchExecuted ? (\r\n          <FacetContainer>\r\n            <FacetHeader\r\n              i18n={this.bindings.i18n}\r\n              label={this.label}\r\n              onClearFilters={() => {\r\n                this.focusTargets.header.focusAfterSearch();\r\n                this.facet.deselectAll();\r\n              }}\r\n              numberOfActiveValues={this.activeValues.length}\r\n              isCollapsed={this.isCollapsed}\r\n              headingLevel={this.headingLevel}\r\n              onToggleCollapse={() => (this.isCollapsed = !this.isCollapsed)}\r\n              headerRef={(el) => this.focusTargets.header.setTarget(el)}\r\n            ></FacetHeader>\r\n            <FacetSearchInputGuard\r\n              canShowMoreValues={this.facetState.canShowMoreValues}\r\n              numberOfDisplayedValues={this.facetState.values.length}\r\n              withSearch={this.withSearch}\r\n            >\r\n              <FacetSearchInput\r\n                i18n={this.bindings.i18n}\r\n                label={this.label}\r\n                onChange={(value) => {\r\n                  if (value === '') {\r\n                    this.facet.facetSearch.clear();\r\n                    return;\r\n                  }\r\n                  this.facet.facetSearch.updateCaptions(\r\n                    getFieldCaptions(this.field, this.bindings.i18n)\r\n                  );\r\n                  this.facet.facetSearch.updateText(value);\r\n                  this.facet.facetSearch.search();\r\n                }}\r\n                onClear={() => this.facet.facetSearch.clear()}\r\n                query={this.facetState.facetSearch.query}\r\n              />\r\n            </FacetSearchInputGuard>\r\n            {shouldDisplaySearchResults(this.facetState.facetSearch)\r\n              ? [this.renderSearchResults(), this.renderMatches()]\r\n              : [this.renderValues(), this.renderShowMoreLess()]}\r\n          </FacetContainer>\r\n        ) : (\r\n          <FacetPlaceholder\r\n            numberOfValues={this.numberOfValues}\r\n            isCollapsed={this.isCollapsed}\r\n          />\r\n        )}\r\n      </FacetGuard>\r\n    );\r\n  }\r\n\r\n  private renderValuesContainer(children: VNode[], query?: string) {\r\n    const classes = `mt-3 ${\r\n      this.displayValuesAs === 'box' ? 'box-container' : ''\r\n    }`;\r\n    return (\r\n      <FacetValuesGroup\r\n        i18n={this.bindings.i18n}\r\n        label={this.label}\r\n        query={query}\r\n      >\r\n        <ul class={classes} part=\"values\">\r\n          {children}\r\n        </ul>\r\n      </FacetValuesGroup>\r\n    );\r\n  }\r\n\r\n  private renderSearchResults() {\r\n    return this.renderValuesContainer(\r\n      this.facet.state.facetSearch.values.map((value) => (\r\n        <FacetSearchValue\r\n          {...this.facetValueProps}\r\n          facetCount={value.count}\r\n          onExclude={() => this.facet.facetSearch.exclude(value)}\r\n          onSelect={() => this.facet.facetSearch.select(value)}\r\n          facetValue={value.rawValue}\r\n        />\r\n      ))\r\n    );\r\n  }\r\n\r\n  private renderValues() {\r\n    return this.renderValuesContainer(\r\n      this.facet.state.values.map((value, i) => {\r\n        const shouldFocusOnShowLessAfterInteraction = i === 0;\r\n        const shouldFocusOnShowMoreAfterInteraction =\r\n          i ===\r\n          (this.sortCriteria === 'automatic'\r\n            ? 0\r\n            : this.facetState.values.length - 1);\r\n\r\n        return (\r\n          <FacetValue\r\n            {...this.facetValueProps}\r\n            facetCount={value.numberOfResults}\r\n            onExclude={() => this.facet.toggleExclude(value)}\r\n            onSelect={() => this.facet.toggleSelect(value)}\r\n            facetValue={value.value}\r\n            facetState={value.state}\r\n            setRef={(btn) => {\r\n              if (shouldFocusOnShowLessAfterInteraction) {\r\n                this.showLessFocus?.setTarget(btn);\r\n              }\r\n              if (shouldFocusOnShowMoreAfterInteraction) {\r\n                this.showMoreFocus?.setTarget(btn);\r\n              }\r\n            }}\r\n          />\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  private renderShowMoreLess() {\r\n    return (\r\n      <FacetShowMoreLess\r\n        label={this.label}\r\n        i18n={this.bindings.i18n}\r\n        onShowMore={() => {\r\n          this.focusTargets.showMore.focusAfterSearch();\r\n          this.facet.showMoreValues();\r\n        }}\r\n        onShowLess={() => {\r\n          this.focusTargets.showLess.focusAfterSearch();\r\n          this.facet.showLessValues();\r\n        }}\r\n        canShowMoreValues={this.facet.state.canShowMoreValues}\r\n        canShowLessValues={this.facet.state.canShowLessValues}\r\n      ></FacetShowMoreLess>\r\n    );\r\n  }\r\n\r\n  private renderMatches() {\r\n    return (\r\n      <FacetSearchMatches\r\n        i18n={this.bindings.i18n}\r\n        query={this.facet.state.facetSearch.query}\r\n        numberOfMatches={this.facet.state.facetSearch.values.length}\r\n        hasMoreMatches={this.facet.state.facetSearch.moreValuesAvailable}\r\n      ></FacetSearchMatches>\r\n    );\r\n  }\r\n\r\n  private get activeValues() {\r\n    return this.facet.state.values.filter(({state}) => state !== 'idle');\r\n  }\r\n\r\n  private get facetValueProps(): Pick<\r\n    FacetValueProps,\r\n    | 'displayValuesAs'\r\n    | 'facetSearchQuery'\r\n    | 'enableExclusion'\r\n    | 'field'\r\n    | 'i18n'\r\n  > {\r\n    return {\r\n      facetSearchQuery: this.facetState.facetSearch.query,\r\n      displayValuesAs: this.displayValuesAs,\r\n      enableExclusion: this.enableExclusion,\r\n      field: this.field,\r\n      i18n: this.bindings.i18n,\r\n    };\r\n  }\r\n\r\n  private initAriaLive() {\r\n    announceFacetSearchResultsWithAriaLive(\r\n      this.facet,\r\n      this.label,\r\n      (msg) => (this.facetSearchAriaMessage = msg),\r\n      this.bindings.i18n\r\n    );\r\n  }\r\n\r\n  private initConditionManager() {\r\n    this.facetConditionsManager = buildInsightFacetConditionsManager(\r\n      this.bindings.engine,\r\n      {\r\n        facetId: this.facetId!,\r\n        conditions: parseDependsOn<\r\n          InsightFacetValueRequest | InsightCategoryFacetValueRequest\r\n        >(this.dependsOn),\r\n      }\r\n    );\r\n  }\r\n\r\n  private initPopover() {\r\n    initializePopover(this.host, {\r\n      ...this.facetInfo,\r\n      hasValues: () => !!this.facet.state.values.length,\r\n      numberOfActiveValues: () => this.activeValues.length,\r\n    });\r\n  }\r\n\r\n  private get isHidden() {\r\n    return !this.facet.state.enabled || !this.facet.state.values.length;\r\n  }\r\n\r\n  private get facetInfo(): FacetInfo {\r\n    return {\r\n      label: () => this.bindings.i18n.t(this.label),\r\n      facetId: this.facetId!,\r\n      element: this.host,\r\n      isHidden: () => this.isHidden,\r\n    };\r\n  }\r\n\r\n  private registerFacet() {\r\n    this.bindings.store.registerFacet('facets', this.facetInfo);\r\n  }\r\n}\r\n"],"mappings":"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"}