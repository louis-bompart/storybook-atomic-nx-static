import{N as h,g as a,O as u}from"./atomic-breadbox.new.stories-D03zBEda.js";import{n as c,c as g,e as f}from"./p-00579e36-DLYyRdbt.js";import{n as y}from"./p-100dc7b2-DwffWY4C.js";import{m as b,p as m}from"./p-6fadd170-Cg3VAl32.js";import{c as R}from"./p-9935af75-BsJQUBM3.js";import{t as S}from"./p-7e69c7c8-kqOGAQfv.js";import{l as L,a as T}from"./p-036c0e91-D2c8m7_E.js";import{n as P}from"./p-af30f3b4-Dppmjtuz.js";import{e as x}from"./p-c944a92c-DXWZoQ7j.js";import{s as w}from"./p-5ff0fe21-CTur0xQ1.js";import{r as E}from"./p-1a4bcc0e-MyoFk3g-.js";import"./p-e12016d2-D4PWgvR2.js";import"./p-d7ad2547-DUwI-3Sg.js";import"./iframe-DTo5wNcQ.js";import"../sb-preview/runtime.js";import"./p-1580513b-De1d4bsn.js";import"./p-e9c4f463-BPmi-3c5.js";import"./p-7b70d542-BqLMHXVU.js";import"./p-a2fc549d-BcKcO86e.js";const I=".list-wrapper.placeholder .result-component{display:none}.list-wrapper.placeholder table.list-root{display:none}.list-wrapper:not(.placeholder) atomic-result-placeholder{display:none}.list-wrapper:not(.placeholder) atomic-result-table-placeholder{display:none}.list-root.loading{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}@keyframes pulse{0%,100%{opacity:0.6}50%{opacity:0.2}}[part~='divider']:not(:last-child){border-bottom:1px solid var(--atomic-neutral);padding-bottom:1rem}[part~='divider']{margin-bottom:1rem}.list-root.display-list{display:flex;flex-direction:column}.list-root.display-list .result-component,.list-root.display-list atomic-result-placeholder{width:auto}.list-root.display-list.density-comfortable [part~='outline']::before{margin:2rem 0}.list-root.display-list.density-normal [part~='outline']::before{margin:1.5rem 0}@media not all and (min-width: 1024px){.list-root.display-list.density-normal [part~='outline']::before{margin:1.75rem 0}}.list-root.display-list.density-compact [part~='outline']::before{margin:1rem 0}@media not all and (min-width: 1024px){.list-root.display-list.density-compact [part~='outline']::before{margin:1.5rem 0}}.list-root.display-list [part~='outline']::before{display:block;content:' ';height:1px;background-color:var(--atomic-neutral)}.list-root.display-list [part~='outline']:first-of-type::before{display:none}.list-root.display-list atomic-result-placeholder::before{background-color:transparent}.list-root.display-list .result-component[part~='outline']::before{margin-top:0px;margin-bottom:0px;margin-left:1.5rem;margin-right:1.5rem}.list-root.placeholder{padding:0.5rem 1.5rem}",v=I;var p=function(t,e,s,o){var r=arguments.length,i=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,s):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,s,o);else for(var d=t.length-1;d>=0;d--)(l=t[d])&&(i=(r<3?l(i):r>3?l(e,s,i):l(e,s))||i);return r>3&&i&&Object.defineProperty(e,s,i),i};const n=class{constructor(t){h(this,t),this.loadingFlag=R("firstInsightResultLoaded-"),this.display="list",this.templateHasError=!1,this.resultTemplateRegistered=!1,this.density="normal",this.imageSize="icon",this.resultsPerPageState=void 0,this.resultListState=void 0,this.templateHasError=!1,this.resultTemplateRegistered=!1,this.error=void 0,this.density="normal",this.imageSize="icon"}async setRenderFunction(t){this.itemRenderingFunction=t}initialize(){this.resultList=c(this.bindings.engine,{options:{fieldsToInclude:this.bindings.store.state.fieldsToInclude||void 0}}),this.resultsPerPage=g(this.bindings.engine),this.itemTemplateProvider=new w({includeDefaultTemplate:!0,templateElements:Array.from(this.host.querySelectorAll("atomic-insight-result-template")),getResultTemplateRegistered:()=>this.resultTemplateRegistered,getTemplateHasError:()=>this.templateHasError,setResultTemplateRegistered:t=>{this.resultTemplateRegistered=t},setTemplateHasError:t=>{this.templateHasError=t},bindings:this.bindings}),this.itemListCommon=new P({engineSubscribe:this.bindings.engine.subscribe,getCurrentNumberOfItems:()=>this.resultListState.results.length,getIsLoading:()=>this.resultListState.isLoading,host:this.host,loadingFlag:this.loadingFlag,nextNewItemTarget:this.focusTarget,store:this.bindings.store})}get focusTarget(){return this.nextNewResultTarget||(this.nextNewResultTarget=new y(this)),this.nextNewResultTarget}render(){this.itemListCommon.updateBreakpoints();const t=this.computeListDisplayClasses();return a(x,{key:"268a220b945db845e321e38274b634405a6f7194",hasTemplate:this.resultTemplateRegistered,templateHasError:this.itemTemplateProvider.hasError,firstRequestExecuted:this.resultListState.firstSearchExecuted,hasItems:this.resultListState.hasResults,hasError:this.resultListState.hasError},a(L,{key:"a155417bee49b42aaae1d066dc91c8d3a41d40ae",listClasses:t,display:this.display},a(S,{key:"a63497c14b30a85acbf1f9b25b4379920095881f",displayPlaceholders:!this.bindings.store.isAppLoaded(),numberOfPlaceholders:this.resultsPerPageState.numberOfResults,display:this.display,density:this.density,imageSize:this.imageSize}),a(T,{key:"0e29122a9ab90c492fa3ad263e0b194f2781f98e",firstRequestExecuted:this.resultListState.firstSearchExecuted,hasItems:this.resultListState.hasResults},this.resultListState.results.map((e,s)=>{const o=this.getPropsForAtomicInsightResult(e);return a("atomic-insight-result",{...o,part:"outline",ref:r=>r&&this.itemListCommon.setNewResultRef(r,s)})}))))}computeListDisplayClasses(){const t=!this.bindings.store.isAppLoaded();return E(this.display,this.density,this.imageSize,this.resultListState.firstSearchExecuted&&this.resultListState.isLoading,t)}getPropsForAtomicInsightResult(t){return{interactiveResult:f(this.bindings.engine,{options:{result:t}}),result:t,renderingFunction:this.itemRenderingFunction,loadingFlag:this.loadingFlag,key:this.itemListCommon.getResultId(t.uniqueId,this.resultListState.searchResponseId,this.density,this.imageSize),content:this.itemTemplateProvider.getTemplateContent(t),store:this.bindings.store,density:this.density,imageSize:this.imageSize,display:this.display}}get host(){return u(this)}};p([b()],n.prototype,"bindings",void 0);p([m("resultsPerPage")],n.prototype,"resultsPerPageState",void 0);p([m("resultList")],n.prototype,"resultListState",void 0);n.style=v;export{n as atomic_insight_result_list};
