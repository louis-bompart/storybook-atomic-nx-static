import{r as t,h as s,g as e}from"./p-00525453.js";import{S as a,N as i}from"./p-7e7b1a62.js";import{Z as n}from"./p-e12016d2.js";import{I as o,B as r}from"./p-6fadd170.js";import{g as c,s as d,a as f,c as h}from"./p-d1aad506.js";import"./p-1580513b.js";import"./p-9935af75.js";import"./p-e9c4f463.js";var l=undefined&&undefined.__decorate||function(t,s,e,a){var i=arguments.length,n=i<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,e):a,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(t,s,e,a);else for(var r=t.length-1;r>=0;r--)if(o=t[r])n=(i<3?o(n):i>3?o(s,e,n):o(s,e))||n;return i>3&&n&&Object.defineProperty(s,e,n),n};const p=class{constructor(s){t(this,s);this.collapseFacetsAfter=4;this.sortFacets=()=>{const t=c(this.host);const s=this.sortFacetsUsingManager(t,this.facetManager);const{visibleFacets:e,invisibleFacets:a}=d(s,this.bindings.store.getAllFacets());const i=f(this.host);h(e,this.collapseFacetsAfter);i===null||i===void 0?void 0:i.updateCollapseFacetsDependingOnFacetsVisibility(this.collapseFacetsAfter,e.length);this.host.append(...[...e,...a,...i?[i]:[]])};this.facetManagerState=undefined;this.error=undefined;this.collapseFacetsAfter=4}initialize(){this.validateProps();this.facetManager=n(this.bindings.engine);this.bindings.i18n.on("languageChanged",this.sortFacets)}validateProps(){new a({collapseFacetAfter:new i({min:-1,required:true})}).validate({collapseFacetAfter:this.collapseFacetsAfter})}sortFacetsUsingManager(t,s){const e=t.map((t=>({facetId:t.facetId,payload:t})));return s.sort(e).map((t=>t.payload))}disconnectedCallback(){this.bindings.i18n.off("languageChanged",this.sortFacets)}render(){return s("slot",{key:"f161d247456b228c51511788ba95f2d841258a43"})}get host(){return e(this)}};l([o()],p.prototype,"bindings",void 0);l([r("facetManager",{onUpdateCallbackMethod:"sortFacets"})],p.prototype,"facetManagerState",void 0);export{p as atomic_facet_manager};
//# sourceMappingURL=p-1e7b8ef1.entry.js.map