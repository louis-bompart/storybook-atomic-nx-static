{"version":3,"names":["atomicCommerceFacetNumberInputCss","AtomicCommerceFacetNumberInputStyle0","FacetNumberInput","connectedCallback","this","start","_a","range","end","_b","apply","startRef","validity","valid","endRef","applyInput","emit","facet","setRanges","endInclusive","isAutoSelected","state","numberOfResults","isSuggested","moreValuesAvailable","render","facetId","domain","label","bindings","i18n","t","minText","maxText","minAria","maxAria","applyAria","inputClasses","labelClasses","step","h","key","class","part","onSubmit","e","preventDefault","htmlFor","id","type","ref","required","min","Number","MIN_SAFE_INTEGER","max","value","onInput","target","valueAsNumber","MAX_SAFE_INTEGER","Button","style","ariaLabel","text"],"sources":["src/components/commerce/facets/facet-number-input/atomic-commerce-facet-number-input.pcss?tag=atomic-commerce-facet-number-input","src/components/commerce/facets/facet-number-input/atomic-commerce-facet-number-input.tsx"],"sourcesContent":["[part='input-form'] {\r\n  display: grid;\r\n  grid-template-areas:\r\n    'label-start label-end .'\r\n    'input-start input-end apply-button';\r\n  grid-template-columns: 1fr 1fr auto;\r\n}\r\n\r\n[part='label-start'] {\r\n  grid-area: label-start;\r\n}\r\n[part='label-end'] {\r\n  grid-area: label-end;\r\n}\r\n[part='input-start'] {\r\n  grid-area: input-start;\r\n}\r\n[part='input-end'] {\r\n  grid-area: input-end;\r\n}\r\n\r\n[part='input-apply-button'] {\r\n  grid-area: apply-button;\r\n}\r\n","import {NumericFacet} from '@coveo/headless/commerce';\r\nimport {Component, h, Prop, Event, EventEmitter, State} from '@stencil/core';\r\nimport {Button} from '../../../common/button';\r\nimport {CommerceBindings as Bindings} from '../../atomic-commerce-interface/atomic-commerce-interface';\r\n\r\nexport type Range = {start: number; end: number};\r\n\r\n/**\r\n * Internal component made to be integrated in a NumericFacet.\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-commerce-facet-number-input',\r\n  styleUrl: 'atomic-commerce-facet-number-input.pcss',\r\n  shadow: false,\r\n})\r\nexport class FacetNumberInput {\r\n  private startRef!: HTMLInputElement;\r\n  private endRef!: HTMLInputElement;\r\n\r\n  @State() private start?: number;\r\n  @State() private end?: number;\r\n\r\n  @Prop() public bindings!: Bindings;\r\n  @Prop() public label!: string;\r\n  @Prop() public range?: Range;\r\n  @Prop() public facet!: NumericFacet;\r\n\r\n  @Event({\r\n    eventName: 'atomic/numberInputApply',\r\n  })\r\n  private applyInput!: EventEmitter;\r\n\r\n  public connectedCallback() {\r\n    this.start = this.range?.start;\r\n    this.end = this.range?.end;\r\n  }\r\n\r\n  private apply() {\r\n    if (!this.startRef.validity.valid || !this.endRef.validity.valid) {\r\n      return;\r\n    }\r\n\r\n    this.applyInput.emit({\r\n      start: this.start,\r\n      end: this.end,\r\n    });\r\n    this.facet.setRanges([\r\n      {\r\n        start: this.start!,\r\n        end: this.end!,\r\n        endInclusive: true,\r\n        isAutoSelected: false,\r\n        state: 'selected',\r\n        numberOfResults: 0,\r\n        isSuggested: false,\r\n        moreValuesAvailable: false,\r\n      },\r\n    ]);\r\n  }\r\n\r\n  render() {\r\n    const {facetId, domain} = this.facet.state;\r\n    const label = this.bindings.i18n.t(this.label);\r\n    const minText = this.bindings.i18n.t('min');\r\n    const maxText = this.bindings.i18n.t('max');\r\n    const minAria = this.bindings.i18n.t('number-input-minimum', {label});\r\n    const maxAria = this.bindings.i18n.t('number-input-maximum', {label});\r\n    const apply = this.bindings.i18n.t('apply');\r\n    const applyAria = this.bindings.i18n.t('number-input-apply', {label});\r\n\r\n    const inputClasses =\r\n      'p-2.5 input-primary placeholder-neutral-dark min-w-0 mr-1';\r\n    const labelClasses = 'text-neutral-dark text-sm';\r\n    const step = 'any';\r\n\r\n    return (\r\n      <form\r\n        class=\"mt-4 px-2 gap-y-0.5\"\r\n        part=\"input-form\"\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          this.apply();\r\n          return false;\r\n        }}\r\n      >\r\n        <label\r\n          part=\"label-start\"\r\n          class={labelClasses}\r\n          htmlFor={`${facetId}_start`}\r\n        >\r\n          {minText}\r\n        </label>\r\n        <input\r\n          part=\"input-start\"\r\n          id={`${facetId}_start`}\r\n          type=\"number\"\r\n          step={step}\r\n          ref={(ref) => (this.startRef = ref!)}\r\n          class={inputClasses}\r\n          aria-label={minAria}\r\n          required\r\n          min={Number.MIN_SAFE_INTEGER}\r\n          max={domain!.max}\r\n          value={this.range?.start}\r\n          onInput={(e) =>\r\n            (this.start = (e.target as HTMLInputElement).valueAsNumber)\r\n          }\r\n        />\r\n        <label part=\"label-end\" class={labelClasses} htmlFor={`${facetId}_end`}>\r\n          {maxText}\r\n        </label>\r\n        <input\r\n          part=\"input-end\"\r\n          id={`${facetId}_end`}\r\n          type=\"number\"\r\n          step={step}\r\n          ref={(ref) => (this.endRef = ref!)}\r\n          class={inputClasses}\r\n          aria-label={maxAria}\r\n          required\r\n          min={domain!.min}\r\n          max={Number.MAX_SAFE_INTEGER}\r\n          value={this.range?.end}\r\n          onInput={(e) =>\r\n            (this.end = (e.target as HTMLInputElement).valueAsNumber)\r\n          }\r\n        />\r\n        <Button\r\n          style=\"outline-primary\"\r\n          type=\"submit\"\r\n          part=\"input-apply-button\"\r\n          class=\"p-2.5 flex-none truncate\"\r\n          ariaLabel={applyAria}\r\n          text={apply}\r\n        ></Button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"8JAAA,MAAMA,EAAoC,wXAC1C,MAAAC,EAAeD,E,MCeFE,EAAgB,M,4MAiBpB,iBAAAC,G,QACLC,KAAKC,OAAQC,EAAAF,KAAKG,SAAK,MAAAD,SAAA,SAAAA,EAAED,MACzBD,KAAKI,KAAMC,EAAAL,KAAKG,SAAK,MAAAE,SAAA,SAAAA,EAAED,G,CAGjB,KAAAE,GACN,IAAKN,KAAKO,SAASC,SAASC,QAAUT,KAAKU,OAAOF,SAASC,MAAO,CAChE,M,CAGFT,KAAKW,WAAWC,KAAK,CACnBX,MAAOD,KAAKC,MACZG,IAAKJ,KAAKI,MAEZJ,KAAKa,MAAMC,UAAU,CACnB,CACEb,MAAOD,KAAKC,MACZG,IAAKJ,KAAKI,IACVW,aAAc,KACdC,eAAgB,MAChBC,MAAO,WACPC,gBAAiB,EACjBC,YAAa,MACbC,oBAAqB,Q,CAK3B,MAAAC,G,QACE,MAAMC,QAACA,EAAOC,OAAEA,GAAUvB,KAAKa,MAAMI,MACrC,MAAMO,EAAQxB,KAAKyB,SAASC,KAAKC,EAAE3B,KAAKwB,OACxC,MAAMI,EAAU5B,KAAKyB,SAASC,KAAKC,EAAE,OACrC,MAAME,EAAU7B,KAAKyB,SAASC,KAAKC,EAAE,OACrC,MAAMG,EAAU9B,KAAKyB,SAASC,KAAKC,EAAE,uBAAwB,CAACH,UAC9D,MAAMO,EAAU/B,KAAKyB,SAASC,KAAKC,EAAE,uBAAwB,CAACH,UAC9D,MAAMlB,EAAQN,KAAKyB,SAASC,KAAKC,EAAE,SACnC,MAAMK,EAAYhC,KAAKyB,SAASC,KAAKC,EAAE,qBAAsB,CAACH,UAE9D,MAAMS,EACJ,4DACF,MAAMC,EAAe,4BACrB,MAAMC,EAAO,MAEb,OACEC,EAAA,QAAAC,IAAA,2CACEC,MAAM,sBACNC,KAAK,aACLC,SAAWC,IACTA,EAAEC,iBACF1C,KAAKM,QACL,OAAO,KAAK,GAGd8B,EAAA,SAAAC,IAAA,2CACEE,KAAK,cACLD,MAAOJ,EACPS,QAAS,GAAGrB,WAEXM,GAEHQ,EAAA,SAAAC,IAAA,2CACEE,KAAK,cACLK,GAAI,GAAGtB,UACPuB,KAAK,SACLV,KAAMA,EACNW,IAAMA,GAAS9C,KAAKO,SAAWuC,EAC/BR,MAAOL,EAAY,aACPH,EACZiB,SAAQ,KACRC,IAAKC,OAAOC,iBACZC,IAAK5B,EAAQ4B,IACbC,OAAOlD,EAAAF,KAAKG,SAAK,MAAAD,SAAA,SAAAA,EAAED,MACnBoD,QAAUZ,GACPzC,KAAKC,MAASwC,EAAEa,OAA4BC,gBAGjDnB,EAAA,SAAAC,IAAA,2CAAOE,KAAK,YAAYD,MAAOJ,EAAcS,QAAS,GAAGrB,SACtDO,GAEHO,EAAA,SAAAC,IAAA,2CACEE,KAAK,YACLK,GAAI,GAAGtB,QACPuB,KAAK,SACLV,KAAMA,EACNW,IAAMA,GAAS9C,KAAKU,OAASoC,EAC7BR,MAAOL,EAAY,aACPF,EACZgB,SAAQ,KACRC,IAAKzB,EAAQyB,IACbG,IAAKF,OAAOO,iBACZJ,OAAO/C,EAAAL,KAAKG,SAAK,MAAAE,SAAA,SAAAA,EAAED,IACnBiD,QAAUZ,GACPzC,KAAKI,IAAOqC,EAAEa,OAA4BC,gBAG/CnB,EAACqB,EAAM,CAAApB,IAAA,2CACLqB,MAAM,kBACNb,KAAK,SACLN,KAAK,qBACLD,MAAM,2BACNqB,UAAW3B,EACX4B,KAAMtD,I"}