import{n as xn,a as fa,r as ga}from"./index-B-ZmIc0D.js";import"./index-Bqoxw6Vv.js";/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ma=Object.create,Ct=Object.defineProperty,ya=Object.getOwnPropertyDescriptor,va=Object.getOwnPropertyNames,Sa=Object.getPrototypeOf,wa=Object.prototype.hasOwnProperty,ba=(e,t,r)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ka=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),te=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ia=(e,t)=>{for(var r in t)Ct(e,r,{get:t[r],enumerable:!0})},Ca=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of va(t))!wa.call(e,i)&&i!==r&&Ct(e,i,{get:()=>t[i],enumerable:!(n=ya(t,i))||n.enumerable});return e},we=(e,t,r)=>(r=e!=null?ma(Sa(e)):{},Ca(!e||!e.__esModule?Ct(r,"default",{value:e,enumerable:!0}):r,e)),En=(e,t,r)=>ba(e,t+"",r),qa=te((e,t)=>{function r(a){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(a=`${a}`,a=a.replace(/[ \t\n\f\r]/g,""),a.length%4===0&&(a=a.replace(/==?$/,"")),a.length%4===1||/[^+/0-9A-Za-z]/.test(a))return null;let s="",o=0,u=0;for(let c=0;c<a.length;c++)o<<=6,o|=i(a[c]),u+=6,u===24&&(s+=String.fromCharCode((o&16711680)>>16),s+=String.fromCharCode((o&65280)>>8),s+=String.fromCharCode(o&255),o=u=0);return u===12?(o>>=4,s+=String.fromCharCode(o)):u===18&&(o>>=2,s+=String.fromCharCode((o&65280)>>8),s+=String.fromCharCode(o&255)),s}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(a){let s=n.indexOf(a);return s<0?void 0:s}t.exports=r}),Aa=te((e,t)=>{function r(a){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let s;for(a=`${a}`,s=0;s<a.length;s++)if(a.charCodeAt(s)>255)return null;let o="";for(s=0;s<a.length;s+=3){let u=[void 0,void 0,void 0,void 0];u[0]=a.charCodeAt(s)>>2,u[1]=(a.charCodeAt(s)&3)<<4,a.length>s+1&&(u[1]|=a.charCodeAt(s+1)>>4,u[2]=(a.charCodeAt(s+1)&15)<<2),a.length>s+2&&(u[2]|=a.charCodeAt(s+2)>>6,u[3]=a.charCodeAt(s+2)&63);for(let c=0;c<u.length;c++)typeof u[c]>"u"?o+="=":o+=i(u[c])}return o}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(a){if(a>=0&&a<64)return n[a]}t.exports=r}),Oa=te((e,t)=>{var r=qa(),n=Aa();t.exports={atob:r,btoa:n}}),Da=te((e,t)=>{t.exports=fetch}),xa=te(e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var a,s=1,o=arguments.length;s<o;s++){a=arguments[s];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(i){var a=t(t({},r),i);return a.numOfAttempts<1&&(a.numOfAttempts=1),a}e.getSanitizedOptions=n}),Ea=te(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){var n=Math.random()*r;return Math.round(n)}e.fullJitter=t}),Ra=te(e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(r){return r}e.noJitter=t}),Fa=te(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ea(),r=Ra();function n(i){switch(i.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}),Rn=te(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Fa(),r=function(){function n(i){this.options=i,this.attempt=0}return n.prototype.apply=function(){var i=this;return new Promise(function(a){return setTimeout(a,i.jitteredDelay)})},n.prototype.setAttemptNumber=function(i){this.attempt=i},Object.defineProperty(n.prototype,"jitteredDelay",{get:function(){var i=t.JitterFactory(this.options);return i(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){var i=this.options.startingDelay,a=this.options.timeMultiple,s=this.numOfDelayedAttempts,o=i*Math.pow(a,s);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),n}();e.Delay=r}),Ua=te(e=>{var t=e&&e.__extends||function(){var s=function(o,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var m in h)h.hasOwnProperty(m)&&(c[m]=h[m])},s(o,u)};return function(o,u){s(o,u);function c(){this.constructor=o}o.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=e&&e.__awaiter||function(s,o,u,c){function h(m){return m instanceof u?m:new u(function(g){g(m)})}return new(u||(u=Promise))(function(m,g){function b(v){try{l(c.next(v))}catch(S){g(S)}}function I(v){try{l(c.throw(v))}catch(S){g(S)}}function l(v){v.done?m(v.value):h(v.value).then(b,I)}l((c=c.apply(s,o||[])).next())})},n=e&&e.__generator||function(s,o){var u={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,h,m,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(l){return function(v){return I([l,v])}}function I(l){if(c)throw new TypeError("Generator is already executing.");for(;u;)try{if(c=1,h&&(m=l[0]&2?h.return:l[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,l[1])).done)return m;switch(h=0,m&&(l=[l[0]&2,m.value]),l[0]){case 0:case 1:m=l;break;case 4:return u.label++,{value:l[1],done:!1};case 5:u.label++,h=l[1],l=[0];continue;case 7:l=u.ops.pop(),u.trys.pop();continue;default:if(m=u.trys,!(m=m.length>0&&m[m.length-1])&&(l[0]===6||l[0]===2)){u=0;continue}if(l[0]===3&&(!m||l[1]>m[0]&&l[1]<m[3])){u.label=l[1];break}if(l[0]===6&&u.label<m[1]){u.label=m[1],m=l;break}if(m&&u.label<m[2]){u.label=m[2],u.ops.push(l);break}m[2]&&u.ops.pop(),u.trys.pop();continue}l=o.call(s,u)}catch(v){l=[6,v],h=0}finally{c=m=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=Rn(),a=function(s){t(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.apply=function(){return r(this,void 0,void 0,function(){return n(this,function(u){return[2,this.isFirstAttempt?!0:s.prototype.apply.call(this)]})})},Object.defineProperty(o.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),o}(i.Delay);e.SkipFirstDelay=a}),Ma=te(e=>{var t=e&&e.__extends||function(){var i=function(a,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)u.hasOwnProperty(c)&&(o[c]=u[c])},i(a,s)};return function(a,s){i(a,s);function o(){this.constructor=a}a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=Rn(),n=function(i){t(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a}(r.Delay);e.AlwaysDelay=n}),Ta=te(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ua(),r=Ma();function n(a,s){var o=i(a);return o.setAttemptNumber(s),o}e.DelayFactory=n;function i(a){return a.delayFirstAttempt?new r.AlwaysDelay(a):new t.SkipFirstDelay(a)}}),_a=te(e=>{var t=e&&e.__awaiter||function(o,u,c,h){function m(g){return g instanceof c?g:new c(function(b){b(g)})}return new(c||(c=Promise))(function(g,b){function I(S){try{v(h.next(S))}catch(D){b(D)}}function l(S){try{v(h.throw(S))}catch(D){b(D)}}function v(S){S.done?g(S.value):m(S.value).then(I,l)}v((h=h.apply(o,u||[])).next())})},r=e&&e.__generator||function(o,u){var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,b;return b={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function I(v){return function(S){return l([v,S])}}function l(v){if(h)throw new TypeError("Generator is already executing.");for(;c;)try{if(h=1,m&&(g=v[0]&2?m.return:v[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,v[1])).done)return g;switch(m=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,m=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(g=c.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){c=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){c.label=v[1];break}if(v[0]===6&&c.label<g[1]){c.label=g[1],g=v;break}if(g&&c.label<g[2]){c.label=g[2],c.ops.push(v);break}g[2]&&c.ops.pop(),c.trys.pop();continue}v=u.call(o,c)}catch(S){v=[6,S],m=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=xa(),i=Ta();function a(o,u){return u===void 0&&(u={}),t(this,void 0,void 0,function(){var c,h;return r(this,function(m){switch(m.label){case 0:return c=n.getSanitizedOptions(u),h=new s(o,c),[4,h.execute()];case 1:return[2,m.sent()]}})})}e.backOff=a;var s=function(){function o(u,c){this.request=u,this.options=c,this.attemptNumber=0}return o.prototype.execute=function(){return t(this,void 0,void 0,function(){var u,c;return r(this,function(h){switch(h.label){case 0:if(this.attemptLimitReached)return[3,7];h.label=1;case 1:return h.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return h.sent(),[4,this.request()];case 3:return[2,h.sent()];case 4:return u=h.sent(),this.attemptNumber++,[4,this.options.retry(u,this.attemptNumber)];case 5:if(c=h.sent(),!c||this.attemptLimitReached)throw u;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(o.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),o.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var u;return r(this,function(c){switch(c.label){case 0:return u=i.DelayFactory(this.options,this.attemptNumber),[4,u.apply()];case 1:return c.sent(),[2]}})})},o}()}),$a=te((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>{var n;return((n=r.exec(document.cookie))==null?void 0:n.pop())||null}}),lr=te((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,function(){var r=1e3,n=6e4,i=36e5,a="millisecond",s="second",o="minute",u="hour",c="day",h="week",m="month",g="quarter",b="year",I="date",l="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var A=["th","st","nd","rd"],C=R%100;return"["+R+(A[(C-20)%10]||A[C]||A[0])+"]"}},T=function(R,A,C){var d=String(R);return!d||d.length>=A?R:""+Array(A+1-d.length).join(C)+R},Y={s:T,z:function(R){var A=-R.utcOffset(),C=Math.abs(A),d=Math.floor(C/60),f=C%60;return(A<=0?"+":"-")+T(d,2,"0")+":"+T(f,2,"0")},m:function R(A,C){if(A.date()<C.date())return-R(C,A);var d=12*(C.year()-A.year())+(C.month()-A.month()),f=A.clone().add(d,m),w=C-f<0,q=A.clone().add(d+(w?-1:1),m);return+(-(d+(C-f)/(w?f-q:q-f))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:m,y:b,w:h,d:c,D:I,h:u,m:o,s,ms:a,Q:g}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},_="en",B={};B[_]=D;var j="$isDayjsObject",W=function(R){return R instanceof ie||!(!R||!R[j])},G=function R(A,C,d){var f;if(!A)return _;if(typeof A=="string"){var w=A.toLowerCase();B[w]&&(f=w),C&&(B[w]=C,f=w);var q=A.split("-");if(!f&&q.length>1)return R(q[0])}else{var x=A.name;B[x]=A,f=x}return!d&&f&&(_=f),f||!d&&_},P=function(R,A){if(W(R))return R.clone();var C=typeof A=="object"?A:{};return C.date=R,C.args=arguments,new ie(C)},U=Y;U.l=G,U.i=W,U.w=function(R,A){return P(R,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var ie=function(){function R(C){this.$L=G(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[j]=!0}var A=R.prototype;return A.parse=function(C){this.$d=function(d){var f=d.date,w=d.utc;if(f===null)return new Date(NaN);if(U.u(f))return new Date;if(f instanceof Date)return new Date(f);if(typeof f=="string"&&!/Z$/i.test(f)){var q=f.match(v);if(q){var x=q[2]-1||0,$=(q[7]||"0").substring(0,3);return w?new Date(Date.UTC(q[1],x,q[3]||1,q[4]||0,q[5]||0,q[6]||0,$)):new Date(q[1],x,q[3]||1,q[4]||0,q[5]||0,q[6]||0,$)}}return new Date(f)}(C),this.init()},A.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},A.$utils=function(){return U},A.isValid=function(){return this.$d.toString()!==l},A.isSame=function(C,d){var f=P(C);return this.startOf(d)<=f&&f<=this.endOf(d)},A.isAfter=function(C,d){return P(C)<this.startOf(d)},A.isBefore=function(C,d){return this.endOf(d)<P(C)},A.$g=function(C,d,f){return U.u(C)?this[d]:this.set(f,C)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(C,d){var f=this,w=!!U.u(d)||d,q=U.p(C),x=function(me,re){var pe=U.w(f.$u?Date.UTC(f.$y,re,me):new Date(f.$y,re,me),f);return w?pe:pe.endOf(c)},$=function(me,re){return U.w(f.toDate()[me].apply(f.toDate("s"),(w?[0,0,0,0]:[23,59,59,999]).slice(re)),f)},z=this.$W,V=this.$M,H=this.$D,E="set"+(this.$u?"UTC":"");switch(q){case b:return w?x(1,0):x(31,11);case m:return w?x(1,V):x(0,V+1);case h:var Z=this.$locale().weekStart||0,ce=(z<Z?z+7:z)-Z;return x(w?H-ce:H+(6-ce),V);case c:case I:return $(E+"Hours",0);case u:return $(E+"Minutes",1);case o:return $(E+"Seconds",2);case s:return $(E+"Milliseconds",3);default:return this.clone()}},A.endOf=function(C){return this.startOf(C,!1)},A.$set=function(C,d){var f,w=U.p(C),q="set"+(this.$u?"UTC":""),x=(f={},f[c]=q+"Date",f[I]=q+"Date",f[m]=q+"Month",f[b]=q+"FullYear",f[u]=q+"Hours",f[o]=q+"Minutes",f[s]=q+"Seconds",f[a]=q+"Milliseconds",f)[w],$=w===c?this.$D+(d-this.$W):d;if(w===m||w===b){var z=this.clone().set(I,1);z.$d[x]($),z.init(),this.$d=z.set(I,Math.min(this.$D,z.daysInMonth())).$d}else x&&this.$d[x]($);return this.init(),this},A.set=function(C,d){return this.clone().$set(C,d)},A.get=function(C){return this[U.p(C)]()},A.add=function(C,d){var f,w=this;C=Number(C);var q=U.p(d),x=function(V){var H=P(w);return U.w(H.date(H.date()+Math.round(V*C)),w)};if(q===m)return this.set(m,this.$M+C);if(q===b)return this.set(b,this.$y+C);if(q===c)return x(1);if(q===h)return x(7);var $=(f={},f[o]=n,f[u]=i,f[s]=r,f)[q]||1,z=this.$d.getTime()+C*$;return U.w(z,this)},A.subtract=function(C,d){return this.add(-1*C,d)},A.format=function(C){var d=this,f=this.$locale();if(!this.isValid())return f.invalidDate||l;var w=C||"YYYY-MM-DDTHH:mm:ssZ",q=U.z(this),x=this.$H,$=this.$m,z=this.$M,V=f.weekdays,H=f.months,E=f.meridiem,Z=function(re,pe,X,fe){return re&&(re[pe]||re(d,w))||X[pe].slice(0,fe)},ce=function(re){return U.s(x%12||12,re,"0")},me=E||function(re,pe,X){var fe=re<12?"AM":"PM";return X?fe.toLowerCase():fe};return w.replace(S,function(re,pe){return pe||function(X){switch(X){case"YY":return String(d.$y).slice(-2);case"YYYY":return U.s(d.$y,4,"0");case"M":return z+1;case"MM":return U.s(z+1,2,"0");case"MMM":return Z(f.monthsShort,z,H,3);case"MMMM":return Z(H,z);case"D":return d.$D;case"DD":return U.s(d.$D,2,"0");case"d":return String(d.$W);case"dd":return Z(f.weekdaysMin,d.$W,V,2);case"ddd":return Z(f.weekdaysShort,d.$W,V,3);case"dddd":return V[d.$W];case"H":return String(x);case"HH":return U.s(x,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return me(x,$,!0);case"A":return me(x,$,!1);case"m":return String($);case"mm":return U.s($,2,"0");case"s":return String(d.$s);case"ss":return U.s(d.$s,2,"0");case"SSS":return U.s(d.$ms,3,"0");case"Z":return q}return null}(re)||q.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(C,d,f){var w,q=this,x=U.p(d),$=P(C),z=($.utcOffset()-this.utcOffset())*n,V=this-$,H=function(){return U.m(q,$)};switch(x){case b:w=H()/12;break;case m:w=H();break;case g:w=H()/3;break;case h:w=(V-z)/6048e5;break;case c:w=(V-z)/864e5;break;case u:w=V/i;break;case o:w=V/n;break;case s:w=V/r;break;default:w=V}return f?w:U.a(w)},A.daysInMonth=function(){return this.endOf(m).$D},A.$locale=function(){return B[this.$L]},A.locale=function(C,d){if(!C)return this.$L;var f=this.clone(),w=G(C,d,!0);return w&&(f.$L=w),f},A.clone=function(){return U.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},R}(),ge=ie.prototype;return P.prototype=ge,[["$ms",a],["$s",s],["$m",o],["$H",u],["$W",c],["$M",m],["$y",b],["$D",I]].forEach(function(R){ge[R[1]]=function(A){return this.$g(A,R[0],R[1])}}),P.extend=function(R,A){return R.$i||(R(A,ie,P),R.$i=!0),P},P.locale=G,P.isDayjs=W,P.unix=function(R){return P(1e3*R)},P.en=B[_],P.Ls=B,P.p={},P})}),ja=te((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(i,a,s){var o,u=function(g,b,I){I===void 0&&(I={});var l=new Date(g),v=function(S,D){D===void 0&&(D={});var T=D.timeZoneName||"short",Y=S+"|"+T,_=n[Y];return _||(_=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:S,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:T}),n[Y]=_),_}(b,I);return v.formatToParts(l)},c=function(g,b){for(var I=u(g,b),l=[],v=0;v<I.length;v+=1){var S=I[v],D=S.type,T=S.value,Y=r[D];Y>=0&&(l[Y]=parseInt(T,10))}var _=l[3],B=_===24?0:_,j=l[0]+"-"+l[1]+"-"+l[2]+" "+B+":"+l[4]+":"+l[5]+":000",W=+g;return(s.utc(j).valueOf()-(W-=W%1e3))/6e4},h=a.prototype;h.tz=function(g,b){g===void 0&&(g=o);var I=this.utcOffset(),l=this.toDate(),v=l.toLocaleString("en-US",{timeZone:g}),S=Math.round((l-new Date(v))/1e3/60),D=s(v,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(l.getTimezoneOffset()/15)-S,!0);if(b){var T=D.utcOffset();D=D.add(I-T,"minute")}return D.$x.$timezone=g,D},h.offsetName=function(g){var b=this.$x.$timezone||s.tz.guess(),I=u(this.valueOf(),b,{timeZoneName:g}).find(function(l){return l.type.toLowerCase()==="timezonename"});return I&&I.value};var m=h.startOf;h.startOf=function(g,b){if(!this.$x||!this.$x.$timezone)return m.call(this,g,b);var I=s(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return m.call(I,g,b).tz(this.$x.$timezone,!0)},s.tz=function(g,b,I){var l=I&&b,v=I||b||o,S=c(+s(),v);if(typeof g!="string")return s(g).tz(v);var D=function(B,j,W){var G=B-60*j*1e3,P=c(G,W);if(j===P)return[G,j];var U=c(G-=60*(P-j)*1e3,W);return P===U?[G,P]:[B-60*Math.min(P,U)*1e3,Math.max(P,U)]}(s.utc(g,l).valueOf(),S,v),T=D[0],Y=D[1],_=s(T).utcOffset(Y);return _.$x.$timezone=v,_},s.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},s.tz.setDefault=function(g){o=g}}})}),Pa=te((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(a,s,o){var u=s.prototype;o.utc=function(l){var v={date:l,utc:!0,args:arguments};return new s(v)},u.utc=function(l){var v=o(this.toDate(),{locale:this.$L,utc:!0});return l?v.add(this.utcOffset(),r):v},u.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var c=u.parse;u.parse=function(l){l.utc&&(this.$u=!0),this.$utils().u(l.$offset)||(this.$offset=l.$offset),c.call(this,l)};var h=u.init;u.init=function(){if(this.$u){var l=this.$d;this.$y=l.getUTCFullYear(),this.$M=l.getUTCMonth(),this.$D=l.getUTCDate(),this.$W=l.getUTCDay(),this.$H=l.getUTCHours(),this.$m=l.getUTCMinutes(),this.$s=l.getUTCSeconds(),this.$ms=l.getUTCMilliseconds()}else h.call(this)};var m=u.utcOffset;u.utcOffset=function(l,v){var S=this.$utils().u;if(S(l))return this.$u?0:S(this.$offset)?m.call(this):this.$offset;if(typeof l=="string"&&(l=function(_){_===void 0&&(_="");var B=_.match(n);if(!B)return null;var j=(""+B[0]).match(i)||["-",0,0],W=j[0],G=60*+j[1]+ +j[2];return G===0?0:W==="+"?G:-G}(l),l===null))return this;var D=Math.abs(l)<=16?60*l:l,T=this;if(v)return T.$offset=D,T.$u=l===0,T;if(l!==0){var Y=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(T=this.local().add(D+Y,r)).$offset=D,T.$x.$localOffset=Y}else T=this.utc();return T};var g=u.format;u.format=function(l){var v=l||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,v)},u.valueOf=function(){var l=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*l},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var b=u.toDate;u.toDate=function(l){return l==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():b.call(this)};var I=u.diff;u.diff=function(l,v,S){if(l&&this.$u===l.$u)return I.call(this,l,v,S);var D=this.local(),T=o(l).local();return I.call(D,T,v,S)}}})}),La=te((e,t)=>{function r(i){try{return JSON.stringify(i)}catch{return'"[Circular]"'}}t.exports=n;function n(i,a,s){var o=s&&s.stringify||r,u=1;if(typeof i=="object"&&i!==null){var c=a.length+u;if(c===1)return i;var h=new Array(c);h[0]=o(i);for(var m=1;m<c;m++)h[m]=o(a[m]);return h.join(" ")}if(typeof i!="string")return i;var g=a.length;if(g===0)return i;for(var b="",I=1-u,l=-1,v=i&&i.length||0,S=0;S<v;){if(i.charCodeAt(S)===37&&S+1<v){switch(l=l>-1?l:0,i.charCodeAt(S+1)){case 100:case 102:if(I>=g||a[I]==null)break;l<S&&(b+=i.slice(l,S)),b+=Number(a[I]),l=S+2,S++;break;case 105:if(I>=g||a[I]==null)break;l<S&&(b+=i.slice(l,S)),b+=Math.floor(Number(a[I])),l=S+2,S++;break;case 79:case 111:case 106:if(I>=g||a[I]===void 0)break;l<S&&(b+=i.slice(l,S));var D=typeof a[I];if(D==="string"){b+="'"+a[I]+"'",l=S+2,S++;break}if(D==="function"){b+=a[I].name||"<anonymous>",l=S+2,S++;break}b+=o(a[I]),l=S+2,S++;break;case 115:if(I>=g)break;l<S&&(b+=i.slice(l,S)),b+=String(a[I]),l=S+2,S++;break;case 37:l<S&&(b+=i.slice(l,S)),b+="%",l=S+2,S++,I--;break}++I}++S}return l===-1?i:(l<v&&(b+=i.slice(l)),b)}}),Qa=te((e,t)=>{var r=La();t.exports=g;var n=C().console||{},i={mapHttpRequest:G,mapHttpResponse:G,wrapRequestSerializer:P,wrapResponseSerializer:P,wrapErrorSerializer:P,req:G,res:G,err:j,errWithCause:j};function a(d,f){return d==="silent"?1/0:f.levels.values[d]}var s=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),u={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(d,f){let w={logger:f,parent:d[o]};f[o]=w}function h(d,f,w){let q={};f.forEach(x=>{q[x]=w[x]?w[x]:n[x]||n[u[x]||"log"]||U}),d[s]=q}function m(d,f){return Array.isArray(d)?d.filter(function(w){return w!=="!stdSerializers.err"}):d===!0?Object.keys(f):!1}function g(d){d=d||{},d.browser=d.browser||{};let f=d.browser.transmit;if(f&&typeof f.send!="function")throw Error("pino: transmit option must have a send function");let w=d.browser.write||n;d.browser.write&&(d.browser.asObject=!0);let q=d.serializers||{},x=m(d.browser.serialize,q),$=d.browser.serialize;Array.isArray(d.browser.serialize)&&d.browser.serialize.indexOf("!stdSerializers.err")>-1&&($=!1);let z=Object.keys(d.customLevels||{}),V=["error","fatal","warn","info","debug","trace"].concat(z);typeof w=="function"&&V.forEach(function(X){w[X]=w}),(d.enabled===!1||d.browser.disabled)&&(d.level="silent");let H=d.level||"info",E=Object.create(w);E.log||(E.log=U),h(E,V,w),c({},E),Object.defineProperty(E,"levelVal",{get:ce}),Object.defineProperty(E,"level",{get:me,set:re});let Z={transmit:f,serialize:x,asObject:d.browser.asObject,formatters:d.browser.formatters,levels:V,timestamp:W(d)};E.levels=b(d),E.level=H,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=U,E.serializers=q,E._serialize=x,E._stdErrSerialize=$,E.child=pe,f&&(E._logEvent=B());function ce(){return a(this.level,this)}function me(){return this._level}function re(X){if(X!=="silent"&&!this.levels.values[X])throw Error("unknown level "+X);this._level=X,v(this,Z,E,"error"),v(this,Z,E,"fatal"),v(this,Z,E,"warn"),v(this,Z,E,"info"),v(this,Z,E,"debug"),v(this,Z,E,"trace"),z.forEach(fe=>{v(this,Z,E,fe)})}function pe(X,fe){if(!X)throw new Error("missing bindings for child Pino");fe=fe||{},x&&X.serializers&&(fe.serializers=X.serializers);let Le=fe.serializers;if(x&&Le){var xe=Object.assign({},q,Le),Pr=d.browser.serialize===!0?Object.keys(xe):x;delete X.serializers,Y([X],Pr,xe,this._stdErrSerialize)}function Lr(Qr){this._childLevel=(Qr._childLevel|0)+1,this.bindings=X,xe&&(this.serializers=xe,this._serialize=Pr),f&&(this._logEvent=B([].concat(Qr._logEvent.bindings,X)))}Lr.prototype=this;let Mt=new Lr(this);return c(this,Mt),Mt.level=this.level,Mt}return E}function b(d){let f=d.customLevels||{},w=Object.assign({},g.levels.values,f),q=Object.assign({},g.levels.labels,I(f));return{values:w,labels:q}}function I(d){let f={};return Object.keys(d).forEach(function(w){f[d[w]]=w}),f}g.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},g.stdSerializers=i,g.stdTimeFunctions=Object.assign({},{nullTime:ie,epochTime:ge,unixTime:R,isoTime:A});function l(d){let f=[];d.bindings&&f.push(d.bindings);let w=d[o];for(;w.parent;)w=w.parent,w.logger.bindings&&f.push(w.logger.bindings);return f.reverse()}function v(d,f,w,q){if(Object.defineProperty(d,q,{value:a(d.level,w)>a(q,w)?U:w[s][q],writable:!0,enumerable:!0,configurable:!0}),!f.transmit&&d[q]===U)return;d[q]=D(d,f,w,q);let x=l(d);x.length!==0&&(d[q]=S(x,d[q]))}function S(d,f){return function(){return f.apply(this,[...d,...arguments])}}function D(d,f,w,q){return function(x){return function(){let $=f.timestamp(),z=new Array(arguments.length),V=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var H=0;H<z.length;H++)z[H]=arguments[H];if(f.serialize&&!f.asObject&&Y(z,this._serialize,this.serializers,this._stdErrSerialize),f.asObject||f.formatters?x.call(V,T(this,q,z,$,f.formatters)):x.apply(V,z),f.transmit){let E=f.transmit.level||d._level,Z=w.levels.values[E],ce=w.levels.values[q];if(ce<Z)return;_(this,{ts:$,methodLevel:q,methodValue:ce,transmitLevel:E,transmitValue:w.levels.values[f.transmit.level||d._level],send:f.transmit.send,val:a(d._level,w)},z)}}}(d[s][q])}function T(d,f,w,q,x={}){let{level:$=()=>d.levels.values[f],log:z=ce=>ce}=x;d._serialize&&Y(w,d._serialize,d.serializers,d._stdErrSerialize);let V=w.slice(),H=V[0],E={};q&&(E.time=q),E.level=$(f,d.levels.values[f]);let Z=(d._childLevel|0)+1;if(Z<1&&(Z=1),H!==null&&typeof H=="object"){for(;Z--&&typeof V[0]=="object";)Object.assign(E,V.shift());H=V.length?r(V.shift(),V):void 0}else typeof H=="string"&&(H=r(V.shift(),V));return H!==void 0&&(E.msg=H),z(E)}function Y(d,f,w,q){for(let x in d)if(q&&d[x]instanceof Error)d[x]=g.stdSerializers.err(d[x]);else if(typeof d[x]=="object"&&!Array.isArray(d[x]))for(let $ in d[x])f&&f.indexOf($)>-1&&$ in w&&(d[x][$]=w[$](d[x][$]))}function _(d,f,w){let q=f.send,x=f.ts,$=f.methodLevel,z=f.methodValue,V=f.val,H=d._logEvent.bindings;Y(w,d._serialize||Object.keys(d.serializers),d.serializers,d._stdErrSerialize===void 0?!0:d._stdErrSerialize),d._logEvent.ts=x,d._logEvent.messages=w.filter(function(E){return H.indexOf(E)===-1}),d._logEvent.level.label=$,d._logEvent.level.value=z,q($,d._logEvent,V),d._logEvent=B(H)}function B(d){return{ts:0,messages:[],bindings:d||[],level:{label:"",value:0}}}function j(d){let f={type:d.constructor.name,msg:d.message,stack:d.stack};for(let w in d)f[w]===void 0&&(f[w]=d[w]);return f}function W(d){return typeof d.timestamp=="function"?d.timestamp:d.timestamp===!1?ie:ge}function G(){return{}}function P(d){return d}function U(){}function ie(){return!1}function ge(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function A(){return new Date(Date.now()).toISOString()}function C(){function d(f){return typeof f<"u"&&f}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return d(self)||d(window)||d(this)||{}}}t.exports.default=g,t.exports.pino=g}),Va=te((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,o={},u=function(l){return(l=+l)+(l>68?1900:2e3)},c=function(l){return function(v){this[l]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(l){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var S=v.match(/([+-]|\d\d)/g),D=60*S[1]+(+S[2]||0);return D===0?0:S[0]==="+"?-D:D}(l)}],m=function(l){var v=o[l];return v&&(v.indexOf?v:v.s.concat(v.f))},g=function(l,v){var S,D=o.meridiem;if(D){for(var T=1;T<=24;T+=1)if(l.indexOf(D(T,0,v))>-1){S=T>12;break}}else S=l===(v?"pm":"PM");return S},b={A:[s,function(l){this.afternoon=g(l,!1)}],a:[s,function(l){this.afternoon=g(l,!0)}],S:[/\d/,function(l){this.milliseconds=100*+l}],SS:[i,function(l){this.milliseconds=10*+l}],SSS:[/\d{3}/,function(l){this.milliseconds=+l}],s:[a,c("seconds")],ss:[a,c("seconds")],m:[a,c("minutes")],mm:[a,c("minutes")],H:[a,c("hours")],h:[a,c("hours")],HH:[a,c("hours")],hh:[a,c("hours")],D:[a,c("day")],DD:[i,c("day")],Do:[s,function(l){var v=o.ordinal,S=l.match(/\d+/);if(this.day=S[0],v)for(var D=1;D<=31;D+=1)v(D).replace(/\[|\]/g,"")===l&&(this.day=D)}],M:[a,c("month")],MM:[i,c("month")],MMM:[s,function(l){var v=m("months"),S=(m("monthsShort")||v.map(function(D){return D.slice(0,3)})).indexOf(l)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[s,function(l){var v=m("months").indexOf(l)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(l){this.year=u(l)}],YYYY:[/\d{4}/,c("year")],Z:h,ZZ:h};function I(l){var v,S;v=l,S=o&&o.formats;for(var D=(l=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(G,P,U){var ie=U&&U.toUpperCase();return P||S[U]||r[U]||S[ie].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ge,R,A){return R||A.slice(1)})})).match(n),T=D.length,Y=0;Y<T;Y+=1){var _=D[Y],B=b[_],j=B&&B[0],W=B&&B[1];D[Y]=W?{regex:j,parser:W}:_.replace(/^\[|\]$/g,"")}return function(G){for(var P={},U=0,ie=0;U<T;U+=1){var ge=D[U];if(typeof ge=="string")ie+=ge.length;else{var R=ge.regex,A=ge.parser,C=G.slice(ie),d=R.exec(C)[0];A.call(P,d),G=G.replace(d,"")}}return function(f){var w=f.afternoon;if(w!==void 0){var q=f.hours;w?q<12&&(f.hours+=12):q===12&&(f.hours=0),delete f.afternoon}}(P),P}}return function(l,v,S){S.p.customParseFormat=!0,l&&l.parseTwoDigitYear&&(u=l.parseTwoDigitYear);var D=v.prototype,T=D.parse;D.parse=function(Y){var _=Y.date,B=Y.utc,j=Y.args;this.$u=B;var W=j[1];if(typeof W=="string"){var G=j[2]===!0,P=j[3]===!0,U=G||P,ie=j[2];P&&(ie=j[2]),o=this.$locale(),!G&&ie&&(o=S.Ls[ie]),this.$d=function(C,d,f){try{if(["x","X"].indexOf(d)>-1)return new Date((d==="X"?1e3:1)*C);var w=I(d)(C),q=w.year,x=w.month,$=w.day,z=w.hours,V=w.minutes,H=w.seconds,E=w.milliseconds,Z=w.zone,ce=new Date,me=$||(q||x?1:ce.getDate()),re=q||ce.getFullYear(),pe=0;q&&!x||(pe=x>0?x-1:ce.getMonth());var X=z||0,fe=V||0,Le=H||0,xe=E||0;return Z?new Date(Date.UTC(re,pe,me,X,fe,Le,xe+60*Z.offset*1e3)):f?new Date(Date.UTC(re,pe,me,X,fe,Le,xe)):new Date(re,pe,me,X,fe,Le,xe)}catch{return new Date("")}}(_,W,B),this.init(),ie&&ie!==!0&&(this.$L=this.locale(ie).$L),U&&_!=this.format(W)&&(this.$d=new Date("")),o={}}else if(W instanceof Array)for(var ge=W.length,R=1;R<=ge;R+=1){j[1]=W[R-1];var A=S.apply(this,j);if(A.isValid()){this.$d=A.$d,this.$L=A.$L,this.init();break}R===ge&&(this.$d=new Date(""))}else T.call(this,Y)}}})}),za=te((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,function(){var r="month",n="quarter";return function(i,a){var s=a.prototype;s.quarter=function(c){return this.$utils().u(c)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(c-1))};var o=s.add;s.add=function(c,h){return c=Number(c),this.$utils().p(h)===n?this.add(3*c,r):o.bind(this)(c,h)};var u=s.startOf;s.startOf=function(c,h){var m=this.$utils(),g=!!m.u(h)||h;if(m.p(c)===n){var b=this.quarter()-1;return g?this.month(3*b).startOf(r).startOf("day"):this.month(3*b+2).endOf(r).endOf("day")}return u.bind(this)(c,h)}}})}),Je=()=>global.crypto,Na=()=>{typeof window<"u"||(Je()||(global.crypto=ka("crypto")),!Je().getRandomValues&&Je().webcrypto&&(global.crypto.getRandomValues=Je().webcrypto.getRandomValues.bind(Je().webcrypto)))},Ya={};Ia(Ya,{escape:()=>Qe,getHighlightedSuggestion:()=>ts,highlightString:()=>es});function Ha(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Fn(r)}var Fn=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},it=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let i in this.definition){let a=this.definition[i].validate(r[i]);a&&n.push(`${i}: ${a}`)}if(n.length)throw Ha(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},oe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&J(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function he(e){return e===void 0}function Ba(e){return e===null}function J(e){return he(e)||Ba(e)}var N=class{constructor(e={}){this.config=e,this.value=new oe(e)}validate(e){return this.value.validate(e)||(Wa(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Wa(e){return he(e)||Un(e)}function Un(e){return typeof e=="number"&&!isNaN(e)}var K=class{constructor(e={}){this.value=new oe(e)}validate(e){return this.value.validate(e)||(Ga(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Ga(e){return he(e)||Mn(e)}function Mn(e){return typeof e=="boolean"}var Ja=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,F=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new oe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config;return this.value.validate(e)||(he(e)?null:dr(e)?!t&&!e.length?"value is an empty string.":r&&!Ja.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function dr(e){return Object.prototype.toString.call(e)==="[object String]"}var Q=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(he(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Tn(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&J(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Tn(e){return e!==void 0&&typeof e=="object"}var ue=class{constructor(e={}){this.config=e,this.value=new oe(this.config)}validate(e){if(!J(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(J(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&J(n)&&(r=`value is null or undefined: ${e.join(",")}`);let i=this.validatePrimitiveValue(n,this.config.each);i!==null&&(r+=" "+i)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Mn(e)||dr(e)||Un(e)||Tn(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Ka(e){return Array.isArray(e)}var mt=class{constructor(e){this.config=e,this.value=new oe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:he(e)||Object.values(this.config.enum).find(r=>r===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};we(Oa());function Tt(e){return e.trim()===""}var Za=new Set(["1",1,"yes",!0]);function Xa(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>Za.has(r))}function _n(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function es(e){if(Tt(e.openingDelimiter)||Tt(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(J(e.content)||Tt(e.content))return e.content;if(e.highlights.length===0)return Qe(e.content);let t=e.content.length,r="",n=0;for(let i=0;i<e.highlights.length;i++){let a=e.highlights[i],s=a.offset,o=s+a.length;if(o>t)break;r+=Qe(e.content.slice(n,s)),r+=e.openingDelimiter,r+=Qe(e.content.slice(s,o)),r+=e.closingDelimiter,n=o}return n!==t&&(r+=Qe(e.content.slice(n))),r}function ts(e,t){return e=Qe(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,i,a)=>n?_t(n,t.notMatchDelimiters):i?_t(i,t.exactMatchDelimiters):a?_t(a,t.correctionDelimiters):r)}function _t(e,t){return t?t.open+e+t.close:e}function Qe(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(e)?e.replace(i,a=>t[a]):e}function Vr(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ve(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Vr(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Vr(),extendedResults:{}}}we(Da());we(_a());function $n(e,t){return`https://${e}.cloud.coveo.com`}function jn(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,s=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:a,admin:s}}function zr(e){return $n("platform")}function rs(e){return $n("analytics")}var ns=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),is=(e,t)=>{let r=as(e);return r&&r.organizationId===t?r:null},as=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t!=null&&t.groups?t.groups:null},Pn=e=>e.success!==void 0,Oe=e=>e.error!==void 0,$t=()=>Math.random().toString(36).substring(7).split("").join(".");`${$t()}`,`${$t()}`;function ss(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function os(e){return ss(e)&&"type"in e&&typeof e.type=="string"}var Ln=Symbol.for("immer-nothing"),Nr=Symbol.for("immer-draftable"),ye=Symbol.for("immer-state");function be(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ze=Object.getPrototypeOf;function Ue(e){return!!e&&!!e[ye]}function De(e){var t;return e?Qn(e)||Array.isArray(e)||!!e[Nr]||!!((t=e.constructor)!=null&&t[Nr])||At(e)||Ot(e):!1}var us=Object.prototype.constructor.toString();function Qn(e){if(!e||typeof e!="object")return!1;let t=ze(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===us}function et(e,t){qt(e)===0?Object.entries(e).forEach(([r,n])=>{t(r,n,e)}):e.forEach((r,n)=>t(n,r,e))}function qt(e){let t=e[ye];return t?t.type_:Array.isArray(e)?1:At(e)?2:Ot(e)?3:0}function Wt(e,t){return qt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vn(e,t,r){let n=qt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function cs(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function At(e){return e instanceof Map}function Ot(e){return e instanceof Set}function Te(e){return e.copy_||e.base_}function Gt(e,t){if(At(e))return new Map(e);if(Ot(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Qn(e))return ze(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[ye];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let a=n[i],s=r[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(ze(e),r)}function hr(e,t=!1){return Dt(e)||Ue(e)||!De(e)||(qt(e)>1&&(e.set=e.add=e.clear=e.delete=ls),Object.freeze(e),t&&et(e,(r,n)=>hr(n,!0))),e}function ls(){be(2)}function Dt(e){return Object.isFrozen(e)}var ds={};function je(e){let t=ds[e];return t||be(0,e),t}var tt;function zn(){return tt}function hs(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Yr(e,t){t&&(je("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jt(e){Kt(e),e.drafts_.forEach(ps),e.drafts_=null}function Kt(e){e===tt&&(tt=e.parent_)}function Hr(e){return tt=hs(tt,e)}function ps(e){let t=e[ye];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Br(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[ye].modified_&&(Jt(t),be(4)),De(e)&&(e=yt(t,e),t.parent_||vt(t,e)),t.patches_&&je("Patches").generateReplacementPatches_(r[ye].base_,e,t.patches_,t.inversePatches_)):e=yt(t,r,[]),Jt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ln?e:void 0}function yt(e,t,r){if(Dt(t))return t;let n=t[ye];if(!n)return et(t,(i,a)=>Wr(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return vt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,a=i,s=!1;n.type_===3&&(a=new Set(i),i.clear(),s=!0),et(a,(o,u)=>Wr(e,n,i,o,u,r,s)),vt(e,i,!1),r&&e.patches_&&je("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Wr(e,t,r,n,i,a,s){if(Ue(i)){let o=a&&t&&t.type_!==3&&!Wt(t.assigned_,n)?a.concat(n):void 0,u=yt(e,i,o);if(Vn(r,n,u),Ue(u))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(De(i)&&!Dt(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;yt(e,i),(!t||!t.scope_.parent_)&&vt(e,i)}}function vt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hr(t,r)}function fs(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:zn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=pr;r&&(i=[n],a=rt);let{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var pr={get(e,t){if(t===ye)return e;let r=Te(e);if(!Wt(r,t))return gs(e,r,t);let n=r[t];return e.finalized_||!De(n)?n:n===jt(e.base_,t)?(Pt(e),e.copy_[t]=Xt(n,e)):n},has(e,t){return t in Te(e)},ownKeys(e){return Reflect.ownKeys(Te(e))},set(e,t,r){let n=Nn(Te(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let i=jt(Te(e),t),a=i==null?void 0:i[ye];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(cs(r,i)&&(r!==void 0||Wt(e.base_,t)))return!0;Pt(e),Zt(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return jt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Pt(e),Zt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Te(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){be(11)},getPrototypeOf(e){return ze(e.base_)},setPrototypeOf(){be(12)}},rt={};et(pr,(e,t)=>{rt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});rt.deleteProperty=function(e,t){return rt.set.call(this,e,t,void 0)};rt.set=function(e,t,r){return pr.set.call(this,e[0],t,r,e[0])};function jt(e,t){let r=e[ye];return(r?Te(r):e)[t]}function gs(e,t,r){var i;let n=Nn(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function Nn(e,t){if(!(t in e))return;let r=ze(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ze(r)}}function Zt(e){e.modified_||(e.modified_=!0,e.parent_&&Zt(e.parent_))}function Pt(e){e.copy_||(e.copy_=Gt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ms=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let s=this;return function(o=a,...u){return s.produce(o,c=>r.call(this,c,...u))}}typeof r!="function"&&be(6),n!==void 0&&typeof n!="function"&&be(7);let i;if(De(t)){let a=Hr(this),s=Xt(t,void 0),o=!0;try{i=r(s),o=!1}finally{o?Jt(a):Kt(a)}return Yr(a,n),Br(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===Ln&&(i=void 0),this.autoFreeze_&&hr(i,!0),n){let a=[],s=[];je("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else be(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,o=>t(o,...s));let n,i;return[this.produce(t,r,(a,s)=>{n=a,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){De(e)||be(8),Ue(e)&&(e=Yn(e));let t=Hr(this),r=Xt(e,void 0);return r[ye].isManual_=!0,Kt(t),r}finishDraft(e,t){let r=e&&e[ye];(!r||!r.isManual_)&&be(9);let{scope_:n}=r;return Yr(n,t),Br(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));let n=je("Patches").applyPatches_;return Ue(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Xt(e,t){let r=At(e)?je("MapSet").proxyMap_(e,t):Ot(e)?je("MapSet").proxySet_(e,t):fs(e,t);return(t?t.scope_:zn()).drafts_.push(r),r}function Yn(e){return Ue(e)||be(10,e),Hn(e)}function Hn(e){if(!De(e)||Dt(e))return e;let t=e[ye],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Gt(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Gt(e,!0);return et(r,(n,i)=>{Vn(r,n,Hn(i))}),t&&(t.finalized_=!1),r}var ve=new ms,Bn=ve.produce;ve.produceWithPatches.bind(ve);ve.setAutoFreeze.bind(ve);ve.setUseStrictShallowCopy.bind(ve);ve.applyPatches.bind(ve);ve.createDraft.bind(ve);ve.finishDraft.bind(ve);function ys(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vs(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ss(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Gr=e=>Array.isArray(e)?e:[e];function ws(e){let t=Array.isArray(e[0])?e[0]:e;return Ss(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function bs(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var ks=class{constructor(e){this.value=e}deref(){return this.value}},Is=typeof WeakRef<"u"?WeakRef:ks,Cs=0,Jr=1;function ut(){return{s:Cs,v:void 0,o:null,p:null}}function fr(e,t={}){let r=ut(),{resultEqualityCheck:n}=t,i,a=0;function s(){var m;let o=r,{length:u}=arguments;for(let g=0,b=u;g<b;g++){let I=arguments[g];if(typeof I=="function"||typeof I=="object"&&I!==null){let l=o.o;l===null&&(o.o=l=new WeakMap);let v=l.get(I);v===void 0?(o=ut(),l.set(I,o)):o=v}else{let l=o.p;l===null&&(o.p=l=new Map);let v=l.get(I);v===void 0?(o=ut(),l.set(I,o)):o=v}}let c=o,h;if(o.s===Jr?h=o.v:(h=e.apply(null,arguments),a++),c.s=Jr,n){let g=((m=i==null?void 0:i.deref)==null?void 0:m.call(i))??i;g!=null&&n(g,h)&&(h=g,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new Is(h):h}return c.v=h,h}return s.clearCache=()=>{r=ut(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Wn(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),ys(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);let h={...r,...u},{memoize:m,memoizeOptions:g=[],argsMemoize:b=fr,argsMemoizeOptions:I=[],devModeChecks:l={}}=h,v=Gr(g),S=Gr(I),D=ws(i),T=m(function(){return a++,c.apply(null,arguments)},...v),Y=b(function(){s++;let _=bs(D,arguments);return o=T.apply(null,_),o},...S);return Object.assign(Y,{resultFunc:c,memoizedResultFunc:T,dependencies:D,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:b})};return Object.assign(n,{withTypes:()=>n}),n}var gr=Wn(fr),qs=Object.assign((e,t=gr)=>{vs(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((a,s,o)=>(a[r[o]]=s,a),{}))},{withTypes:()=>qs}),As=(...e)=>{let t=Wn(...e),r=Object.assign((...n)=>{let i=t(...n),a=(s,...o)=>i(Ue(s)?Yn(s):s,...o);return Object.assign(a,i),a},{withTypes:()=>r});return r};As(fr);var Os=e=>e&&typeof e.match=="function";function k(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Pe(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>os(n)&&n.type===e,r}function Kr(e){return De(e)?Bn(e,()=>{}):e}function Ds(e){let t={},r=[],n,i={addCase(a,s){let o=typeof a=="string"?a:a.type;if(!o)throw new Error(Pe(28));if(o in t)throw new Error(Pe(29));return t[o]=s,i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function xs(e){return typeof e=="function"}function Ie(e,t){let[r,n,i]=Ds(t),a;if(xs(e))a=()=>Kr(e());else{let o=Kr(e);a=()=>o}function s(o=a(),u){let c=[r[u.type],...n.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[i]),c.reduce((h,m)=>{if(m)if(Ue(h)){let g=m(h,u);return g===void 0?h:g}else{if(De(h))return Bn(h,g=>m(g,u));{let g=m(h,u);if(g===void 0){if(h===null)return h;throw new Error(Pe(9))}return g}}return h},o)}return s.getInitialState=a,s}var Es="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Gn=(e=21)=>{let t="",r=e;for(;r--;)t+=Es[Math.random()*64|0];return t},Rs=(e,t)=>Os(e)?e.match(t):e(t);function Fs(...e){return t=>e.some(r=>Rs(r,t))}var Us=["name","message","stack","code"],Lt=class{constructor(e,t){En(this,"_type"),this.payload=e,this.meta=t}},Zr=class{constructor(e,t){En(this,"_type"),this.payload=e,this.meta=t}},Ms=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Us)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},ne=(()=>{function e(t,r,n){let i=k(t+"/fulfilled",(u,c,h,m)=>({payload:u,meta:{...m||{},arg:h,requestId:c,requestStatus:"fulfilled"}})),a=k(t+"/pending",(u,c,h)=>({payload:void 0,meta:{...h||{},arg:c,requestId:u,requestStatus:"pending"}})),s=k(t+"/rejected",(u,c,h,m,g)=>({payload:m,error:(n&&n.serializeError||Ms)(u||"Rejected"),meta:{...g||{},arg:h,requestId:c,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"}}));function o(u){return(c,h,m)=>{let g=n!=null&&n.idGenerator?n.idGenerator(u):Gn(),b=new AbortController,I,l;function v(D){l=D,b.abort()}let S=async function(){var T,Y;let D;try{let _=(T=n==null?void 0:n.condition)==null?void 0:T.call(n,u,{getState:h,extra:m});if(_s(_)&&(_=await _),_===!1||b.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let B=new Promise((j,W)=>{I=()=>{W({name:"AbortError",message:l||"Aborted"})},b.signal.addEventListener("abort",I)});c(a(g,u,(Y=n==null?void 0:n.getPendingMeta)==null?void 0:Y.call(n,{requestId:g,arg:u},{getState:h,extra:m}))),D=await Promise.race([B,Promise.resolve(r(u,{dispatch:c,getState:h,extra:m,requestId:g,signal:b.signal,abort:v,rejectWithValue:(j,W)=>new Lt(j,W),fulfillWithValue:(j,W)=>new Zr(j,W)})).then(j=>{if(j instanceof Lt)throw j;return j instanceof Zr?i(j.payload,g,u,j.meta):i(j,g,u)})])}catch(_){D=_ instanceof Lt?s(null,g,u,_.payload,_.meta):s(_,g,u)}finally{I&&b.signal.removeEventListener("abort",I)}return n&&!n.dispatchConditionRejection&&s.match(D)&&D.meta.condition||c(D),D}();return Object.assign(S,{abort:v,requestId:g,arg:u,unwrap(){return S.then(Ts)}})}}return Object.assign(o,{pending:a,rejected:s,fulfilled:i,settled:Fs(s,i),typePrefix:t})}return e.withTypes=()=>e,e})();function Ts(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function _s(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var $s=(e,t)=>{if(typeof e!="function")throw new Error(Pe(32))},mr="listenerMiddleware",js=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=k(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Pe(21));return $s(a),{predicate:i,type:t,effect:a}},Ps=Object.assign(e=>{let{type:t,predicate:r,effect:n}=js(e);return{id:Gn(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pe(22))}}},{withTypes:()=>Ps}),Ls=Object.assign(k(`${mr}/add`),{withTypes:()=>Ls});k(`${mr}/removeAll`);var Qs=Object.assign(k(`${mr}/remove`),{withTypes:()=>Qs});function Pe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var M=new F({required:!0,emptyAllowed:!1}),ae=new F({required:!1,emptyAllowed:!1}),ke=new F({required:!0,emptyAllowed:!0});new F({required:!1,emptyAllowed:!0});var Vs=new ue({each:M,required:!0}),zs=new F({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Ye=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),He=(e,t)=>{if("required"in t)return{payload:new it({value:t}).validate({value:e}).value};let r=new Q({options:{required:!0},values:t}).validate(e);if(r)throw new Fn(r);return{payload:e}},O=(e,t)=>{try{return He(e,t)}catch(r){return{payload:e,error:Ye(r)}}},yr="2.63.4",Ns=["@coveo/atomic","@coveo/quantic"],Qt=()=>ae,Jn=()=>M,Ys=k("configuration/updateBasicConfiguration",e=>O(e,{accessToken:ae,organizationId:ae,platformUrl:ae})),vr=k("configuration/updateSearchConfiguration",e=>O(e,{apiBaseUrl:ae,pipeline:new F({required:!1,emptyAllowed:!0}),searchHub:ae,timezone:ae,locale:ae,authenticationProviders:new ue({required:!1,each:M})})),Hs={enabled:new K({default:!0}),originContext:Qt(),originLevel2:Qt(),originLevel3:Qt(),apiBaseUrl:ae,nextApiBaseUrl:ae,runtimeEnvironment:new oe,anonymous:new K({default:!1}),deviceId:ae,userDisplayName:ae,documentLocation:ae,trackingId:ae,analyticsMode:new F({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new Q({options:{required:!1},values:Ns.reduce((e,t)=>(e[t]=zs,e),{})})},Bs=k("configuration/updateAnalyticsConfiguration",e=>(Xa()&&(e.enabled=!1),O(e,Hs))),Ws=k("configuration/analytics/disable"),Gs=k("configuration/analytics/enable"),Js=k("configuration/analytics/originlevel2",e=>O(e,{originLevel2:Jn()})),Ks=k("configuration/analytics/originlevel3",e=>O(e,{originLevel3:Jn()})),Zs={q:new F,enableQuerySyntax:new K,aq:new F,cq:new F,firstResult:new N({min:0}),numberOfResults:new N({min:0}),sortCriteria:new F,f:new Q,fExcluded:new Q,cf:new Q,nf:new Q,df:new Q,debug:new K,sf:new Q,tab:new F,af:new Q},xt=k("searchParameters/restore",e=>O(e,Zs)),Xs=k("debug/enable"),eo=k("debug/disable"),Kn=()=>!1;Ie(Kn(),e=>{e.addCase(Xs,()=>!0).addCase(eo,()=>!1).addCase(xt,(t,r)=>r.payload.debug??t)});var to=k("pipeline/set",e=>O(e,new F({required:!0,emptyAllowed:!0}))),ro=k("history/undo"),no=k("history/redo"),Ee=k("history/snapshot");ne("history/back",async(e,{dispatch:t})=>{t(ro()),await t(Me())});ne("history/forward",async(e,{dispatch:t})=>{t(no()),await t(Me())});var Me=ne("history/change",async(e,{getState:t})=>t().history.present),Zn=()=>"";Ie(Zn(),e=>{e.addCase(to,(t,r)=>r.payload).addCase(Me.fulfilled,(t,r)=>{var n;return((n=r.payload)==null?void 0:n.pipeline)??t}).addCase(vr,(t,r)=>r.payload.pipeline||t)});function qe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function p(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(h){try{c(n.next(h))}catch(m){s(m)}}function u(h){try{c(n.throw(h))}catch(m){s(m)}}function c(h){h.done?a(h.value):i(h.value).then(o,u)}c((n=n.apply(e,[])).next())})}var L;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(L||(L={}));function Xr(){return typeof window<"u"}function Sr(){return typeof navigator<"u"}function er(){return typeof document<"u"}function tr(){try{return typeof localStorage<"u"}catch{return!1}}function io(){try{return typeof sessionStorage<"u"}catch{return!1}}function Xn(){return Sr()&&navigator.cookieEnabled}var ao=[L.click,L.custom,L.search,L.view],so=(e,t)=>ao.indexOf(e)!==-1?Object.assign({language:er()?document.documentElement.lang:"unknown",userAgent:Sr()?navigator.userAgent:"unknown"},t):t,Vt=class ei{static set(t,r,n){var i,a,s,o;n&&(a=new Date,a.setTime(a.getTime()+n)),o=window.location.hostname,o.indexOf(".")===-1?en(t,r,a):(s=o.split("."),i=s[s.length-2]+"."+s[s.length-1],en(t,r,a,i))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var a=n[i];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){ei.set(t,"",-1)}};function en(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function oo(){return tr()?localStorage:Xn()?new wr:io()?sessionStorage:new Et}var wr=class ht{getItem(t){return Vt.get(`${ht.prefix}${t}`)}removeItem(t){Vt.erase(`${ht.prefix}${t}`)}setItem(t,r,n){Vt.set(`${ht.prefix}${t}`,r,n)}};wr.prefix="coveo_";var uo=class{constructor(){this.cookieStorage=new wr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},Et=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Ze="__coveo.analytics.history",ti=20,ri=1e3*60,ni=75,St=class{constructor(e){this.store=e||oo()}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return p(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return p(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(Ze);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return p(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(Ze);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(Ze,JSON.stringify(e.slice(0,ti)))}catch{}}clear(){try{this.store.removeItem(Ze)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((t,r)=>(r.internalTime||0)-(t.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,ni)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>ri:!0}stripInternalTime(e){return Array.isArray(e)?e.map(t=>{let{name:r,time:n,value:i}=t;return{name:r,time:n,value:i}}):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(t=>this.stripEmptyQuery(t))}},co=Object.freeze({__proto__:null,HistoryStore:St,MAX_NUMBER_OF_HISTORY_ELEMENTS:ti,MAX_VALUE_SIZE:ni,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:ri,STORE_KEY:Ze,default:St}),lo=(e,t)=>p(void 0,void 0,void 0,function*(){return e===L.view?(yield ho(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),ho=e=>p(void 0,void 0,void 0,function*(){let t=new St,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),ct,po=new Uint8Array(16);function fo(){if(!ct&&(ct=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ct))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ct(po)}var go=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wt(e){return typeof e=="string"&&go.test(e)}var se=[];for(let e=0;e<256;++e)se.push((e+256).toString(16).slice(1));function ii(e,t=0){return(se[e[t+0]]+se[e[t+1]]+se[e[t+2]]+se[e[t+3]]+"-"+se[e[t+4]]+se[e[t+5]]+"-"+se[e[t+6]]+se[e[t+7]]+"-"+se[e[t+8]]+se[e[t+9]]+"-"+se[e[t+10]]+se[e[t+11]]+se[e[t+12]]+se[e[t+13]]+se[e[t+14]]+se[e[t+15]]).toLowerCase()}function mo(e){if(!wt(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function yo(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var vo="6ba7b810-9dad-11d1-80b4-00c04fd430c8",So="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function wo(e,t,r){function n(i,a,s,o){var u;if(typeof i=="string"&&(i=yo(i)),typeof a=="string"&&(a=mo(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,s){o=o||0;for(let h=0;h<16;++h)s[o+h]=c[h];return s}return ii(c)}try{n.name=e}catch{}return n.DNS=vo,n.URL=So,n}var bo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tn={randomUUID:bo};function zt(e,t,r){if(tn.randomUUID&&!t&&!e)return tn.randomUUID();e=e||{};let n=e.random||(e.rng||fo)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ii(n)}function ko(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Nt(e,t){return e<<t|e>>>32-t}function Io(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let o=0;o<s.length;++o)e.push(s.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let s=0;s<i;++s){let o=new Uint32Array(16);for(let u=0;u<16;++u)o[u]=e[s*64+u*4]<<24|e[s*64+u*4+1]<<16|e[s*64+u*4+2]<<8|e[s*64+u*4+3];a[s]=o}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<i;++s){let o=new Uint32Array(80);for(let b=0;b<16;++b)o[b]=a[s][b];for(let b=16;b<80;++b)o[b]=Nt(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);let u=r[0],c=r[1],h=r[2],m=r[3],g=r[4];for(let b=0;b<80;++b){let I=Math.floor(b/20),l=Nt(u,5)+ko(I,c,h,m)+g+t[I]+o[b]>>>0;g=m,m=h,h=Nt(c,30)>>>0,c=u,u=l}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Co=wo("v5",80,Io),rn=Co,ai="2.30.2",qo={pageview:"pageview",event:"event"},bt=class rr{constructor(t,r){if(!wt(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>rr.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(i=>new RegExp(i.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return wt(a)?new rr(a,Number.parseInt(i)*1e3):null}};bt.cvo_cid="cvo_cid";bt.expirationTime=120;var Ce=Object.keys;function lt(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var nn={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Ao=Ce(nn).map(e=>nn[e]),Oo=[...Ao].join("|"),Do=new RegExp(`^(${Oo}$)`),xo={svcAction:"svc_action",svcActionData:"svc_action_data"},Eo=e=>Do.test(e),Ro=[Eo],an={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},sn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},de={action:"pa",list:"pal",listSource:"pls"},kt={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Fo=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],nr={id:"quoteId",affiliation:"quoteAffiliation"},ir={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Uo={add:de,bookmark_add:de,bookmark_remove:de,click:de,checkout:de,checkout_option:de,detail:de,impression:de,remove:de,refund:Object.assign(Object.assign({},de),kt),purchase:Object.assign(Object.assign({},de),kt),quickview:de,quote:Object.assign(Object.assign({},de),nr),review:Object.assign(Object.assign({},de),ir)},Mo=Ce(an).map(e=>an[e]),To=Ce(sn).map(e=>sn[e]),_o=Ce(de).map(e=>de[e]),$o=Ce(kt).map(e=>kt[e]),jo=Ce(ir).map(e=>ir[e]),Po=Ce(nr).map(e=>nr[e]),Lo=[...Mo,"custom"].join("|"),Qo=[...To,"custom"].join("|"),si="(pr[0-9]+)",oi="(il[0-9]+pi[0-9]+)",Vo=new RegExp(`^${si}(${Lo})$`),zo=new RegExp(`^(${oi}(${Qo}))|(il[0-9]+nm)$`),No=new RegExp(`^(${_o.join("|")})$`),Yo=new RegExp(`^(${$o.join("|")})$`),Ho=new RegExp(`^${si}custom$`),Bo=new RegExp(`^${oi}custom$`),Wo=new RegExp(`^(${[...Fo,...jo,...Po].join("|")})$`),Go=e=>Vo.test(e),Jo=e=>zo.test(e),Ko=e=>No.test(e),Zo=e=>Yo.test(e),Xo=e=>Wo.test(e),eu=[Jo,Go,Ko,Zo,Xo],tu=[Ho,Bo],ru={anonymizeIp:"aip"},nu={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},iu={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},au=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],su=Object.assign(Object.assign(Object.assign(Object.assign({},ru),nu),iu),au.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),ar=Object.assign(Object.assign({},su),xo),ou=e=>{let t=!!e.action&&Uo[e.action]||{};return Ce(e).reduce((r,n)=>{let i=t[n]||ar[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})},{})},uu=Ce(ar).map(e=>ar[e]),cu=e=>uu.indexOf(e)!==-1,lu=e=>e==="custom",du=e=>[...eu,...Ro,cu,lu].some(t=>t(e)),hu=e=>Ce(e).reduce((t,r)=>{let n=pu(r);return n?Object.assign(Object.assign({},t),fu(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),pu=e=>{let t;return[...tu].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},fu=(e,t)=>Ce(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),gu=class{constructor(e){this.opts=e}sendEvent(e,t){return p(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),o=this.encodeForEventType(e,s),u=new Blob([o],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,u)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return p(this,void 0,void 0,function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:s,body:o}=a;n=s||e;try{i=JSON.parse(o)}catch(u){console.error("Unable to process the request body as a JSON string",u)}}return{payload:i,url:n}})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return p(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(i=>!!i).join("&")})}isEventTypeLegacy(e){return[L.click,L.custom,L.search,L.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},mu=class{sendEvent(e,t){return p(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return p(this,void 0,void 0,function*(){return Promise.resolve()})}},on=window.fetch,ui=class{constructor(e){this.opts=e}sendEvent(e,t){return p(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},o=Object.assign(Object.assign({},s),i?yield i(s,"analyticsFetch"):{}),{url:u}=o,c=qe(o,["url"]),h;try{h=yield on(u,c)}catch(m){console.error("An error has occured when sending the event.",m);return}if(h.ok){let m=yield h.json();return m.visitorId&&n.setCurrentVisitorId(m.visitorId),m}else{try{h.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,h,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return p(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield on(t,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return[L.click,L.custom,L.search,L.view].indexOf(e)!==-1}getVisitorIdParam(){return p(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},yu=class{constructor(e,t){tr()&&Xn()?this.storage=new uo:tr()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Et),this.client=new ui(e),this.beaconClient=new gu(e),window.addEventListener("beforeunload",()=>{let r=t();for(let{eventType:n,payload:i}of r)this.beaconClient.sendEvent(n,i)})}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},vu=class{constructor(e,t){this.storage=t||new Et,this.client=new ui(e)}getClientDependingOnEventType(e){return this.client}},ci=class{constructor(){this.storage=new Et,this.client=new mu}getClientDependingOnEventType(e){return this.client}},Su="xx",wu=e=>(e==null?void 0:e.startsWith(Su))||!1,bu=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function ku(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Iu=["1",1,"yes",!0];function sr(){return Sr()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Iu.indexOf(e)!==-1)}var li="v15",di={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Cu(e=di.default,t=li,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var qu="38824e1f-37f5-42d3-8372-a4b8fa9df946",pt=class{get defaultOptions(){return{endpoint:di.default,isCustomEndpoint:!1,token:"",version:li,beforeSendHooks:[],afterSendHooks:[]}}get version(){return ai}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[lo,so].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};sr()?this.runtime=new ci:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(L.view,{newEventType:L.view,addClientIdParameter:!0}),this.addEventTypeMapping(L.click,{newEventType:L.click,addClientIdParameter:!0}),this.addEventTypeMapping(L.custom,{newEventType:L.custom,addClientIdParameter:!0}),this.addEventTypeMapping(L.search,{newEventType:L.search,addClientIdParameter:!0})}initRuntime(e){return Xr()&&er()?new yu(e,()=>{let t=[...this.bufferedRequests];return this.bufferedRequests=[],t}):(ku()&&console.warn(bu),new vu(e))}get storage(){return this.runtime.storage}determineVisitorId(){return p(this,void 0,void 0,function*(){try{return Xr()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||zt()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),zt()}})}getCurrentVisitorId(){return p(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return p(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,t){return p(this,void 0,void 0,function*(){if(wt(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(rn(e,rn(t,qu)))}})}getParameters(e,...t){return p(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return p(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(zt()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(sr())return null;try{let t=new URL(e).searchParams.get(bt.cvo_cid);if(t==null)return null;let r=bt.fromString(t);return!r||!er()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return p(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[s=>r.length>0?this.parseVariableArgumentsPayload(r,s):s[0],s=>p(this,void 0,void 0,function*(){return Object.assign(Object.assign({},s),{visitorId:n?yield this.getCurrentVisitorId():""})}),s=>p(this,void 0,void 0,function*(){return a?Object.assign(Object.assign({},s),{clientId:yield this.getCurrentVisitorId()}):s}),s=>i?this.ensureAnonymousUserWhenUsingApiKey(s):s,s=>this.beforeSendHooks.reduce((o,u)=>p(this,void 0,void 0,function*(){let c=yield o;return yield u(e,c)}),s)].reduce((s,o)=>p(this,void 0,void 0,function*(){let u=yield s;return yield o(u)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return p(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[n=>this.setTrackingIdIfTrackingIdNotPresent(n),n=>this.removeEmptyPayloadValues(n,e),n=>this.validateParams(n,e),n=>r?ou(n):n,n=>r?this.removeUnknownParameters(n):n,n=>r?this.processCustomParameters(n):this.mapCustomParametersToCustomData(n)].reduce((n,i)=>p(this,void 0,void 0,function*(){let a=yield n;return yield i(a)}),Promise.resolve(t))})}makeEvent(e,...t){return p(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:a=>p(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),a)}),yield Promise.all(this.afterSendHooks.map(s=>s(e,Object.assign(Object.assign({},n),a)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...t){return p(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...t)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return p(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new St().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return p(this,void 0,void 0,function*(){return this.makeEvent(L.search,e)})}sendSearchEvent(e){var{searchQueryUid:t}=e,r=qe(e,["searchQueryUid"]);return p(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})})}makeClickEvent(e){return p(this,void 0,void 0,function*(){return this.makeEvent(L.click,e)})}sendClickEvent(e){var{searchQueryUid:t}=e,r=qe(e,["searchQueryUid"]);return p(this,void 0,void 0,function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})})}makeCustomEvent(e){return p(this,void 0,void 0,function*(){return this.makeEvent(L.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=qe(e,["lastSearchQueryUid"]);return p(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})})}makeViewEvent(e){return p(this,void 0,void 0,function*(){return this.makeEvent(L.view,e)})}sendViewEvent(e){return p(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return p(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return p(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(t=>typeof t=="string"))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let a=t[n];if(typeof a=="string")r[e[n]]=a;else if(typeof a=="object")return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return({[L.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=n=>typeof n<"u"&&n!==null&&n!=="";return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:e[i]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(t=>{if(du(t))return!0;console.log(t,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=qe(e,["custom"]),n={};t&&lt(t)&&(n=this.lowercaseKeys(t));let i=hu(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=qe(e,["custom"]);if(t&&lt(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach(n=>{r[n.toLowerCase()]=e[n]}),r}validateParams(e,t){let{anonymizeIp:r}=e,n=qe(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==L.view||t==L.click||t==L.search||t==L.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==L.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=qe(e,["userId"]);return wu(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=qe(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&lt(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&lt(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return Cu(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Ae;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Ae||(Ae={}));var y;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(y||(y={}));var un={[y.triggerNotify]:"queryPipelineTriggers",[y.triggerExecute]:"queryPipelineTriggers",[y.triggerQuery]:"queryPipelineTriggers",[y.triggerRedirect]:"queryPipelineTriggers",[y.queryError]:"errors",[y.queryErrorBack]:"errors",[y.queryErrorClear]:"errors",[y.queryErrorRetry]:"errors",[y.pagerNext]:"getMoreResults",[y.pagerPrevious]:"getMoreResults",[y.pagerNumber]:"getMoreResults",[y.pagerResize]:"getMoreResults",[y.pagerScrolling]:"getMoreResults",[y.facetSearch]:"facet",[y.facetShowLess]:"facet",[y.facetShowMore]:"facet",[y.recommendation]:"recommendation",[y.likeSmartSnippet]:"smartSnippet",[y.dislikeSmartSnippet]:"smartSnippet",[y.expandSmartSnippet]:"smartSnippet",[y.collapseSmartSnippet]:"smartSnippet",[y.openSmartSnippetFeedbackModal]:"smartSnippet",[y.closeSmartSnippetFeedbackModal]:"smartSnippet",[y.sendSmartSnippetReason]:"smartSnippet",[y.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[y.clearRecentQueries]:"recentQueries",[y.recentResultClick]:"recentlyClickedDocuments",[y.clearRecentResults]:"recentlyClickedDocuments",[y.showLessFoldedResults]:"folding",[y.caseDetach]:"case",[y.likeGeneratedAnswer]:"generatedAnswer",[y.dislikeGeneratedAnswer]:"generatedAnswer",[y.openGeneratedAnswerSource]:"generatedAnswer",[y.generatedAnswerStreamEnd]:"generatedAnswer",[y.generatedAnswerSourceHover]:"generatedAnswer",[y.generatedAnswerCopyToClipboard]:"generatedAnswer",[y.generatedAnswerHideAnswers]:"generatedAnswer",[y.generatedAnswerShowAnswers]:"generatedAnswer",[y.generatedAnswerExpand]:"generatedAnswer",[y.generatedAnswerCollapse]:"generatedAnswer",[y.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Ae.expandToFullUI]:"interface",[Ae.openUserActions]:"User Actions",[Ae.showPrecedingSessions]:"User Actions",[Ae.showFollowingSessions]:"User Actions",[Ae.clickViewedDocument]:"User Actions",[Ae.clickPageView]:"User Actions",[Ae.createArticle]:"createArticle"},cn=class{constructor(){this.runtime=new ci,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(L.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(L.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(L.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(L.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return ai}};function Au(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function Ou(e){return e.map(t=>t.replace(/;/g,""))}function hi(e){let t=e.join(";");return t.length<=256?t:hi(e.slice(1))}var ln=e=>{let t=Ou(e),r=Au(t);return hi(r)};function dn(e){let t=typeof e.partialQueries=="string"?e.partialQueries:ln(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:ln(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var pi=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||sr();this.coveoAnalyticsClient=r?new cn:new pt(e)}disable(){this.coveoAnalyticsClient=new cn}enable(){this.coveoAnalyticsClient=new pt(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(y.interfaceLoad)}logInterfaceLoad(){return p(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(y.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return p(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(y.recommendation)}logRecommendation(){return p(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,t){return this.makeClickEvent(y.recommendationOpen,e,t)}logRecommendationOpen(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(y.staticFilterClearAll,e)}logStaticFilterClearAll(e){return p(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(y.staticFilterSelect,e)}logStaticFilterSelect(e){return p(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(y.staticFilterDeselect,e)}logStaticFilterDeselect(e){return p(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(y.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return p(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(y.interfaceChange,e)}logInterfaceChange(e){return p(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(y.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return p(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(y.didyoumeanClick)}logDidYouMeanClick(){return p(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(y.resultsSort,e)}logResultsSort(e){return p(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(y.searchboxSubmit)}logSearchboxSubmit(){return p(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(y.searchboxClear)}logSearchboxClear(){return p(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(y.searchboxAsYouType)}logSearchboxAsYouType(){return p(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(y.breadcrumbFacet,e)}logBreadcrumbFacet(e){return p(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(y.breadcrumbResetAll)}logBreadcrumbResetAll(){return p(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,t){return this.makeClickEvent(y.documentQuickview,e,t)}logDocumentQuickview(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,t){return this.makeClickEvent(y.documentOpen,e,t)}logDocumentOpen(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(y.omniboxAnalytics,dn(e))}logOmniboxAnalytics(e){return p(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(y.omniboxFromLink,dn(e))}logOmniboxFromLink(e){return p(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(y.searchFromLink)}logSearchFromLink(){return p(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(y.triggerNotify,e)}logTriggerNotify(e){return p(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(y.triggerExecute,e)}logTriggerExecute(e){return p(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(y.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return p(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(y.undoTriggerQuery,e)}logUndoTriggerQuery(e){return p(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(y.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return p(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(y.pagerResize,e)}logPagerResize(e){return p(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(y.pagerNumber,e)}logPagerNumber(e){return p(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(y.pagerNext,e)}logPagerNext(e){return p(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(y.pagerPrevious,e)}logPagerPrevious(e){return p(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(y.pagerScrolling)}logPagerScrolling(){return p(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(y.facetClearAll,e)}logFacetClearAll(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(y.facetSearch,e)}logFacetSearch(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(y.facetSelect,e)}logFacetSelect(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(y.facetDeselect,e)}logFacetDeselect(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(y.facetExclude,e)}logFacetExclude(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(y.facetUnexclude,e)}logFacetUnexclude(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(y.facetSelectAll,e)}logFacetSelectAll(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(y.facetUpdateSort,e)}logFacetUpdateSort(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(y.facetShowMore,e)}logFacetShowMore(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(y.facetShowLess,e)}logFacetShowLess(e){return p(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(y.queryError,e)}logQueryError(e){return p(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return p(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorBack);return{description:e.description,log:()=>p(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorBack)})}})}logQueryErrorBack(){return p(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return p(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorRetry);return{description:e.description,log:()=>p(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorRetry)})}})}logQueryErrorRetry(){return p(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return p(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(y.queryErrorClear);return{description:e.description,log:()=>p(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(y.queryErrorClear)})}})}logQueryErrorClear(){return p(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(y.likeSmartSnippet)}logLikeSmartSnippet(){return p(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(y.dislikeSmartSnippet)}logDislikeSmartSnippet(){return p(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(y.expandSmartSnippet)}logExpandSmartSnippet(){return p(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(y.collapseSmartSnippet)}logCollapseSmartSnippet(){return p(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(y.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return p(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(y.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return p(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(y.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(y.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return p(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(y.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return p(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(y.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return p(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(y.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return p(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(y.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(y.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(y.copyToClipboard,e,t)}logCopyToClipboard(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(y.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(y.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(y.recentQueryClick)}logRecentQueryClick(){return p(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(y.clearRecentQueries)}logClearRecentQueries(){return p(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,t){return this.makeCustomEvent(y.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(y.clearRecentResults)}logClearRecentResults(){return p(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(y.noResultsBack)}logNoResultsBack(){return p(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(y.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(y.showLessFoldedResults)}logShowLessFoldedResults(){return p(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=un[e]){return p(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:s})=>a.log({lastSearchQueryUid:s})}})}logCustomEvent(e,t,r=un[e]){return p(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,t,r){return p(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:s})=>a.log({lastSearchQueryUid:s})}})}logCustomEventWithType(e,t,r){return p(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,t){return p(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,t){return p(this,void 0,void 0,function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:i})=>n.log({searchQueryUid:i})}})}makeClickEvent(e,t,r,n){return p(this,void 0,void 0,function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:s})=>a.log({searchQueryUid:s})}})}logClickEvent(e,t,r,n){return p(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){var r,n;return p(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return p(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof pt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(y.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return p(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(y.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return p(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(y.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return p(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(y.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(y.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(y.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(y.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(y.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(y.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(y.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(y.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return p(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(y.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return p(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(y.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return p(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},hn=Object.assign({},qo);Object.keys(hn).map(e=>hn[e]);var pn;(function(e){e.click="click",e.flowStart="flowStart"})(pn||(pn={}));var fn;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(fn||(fn={}));var gn;(function(e){e.quit="Quit",e.solved="Solved"})(gn||(gn={}));var at=e=>new pt(e).getCurrentVisitorId(),Be=new co.HistoryStore,fi=(e,t)=>typeof t=="function"?(...r)=>{let n=_n(r[0]);try{return t.apply(t,r)}catch(i){return e.error(i,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,gi=(e,t)=>(...r)=>{let n=_n(r[1]);try{return t.apply(t,r)}catch(i){return e.error(i,"Error in analytics hook. Returning original request."),n}},mi=gr(e=>e.source,e=>[`@coveo/headless@${yr}`].concat(Object.entries(e).map(([t,r])=>`${t}@${r}`)));function yi(){return{desiredCount:5,numberOfValues:8,set:{}}}function Du(e){let{activeValue:t,ancestryMap:r}=xu(e);return t?Eu(t,r):[]}function xu(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let i of n.children)r.set(i,n);t.unshift(...n.children)}return{}}function Eu(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}var Ru=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},vi=(e,t)=>{let r=Ru(e,t);return Du((r==null?void 0:r.currentValues)??[])};function Si(){return{}}function wi(){return{}}function bi(){return{}}function ki(){return{}}function Fu(e){return{facetSet:e.facetSet??ki(),categoryFacetSet:e.categoryFacetSet??Si(),dateFacetSet:e.dateFacetSet??wi(),numericFacetSet:e.numericFacetSet??bi(),automaticFacetSet:e.automaticFacetSet??yi()}}var Uu=e=>{let t=[];return _u(e).forEach((r,n)=>{let i=Nu(e,r.facetId),a=Vu(r,n+1);if(Tu(r)){if(!vi(e,r.facetId).length)return;t.push({...a,...Lu(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach((s,o)=>{if(s.state==="idle")return;let u=mn(s,o+1,i),c=Mu(r)?yn(s):ju(s);t.push({...a,...u,...c})})}),$u(e).forEach((r,n)=>{let i=Qu(r,n+1);r.values.forEach((a,s)=>{if(a.state==="idle")return;let o=mn(a,s+1,"specific"),u=yn(a);t.push({...i,...o,...u})})}),t},Mu=e=>e.type==="specific",Tu=e=>e.type==="hierarchical",_u=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),$u=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),mn=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),ju=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),yn=e=>({displayValue:e.value,value:e.value}),Pu=(e,t)=>vi(e,t).map(r=>r.value).join(";"),Lu=(e,t)=>{let r=Pu(e,t);return{value:r,valuePosition:1,displayValue:r}},Qu=(e,t)=>({title:Ii(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Vu=(e,t)=>({title:Ii(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Ii=(e,t)=>`${e}_${t}`,zu=(e,t)=>{var r,n,i,a,s;return((r=e.facetSet[t])==null?void 0:r.request)||((n=e.categoryFacetSet[t])==null?void 0:n.request)||((i=e.dateFacetSet[t])==null?void 0:i.request)||((a=e.numericFacetSet[t])==null?void 0:a.request)||((s=e.automaticFacetSet.set[t])==null?void 0:s.response)},Nu=(e,t)=>{let r=zu(e,t);return r?r.type:"specific"},We=()=>({q:"",enableQuerySyntax:!1}),Ci=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Ci||{}),qi=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(qi||{}),Ai=e=>{if(Ka(e))return e.map(t=>Ai(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Yu=()=>({by:"relevancy"});new Q({values:{by:new mt({enum:qi,required:!0}),order:new mt({enum:Ci}),field:new F}});function Oi(){return Ai(Yu())}var br=()=>"default",Hu=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},kr=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return Hu(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=(e==null?void 0:e.contextValues)||{},n={};for(let[i,a]of Object.entries(r)){let s=`context_${i}`;n[s]=a}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=yr),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||br()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},Di=class or extends kr{constructor(){super(...arguments),this.getFacetRequest=t=>{var r,n,i,a,s,o,u,c,h,m;return((n=(r=this.state.facetSet)==null?void 0:r[t])==null?void 0:n.request)||((a=(i=this.state.categoryFacetSet)==null?void 0:i[t])==null?void 0:a.request)||((o=(s=this.state.dateFacetSet)==null?void 0:s[t])==null?void 0:o.request)||((c=(u=this.state.numericFacetSet)==null?void 0:u[t])==null?void 0:c.request)||((m=(h=this.state.automaticFacetSet)==null?void 0:h.set[t])==null?void 0:m.response)}}getFacetState(){return Uu(Fu(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||or.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,n;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((n=t.search)==null?void 0:n.response.searchUid)||Ve().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var n;let t=!!this.getSplitTestRunName(),r=((n=this.state.search)==null?void 0:n.response.pipeline)||this.state.pipeline||or.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var i,a,s;let t=this.getState(),r=super.getBaseMetadata(),n=(s=(a=(i=t.search)==null?void 0:i.response)==null?void 0:a.extendedResults)==null?void 0:s.generativeQuestionAnsweringId;return n&&(r.generativeQuestionAnsweringId=n),r}getFacetMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetValue:r,facetTitle:`${n}_${t}`}}getFacetClearAllMetadata(t){var n;let r=((n=this.getFacetRequest(t))==null?void 0:n.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:r,facetTitle:`${r}_${t}`}}getFacetUpdateSortMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:n,criteria:r,facetTitle:`${n}_${t}`}}getRangeBreadcrumbFacetMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${t}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Oi()}}getStaticFilterToggleMetadata(t,r){return{...this.getBaseMetadata(),staticFilterId:t,staticFilterValue:r}}getStaticFilterClearAllMetadata(t){return{...this.getBaseMetadata(),staticFilterId:t}}getUndoTriggerQueryMetadata(t){return{...this.getBaseMetadata(),undoneQuery:t}}getCategoryBreadcrumbFacetMetadata(t,r){var i;let n=((i=this.getFacetRequest(t))==null?void 0:i.field)??"";return{...this.getBaseMetadata(),categoryFacetId:t,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${t}`}}getOmniboxAnalyticsMetadata(t,r){let n=this.state.querySuggest&&this.state.querySuggest[t],i=n.completions.map(u=>u.expression),a=n.partialQueries.length-1,s=n.partialQueries[a]||"",o=n.responseId;return{...this.getBaseMetadata(),suggestionRanking:i.indexOf(r),partialQuery:s,partialQueries:n.partialQueries.length>0?n.partialQueries:"",suggestions:i.length>0?i:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(t){return{...this.getBaseMetadata(),...t}}getGeneratedAnswerMetadata(){var n;let t=this.getState(),r={};return((n=t.generatedAnswer)==null?void 0:n.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||We().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||Ve().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||Ve().response.totalCountFiltered}};Di.fallbackPipelineName="default";var Rt=Di,Bu=({logger:e,getState:t,analyticsClientMiddleware:r=(a,s)=>s,preprocessRequest:n,provider:i=new Rt(t)})=>{let a=t(),s=a.configuration.accessToken,o=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,h=new pi({token:s,endpoint:o,runtimeEnvironment:u,preprocessRequest:fi(e,n),beforeSendHooks:[gi(e,r),(m,g)=>(e.info({...g,type:m,endpoint:o,token:s},"Analytics request"),g)]},i);return c||h.disable(),h},vn=()=>{let e=Be.getHistory().reverse().find(t=>t.name==="PageView"&&t.value);return e?e.value:""},Ir=async(e,t)=>{let r=e.analyticsMode==="next",n=e.originLevel3==="default";return{analytics:{clientId:await at(e),clientTimestamp:new Date().toISOString(),documentReferrer:r&&n?null:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...vn()&&{pageId:vn()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:mi(e)}}}},ft=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:"",splitTestRun:"",pipeline:""}),Wu=class extends kr{getPipeline(){var e;return this.state.pipeline||((e=this.state.recommendation)==null?void 0:e.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:We().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.getState().recommendation)==null?void 0:e.searchUid)||ft().searchUid}getSplitTestRunName(){var e;return(e=this.state.recommendation)==null?void 0:e.splitTestRun}getSplitTestRunVersion(){var r;let e=!!this.getSplitTestRunName(),t=((r=this.state.recommendation)==null?void 0:r.pipeline)||this.state.pipeline||"default";return e?t:void 0}get responseTime(){var e;return((e=this.state.recommendation)==null?void 0:e.duration)||ft().duration}mapResultsToAnalyticsDocument(){var e;return(e=this.state.recommendation)==null?void 0:e.recommendations.map(t=>({documentUri:t.uri,documentUriHash:t.raw.urihash}))}get numberOfResults(){var e;return((e=this.state.recommendation)==null?void 0:e.recommendations.length)||ft().recommendations.length}};function Gu({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:a,mode:s}=e;s!=="disabled"&&(n.call(r),t.send(i,a,r))}var Ju=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ku(e){return typeof e=="string"&&Ju.test(e)}function Zu(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),a=i&&Ku(i)?i:r.generateUUID();return n.setItem(t,a),a},clear:()=>{e.get().storage.removeItem(t)}}}var xi="0.7.7";function Xu(e){let{trackingId:t}=e;return{trackingId:t}}function ec(e){return(e.source||[]).concat([`relay@${xi}`])}function Ei(e,t,r,n){let{getReferrer:i,getLocation:a,getUserAgent:s}=r,o=Xu(t),u=n.getClientId();return Object.freeze({type:e,config:o,ts:Date.now(),source:ec(t),clientId:u,userAgent:s(),referrer:i(),location:a()})}function tc(e,t,r,n,i){return{...t,meta:Ei(e,r,n,i)}}var rc="*";function nc(){let e=[];function t({type:u,callback:c}){return e.findIndex(h=>h.type===u&&h.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function n(u){return t(u)<0&&e.push(u),()=>o(u.type,u.callback)}function i(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(h){console.error(h)}})}function a(u){if(u===rc)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1)}function s(u){let c=t(u);c>=0&&e.splice(c,1)}function o(u,c){c?s({type:u,callback:c}):a(u)}return{add:n,call:i,remove:o}}function Sn({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function ic(e){let t=Sn(e);return{get:()=>t,update:r=>{t=Sn({...t,...r})}}}function ac(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Yt=sc();function sc(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,i=document.cookie.split(";");for(let a of i){let s=a.replace(/^\s+/,"");if(s.lastIndexOf(n,0)===0)return s.substring(n.length,s.length)}return null},setItem(r,n,i){let a=t(window.location.hostname),s=`;expires=${new Date(new Date().getTime()+i).toUTCString()}`,o=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${s}${o};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function oc(){return{getItem(e){return Yt.getItem(e)||localStorage.getItem(e)},removeItem(e){Yt.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Yt.setItem(e,t,31556952e3)}}}function uc(){let e=document.referrer;return e===""?null:e}function cc(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(ac().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>uc(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:oc()}}function lc(){return{getItem(){return null},removeItem(){},setItem(){}}}function dc(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:lc()}}function hc(e){return e.get().mode!=="disabled"&&pc()?cc():dc()}function pc(){try{return typeof window=="object"}catch{return!1}}function fc(e){return{get:()=>Object.freeze(hc(e))}}function gc(e){let t=ic(e),r=nc(),n=fc(t),i=Zu(n);return{emit:(a,s)=>{let o=t.get(),u=n.get(),c=tc(a,s,o,u,i);return Gu({config:o,environment:u,event:c,listenerManager:r})},getMeta:a=>Ei(a,t.get(),n.get(),i),on:(a,s)=>r.add({type:a,callback:s}),off:(a,s)=>r.remove(a,s),updateConfig:a=>t.update(a),version:xi,clearStorage:()=>{i.clear()}}}var mc=gr(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>mi(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>gc({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})),yc=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),Cr=class extends kr{constructor(){super(...arguments),this.initialState=yc()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return((e=this.getState().productListing)==null?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return(e=this.state.productListing)==null?void 0:e.products.map(t=>({documentUri:t.documentUri,documentUriHash:t.documentUriHash,permanentid:t.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},vc=({logger:e,getState:t,analyticsClientMiddleware:r=(a,s)=>s,preprocessRequest:n,provider:i=new Cr(t)})=>{let a=t(),s=a.configuration.accessToken,o=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,h=new pi({token:s,endpoint:o,runtimeEnvironment:u,preprocessRequest:fi(e,n),beforeSendHooks:[gi(e,r),(m,g)=>(e.info({...g,type:m,endpoint:o,token:s},"Analytics request"),g)]},i);return c||h.disable(),h};function Sc(e,t){return{...new Rt(t).getBaseMetadata(),actionCause:e,type:e}}function wc(e){return Object.assign(e,{instantlyCallable:!0})}function bc(e,t){let r=i=>wc(ne(e,i)),n=r(async(i,{getState:a,extra:s})=>{let{analyticsClientMiddleware:o,preprocessRequest:u,logger:c}=s;return await(await t({getState:a,analyticsClientMiddleware:o,preprocessRequest:u,logger:c})).log({state:a(),extra:s})});return Object.assign(n,{prepare:async({getState:i,analyticsClientMiddleware:a,preprocessRequest:s,logger:o})=>{let{description:u,log:c}=await t({getState:i,analyticsClientMiddleware:a,preprocessRequest:s,logger:o});return{description:u,action:r(async(h,{getState:m,extra:g})=>await c({state:m(),extra:g}))}}}),n}var Ri=(e,t,r)=>{function n(...i){let a=i.length===1?{...i[0],__legacy__getBuilder:t(i[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:i[0],__legacy__getBuilder:t(i[1]),__legacy__provider:i[2],analyticsConfigurator:e,providerClass:r};return Cc(a)}return n},kc=e=>e.configuration.analytics.analyticsMode==="legacy",Ic=e=>e.configuration.analytics.analyticsMode==="next",Cc=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:s})=>(r??(r=o=>new s(o)),bc(e,async({getState:o,analyticsClientMiddleware:u,preprocessRequest:c,logger:h})=>{let m=[],g={log:async({state:S})=>{for(let D of m)await D(S)}},b=o(),I=a({getState:o,logger:h,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(o)}),l=await t(I,o());g.description=l==null?void 0:l.description,m.push(async S=>{kc(S)&&await qc(l,r,S,h,I.coveoAnalyticsClient)});let{emit:v}=mc(b);return m.push(async S=>{if(Ic(S)&&i&&n){let D=n(S);await Dc(v,i,D)}}),g}));async function qc(e,t,r,n,i){t(()=>r);let a=await(e==null?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var Ge=Ri(Bu,e=>e,Rt),Ac=Ri(vc,e=>e,Cr),Oc={urihash:new F,sourcetype:new F,permanentid:new F};new Q({values:Oc}),new F({required:!1,emptyAllowed:!0});async function Dc(e,t,r){await e(t,r)}var xc=()=>Ge("analytics/recommendation/update",e=>e.makeRecommendationInterfaceLoad(),e=>new Wu(e)),Ec=()=>({actionCause:"recommendationInterfaceLoad"}),Rc=k("recommendation/set",e=>O(e,{id:M})),Ht=ne("recommendation/get",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=new Date().getTime(),s=await Fc(i),o=await n.recommendations(s),u=new Date().getTime()-a;return Oe(o)?r(o.error):{recommendations:o.success.results,analyticsAction:xc(),duration:u,searchUid:o.success.searchUid,splitTestRun:o.success.splitTestRun,pipeline:o.success.pipeline}}),Fc=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?Be.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await at(e.configuration.analytics)},...e.configuration.analytics.enabled&&await Uc(e,Ec()),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},...e.pagination&&{numberOfResults:e.pagination.numberOfResults}}),Uc=async(e,t)=>{let r=e.configuration.analytics.analyticsMode==="legacy"?void 0:{actionCause:t.actionCause,type:t.actionCause};return await Ir(e.configuration.analytics,r)};Ie(ft(),e=>{e.addCase(Rc,(t,r)=>{t.id=r.payload.id}).addCase(Ht.rejected,(t,r)=>{t.error=r.payload?r.payload:null,t.isLoading=!1}).addCase(Ht.fulfilled,(t,r)=>{t.error=null,t.recommendations=r.payload.recommendations,t.duration=r.payload.duration,t.isLoading=!1,t.searchUid=r.payload.searchUid,t.splitTestRun=r.payload.splitTestRun,t.pipeline=r.payload.pipeline}).addCase(Ht.pending,t=>{t.isLoading=!0})});var Mc=k("searchHub/set",e=>O(e,new F({required:!0,emptyAllowed:!0})));Ie(br(),e=>{e.addCase(Mc,(t,r)=>r.payload).addCase(Me.fulfilled,(t,r)=>{var n;return((n=r.payload)==null?void 0:n.searchHub)??t}).addCase(vr,(t,r)=>r.payload.searchHub||t)});Ie(yr,e=>e);var Tc=we($a());k("tab/register",e=>{let t=new Q({values:{id:M,expression:ke}});return O(e,t)});var Fi=k("tab/updateActiveTab",e=>O(e,M)),qr=we(lr()),_c=we(ja()),$c=we(Pa());qr.default.extend($c.default);qr.default.extend(_c.default);var Ui="/rest/search/v2",Mi="/rest/ua",jc=()=>({organizationId:"",accessToken:"",platformUrl:zr(),search:{apiBaseUrl:`${zr()}${Ui}`,locale:"en-US",timezone:qr.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${rs()}${Mi}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function Pc(e,t){if(ns(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Mi;let r=is(e,t);return r?jn(t,r.environment).analytics:e}Ie(jc(),e=>e.addCase(Ys,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Ui}`,t.analytics.apiBaseUrl=Pc(r.payload.platformUrl,t.organizationId))}).addCase(vr,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Bs,(t,r)=>{J(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),J(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),J(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),J(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),J(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),J(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),J(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),J(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),J(r.payload.source)||(t.analytics.source=r.payload.source);let n=(0,Tc.default)();n&&(t.analytics.analyticsMode="next",t.analytics.trackingId=n),J(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),J(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),J(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),J(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),J(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(Ws,t=>{t.analytics.enabled=!1}).addCase(Gs,t=>{t.analytics.enabled=!0}).addCase(Js,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Ks,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Fi,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(xt,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));we(Qa());var Lc={organizationId:M,accessToken:M,platformUrl:new F({required:!1,emptyAllowed:!1}),name:new F({required:!1,emptyAllowed:!1}),analytics:new Q({options:{required:!1},values:{enabled:new K({required:!1}),originContext:new F({required:!1}),originLevel2:new F({required:!1}),originLevel3:new F({required:!1}),analyticsMode:new F({constrainTo:["legacy","next"],required:!1})}})};function Qc(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:jn("searchuisamples")}}new it({...Lc,pipeline:new F({required:!1,emptyAllowed:!0}),searchHub:ae,locale:ae,timezone:ae});function Vc(){return{...Qc(),searchHub:"default"}}var Re=()=>new F({required:!1,emptyAllowed:!0}),zc=k("advancedSearchQueries/update",e=>O(e,{aq:Re(),cq:Re(),lq:Re(),dq:Re()})),Nc=k("advancedSearchQueries/register",e=>O(e,{aq:Re(),cq:Re(),lq:Re(),dq:Re()})),Xe=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});Ie(Xe(),e=>{e.addCase(zc,(t,r)=>{let{aq:n,cq:i,lq:a,dq:s}=r.payload;he(n)||(t.aq=n,t.aqWasSet=!0),he(i)||(t.cq=i,t.cqWasSet=!0),he(a)||(t.lq=a,t.lqWasSet=!0),he(s)||(t.dq=s,t.dqWasSet=!0)}).addCase(Nc,(t,r)=>{let{aq:n,cq:i,lq:a,dq:s}=r.payload;he(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),he(i)||(t.defaultFilters.cq=i,t.cqWasSet||(t.cq=i)),he(a)||(t.defaultFilters.lq=a,t.lqWasSet||(t.lq=a)),he(s)||(t.defaultFilters.dq=s,t.dqWasSet||(t.dq=s))}).addCase(Me.fulfilled,(t,r)=>{var n;return((n=r.payload)==null?void 0:n.advancedSearchQueries)??t}).addCase(xt,(t,r)=>{let{aq:n,cq:i}=r.payload;he(n)||(t.aq=n,t.aqWasSet=!0),he(i)||(t.cq=i,t.cqWasSet=!0)})});var Yc=new ue({each:M,required:!0}),Ti=(e,t)=>(O(e,M),dr(t)?O(t,M):O(t,Yc),{payload:{contextKey:e,contextValue:t}}),Hc=k("context/set",e=>{for(let[t,r]of Object.entries(e))Ti(t,r);return{payload:e}}),Bc=k("context/add",e=>Ti(e.contextKey,e.contextValue)),Wc=k("context/remove",e=>O(e,M));function _i(){return{contextValues:{}}}Ie(_i(),e=>{e.addCase(Hc,(t,r)=>{t.contextValues=r.payload}).addCase(Bc,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Wc,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Me.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});var Gc=k("dictionaryFieldContext/set",e=>{let t=new Q({options:{required:!0}}),r=O(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new ue({each:ke}),a=O(n,i).error;return a?{payload:e,error:a}:{payload:e}}),Jc=k("dictionaryFieldContext/add",e=>{let t=new Q({options:{required:!0},values:{field:ke,key:ke}});return O(e,t)}),Kc=k("dictionaryFieldContext/remove",e=>O(e,ke));function $i(){return{contextValues:{}}}Ie($i(),e=>{e.addCase(Gc,(t,r)=>{t.contextValues=r.payload}).addCase(Jc,(t,r)=>{let{field:n,key:i}=r.payload;t.contextValues[n]=i}).addCase(Kc,(t,r)=>{delete t.contextValues[r.payload]}).addCase(Me.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});var Ar=async(e,t)=>{var r,n,i,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await at(e.configuration.analytics),actionsHistory:Be.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((n=e.advancedSearchQueries)==null?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...((i=e.advancedSearchQueries)==null?void 0:i.lq)&&{lq:e.advancedSearchQueries.lq},...((a=e.advancedSearchQueries)==null?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Ir(e.configuration.analytics,t),...e.excerptLength&&!J(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},Or=async(e,t)=>{var r,n,i,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await at(e.configuration.analytics),actionsHistory:Be.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((n=e.advancedSearchQueries)==null?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...((i=e.advancedSearchQueries)==null?void 0:i.lq)&&{lq:e.advancedSearchQueries.lq},...((a=e.advancedSearchQueries)==null?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Ir(e.configuration.analytics,t),...e.excerptLength&&!J(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},Zc={collectionField:new F({emptyAllowed:!1,required:!1}),parentField:new F({emptyAllowed:!1,required:!1}),childField:new F({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new N({min:0,required:!1})},Xc=k("folding/register",e=>O(e,Zc));ne("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=i.configuration.analytics.analyticsMode==="legacy"?await Ar(i):await Or(i),s=await n.search({...a,q:el(i),enableQuerySyntax:!0,cq:`@${i.folding.fields.collection}="${e}"`,filterField:i.folding.fields.collection,childField:i.folding.fields.parent,parentField:i.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Oe(s)?r(s.error):{collectionId:e,results:s.success.results,rootResult:i.folding.collections[e].result}});function el(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var tl=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}}),rl=k("fields/registerFieldsToInclude",e=>O(e,Vs)),nl=k("fields/fetchall/enable"),il=k("fields/fetchall/disable"),al=ne("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),{accessToken:a,organizationId:s}=i.configuration,{apiBaseUrl:o}=i.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:s,url:o});return Oe(u)?n(u.error):u.success.fields}),ji=["author","language","urihash","objecttype","collection","source","permanentid"];[...ji];var sl=()=>({fieldsToInclude:ji,fetchAllFields:!1,fieldsDescription:[]});Ie(sl(),e=>e.addCase(rl,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(nl,t=>{t.fetchAllFields=!0}).addCase(il,t=>{t.fetchAllFields=!1}).addCase(al.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Xc,(t,{payload:r})=>{let n=tl().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child)}));var Dr=k("breadcrumb/deselectAll"),Pi=k("breadcrumb/deselectAllNonBreadcrumbs"),xr={value:M,numberOfResults:new N({min:0}),state:M},ee=M,ol=new N({min:1,default:8,required:!1}),ul=new N({min:1,max:20,default:5,required:!1}),cl={desiredCount:ul,numberOfValues:ol};k("automaticFacet/setOptions",e=>O(e,cl));k("automaticFacet/deselectAll",e=>O(e,ee));var ll=M,dl=k("automaticFacet/toggleSelectValue",e=>O(e,{field:ll,selection:new Q({values:xr})})),hl={state:new oe({required:!0}),numberOfResults:new N({required:!0,min:0}),value:new F({required:!0,emptyAllowed:!0}),path:new ue({required:!0,each:M}),moreValuesAvailable:new K({required:!1})};function Li(e){e.children.forEach(t=>{Li(t)}),He({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},hl)}var Ne={facetId:ee,field:M,delimitingCharacter:new F({required:!1,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new oe({required:!1}),basePath:new ue({required:!1,each:M}),filterByBasePath:new K({required:!1})};k("categoryFacet/register",e=>O(e,Ne));var pl=k("categoryFacet/toggleSelectValue",e=>{try{return He(e.facetId,M),Li(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}}),fl=k("categoryFacet/deselectAll",e=>O(e,Ne.facetId));k("categoryFacet/updateNumberOfValues",e=>O(e,{facetId:Ne.facetId,numberOfValues:Ne.numberOfValues}));k("categoryFacet/updateSortCriterion",e=>O(e,{facetId:Ne.facetId,criterion:new oe}));k("categoryFacet/updateBasePath",e=>O(e,{facetId:Ne.facetId,basePath:new ue({each:M})}));var Er={facetId:ee,captions:new Q({options:{required:!1}}),numberOfValues:new N({required:!1,min:1}),query:new F({required:!1,emptyAllowed:!0})},gl={path:new ue({required:!0,each:M}),displayValue:ke,rawValue:ke,count:new N({required:!0,min:0})},ml=k("categoryFacet/selectSearchResult",e=>O(e,{facetId:ee,value:new Q({values:gl})}));k("categoryFacetSearch/register",e=>O(e,Er));var Qi={facetId:ee,value:new Q({values:{displayValue:ke,rawValue:ke,count:new N({required:!0,min:0})}})};k("facetSearch/register",e=>O(e,Er));k("facetSearch/update",e=>O(e,Er));var yl=k("facetSearch/toggleSelectValue",e=>O(e,Qi)),vl=k("facetSearch/toggleExcludeValue",e=>O(e,Qi)),ur=we(lr()),Sl=we(Va());ur.default.extend(Sl.default);var Vi="YYYY/MM/DD@HH:mm:ss",wl="1401-01-01";function It(e,t){let r=(0,ur.default)(e,t);return!r.isValid()&&!t?(0,ur.default)(e,Vi):r}function zi(e){return e.format(Vi)}function bl(e,t){let r=It(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",i=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?i:n}`)}Ni(r)}function Ni(e){if(e.isBefore(wl))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var gt=we(lr()),kl=we(za());gt.default.extend(kl.default);var Yi=["past","now","next"],Hi=["minute","hour","day","week","month","quarter","year"],Il=e=>{let t=e==="now";return{amount:new N({required:!t,min:1}),unit:new F({required:!t,constrainTo:Hi}),period:new F({required:!0,constrainTo:Yi})}};function wn(e){if(typeof e=="string"&&!nt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Gi(e):e;new it(Il(t.period)).validate(t);let r=Bi(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Ni(r)}function Cl(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Bi(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,gt.default)().subtract(r,n);case"next":return(0,gt.default)().add(r,n);case"now":return(0,gt.default)()}}function cr(e){return zi(Bi(Gi(e)))}function Wi(e){return e.toLocaleLowerCase().split("-")}function nt(e){let[t,r,n]=Wi(e);if(t==="now")return!0;if(!Yi.includes(t)||!Hi.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function ql(e){return!!e&&typeof e=="object"&&"period"in e}function Gi(e){let[t,r,n]=Wi(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Al(e){let t=bn(e.start,e),r=bn(e.end,e),n=e.endInclusive??!1,i=e.state??"idle";return{start:t,end:r,endInclusive:n,state:i}}function bn(e,t){let{dateFormat:r}=t;return ql(e)?(wn(e),Cl(e)):typeof e=="string"&&nt(e)?(wn(e),e):(bl(e,r),zi(It(e,r)))}new F({regex:/^[a-zA-Z0-9-_]+$/});new F({required:!0});new ue({each:new F});new F;var Ol=new N({min:1}),Dl=new Q,xl=new F,El={captions:Dl,numberOfValues:Ol,query:xl};new Q({values:El});var Rl=new Q({options:{required:!1},values:{type:new F({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new ue({required:!0,max:25,each:new F({emptyAllowed:!1,required:!0})})}}),Fl=new ue({min:1,max:25,required:!1,each:new F({emptyAllowed:!1,required:!0})}),Ul={facetId:ee,field:new F({required:!0,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new oe({required:!1}),resultsMustMatch:new oe({required:!1}),allowedValues:Rl,customSort:Fl};k("facet/register",e=>O(e,Ul));var Ml=k("facet/toggleSelectValue",e=>O(e,{facetId:ee,selection:new Q({values:xr})})),Tl=k("facet/toggleExcludeValue",e=>O(e,{facetId:ee,selection:new Q({values:xr})})),_l=k("facet/deselectAll",e=>O(e,ee));k("facet/updateSortCriterion",e=>O(e,{facetId:ee,criterion:new oe({required:!0})}));k("facet/updateNumberOfValues",e=>O(e,{facetId:ee,numberOfValues:new N({required:!0,min:1})}));k("facet/updateIsFieldExpanded",e=>O(e,{facetId:ee,isFieldExpanded:new K({required:!0})}));k("facet/updateFreezeCurrentValues",e=>O(e,{facetId:ee,freezeCurrentValues:new K({required:!0})}));k("rangeFacet/updateSortCriterion",e=>O(e,{facetId:ee,criterion:new oe({required:!0})}));var Rr={state:M,start:new N({required:!0}),end:new N({required:!0}),endInclusive:new K({required:!0}),numberOfResults:new N({required:!0,min:0})},Fr={start:M,end:M,endInclusive:new K({required:!0}),state:M,numberOfResults:new N({required:!0,min:0})},$l={start:M,end:M,endInclusive:new K({required:!0}),state:M},jl={facetId:ee,field:M,currentValues:new ue({required:!1,each:new Q({values:$l})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new oe({required:!1}),rangeAlgorithm:new oe({required:!1})};function kn(e){return nt(e)?cr(e):e}function Ji(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=Al(t);if(It(kn(r)).isAfter(It(kn(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}k("dateFacet/register",e=>{try{return He(e,jl),Ji(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}});var Pl=k("dateFacet/toggleSelectValue",e=>O(e,{facetId:ee,selection:new Q({values:Fr})})),Ll=k("dateFacet/toggleExcludeValue",e=>O(e,{facetId:ee,selection:new Q({values:Fr})})),Ql=k("dateFacet/updateFacetValues",e=>{try{return He(e,{facetId:ee,values:new ue({each:new Q({values:Fr})})}),Ji({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}}),Vl={state:M,start:new N({required:!0}),end:new N({required:!0}),endInclusive:new K({required:!0})},zl={facetId:ee,field:M,currentValues:new ue({required:!1,each:new Q({values:Vl})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new oe({required:!1}),rangeAlgorithm:new oe({required:!1})};function Ki(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}k("numericFacet/register",e=>{try{return O(e,zl),Ki(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}});var Nl=k("numericFacet/toggleSelectValue",e=>O(e,{facetId:ee,selection:new Q({values:Rr})})),Yl=k("numericFacet/toggleExcludeValue",e=>O(e,{facetId:ee,selection:new Q({values:Rr})})),Hl=k("numericFacet/updateFacetValues",e=>{try{return He(e,{facetId:ee,values:new ue({each:new Q({values:Rr})})}),Ki({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}}),Bl=e=>e.error!==void 0;function Zi(e,t){let r={};e.forEach(a=>r[a.facetId]=a);let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a])});let i=Object.values(r);return[...n,...i]}function _e(e){return Object.values(e).map(t=>t.request)}var In=()=>Ge("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),$e=e=>Ge("search/queryError",(t,r)=>{var n,i,a,s;return t.makeQueryError({query:((n=r.query)==null?void 0:n.q)||We().q,aq:((i=r.advancedSearchQueries)==null?void 0:i.aq)||Xe().aq,cq:((a=r.advancedSearchQueries)==null?void 0:a.cq)||Xe().cq,dq:((s=r.advancedSearchQueries)==null?void 0:s.dq)||Xe().dq,errorType:e.type,errorMessage:e.message})}),Xi=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Xi||{}),ea=(e=>(e.Ascending="asc",e.Descending="desc",e))(ea||{});new Q({options:{required:!1},values:{by:new mt({enum:Xi,required:!0}),fields:new ue({each:new Q({values:{name:new F,direction:new mt({enum:ea})}})})}});var Wl=()=>Ac("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new Cr(e));k("productlisting/setUrl",e=>O(e,{url:new F({required:!0,url:!0})}));k("productlisting/setAdditionalFields",e=>O(e,{additionalFields:new ue({required:!0,each:new F({required:!0,emptyAllowed:!1})})}));var Gl=ne("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:s}=i,o=await s.getProducts(await Jl(a));return Bl(o)?(r($e(o.error)),n(o.error)):{response:o.success,analyticsAction:Wl()}}),Jl=async e=>{var n,i,a;let t=Zl(e),r=await at(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(n=e.productListing)==null?void 0:n.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...(i=e.productListing.additionalFields)!=null&&i.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Kl(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((a=e.sort)==null?void 0:a.by)||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Kl(e){return e.debug}function Zl(e){return Zi(Xl(e),e.facetOrder??[])}function Xl(e){return[..._e(e.facetSet??{}),..._e(e.numericFacetSet??{}),..._e(e.dateFacetSet??{}),..._e(e.categoryFacetSet??{})]}var ta=k("facet/updateFacetAutoSelection",e=>O(e,{allow:new K({required:!0})})),ed=class extends Rt{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return(e=this.activeInstantResultCache)==null?void 0:e.results}get queryText(){return this.activeInstantResultQuery??We().q}get responseTime(){var e;return((e=this.activeInstantResultCache)==null?void 0:e.duration)??Ve().duration}get numberOfResults(){var e;return((e=this.activeInstantResultCache)==null?void 0:e.totalCountFiltered)??Ve().response.totalCountFiltered}getSearchUID(){var e;return((e=this.activeInstantResultCache)==null?void 0:e.searchUid)||super.getSearchUID()}},td=()=>Ge("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new ed(e)),rd=()=>({actionCause:"searchboxAsYouType"}),Ur={id:M},nd={...Ur,q:ke};k("instantResults/register",e=>O(e,Ur));var ra=k("instantResults/updateQuery",e=>O(e,nd));k("instantResults/clearExpired",e=>O(e,Ur));var Ft=new N({required:!0,min:0}),id=k("pagination/registerNumberOfResults",e=>O(e,Ft)),ad=k("pagination/updateNumberOfResults",e=>O(e,Ft)),sd=k("pagination/registerPage",e=>O(e,Ft)),Mr=k("pagination/updatePage",e=>O(e,Ft)),od=k("pagination/nextPage"),ud=k("pagination/previousPage"),Ut=k("query/updateQuery",e=>O(e,{q:new F,enableQuerySyntax:new K}));function cd(e){return e.type==="dateRange"}function na(e){return`start${e}`}function ia(e){return`end${e}`}var ld=()=>({dateFacetValueMap:{}});function dd(e,t,r){let n=e.start,i=e.end;return nt(n)&&(n=cr(n),r.dateFacetValueMap[t][na(n)]=e.start),nt(i)&&(i=cr(i),r.dateFacetValueMap[t][ia(i)]=e.end),{...e,start:n,end:i}}function hd(e,t){if(cd(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(i=>dd(i,r,t))}}return e}function Tr(e){var r;let t=ld();return{request:{...e,facets:(r=e.facets)==null?void 0:r.map(n=>hd(n,t))},mappings:t}}function pd(e,t,r){return{...e,start:r.dateFacetValueMap[t][na(e.start)]||e.start,end:r.dateFacetValueMap[t][ia(e.end)]||e.end}}function fd(e,t){return e.facetId in t.dateFacetValueMap}function gd(e,t){return fd(e,t)?{...e,values:e.values.map(r=>pd(r,e.facetId,t))}:e}function aa(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>gd(n,t))}}:e}var Se=async(e,t)=>{var o;let r=kd(e),n=md(e),i=yd(e),a=e.configuration.analytics.analyticsMode==="legacy"?await Ar(e,t):await Or(e,t),s=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Tr({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:s(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((o=e.folding)==null?void 0:o.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function md(e){return Zi(Sd(e),e.facetOrder??[])}function yd(e){var r;let t=(r=e.automaticFacetSet)==null?void 0:r.set;return t?Object.values(t).map(n=>n.response).map(vd).filter(n=>n.currentValues.length>0):void 0}function vd(e){let{field:t,label:r,values:n}=e,i=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:i}}function Sd(e){return wd(e).filter(({facetId:t})=>{var r,n;return((n=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:n.enabled)??!0})}function wd(e){return[...bd(e.facetSet??{}),...Cn(e.numericFacetSet??{}),...Cn(e.dateFacetSet??{}),..._e(e.categoryFacetSet??{})]}function bd(e){return _e(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function Cn(e){return _e(e).map(t=>{let r=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!r?{...t,currentValues:[]}:t})}function kd(e){var i,a;let t=((i=e.advancedSearchQueries)==null?void 0:i.cq.trim())||"",r=((a=Object.values(e.tabSet||{}).find(s=>s.isActive))==null?void 0:a.expression.trim())||"",n=Id(e);return[t,r,...n].filter(s=>!!s).join(" AND ")}function Id(e){return Object.values(e.staticFilterSet||{}).map(t=>{let r=t.values.filter(i=>i.state==="selected"&&!!i.expression.trim()),n=r.map(i=>i.expression).join(" OR ");return r.length>1?`(${n})`:n})}k("didYouMean/enable");k("didYouMean/disable");k("didYouMean/automaticCorrections/disable");k("didYouMean/automaticCorrections/enable");var sa=k("didYouMean/correction",e=>O(e,M));k("didYouMean/automaticCorrections/mode",e=>O(e,new F({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));var qn=()=>Ge("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),Cd=()=>({actionCause:"didyoumeanAutomatic"});function qd(){return{freezeFacetOrder:!1,facets:{}}}function Ad(){return[]}function _r(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Od(){return{}}function Dd(){return{}}function xd(){return{}}function Fe(e){return{context:e.context||_i(),dictionaryFieldContext:e.dictionaryFieldContext||$i(),facetSet:e.facetSet||ki(),numericFacetSet:e.numericFacetSet||bi(),dateFacetSet:e.dateFacetSet||wi(),categoryFacetSet:e.categoryFacetSet||Si(),automaticFacetSet:e.automaticFacetSet??yi(),pagination:e.pagination||_r(),query:e.query||We(),tabSet:e.tabSet||xd(),advancedSearchQueries:e.advancedSearchQueries||Xe(),staticFilterSet:e.staticFilterSet||Dd(),querySet:e.querySet||Od(),sortCriteria:e.sortCriteria||Oi(),pipeline:e.pipeline||Zn(),searchHub:e.searchHub||br(),facetOptions:e.facetOptions||qd(),facetOrder:e.facetOrder??Ad(),debug:e.debug??Kn()}}new Q({values:{undoneQuery:ke},options:{required:!0}});var Ed=()=>Ge("analytics/trigger/query",(e,t)=>{var r;return(r=t.triggers)!=null&&r.queryModification.newQuery?e.makeTriggerQuery():null}),oa=k("trigger/query/ignore",e=>O(e,new F({emptyAllowed:!0,required:!0}))),ua=k("trigger/query/modification",e=>O(e,new Q({values:{originalQuery:ae,modification:ae}}))),st=class{constructor(e,t=r=>{this.dispatch(Ut({q:r}))}){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var o;let n=new Date().getTime(),i=aa(await this.extra.apiClient.search(t,r),e),a=new Date().getTime()-n,s=((o=this.getState().query)==null?void 0:o.q)||"";return{response:i,duration:a,queryExecuted:s,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Oe(e.response)?(this.dispatch($e(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:s,queryCorrection:o}=r;if(!n||!i)return null;let u=a.length===0&&s&&s.length!==0,c=!J(o)&&!J(o.correctedQuery);if(!u&&!c)return null;let h=u?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(Ee(Fe(this.getState()))),h}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return Oe(i.response)?(this.dispatch($e(i.response.error)),this.rejectWithValue(i.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(Ee(Fe(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:qn()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:qn()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r),this.extra)}async processQueryTriggersOrContinue(e){var a,s;let t=this.getSuccessResponse(e);if(!t)return null;let r=((a=t.triggers.find(o=>o.type==="query"))==null?void 0:a.content)||"";if(!r)return null;if(((s=this.getState().triggers)==null?void 0:s.queryModification.queryToIgnore)===r)return this.dispatch(oa("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return Oe(i.response)?(this.dispatch($e(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ee(Fe(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:Ed()})}getStateAfterResponse(e,t,r,n){var i;return{...r,query:{q:e,enableQuerySyntax:((i=r.query)==null?void 0:i.enableQuerySyntax)??We().enableQuerySyntax},search:{...Ve(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(Ee(Fe(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Pn(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await Se(this.getState()),{origin:"mainSearch"});return this.dispatch(sa(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(ua({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Se(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var t;let e=this.getState();return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};ne("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;O(e,{q:new F,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Dr()),r(Pi())),r(ta({allow:!0})),r(Ut({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Mr(1))});ne("search/executeSearch",async(e,t)=>{let r=t.getState();return await $r(r,t,e)});ne("search/fetchPage",async(e,t)=>{let r=t.getState();return await da(r,t,e)});ne("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await ha(t,r)});ne("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await Md(t,e,r)});ne("search/fetchInstantResults",async(e,t)=>la(e,t));var Rd=async(e,t)=>{var n,i;let r=await Se(e,t);return r.request={...r.request,firstResult:(((n=e.pagination)==null?void 0:n.firstResult)??0)+(((i=e.search)==null?void 0:i.results.length)??0)},r},Fd=async(e,t,r)=>{let n=await Ar(e);return Tr({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Ud=async(e,t)=>{let r=await Se(e,t);return r.request.numberOfResults=0,r},ca=e=>{var t;e.configuration.analytics.enabled&&Be.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function la(e,t){O(e,{id:M,q:M,maxResultsPerQuery:new N({required:!0,min:1}),cacheTimeout:new N});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new st({...t,analyticsAction:td()},c=>{t.dispatch(ra({q:c,id:e.id}))}),s=await Fd(i,r,n),o=await a.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),u=await a.process(o);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function da(e,t,r){ca(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),o=new st({...t,analyticsAction:r}),u=await Se(e,s),c=await o.fetchFromAPI(u,{origin:"mainSearch"});return await o.process(c)}async function ha(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=e.extra,{description:a}=await In().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),s=new st({...e,analyticsAction:In()}),o=await Rd(t,a),u=await s.fetchFromAPI(o,{origin:"mainSearch"});return await s.process(u)}async function Md(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=e.extra,{description:s}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),o=new st({...e,analyticsAction:t}),u=await Ud(r,s),c=await o.fetchFromAPI(u,{origin:"facetValues"});return await o.process(c)}async function $r(e,t,r){ca(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:s}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),o=await Se(e,s),u=new st({...t,analyticsAction:r}),c=await u.fetchFromAPI(o,{origin:"mainSearch"});return await u.process(c)}var ot=class{constructor(e,t=r=>{this.dispatch(Ut({q:r}))}){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var o;let n=new Date().getTime(),i=aa(await this.extra.apiClient.search(t,r),e),a=new Date().getTime()-n,s=((o=this.getState().query)==null?void 0:o.q)||"";return{response:i,duration:a,queryExecuted:s,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Oe(e.response)?(this.dispatch($e(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:s,queryCorrection:o}=r;if(!n||!i)return null;let u=a.length===0&&s&&s.length!==0,c=!J(o)&&!J(o.correctedQuery);if(!u&&!c)return null;let h=u?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(Ee(Fe(this.getState()))),h}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return Oe(i.response)?(this.dispatch($e(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ee(Fe(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){var a,s;let t=this.getSuccessResponse(e);if(!t)return null;let r=((a=t.triggers.find(o=>o.type==="query"))==null?void 0:a.content)||"";if(!r)return null;if(((s=this.getState().triggers)==null?void 0:s.queryModification.queryToIgnore)===r)return this.dispatch(oa("")),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return Oe(i.response)?(this.dispatch($e(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Ee(Fe(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n})}processSuccessResponse(e){return this.dispatch(Ee(Fe(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return Pn(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=Cd(),n=await this.fetchFromAPI(await Se(t,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(sa(e)),n}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(ua({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Se(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var t;let e=this.getState();return((t=e.query)==null?void 0:t.q)!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};ne("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;O(e,{q:new F,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Dr()),r(Pi())),r(ta({allow:!0})),r(Ut({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Mr(1))});var Td=ne("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return $r(r,t,e.legacy);pa(r);let n=jr(e.next),i=await Se(r,n),a=new ot({...t,analyticsAction:n}),s=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(s)});ne("search/fetchPage",async(e,t)=>{let r=t.getState();if(pa(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return da(r,t,e.legacy);let n=new ot({...t,analyticsAction:e.next}),i=await Se(r,e.next),a=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(a)});ne("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return ha(t,r);let n=Sc("pagerScrolling",t.getState),i=new ot({...t,analyticsAction:n}),a=await _d(r,n),s=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(s)});ne("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return $r(r,t,e.legacy);let n=jr(e.next),i=new ot({...t,analyticsAction:n}),a=await jd(r,n),s=await i.fetchFromAPI(a,{origin:"facetValues"});return await i.process(s)});ne("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return la(e,t);O(e,{id:M,q:M,maxResultsPerQuery:new N({required:!0,min:1}),cacheTimeout:new N});let{q:n,maxResultsPerQuery:i}=e,a=jr(rd()),s=await $d(r,n,i,a),o=new ot({...t,analyticsAction:a},h=>{t.dispatch(ra({q:h,id:e.id}))}),u=await o.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c});var _d=async(e,t)=>{var n,i;let r=await Se(e,t);return r.request={...r.request,firstResult:(((n=e.pagination)==null?void 0:n.firstResult)??0)+(((i=e.search)==null?void 0:i.results.length)??0)},r},$d=async(e,t,r,n)=>{let i=await Or(e,n);return Tr({...i,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},jd=async(e,t)=>{let r=await Se(e,t);return r.request.numberOfResults=0,r},pa=e=>{var t;e.configuration.analytics.enabled&&Be.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},jr=e=>({actionCause:e.actionCause,type:e.actionCause});Ie(_r(),e=>{e.addCase(id,(t,r)=>{let n=Bt(t),i=r.payload;t.defaultNumberOfResults=t.numberOfResults=i,t.firstResult=Ke(n,i)}).addCase(ad,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Fi,t=>{t.firstResult=0}).addCase(sd,(t,r)=>{let n=r.payload;t.firstResult=Ke(n,t.numberOfResults)}).addCase(Mr,(t,r)=>{let n=r.payload;t.firstResult=Ke(n,t.numberOfResults)}).addCase(ud,t=>{let r=Bt(t),n=Math.max(r-1,1);t.firstResult=Ke(n,t.numberOfResults)}).addCase(od,t=>{let r=Bt(t),n=Pd(t),i=Math.min(r+1,n);t.firstResult=Ke(i,t.numberOfResults)}).addCase(Me.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(xt,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(Td.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Gl.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount}).addCase(_l,t=>{le(t)}).addCase(Ll,t=>{le(t)}).addCase(Tl,t=>{le(t)}).addCase(Yl,t=>{le(t)}).addCase(vl,t=>{le(t)}).addCase(Ml,t=>{le(t)}).addCase(fl,t=>{le(t)}).addCase(pl,t=>{le(t)}).addCase(ml,t=>{le(t)}).addCase(Pl,t=>{le(t)}).addCase(Nl,t=>{le(t)}).addCase(Dr,t=>{le(t)}).addCase(Ql,t=>{le(t)}).addCase(Hl,t=>{le(t)}).addCase(yl,t=>{le(t)}).addCase(dl,t=>{le(t)})});function le(e){e.firstResult=_r().firstResult}function Bt(e){let{firstResult:t,numberOfResults:r}=e;return Ld(t,r)}function Pd(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Qd(t,r)}function Ke(e,t){return(e-1)*t}function Ld(e,t){return Math.round(e/t)+1}function Qd(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}new it({id:new F({emptyAllowed:!0,required:!1,default:""}),numberOfRecommendations:new N({min:0})});new it({values:new Q({options:{required:!1}})});Na();/**
* @license
*
* Copyright 2024 Coveo Solutions Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
* 
*       http://www.apache.org/licenses/LICENSE-2.0
* 
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vd=e=>({decorator:t=>xn`
    <atomic-recs-interface data-testid="root-interface">
      ${t()}
    </atomic-recs-interface>
  `,play:async({canvasElement:t,step:r})=>{await customElements.whenDefined("atomic-recs-interface");const i=await fa(t).findByTestId("root-interface");await r("Render the Recs Interface",async()=>{await i.initialize({...Vc(),...e})}),await r("Execute the first search",async()=>{await i.getRecommendations()})}}),{decorator:zd,play:Nd}=Vd(),Bd={component:"atomic-recs-list",title:"Atomic/RecsList",id:"atomic-recs-list",render:ga,decorators:[zd],parameters:{controls:{expanded:!0,hideNoControlsWarning:!0}},play:Nd},dt={name:"atomic-recs-list",decorators:[e=>xn` <style>
          atomic-recs-list {
            margin: 24px;
          }
        </style>
        ${e()}`]};var An,On,Dn;dt.parameters={...dt.parameters,docs:{...(An=dt.parameters)==null?void 0:An.docs,source:{originalSource:`{
  name: 'atomic-recs-list',
  decorators: [story => html\` <style>
          atomic-recs-list {
            margin: 24px;
          }
        </style>
        \${story()}\`]
}`,...(Dn=(On=dt.parameters)==null?void 0:On.docs)==null?void 0:Dn.source}}};const Wd=["Default"];export{dt as Default,Wd as __namedExportsOrder,Bd as default};
