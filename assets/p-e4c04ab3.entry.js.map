{"version":3,"names":["atomicProductLinkCss","AtomicProductLinkStyle0","AtomicProductLink","initialize","this","host","dispatchEvent","buildCustomEvent","stopPropagation","connectedCallback","slotName","hasDefaultSlot","getDefaultSlotFromHost","linkAttributes","getAttributesFromLinkSlot","render","href","isUndefined","hrefTemplate","product","clickUri","h","LinkWithItemAnalytics","key","onSelect","interactiveProduct","select","onBeginDelayedSelect","beginDelayedSelect","onCancelPendingSelect","cancelPendingSelect","attributes","field","default","isCompatibleWithProductList","__decorate","InitializeBindings","ProductContext","InteractiveProductContext"],"sources":["src/components/commerce/product-template-components/atomic-product-link/atomic-product-link.pcss?tag=atomic-product-link","src/components/commerce/product-template-components/atomic-product-link/atomic-product-link.tsx"],"sourcesContent":["@import '../../../../global/mixins.pcss';\r\n\r\natomic-result-link {\r\n  a {\r\n    @mixin link-style;\r\n  }\r\n}\r\n","import {isUndefined} from '@coveo/bueno';\r\nimport {InteractiveProduct} from '@coveo/headless/commerce';\r\nimport {Product} from '@coveo/headless/commerce';\r\nimport {Component, h, Prop, Element} from '@stencil/core';\r\nimport {buildCustomEvent} from '../../../../utils/event-utils';\r\nimport {\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../../utils/initialization-utils';\r\nimport {getDefaultSlotFromHost} from '../../../../utils/slot-utils';\r\nimport {getAttributesFromLinkSlot} from '../../../common/item-link/attributes-slot';\r\nimport {LinkWithItemAnalytics} from '../../../common/item-link/item-link';\r\nimport {CommerceBindings} from '../../atomic-commerce-interface/atomic-commerce-interface';\r\nimport {\r\n  InteractiveProductContext,\r\n  ProductContext,\r\n} from '../product-template-decorators';\r\n\r\n/**\r\n * @internal\r\n * The `atomic-product-link` component automatically transforms a search product title into a clickable link that points to the original item.\r\n * @slot default - Lets you display alternative content inside the link.\r\n * @slot attributes - Lets you pass [attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attributes) down to the link element, overriding other attributes. Use only with an \"a\" tag, e.g., `<a slot=\"attributes\" target=\"_blank\" download></a>`.\r\n */\r\n@Component({\r\n  tag: 'atomic-product-link',\r\n  styleUrl: 'atomic-product-link.pcss',\r\n  shadow: false,\r\n})\r\nexport class AtomicProductLink\r\n  implements InitializableComponent<CommerceBindings>\r\n{\r\n  @InitializeBindings() public bindings!: CommerceBindings;\r\n  public error!: Error;\r\n\r\n  public static isCompatibleWithProductList = true;\r\n\r\n  @ProductContext() private product!: Product;\r\n  @InteractiveProductContext() private interactiveProduct!: InteractiveProduct;\r\n\r\n  @Element() private host!: HTMLElement;\r\n\r\n  /**\r\n   * The [template literal](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals) from which to generate the `href` attribute value\r\n   *\r\n   * The template literal can reference any number of product properties from the parent product. It can also reference the window object.\r\n   *\r\n   * For example, the following markup generates an `href` value such as `http://uri.com?id=itemTitle`, using the product's `clickUri` and `itemtitle` fields.\r\n   * ```html\r\n   * <atomic-product-link href-template='${clickUri}?id=${raw.itemtitle}'></atomic-product-link>\r\n   * ```\r\n   */\r\n  @Prop({reflect: true}) hrefTemplate?: string;\r\n\r\n  private hasDefaultSlot!: boolean;\r\n  private linkAttributes?: Attr[];\r\n  private stopPropagation?: boolean;\r\n\r\n  public initialize() {\r\n    this.host.dispatchEvent(\r\n      buildCustomEvent(\r\n        'atomic/resolveStopPropagation',\r\n        (stopPropagation: boolean) => {\r\n          this.stopPropagation = stopPropagation;\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  public connectedCallback() {\r\n    const slotName = 'attributes';\r\n    this.hasDefaultSlot = !!getDefaultSlotFromHost(this.host);\r\n    this.linkAttributes = getAttributesFromLinkSlot(this.host, slotName);\r\n  }\r\n\r\n  public render() {\r\n    const href = isUndefined(this.hrefTemplate)\r\n      ? this.product.clickUri\r\n      : 'test';\r\n\r\n    return (\r\n      <LinkWithItemAnalytics\r\n        href={href}\r\n        onSelect={() => this.interactiveProduct.select()}\r\n        onBeginDelayedSelect={() =>\r\n          this.interactiveProduct.beginDelayedSelect()\r\n        }\r\n        onCancelPendingSelect={() =>\r\n          this.interactiveProduct.cancelPendingSelect()\r\n        }\r\n        attributes={this.linkAttributes}\r\n        stopPropagation={this.stopPropagation}\r\n      >\r\n        {this.hasDefaultSlot ? (\r\n          <slot />\r\n        ) : (\r\n          <atomic-product-text\r\n            field=\"ec_name\"\r\n            default=\"no-title\"\r\n          ></atomic-product-text>\r\n        )}\r\n      </LinkWithItemAnalytics>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"wXAAA,MAAMA,EAAuB,ycAC7B,MAAAC,EAAeD,E,iXC4BFE,EAAiB,M,qDA6BrB,UAAAC,GACLC,KAAKC,KAAKC,cACRC,EACE,iCACCC,IACCJ,KAAKI,gBAAkBA,CAAe,I,CAMvC,iBAAAC,GACL,MAAMC,EAAW,aACjBN,KAAKO,iBAAmBC,EAAuBR,KAAKC,MACpDD,KAAKS,eAAiBC,EAA0BV,KAAKC,KAAMK,E,CAGtD,MAAAK,GACL,MAAMC,EAAOC,EAAYb,KAAKc,cAC1Bd,KAAKe,QAAQC,SACb,OAEJ,OACEC,EAACC,EAAqB,CAAAC,IAAA,2CACpBP,KAAMA,EACNQ,SAAU,IAAMpB,KAAKqB,mBAAmBC,SACxCC,qBAAsB,IACpBvB,KAAKqB,mBAAmBG,qBAE1BC,sBAAuB,IACrBzB,KAAKqB,mBAAmBK,sBAE1BC,WAAY3B,KAAKS,eACjBL,gBAAiBJ,KAAKI,iBAErBJ,KAAKO,eACJU,EAAA,aAEAA,EAAA,uBACEW,MAAM,UACNC,QAAQ,a,6BA/DJ/B,EAAAgC,4BAA8B,KAHfC,EAAA,CAA5BC,K,+BAKyBD,EAAA,CAAzBE,K,8BACoCF,EAAA,CAApCG,K"}