{"version":3,"names":["atomicRecsErrorCss","AtomicRecsErrorStyle0","AtomicRecsError","this","showMoreInfo","initialize","recommendationList","buildRecommendationList","bindings","engine","render","error","recommendationListState","i18n","state","configuration","organizationId","platformUrl","hasError","isNullOrUndefined","ariaMessage","getAriaMessageFromErrorType","type","h","QueryErrorGuard","key","QueryErrorContainer","QueryErrorIcon","errorType","QueryErrorTitle","QueryErrorDescription","url","QueryErrorShowMore","link","QueryErrorLink","onShowMore","QueryErrorDetails","show","__decorate","InitializeBindings","BindStateToController","AriaLiveRegion"],"sources":["src/components/recommendations/atomic-recs-error/atomic-recs-error.pcss?tag=atomic-recs-error&encapsulation=shadow","src/components/recommendations/atomic-recs-error/atomic-recs-error.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n","import {isNullOrUndefined} from '@coveo/bueno';\r\nimport {\r\n  buildRecommendationList,\r\n  RecommendationList,\r\n  RecommendationListState,\r\n} from '@coveo/headless/recommendation';\r\nimport {Component, h, State} from '@stencil/core';\r\nimport {AriaLiveRegion} from '../../../utils/accessibility-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {QueryErrorContainer} from '../../common/query-error/container';\r\nimport {QueryErrorDescription} from '../../common/query-error/description';\r\nimport {QueryErrorDetails} from '../../common/query-error/details';\r\nimport {QueryErrorGuard} from '../../common/query-error/guard';\r\nimport {QueryErrorIcon} from '../../common/query-error/icon';\r\nimport {QueryErrorLink} from '../../common/query-error/link';\r\nimport {QueryErrorShowMore} from '../../common/query-error/show-more';\r\nimport {QueryErrorTitle} from '../../common/query-error/title';\r\nimport {getAriaMessageFromErrorType} from '../../common/query-error/utils';\r\nimport {RecsBindings} from '../atomic-recs-interface/atomic-recs-interface';\r\n\r\n/**\r\n * The `atomic-recs-error` component handles fatal errors when performing a recommendations request on the index or Search API. When the error is known, it displays a link to relevant documentation link for debugging purposes. When the error is unknown, it displays a small text area with the JSON content of the error.\r\n *\r\n * @part icon - The svg related to the error.\r\n * @part title - The title of the error.\r\n * @part description - A description of the error.\r\n * @part doc-link - A link to the relevant documentation.\r\n * @part more-info-btn - A button to request additional error information.\r\n * @part error-info - Additional error information.\r\n */\r\n@Component({\r\n  tag: 'atomic-recs-error',\r\n  styleUrl: 'atomic-recs-error.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicRecsError implements InitializableComponent<RecsBindings> {\r\n  @InitializeBindings() public bindings!: RecsBindings;\r\n  public recommendationList!: RecommendationList;\r\n\r\n  @BindStateToController('recommendationList')\r\n  @State()\r\n  public recommendationListState!: RecommendationListState;\r\n  @State() public error!: Error;\r\n  @State() showMoreInfo = false;\r\n\r\n  @AriaLiveRegion('recs-error')\r\n  protected ariaMessage!: string;\r\n\r\n  public initialize() {\r\n    this.recommendationList = buildRecommendationList(this.bindings.engine);\r\n  }\r\n\r\n  public render() {\r\n    const {error} = this.recommendationListState;\r\n\r\n    const {\r\n      bindings: {\r\n        i18n,\r\n        engine: {\r\n          state: {\r\n            configuration: {organizationId, platformUrl},\r\n          },\r\n        },\r\n      },\r\n    } = this;\r\n\r\n    const hasError = !isNullOrUndefined(error);\r\n\r\n    if (hasError) {\r\n      this.ariaMessage = getAriaMessageFromErrorType(\r\n        i18n,\r\n        organizationId,\r\n        platformUrl,\r\n        error?.type\r\n      );\r\n    }\r\n\r\n    return (\r\n      <QueryErrorGuard hasError={hasError}>\r\n        <QueryErrorContainer>\r\n          <QueryErrorIcon errorType={error?.type} />\r\n          <QueryErrorTitle i18n={i18n} organizationId={organizationId} />\r\n          <QueryErrorDescription\r\n            i18n={i18n}\r\n            organizationId={organizationId}\r\n            url={platformUrl}\r\n          />\r\n          <QueryErrorShowMore\r\n            link={<QueryErrorLink i18n={i18n} errorType={error?.type} />}\r\n            onShowMore={() => (this.showMoreInfo = !this.showMoreInfo)}\r\n            i18n={i18n}\r\n          />\r\n          <QueryErrorDetails error={error} show={this.showMoreInfo} />\r\n        </QueryErrorContainer>\r\n      </QueryErrorGuard>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"yaAAA,MAAMA,EAAqB,w+tCAC3B,MAAAC,EAAeD,E,iXCsCFE,EAAe,M,yBAQjBC,KAAAC,aAAe,M,8EAAA,K,CAKjB,UAAAC,GACLF,KAAKG,mBAAqBC,EAAwBJ,KAAKK,SAASC,O,CAG3D,MAAAC,GACL,MAAMC,MAACA,GAASR,KAAKS,wBAErB,MACEJ,UAAUK,KACRA,EACAJ,QACEK,OACEC,eAAeC,eAACA,EAAcC,YAAEA,OAIpCd,KAEJ,MAAMe,GAAYC,EAAkBR,GAEpC,GAAIO,EAAU,CACZf,KAAKiB,YAAcC,EACjBR,EACAG,EACAC,EACAN,IAAK,MAALA,SAAK,SAALA,EAAOW,K,CAIX,OACEC,EAACC,EAAe,CAAAC,IAAA,2CAACP,SAAUA,GACzBK,EAACG,EAAmB,CAAAD,IAAA,4CAClBF,EAACI,EAAc,CAAAF,IAAA,2CAACG,UAAWjB,IAAK,MAALA,SAAK,SAALA,EAAOW,OAClCC,EAACM,EAAe,CAAAJ,IAAA,2CAACZ,KAAMA,EAAMG,eAAgBA,IAC7CO,EAACO,EAAqB,CAAAL,IAAA,2CACpBZ,KAAMA,EACNG,eAAgBA,EAChBe,IAAKd,IAEPM,EAACS,EAAkB,CAAAP,IAAA,2CACjBQ,KAAMV,EAACW,EAAc,CAACrB,KAAMA,EAAMe,UAAWjB,IAAK,MAALA,SAAK,SAALA,EAAOW,OACpDa,WAAY,IAAOhC,KAAKC,cAAgBD,KAAKC,aAC7CS,KAAMA,IAERU,EAACa,EAAiB,CAAAX,IAAA,2CAACd,MAAOA,EAAO0B,KAAMlC,KAAKC,gB,GAxDvBkC,EAAA,CAA5BC,K,+BAKMD,EAAA,CAFNE,EAAsB,uB,8CAObF,EAAA,CADTG,EAAe,e"}