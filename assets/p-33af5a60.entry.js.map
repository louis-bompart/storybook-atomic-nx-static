{"version":3,"names":["atomicInsightSmartSnippetCss","AtomicInsightSmartSnippetStyle0","AtomicInsightSmartSnippet","this","id","randomID","headingLevel","maximumHeight","collapsedHeight","feedbackSent","initialize","smartSnippet","buildInsightSmartSnippet","bindings","engine","smartSnippetCommon","SmartSnippetCommon","modalTagName","getHost","host","getBindings","getModalRef","modalRef","getHeadingLevel","getCollapsedHeight","getMaximumHeight","getSmartSnippetState","smartSnippetState","getSmartSnippet","getSnippetStyle","snippetStyle","getFeedbackSent","setModalRef","bind","setFeedbackSent","store","waitUntilAppLoaded","hideDuringRender","ref","isSent","componentWillUpdate","liked","disliked","componentDidRender","isAppLoaded","render","__decorate","InitializeBindings","BindStateToController"],"sources":["src/components/insight/smart-snippets/atomic-insight-smart-snippet/atomic-insight-smart-snippet.pcss?tag=atomic-insight-smart-snippet&encapsulation=shadow","src/components/insight/smart-snippets/atomic-insight-smart-snippet/atomic-insight-smart-snippet.tsx"],"sourcesContent":["@import '../../../common/smart-snippets/atomic-smart-snippet/atomic-smart-snippet.pcss';\r\n","import {Component, Prop, State, Element} from '@stencil/core';\r\nimport {\r\n  buildInsightSmartSnippet,\r\n  InsightSmartSnippet,\r\n  InsightSmartSnippetState,\r\n} from '../..';\r\nimport {\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n  BindStateToController,\r\n} from '../../../../utils/initialization-utils';\r\nimport {randomID} from '../../../../utils/utils';\r\nimport {SmartSnippetCommon} from '../../../common/smart-snippets/atomic-smart-snippet/smart-snippet-common';\r\nimport {InsightBindings} from '../../atomic-insight-interface/atomic-insight-interface';\r\n\r\n/**\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-insight-smart-snippet',\r\n  styleUrl: 'atomic-insight-smart-snippet.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicInsightSmartSnippet\r\n  implements InitializableComponent<InsightBindings>\r\n{\r\n  @InitializeBindings() public bindings!: InsightBindings;\r\n  public smartSnippet!: InsightSmartSnippet;\r\n\r\n  @BindStateToController('smartSnippet')\r\n  @State()\r\n  public smartSnippetState!: InsightSmartSnippetState;\r\n  public error!: Error;\r\n\r\n  @Element() public host!: HTMLElement;\r\n\r\n  private id = randomID();\r\n  private modalRef?: HTMLAtomicSmartSnippetFeedbackModalElement;\r\n  private smartSnippetCommon!: SmartSnippetCommon;\r\n\r\n  /**\r\n   * The [heading level](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) to use for the question at the top of the snippet, from 1 to 5.\r\n   */\r\n  @Prop({reflect: true}) public headingLevel = 0;\r\n\r\n  /**\r\n   * The maximum height (in pixels) a snippet can have before the component truncates it and displays a \"show more\" button.\r\n   */\r\n  @Prop({reflect: true}) maximumHeight = 250;\r\n  /**\r\n   * When the answer is partly hidden, how much of its height (in pixels) should be visible.\r\n   */\r\n  @Prop({reflect: true}) collapsedHeight = 180;\r\n\r\n  /**\r\n   * Sets the style of the snippet.\r\n   *\r\n   * @example:\r\n   * ```ts\r\n   * smartSnippet.snippetStyle = `\r\n   *   b {\r\n   *     color: blue;\r\n   *   }\r\n   * `;\r\n   * ```\r\n   */\r\n  @Prop({reflect: true}) snippetStyle?: string;\r\n\r\n  @State() feedbackSent = false;\r\n\r\n  public initialize() {\r\n    this.smartSnippet = buildInsightSmartSnippet(this.bindings.engine);\r\n    this.smartSnippetCommon = new SmartSnippetCommon({\r\n      id: this.id,\r\n      modalTagName: 'atomic-insight-smart-snippet-feedback-modal',\r\n      getHost: () => this.host,\r\n      getBindings: () => this.bindings,\r\n      getModalRef: () => this.modalRef,\r\n      getHeadingLevel: () => this.headingLevel,\r\n      getCollapsedHeight: () => this.collapsedHeight,\r\n      getMaximumHeight: () => this.maximumHeight,\r\n      getSmartSnippetState: () => this.smartSnippetState,\r\n      getSmartSnippet: () => this.smartSnippet,\r\n      getSnippetStyle: () => this.snippetStyle,\r\n      getFeedbackSent: () => this.feedbackSent,\r\n      setModalRef: this.setModalRef.bind(this),\r\n      setFeedbackSent: this.setFeedbackSent.bind(this),\r\n    });\r\n    this.bindings.store.waitUntilAppLoaded(() =>\r\n      this.smartSnippetCommon.hideDuringRender(false)\r\n    );\r\n  }\r\n\r\n  private setModalRef(ref: HTMLElement) {\r\n    this.modalRef = ref as HTMLAtomicInsightSmartSnippetFeedbackModalElement;\r\n  }\r\n\r\n  private setFeedbackSent(isSent: boolean) {\r\n    this.feedbackSent = isSent;\r\n  }\r\n\r\n  public componentWillUpdate() {\r\n    if (!(this.smartSnippetState.liked || this.smartSnippetState.disliked)) {\r\n      this.setFeedbackSent(false);\r\n    }\r\n  }\r\n\r\n  public componentDidRender() {\r\n    if (this.bindings.store.isAppLoaded()) {\r\n      this.smartSnippetCommon.hideDuringRender(false);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    return this.smartSnippetCommon.render();\r\n  }\r\n}\r\n"],"mappings":"qWAAA,MAAMA,EAA+B,02wCACrC,MAAAC,EAAeD,E,iXCsBFE,EAAyB,M,yBAa5BC,KAAAC,GAAKC,IAOiBF,KAAAG,aAAe,EAKtBH,KAAAI,cAAgB,IAIhBJ,KAAAK,gBAAkB,IAgBhCL,KAAAM,aAAe,M,mDAzBqB,E,mBAKN,I,qBAIE,I,8CAgBjB,K,CAEjB,UAAAC,GACLP,KAAKQ,aAAeC,EAAyBT,KAAKU,SAASC,QAC3DX,KAAKY,mBAAqB,IAAIC,EAAmB,CAC/CZ,GAAID,KAAKC,GACTa,aAAc,8CACdC,QAAS,IAAMf,KAAKgB,KACpBC,YAAa,IAAMjB,KAAKU,SACxBQ,YAAa,IAAMlB,KAAKmB,SACxBC,gBAAiB,IAAMpB,KAAKG,aAC5BkB,mBAAoB,IAAMrB,KAAKK,gBAC/BiB,iBAAkB,IAAMtB,KAAKI,cAC7BmB,qBAAsB,IAAMvB,KAAKwB,kBACjCC,gBAAiB,IAAMzB,KAAKQ,aAC5BkB,gBAAiB,IAAM1B,KAAK2B,aAC5BC,gBAAiB,IAAM5B,KAAKM,aAC5BuB,YAAa7B,KAAK6B,YAAYC,KAAK9B,MACnC+B,gBAAiB/B,KAAK+B,gBAAgBD,KAAK9B,QAE7CA,KAAKU,SAASsB,MAAMC,oBAAmB,IACrCjC,KAAKY,mBAAmBsB,iBAAiB,Q,CAIrC,WAAAL,CAAYM,GAClBnC,KAAKmB,SAAWgB,C,CAGV,eAAAJ,CAAgBK,GACtBpC,KAAKM,aAAe8B,C,CAGf,mBAAAC,GACL,KAAMrC,KAAKwB,kBAAkBc,OAAStC,KAAKwB,kBAAkBe,UAAW,CACtEvC,KAAK+B,gBAAgB,M,EAIlB,kBAAAS,GACL,GAAIxC,KAAKU,SAASsB,MAAMS,cAAe,CACrCzC,KAAKY,mBAAmBsB,iBAAiB,M,EAItC,MAAAQ,GACL,OAAO1C,KAAKY,mBAAmB8B,Q,6BAxFJC,EAAA,CAA5BC,K,+BAKMD,EAAA,CAFNE,EAAsB,iB"}