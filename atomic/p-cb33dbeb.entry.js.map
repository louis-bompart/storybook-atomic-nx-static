{"version":3,"names":["atomicCommerceQuerySummaryCss","AtomicCommerceQuerySummaryStyle0","AtomicQuerySummary","initialize","this","bindings","interfaceElement","type","listingOrSearchSummary","buildListingSummary","engine","buildSearchSummary","render","firstProduct","firstSearchExecuted","lastProduct","totalNumberOfProducts","hasProducts","hasError","listingOrSearchSummaryState","i18nKey","highlights","ariaLiveMessage","getQuerySummaryI18nParameters","first","last","query","isSearch","total","i18n","isLoading","ariaMessage","h","QuerySummaryGuard","key","hasResults","QuerySummaryContainer","LocalizedString","params","count","state","__decorate","InitializeBindings","BindStateToController","AriaLiveRegion"],"sources":["src/components/commerce/atomic-commerce-query-summary/atomic-commerce-query-summary.pcss?tag=atomic-commerce-query-summary&encapsulation=shadow","src/components/commerce/atomic-commerce-query-summary/atomic-commerce-query-summary.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n\r\n:host {\r\n  overflow: hidden;\r\n}\r\n","import {\r\n  ListingSummary,\r\n  ListingSummaryState,\r\n  Pagination,\r\n  SearchSummary,\r\n  SearchSummaryState,\r\n  buildListingSummary,\r\n  buildSearchSummary,\r\n} from '@coveo/headless/commerce';\r\nimport {Component, h, State} from '@stencil/core';\r\nimport {AriaLiveRegion} from '../../../utils/accessibility-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {LocalizedString} from '../../../utils/jsx-utils';\r\nimport {QuerySummaryContainer} from '../../common/query-summary/container';\r\nimport {QuerySummaryGuard} from '../../common/query-summary/guard';\r\nimport {getQuerySummaryI18nParameters} from '../../common/query-summary/utils';\r\nimport {CommerceBindings} from '../atomic-commerce-interface/atomic-commerce-interface';\r\n\r\n/**\r\n * The `atomic-commerce-query-summary` component displays information about the current range of results and the request duration (e.g., \"Results 1-10 of 123 in 0.47 seconds\").\r\n *\r\n * @part container - The container for the whole summary.\r\n * @part results - The container for the results.\r\n * @part duration - The container for the duration.\r\n * @part highlight - The summary highlights.\r\n * @part query - The summary highlighted query.\r\n * @part placeholder - The query summary placeholder used while the search interface is initializing.\r\n *\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-commerce-query-summary',\r\n  styleUrl: 'atomic-commerce-query-summary.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicQuerySummary\r\n  implements InitializableComponent<CommerceBindings>\r\n{\r\n  @InitializeBindings() public bindings!: CommerceBindings;\r\n  public listingOrSearchSummary!: SearchSummary | ListingSummary;\r\n  public pagination!: Pagination;\r\n\r\n  @BindStateToController('listingOrSearchSummary')\r\n  @State()\r\n  private listingOrSearchSummaryState!:\r\n    | SearchSummaryState\r\n    | ListingSummaryState;\r\n\r\n  @State() public error!: Error;\r\n\r\n  @AriaLiveRegion('query-summary')\r\n  protected ariaMessage!: string;\r\n\r\n  public initialize() {\r\n    if (this.bindings.interfaceElement.type === 'product-listing') {\r\n      this.listingOrSearchSummary = buildListingSummary(this.bindings.engine);\r\n    } else {\r\n      this.listingOrSearchSummary = buildSearchSummary(this.bindings.engine);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const {\r\n      firstProduct,\r\n      firstSearchExecuted,\r\n      lastProduct,\r\n      totalNumberOfProducts,\r\n      hasProducts,\r\n      hasError,\r\n    } = this.listingOrSearchSummaryState;\r\n\r\n    const {i18nKey, highlights, ariaLiveMessage} =\r\n      getQuerySummaryI18nParameters({\r\n        first: firstProduct,\r\n        last: lastProduct,\r\n        query: this.isSearch(this.listingOrSearchSummaryState)\r\n          ? this.listingOrSearchSummaryState.query\r\n          : '',\r\n        total: totalNumberOfProducts,\r\n        i18n: this.bindings.i18n,\r\n        isLoading: false,\r\n      });\r\n\r\n    this.ariaMessage = ariaLiveMessage;\r\n\r\n    return (\r\n      <QuerySummaryGuard\r\n        firstSearchExecuted={firstSearchExecuted}\r\n        hasResults={hasProducts}\r\n        hasError={hasError}\r\n      >\r\n        <QuerySummaryContainer>\r\n          <LocalizedString\r\n            key={i18nKey}\r\n            bindings={this.bindings}\r\n            params={highlights}\r\n            count={lastProduct}\r\n          />\r\n        </QuerySummaryContainer>\r\n      </QuerySummaryGuard>\r\n    );\r\n  }\r\n\r\n  private isSearch(\r\n    state: ListingSummaryState | SearchSummaryState\r\n  ): state is SearchSummaryState {\r\n    return 'query' in state;\r\n  }\r\n}\r\n"],"mappings":"8TAAA,MAAMA,EAAgC,8/tCACtC,MAAAC,EAAeD,E,iXCsCFE,EAAkB,M,yFAkBtB,UAAAC,GACL,GAAIC,KAAKC,SAASC,iBAAiBC,OAAS,kBAAmB,CAC7DH,KAAKI,uBAAyBC,EAAoBL,KAAKC,SAASK,O,KAC3D,CACLN,KAAKI,uBAAyBG,EAAmBP,KAAKC,SAASK,O,EAI5D,MAAAE,GACL,MAAMC,aACJA,EAAYC,oBACZA,EAAmBC,YACnBA,EAAWC,sBACXA,EAAqBC,YACrBA,EAAWC,SACXA,GACEd,KAAKe,4BAET,MAAMC,QAACA,EAAOC,WAAEA,EAAUC,gBAAEA,GAC1BC,EAA8B,CAC5BC,MAAOX,EACPY,KAAMV,EACNW,MAAOtB,KAAKuB,SAASvB,KAAKe,6BACtBf,KAAKe,4BAA4BO,MACjC,GACJE,MAAOZ,EACPa,KAAMzB,KAAKC,SAASwB,KACpBC,UAAW,QAGf1B,KAAK2B,YAAcT,EAEnB,OACEU,EAACC,EAAiB,CAAAC,IAAA,2CAChBpB,oBAAqBA,EACrBqB,WAAYlB,EACZC,SAAUA,GAEVc,EAACI,EAAqB,CAAAF,IAAA,4CACpBF,EAACK,EAAe,CACdH,IAAKd,EACLf,SAAUD,KAAKC,SACfiC,OAAQjB,EACRkB,MAAOxB,K,CAOT,QAAAY,CACNa,GAEA,MAAO,UAAWA,C,GApESC,EAAA,CAA5BC,K,+BAMOD,EAAA,CAFPE,EAAsB,2B,kDASbF,EAAA,CADTG,EAAe,kB"}