{"version":3,"names":["bindAnalyticsToLink","link","onSelect","onBeginDelayedSelect","onCancelPendingSelect","stopPropagation","stopPropagationAndProcess","e","process","forEach","eventName","addEventListener","passive","LinkWithItemAnalytics","href","className","part","title","onMouseOver","onMouseLeave","onFocus","onBlur","ref","attributes","tabIndex","ariaHidden","rel","target","children","h","class","filterProtocol","el","length","nodeName","nodeValue","setAttribute"],"sources":["src/components/common/item-link/item-link.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\r\nimport {filterProtocol} from '../../../utils/xss-utils';\r\nimport {ItemTarget} from '../layout/display-options';\r\n\r\ninterface ItemLinkEventProps {\r\n  onSelect: () => void;\r\n  onBeginDelayedSelect: () => void;\r\n  onCancelPendingSelect: () => void;\r\n  stopPropagation?: boolean;\r\n}\r\n\r\nexport interface ItemLinkProps extends ItemLinkEventProps {\r\n  href: string;\r\n  className?: string;\r\n  part?: string;\r\n  title?: string;\r\n  ref?: (elm?: HTMLAnchorElement) => void;\r\n  stopPropagation?: boolean;\r\n  attributes?: Attr[];\r\n  tabIndex?: number;\r\n  ariaHidden?: boolean;\r\n  target?: ItemTarget;\r\n  rel?: string;\r\n  onMouseOver?: () => void;\r\n  onMouseLeave?: () => void;\r\n  onFocus?: () => void;\r\n  onBlur?: () => void;\r\n}\r\n\r\nexport const bindAnalyticsToLink = (\r\n  link: HTMLAnchorElement,\r\n  {\r\n    onSelect,\r\n    onBeginDelayedSelect,\r\n    onCancelPendingSelect,\r\n    stopPropagation = true,\r\n  }: ItemLinkEventProps\r\n) => {\r\n  const stopPropagationAndProcess = (e: Event, process: () => void) => {\r\n    stopPropagation && e.stopPropagation();\r\n    process();\r\n  };\r\n  (['click', 'contextmenu', 'mousedown', 'mouseup'] as const).forEach(\r\n    (eventName) =>\r\n      link.addEventListener(eventName, (e) =>\r\n        stopPropagationAndProcess(e, onSelect)\r\n      )\r\n  );\r\n  link.addEventListener(\r\n    'touchstart',\r\n    (e) => stopPropagationAndProcess(e, onBeginDelayedSelect),\r\n    {passive: true}\r\n  );\r\n  link.addEventListener(\r\n    'touchend',\r\n    (e) => stopPropagationAndProcess(e, onCancelPendingSelect),\r\n    {passive: true}\r\n  );\r\n};\r\n\r\nexport const LinkWithItemAnalytics: FunctionalComponent<ItemLinkProps> = (\r\n  {\r\n    href,\r\n    className,\r\n    part,\r\n    title,\r\n    onSelect,\r\n    onBeginDelayedSelect,\r\n    onCancelPendingSelect,\r\n    onMouseOver,\r\n    onMouseLeave,\r\n    onFocus,\r\n    onBlur,\r\n    ref,\r\n    attributes,\r\n    tabIndex,\r\n    ariaHidden,\r\n    rel,\r\n    stopPropagation = true,\r\n    target = '_self',\r\n  },\r\n  children\r\n) => {\r\n  return (\r\n    <a\r\n      class={className}\r\n      part={part}\r\n      href={filterProtocol(href)}\r\n      target={target}\r\n      title={title}\r\n      rel={rel}\r\n      ref={(el) => {\r\n        if (ref) {\r\n          ref(el);\r\n        }\r\n\r\n        if (!el) {\r\n          return;\r\n        }\r\n\r\n        bindAnalyticsToLink(el, {\r\n          onSelect,\r\n          onBeginDelayedSelect,\r\n          onCancelPendingSelect,\r\n          stopPropagation,\r\n        });\r\n\r\n        if (attributes?.length) {\r\n          [...attributes].forEach(({nodeName, nodeValue}) => {\r\n            el.setAttribute(nodeName, nodeValue!);\r\n          });\r\n        }\r\n\r\n        if (ariaHidden) {\r\n          el.setAttribute('aria-hidden', 'true');\r\n        }\r\n      }}\r\n      tabIndex={tabIndex}\r\n      onMouseOver={onMouseOver}\r\n      onMouseLeave={onMouseLeave}\r\n      onFocus={onFocus}\r\n      onBlur={onBlur}\r\n    >\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n"],"mappings":"8EA6BaA,EAAsB,CACjCC,GAEEC,WACAC,uBACAC,wBACAC,kBAAkB,SAGpB,MAAMC,EAA4B,CAACC,EAAUC,KAC3CH,GAAmBE,EAAEF,kBACrBG,GAAS,EAEV,CAAC,QAAS,cAAe,YAAa,WAAqBC,SACzDC,GACCT,EAAKU,iBAAiBD,GAAYH,GAChCD,EAA0BC,EAAGL,OAGnCD,EAAKU,iBACH,cACCJ,GAAMD,EAA0BC,EAAGJ,IACpC,CAACS,QAAS,OAEZX,EAAKU,iBACH,YACCJ,GAAMD,EAA0BC,EAAGH,IACpC,CAACQ,QAAS,MACX,E,MAGUC,EAA4D,EAErEC,OACAC,YACAC,OACAC,QACAf,WACAC,uBACAC,wBACAc,cACAC,eACAC,UACAC,SACAC,MACAC,aACAC,WACAC,aACAC,MACArB,kBAAkB,KAClBsB,SAAS,SAEXC,IAGEC,EAAA,KACEC,MAAOf,EACPC,KAAMA,EACNF,KAAMiB,EAAejB,GACrBa,OAAQA,EACRV,MAAOA,EACPS,IAAKA,EACLJ,IAAMU,IACJ,GAAIV,EAAK,CACPA,EAAIU,E,CAGN,IAAKA,EAAI,CACP,M,CAGFhC,EAAoBgC,EAAI,CACtB9B,WACAC,uBACAC,wBACAC,oBAGF,GAAIkB,IAAU,MAAVA,SAAU,SAAVA,EAAYU,OAAQ,CACtB,IAAIV,GAAYd,SAAQ,EAAEyB,WAAUC,gBAClCH,EAAGI,aAAaF,EAAUC,EAAW,G,CAIzC,GAAIV,EAAY,CACdO,EAAGI,aAAa,cAAe,O,GAGnCZ,SAAUA,EACVN,YAAaA,EACbC,aAAcA,EACdC,QAASA,EACTC,OAAQA,GAEPO,U"}