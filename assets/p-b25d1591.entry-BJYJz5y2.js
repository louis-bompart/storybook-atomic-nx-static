import{N as p,g as f,O as d}from"./preview-Cp9OdNlu.js";import{n as h,a as g}from"./p-7e7b1a62-C6-3oFSh.js";import{S as m}from"./p-abea0bd2-55DIQVI1.js";import{m as F,p as u}from"./p-107c3d7f-lK1Nx8Nb.js";import{s as b,t as v,a as y,r as A}from"./p-d1aad506-D1ww1j4r.js";import"./p-f5723aee-KeNxIJx_.js";import"./iframe-vvwA9ouH.js";import"../sb-preview/runtime.js";import"./chunk-GKNNPQCW-BkHQSocK.js";import"./p-1580513b-3LX64KEr.js";import"./p-e9c4f463-BPmi-3c5.js";var c=function(i,a,s,e){var o=arguments.length,t=o<3?a:e===null?e=Object.getOwnPropertyDescriptor(a,s):e,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(i,a,s,e);else for(var n=i.length-1;n>=0;n--)(r=i[n])&&(t=(o<3?r(t):o>3?r(a,s,t):r(a,s))||t);return o>3&&t&&Object.defineProperty(a,s,t),t};const l=class{constructor(i){p(this,i),this.collapseFacetsAfter=4,this.sortFacets=()=>{const a=b(this.host),s=this.sortFacetsUsingManager(a,this.facetManager),{visibleFacets:e,invisibleFacets:o}=v(s,this.bindings.store.getAllFacets()),t=y(this.host);A(e,this.collapseFacetsAfter),t==null||t.updateCollapseFacetsDependingOnFacetsVisibility(this.collapseFacetsAfter,e.length),this.host.append(...e,...o,...t?[t]:[])},this.facetManagerState=void 0,this.error=void 0,this.collapseFacetsAfter=4}initialize(){this.validateProps(),this.facetManager=m(this.bindings.engine),this.bindings.i18n.on("languageChanged",this.sortFacets)}validateProps(){new h({collapseFacetAfter:new g({min:-1,required:!0})}).validate({collapseFacetAfter:this.collapseFacetsAfter})}sortFacetsUsingManager(i,a){const s=i.map(e=>({facetId:e.facetId,payload:e}));return a.sort(s).map(e=>e.payload)}disconnectedCallback(){this.bindings.i18n.off("languageChanged",this.sortFacets)}render(){return f("slot",{key:"e3ff8d8413d5983636e565730f726487284f1f51"})}get host(){return d(this)}};c([F()],l.prototype,"bindings",void 0);c([u("facetManager",{onUpdateCallbackMethod:"sortFacets"})],l.prototype,"facetManagerState",void 0);export{l as atomic_facet_manager};
