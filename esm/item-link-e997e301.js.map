{"file":"item-link-e997e301.js","mappings":";;;MA6Ba,mBAAmB,GAAG,CACjC,IAAuB,EACvB,EACE,QAAQ,EACR,oBAAoB,EACpB,qBAAqB,EACrB,eAAe,GAAG,IAAI,GACH;IAErB,MAAM,yBAAyB,GAAG,CAAC,CAAQ,EAAE,OAAmB;QAC9D,eAAe,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;QACvC,OAAO,EAAE,CAAC;KACX,CAAC;IACD,CAAC,OAAO,EAAE,aAAa,EAAE,WAAW,EAAE,SAAS,CAAW,CAAC,OAAO,CACjE,CAAC,SAAS,KACR,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,KACjC,yBAAyB,CAAC,CAAC,EAAE,QAAQ,CAAC,CACvC,CACJ,CAAC;IACF,IAAI,CAAC,gBAAgB,CACnB,YAAY,EACZ,CAAC,CAAC,KAAK,yBAAyB,CAAC,CAAC,EAAE,oBAAoB,CAAC,EACzD,EAAC,OAAO,EAAE,IAAI,EAAC,CAChB,CAAC;IACF,IAAI,CAAC,gBAAgB,CACnB,UAAU,EACV,CAAC,CAAC,KAAK,yBAAyB,CAAC,CAAC,EAAE,qBAAqB,CAAC,EAC1D,EAAC,OAAO,EAAE,IAAI,EAAC,CAChB,CAAC;AACJ,EAAE;MAEW,qBAAqB,GAAuC,CACvE,EACE,IAAI,EACJ,SAAS,EACT,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,oBAAoB,EACpB,qBAAqB,EACrB,WAAW,EACX,YAAY,EACZ,OAAO,EACP,MAAM,EACN,GAAG,EACH,UAAU,EACV,QAAQ,EACR,UAAU,EACV,GAAG,EACH,eAAe,GAAG,IAAI,EACtB,MAAM,GAAG,OAAO,GACjB,EACD,QAAQ;IAER,QACE,SACE,KAAK,EAAE,SAAS,EAChB,IAAI,EAAE,IAAI,EACV,IAAI,EAAE,cAAc,CAAC,IAAI,CAAC,EAC1B,MAAM,EAAE,MAAM,EACd,KAAK,EAAE,KAAK,EACZ,GAAG,EAAE,GAAG,EACR,GAAG,EAAE,CAAC,EAAE;YACN,IAAI,GAAG,EAAE;gBACP,GAAG,CAAC,EAAE,CAAC,CAAC;aACT;YAED,IAAI,CAAC,EAAE,EAAE;gBACP,OAAO;aACR;YAED,mBAAmB,CAAC,EAAE,EAAE;gBACtB,QAAQ;gBACR,oBAAoB;gBACpB,qBAAqB;gBACrB,eAAe;aAChB,CAAC,CAAC;YAEH,IAAI,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,MAAM,EAAE;gBACtB,CAAC,GAAG,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,EAAC,QAAQ,EAAE,SAAS,EAAC;oBAC5C,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAU,CAAC,CAAC;iBACvC,CAAC,CAAC;aACJ;YAED,IAAI,UAAU,EAAE;gBACd,EAAE,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;aACxC;SACF,EACD,QAAQ,EAAE,QAAQ,EAClB,WAAW,EAAE,WAAW,EACxB,YAAY,EAAE,YAAY,EAC1B,OAAO,EAAE,OAAO,EAChB,MAAM,EAAE,MAAM,IAEb,QAAQ,CACP,EACJ;AACJ;;;;","names":[],"sources":["src/components/common/item-link/item-link.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\r\nimport {filterProtocol} from '../../../utils/xss-utils';\r\nimport {ItemTarget} from '../layout/display-options';\r\n\r\ninterface ItemLinkEventProps {\r\n  onSelect: () => void;\r\n  onBeginDelayedSelect: () => void;\r\n  onCancelPendingSelect: () => void;\r\n  stopPropagation?: boolean;\r\n}\r\n\r\nexport interface ItemLinkProps extends ItemLinkEventProps {\r\n  href: string;\r\n  className?: string;\r\n  part?: string;\r\n  title?: string;\r\n  ref?: (elm?: HTMLAnchorElement) => void;\r\n  stopPropagation?: boolean;\r\n  attributes?: Attr[];\r\n  tabIndex?: number;\r\n  ariaHidden?: boolean;\r\n  target?: ItemTarget;\r\n  rel?: string;\r\n  onMouseOver?: () => void;\r\n  onMouseLeave?: () => void;\r\n  onFocus?: () => void;\r\n  onBlur?: () => void;\r\n}\r\n\r\nexport const bindAnalyticsToLink = (\r\n  link: HTMLAnchorElement,\r\n  {\r\n    onSelect,\r\n    onBeginDelayedSelect,\r\n    onCancelPendingSelect,\r\n    stopPropagation = true,\r\n  }: ItemLinkEventProps\r\n) => {\r\n  const stopPropagationAndProcess = (e: Event, process: () => void) => {\r\n    stopPropagation && e.stopPropagation();\r\n    process();\r\n  };\r\n  (['click', 'contextmenu', 'mousedown', 'mouseup'] as const).forEach(\r\n    (eventName) =>\r\n      link.addEventListener(eventName, (e) =>\r\n        stopPropagationAndProcess(e, onSelect)\r\n      )\r\n  );\r\n  link.addEventListener(\r\n    'touchstart',\r\n    (e) => stopPropagationAndProcess(e, onBeginDelayedSelect),\r\n    {passive: true}\r\n  );\r\n  link.addEventListener(\r\n    'touchend',\r\n    (e) => stopPropagationAndProcess(e, onCancelPendingSelect),\r\n    {passive: true}\r\n  );\r\n};\r\n\r\nexport const LinkWithItemAnalytics: FunctionalComponent<ItemLinkProps> = (\r\n  {\r\n    href,\r\n    className,\r\n    part,\r\n    title,\r\n    onSelect,\r\n    onBeginDelayedSelect,\r\n    onCancelPendingSelect,\r\n    onMouseOver,\r\n    onMouseLeave,\r\n    onFocus,\r\n    onBlur,\r\n    ref,\r\n    attributes,\r\n    tabIndex,\r\n    ariaHidden,\r\n    rel,\r\n    stopPropagation = true,\r\n    target = '_self',\r\n  },\r\n  children\r\n) => {\r\n  return (\r\n    <a\r\n      class={className}\r\n      part={part}\r\n      href={filterProtocol(href)}\r\n      target={target}\r\n      title={title}\r\n      rel={rel}\r\n      ref={(el) => {\r\n        if (ref) {\r\n          ref(el);\r\n        }\r\n\r\n        if (!el) {\r\n          return;\r\n        }\r\n\r\n        bindAnalyticsToLink(el, {\r\n          onSelect,\r\n          onBeginDelayedSelect,\r\n          onCancelPendingSelect,\r\n          stopPropagation,\r\n        });\r\n\r\n        if (attributes?.length) {\r\n          [...attributes].forEach(({nodeName, nodeValue}) => {\r\n            el.setAttribute(nodeName, nodeValue!);\r\n          });\r\n        }\r\n\r\n        if (ariaHidden) {\r\n          el.setAttribute('aria-hidden', 'true');\r\n        }\r\n      }}\r\n      tabIndex={tabIndex}\r\n      onMouseOver={onMouseOver}\r\n      onMouseLeave={onMouseLeave}\r\n      onFocus={onFocus}\r\n      onBlur={onBlur}\r\n    >\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n"],"version":3}