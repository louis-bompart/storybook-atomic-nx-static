import{r as t,h as i,g as e}from"./p-00525453.js";import{o as r}from"./p-abea0bd2.js";import{I as s}from"./p-107c3d7f.js";import{f as o}from"./p-659d3ea8.js";import{R as a}from"./p-849728b4.js";import"./p-1580513b.js";import"./p-f5723aee.js";import"./p-e9c4f463.js";import"./p-529fdce5.js";const n="atomic-result-image{display:grid;place-items:center;grid-template-rows:100%;width:100%;height:100%}atomic-result-image img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}";const l=n;var h=undefined&&undefined.__decorate||function(t,i,e,r){var s=arguments.length,o=s<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(t,i,e,r);else for(var n=t.length-1;n>=0;n--)if(a=t[n])o=(s<3?a(o):s>3?a(i,e,o):a(i,e))||o;return s>3&&o&&Object.defineProperty(i,e,o),o};const d=class{constructor(i){t(this,i);this.useFallback=false;this.useFallback=false;this.field=undefined;this.fallback=undefined}get url(){const t=r.getResultProperty(this.result,this.field);return Array.isArray(t)?t[0]:t}logWarning(t){this.bindings.engine.logger.warn(t,this.host)}handleImageError(){const t=`The image url "${this.url}" is not valid or could not be loaded. You might want to add a "fallback" property.`;this.fallback?this.useFallback=true:this.logWarning(t)}handleMissingFallback(t){if(!this.fallback){this.logWarning(t);this.host.remove();return null}return this.fallback}validateUrl(t){if(!t){const t=`"${this.field}" is missing. Please review your indexation. You might want to add a "fallback" property.`;return this.handleMissingFallback(t)}if(typeof t!=="string"){const t=`Expected "${this.field}" to be a text field. Please review your indexation. You might want to add a "fallback" property.`;return this.handleMissingFallback(t)}return t}render(){let t=this.useFallback?this.fallback:this.url;if(!this.useFallback){t=this.validateUrl(t);if(!t){return}}return i("img",{alt:`${this.field} image`,src:o(t),onError:()=>this.handleImageError(),loading:"lazy"})}get host(){return e(this)}};h([s()],d.prototype,"bindings",void 0);h([a()],d.prototype,"result",void 0);d.style=l;export{d as atomic_result_image};
//# sourceMappingURL=p-52caf5d4.entry.js.map