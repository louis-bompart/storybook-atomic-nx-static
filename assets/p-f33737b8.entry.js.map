{"version":3,"names":["atomicInsightQuerySummaryCss","AtomicInsightQuerySummaryStyle0","AtomicQuerySummary","initialize","this","querySummary","buildQuerySummary","bindings","engine","render","hasError","hasQuery","hasResults","firstSearchExecuted","firstResult","lastResult","isLoading","query","total","querySummaryState","ariaLiveMessage","highlights","i18nKey","getQuerySummaryI18nParameters","first","i18n","last","ariaMessage","h","QuerySummaryGuard","QuerySummaryContainer","additionalClasses","LocalizedString","key","params","count","class","t","__decorate","InitializeBindings","BindStateToController","AriaLiveRegion"],"sources":["src/components/insight/atomic-insight-query-summary/atomic-insight-query-summary.pcss?tag=atomic-insight-query-summary&encapsulation=shadow","src/components/insight/atomic-insight-query-summary/atomic-insight-query-summary.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\r\n\r\n:host {\r\n  overflow: hidden;\r\n}\r\n","import {\r\n  buildQuerySummary,\r\n  QuerySummary,\r\n  QuerySummaryState,\r\n} from '@coveo/headless/insight';\r\nimport {Component, State, h} from '@stencil/core';\r\nimport {AriaLiveRegion} from '../../../utils/accessibility-utils';\r\nimport {\r\n  BindStateToController,\r\n  InitializableComponent,\r\n  InitializeBindings,\r\n} from '../../../utils/initialization-utils';\r\nimport {LocalizedString} from '../../../utils/jsx-utils';\r\nimport {QuerySummaryContainer} from '../../common/query-summary/container';\r\nimport {QuerySummaryGuard} from '../../common/query-summary/guard';\r\nimport {getQuerySummaryI18nParameters} from '../../common/query-summary/utils';\r\nimport {InsightBindings} from '../atomic-insight-interface/atomic-insight-interface';\r\n\r\n/**\r\n * @internal\r\n */\r\n@Component({\r\n  tag: 'atomic-insight-query-summary',\r\n  styleUrl: 'atomic-insight-query-summary.pcss',\r\n  shadow: true,\r\n})\r\nexport class AtomicQuerySummary\r\n  implements InitializableComponent<InsightBindings>\r\n{\r\n  @InitializeBindings() public bindings!: InsightBindings;\r\n  public querySummary!: QuerySummary;\r\n\r\n  @BindStateToController('querySummary')\r\n  @State()\r\n  private querySummaryState!: QuerySummaryState;\r\n  @State() public error!: Error;\r\n\r\n  @AriaLiveRegion('query-summary')\r\n  protected ariaMessage!: string;\r\n\r\n  public initialize() {\r\n    this.querySummary = buildQuerySummary(this.bindings.engine);\r\n  }\r\n\r\n  public render() {\r\n    const {\r\n      hasError,\r\n      hasQuery,\r\n      hasResults,\r\n      firstSearchExecuted,\r\n      firstResult,\r\n      lastResult,\r\n      isLoading,\r\n      query,\r\n      total,\r\n    } = this.querySummaryState;\r\n    const {ariaLiveMessage, highlights, i18nKey} =\r\n      getQuerySummaryI18nParameters({\r\n        first: firstResult,\r\n        i18n: this.bindings.i18n,\r\n        isLoading,\r\n        last: lastResult,\r\n        query,\r\n        total,\r\n      });\r\n\r\n    if (hasQuery) {\r\n      this.ariaMessage = ariaLiveMessage;\r\n      return (\r\n        <QuerySummaryGuard\r\n          firstSearchExecuted={firstSearchExecuted}\r\n          hasResults={hasResults}\r\n          hasError={hasError}\r\n        >\r\n          <QuerySummaryContainer additionalClasses=\"px-6 py-4\">\r\n            <LocalizedString\r\n              key={i18nKey}\r\n              bindings={this.bindings}\r\n              params={highlights}\r\n              count={total}\r\n            ></LocalizedString>\r\n          </QuerySummaryContainer>\r\n        </QuerySummaryGuard>\r\n      );\r\n    }\r\n\r\n    if (this.querySummaryState.hasError) {\r\n      return;\r\n    }\r\n\r\n    return (\r\n      <div class=\"bg-[#F1F2FF] text-[#54698D] px-6 py-4 italic\">\r\n        {this.bindings.i18n.t('insight-related-cases')}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"uTAAA,MAAMA,EAA+B,8/tCACrC,MAAAC,EAAeD,E,iXCyBFE,EAAkB,M,+EActB,UAAAC,GACLC,KAAKC,aAAeC,EAAkBF,KAAKG,SAASC,O,CAG/C,MAAAC,GACL,MAAMC,SACJA,EAAQC,SACRA,EAAQC,WACRA,EAAUC,oBACVA,EAAmBC,YACnBA,EAAWC,WACXA,EAAUC,UACVA,EAASC,MACTA,EAAKC,MACLA,GACEd,KAAKe,kBACT,MAAMC,gBAACA,EAAeC,WAAEA,EAAUC,QAAEA,GAClCC,EAA8B,CAC5BC,MAAOV,EACPW,KAAMrB,KAAKG,SAASkB,KACpBT,YACAU,KAAMX,EACNE,QACAC,UAGJ,GAAIP,EAAU,CACZP,KAAKuB,YAAcP,EACnB,OACEQ,EAACC,EAAiB,CAChBhB,oBAAqBA,EACrBD,WAAYA,EACZF,SAAUA,GAEVkB,EAACE,EAAqB,CAACC,kBAAkB,aACvCH,EAACI,EAAe,CACdC,IAAKX,EACLf,SAAUH,KAAKG,SACf2B,OAAQb,EACRc,MAAOjB,K,CAOjB,GAAId,KAAKe,kBAAkBT,SAAU,CACnC,M,CAGF,OACEkB,EAAA,OAAKQ,MAAM,gDACRhC,KAAKG,SAASkB,KAAKY,EAAE,yB,GA/DCC,EAAA,CAA5BC,K,+BAKOD,EAAA,CAFPE,EAAsB,iB,wCAMbF,EAAA,CADTG,EAAe,kB"}