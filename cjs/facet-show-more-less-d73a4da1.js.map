{"file":"facet-show-more-less-d73a4da1.js","mappings":"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","names":["shouldUpdateFacetSearchComponent","search","h","SearchIcon","Button","CloseIcon","escape","PlusIcon"],"sources":["src/components/common/facets/facet-search/facet-search-aria-live.ts","src/components/common/facets/facet-search/facet-search-input.tsx","src/components/common/facets/facet-search/facet-search-matches.tsx","src/components/common/facets/facet-show-more-less/facet-show-more-less.tsx"],"sourcesContent":["import {i18n} from 'i18next';\r\nimport {Facet, FacetSearchState} from '../../types';\r\nimport {shouldUpdateFacetSearchComponent} from './facet-search-utils';\r\n\r\nexport function announceFacetSearchResultsWithAriaLive(\r\n  facet: Pick<Facet, 'subscribe'> & {state: {facetSearch: FacetSearchState}},\r\n  label: string,\r\n  setAriaLive: (msg: string) => void,\r\n  i18n: i18n\r\n) {\r\n  let prevState = facet.state.facetSearch;\r\n  facet.subscribe(() => {\r\n    if (\r\n      shouldUpdateFacetSearchComponent(facet.state.facetSearch, prevState) &&\r\n      facet.state.facetSearch.query\r\n    ) {\r\n      prevState = facet.state.facetSearch;\r\n\r\n      setAriaLive(\r\n        i18n.t('facet-search-results-count', {\r\n          count: facet.state.facetSearch.values.length,\r\n          label,\r\n        })\r\n      );\r\n    }\r\n  });\r\n}\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport CloseIcon from '../../../../images/close.svg';\r\nimport SearchIcon from '../../../../images/search.svg';\r\nimport {Button} from '../../button';\r\n\r\ninterface FacetSearchInputProps {\r\n  label: string;\r\n  query: string;\r\n  i18n: i18n;\r\n  onClear(): void;\r\n  onChange(value: string): void;\r\n}\r\n\r\nexport const FacetSearchInput: FunctionalComponent<FacetSearchInputProps> = (\r\n  props\r\n) => {\r\n  const label = props.i18n.t(props.label);\r\n  const search = props.i18n.t('facet-search-input');\r\n  const facetSearch = props.i18n.t('facet-search', {label});\r\n  const clear = props.i18n.t('clear');\r\n  let inputRef: HTMLInputElement | undefined;\r\n\r\n  return (\r\n    <div class=\"px-2 mt-3\" part=\"search-wrapper\">\r\n      <div class=\"relative h-10\">\r\n        <input\r\n          part=\"search-input\"\r\n          class=\"input-primary w-full h-full px-9 placeholder-neutral-dark text-sm group\"\r\n          type=\"text\"\r\n          placeholder={search}\r\n          aria-label={facetSearch}\r\n          value={props.query}\r\n          onInput={(e) => props.onChange((e.target as HTMLInputElement).value)}\r\n          ref={(ref) => (inputRef = ref)}\r\n        />\r\n        <div class=\"search-icon pointer-events-none absolute inline-flex justify-center items-center left-0 w-9 h-full text-on-background\">\r\n          <atomic-icon part=\"search-icon\" icon={SearchIcon}></atomic-icon>\r\n        </div>\r\n        {props.query !== '' && (\r\n          <Button\r\n            style=\"text-transparent\"\r\n            title={clear}\r\n            class=\"search-clear-button absolute inline-flex justify-center items-center right-px w-9 top-px bottom-px\"\r\n            onClick={() => {\r\n              props.onClear();\r\n              inputRef!.focus();\r\n            }}\r\n          >\r\n            <atomic-icon\r\n              part=\"search-clear-button\"\r\n              icon={CloseIcon}\r\n            ></atomic-icon>\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport escape from 'escape-html';\r\nimport {i18n} from 'i18next';\r\n\r\ninterface FacetSearchMatchesProps {\r\n  i18n: i18n;\r\n  query: string;\r\n  numberOfMatches: number;\r\n  hasMoreMatches: boolean;\r\n}\r\n\r\nfunction matchesFound(\r\n  key: 'more-matches-for' | 'no-matches-found-for',\r\n  query: string,\r\n  i18n: i18n\r\n) {\r\n  return i18n.t(key, {\r\n    query: `<span class=\"font-bold italic text-on-background\" part=\"matches-query\">${escape(\r\n      query\r\n    )}</span>`,\r\n    interpolation: {escapeValue: false},\r\n  });\r\n}\r\n\r\nexport const FacetSearchMatches: FunctionalComponent<\r\n  FacetSearchMatchesProps\r\n> = (props) => {\r\n  if (!props.numberOfMatches) {\r\n    return (\r\n      <div class=\"px-2\">\r\n        {/* file deepcode ignore ReactSetInnerHtml: This is not React code */}\r\n        <div\r\n          part=\"no-matches\"\r\n          class=\"truncate p-3 bg-neutral-light text-neutral-dark text-sm rounded\"\r\n          innerHTML={matchesFound(\r\n            'no-matches-found-for',\r\n            props.query,\r\n            props.i18n\r\n          )}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (props.hasMoreMatches) {\r\n    return (\r\n      <div class=\"px-2\">\r\n        <div\r\n          part=\"more-matches\"\r\n          class=\"truncate mt-3 text-neutral-dark text-sm\"\r\n          innerHTML={matchesFound('more-matches-for', props.query, props.i18n)}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import {FunctionalComponent, h} from '@stencil/core';\r\nimport {i18n} from 'i18next';\r\nimport MinusIcon from '../../../../images/minus.svg';\r\nimport PlusIcon from '../../../../images/plus.svg';\r\nimport {Button} from '../../button';\r\n\r\ninterface FacetShowMoreProps {\r\n  label: string;\r\n  i18n: i18n;\r\n  canShowLessValues: boolean;\r\n  canShowMoreValues: boolean;\r\n  onShowMore(): void;\r\n  onShowLess(): void;\r\n  showMoreRef?: (element?: HTMLButtonElement) => void;\r\n  showLessRef?: (element?: HTMLButtonElement) => void;\r\n}\r\n\r\nexport const FacetShowMoreLess: FunctionalComponent<FacetShowMoreProps> = (\r\n  props\r\n) => {\r\n  const label = props.i18n.t(props.label);\r\n  const showMore = props.i18n.t('show-more');\r\n  const showMoreFacetValues = props.i18n.t('show-more-facet-values', {\r\n    label,\r\n  });\r\n  const showLess = props.i18n.t('show-less');\r\n  const showLessFacetValues = props.i18n.t('show-less-facet-values', {\r\n    label,\r\n  });\r\n  const btnClasses = 'flex items-baseline text-left p-2 text-sm max-w-full';\r\n  const iconClasses = 'w-2 h-2 mr-1';\r\n  if (!props.canShowLessValues && !props.canShowMoreValues) {\r\n    return;\r\n  }\r\n\r\n  return (\r\n    <div class=\"mt-2\">\r\n      <Button\r\n        style=\"text-primary\"\r\n        part=\"show-less\"\r\n        class={`${btnClasses} ${props.canShowLessValues ? '' : 'hidden'}`}\r\n        ariaLabel={showLessFacetValues}\r\n        onClick={() => props.onShowLess()}\r\n        ref={props.showLessRef}\r\n      >\r\n        <atomic-icon\r\n          part=\"show-more-less-icon\"\r\n          class={iconClasses}\r\n          icon={MinusIcon}\r\n        ></atomic-icon>\r\n        <span class=\"truncate\">{showLess}</span>\r\n      </Button>\r\n      <Button\r\n        style=\"text-primary\"\r\n        part=\"show-more\"\r\n        class={`${btnClasses} ${props.canShowMoreValues ? '' : 'hidden'}`}\r\n        ariaLabel={showMoreFacetValues}\r\n        onClick={() => props.onShowMore()}\r\n        ref={props.showMoreRef}\r\n      >\r\n        <atomic-icon\r\n          part=\"show-more-less-icon\"\r\n          class={iconClasses}\r\n          icon={PlusIcon}\r\n        ></atomic-icon>\r\n        <span class=\"truncate\">{showMore}</span>\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n"],"version":3}