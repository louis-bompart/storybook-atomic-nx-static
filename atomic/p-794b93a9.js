/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var e=Object.create;var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty;var o=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var u=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e)((function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}));var s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var c=(e,i,o,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of n(i))!a.call(e,s)&&s!==o&&t(e,s,{get:()=>i[s],enumerable:!(u=r(i,s))||u.enumerable});return e};var l=(r,n,a)=>(a=r!=null?e(i(r)):{},c(n||!r||!r.__esModule?t(a,"default",{value:r,enumerable:!0}):a,r));var d=(e,t,r)=>o(e,typeof t!="symbol"?t+"":t,r);var f=s(((e,t)=>{t.exports=fetch}));var h=s((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}e.getSanitizedOptions=n}));var g=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){var t=Math.random()*e;return Math.round(t)}e.fullJitter=t}));var p=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){return e}e.noJitter=t}));var v=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=g(),r=p();function n(e){switch(e.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}));var y=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=v(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var e=t.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}));var m=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=y(),a=function(e){t(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(i.Delay);e.SkipFirstDelay=a}));var w=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=y(),n=function(e){t(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(r.Delay);e.AlwaysDelay=n}));var b=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=m(),r=w();function n(e,t){var r=i(e);return r.setAttemptNumber(t),r}e.DelayFactory=n;function i(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}}));var S=s((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=h(),i=b();function a(e,i){return i===void 0&&(i={}),t(this,void 0,void 0,(function(){var t,a;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),a=new o(e,t),[4,a.execute()];case 1:return[2,r.sent()]}}))}))}e.backOff=a;var o=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return e=r.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(t=r.sent(),!t||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=i.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return t.sent(),[2]}}))}))},e}()}));var I=s(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let a=0;a<e.length;a++)r<<=6,r|=i(e[a]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){let t=n.indexOf(e);return t<0?void 0:t}t.exports=r}));var q=s(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=i(n[e])}return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){if(e>=0&&e<64)return n[e]}t.exports=r}));var O=s(((e,t)=>{var r=I(),n=q();t.exports={atob:r,btoa:n}}));var x=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,(function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",a="minute",o="hour",u="day",s="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),a=r-i<0,o=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:s,d:u,D:f,h:o,m:a,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},w="en",b={};b[w]=v;var S="$isDayjsObject",I=function(e){return e instanceof C||!(!e||!e[S])},q=function e(t,r,n){var i;if(!t)return w;if(typeof t=="string"){var a=t.toLowerCase();b[a]&&(i=a),r&&(b[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var u=t.name;b[u]=t,i=u}return!n&&i&&(w=i),i||!n&&w},O=function(e,t){if(I(e))return e.clone();var r=typeof t=="object"?t:{};return r.date=e,r.args=arguments,new C(r)},x=m;x.l=q,x.i=I,x.w=function(e,t){return O(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function v(e){this.$L=q(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(t===null)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var n=t.match(g);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return x},y.isValid=function(){return this.$d.toString()!==h},y.isSame=function(e,t){var r=O(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return O(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<O(e)},y.$g=function(e,t,r){return x.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!x.u(t)||t,l=x.p(e),h=function(e,t){var i=x.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(u)},g=function(e,t){return x.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},p=this.$W,v=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case c:return n?h(1,v):h(0,v+1);case s:var w=this.$locale().weekStart||0,b=(p<w?p+7:p)-w;return h(n?y-b:y+(6-b),v);case u:case f:return g(m+"Hours",0);case o:return g(m+"Minutes",1);case a:return g(m+"Seconds",2);case i:return g(m+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,s=x.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[u]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[o]=l+"Hours",r[a]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[s],g=s===u?this.$D+(t-this.$W):t;if(s===c||s===d){var p=this.clone().set(f,1);p.$d[h](g),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](g);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[x.p(e)]()},y.add=function(n,l){var f,h=this;n=Number(n);var g=x.p(l),p=function(e){var t=O(h);return x.w(t.date(t.date()+Math.round(e*n)),h)};if(g===c)return this.set(c,this.$M+n);if(g===d)return this.set(d,this.$y+n);if(g===u)return p(1);if(g===s)return p(7);var v=(f={},f[a]=t,f[o]=r,f[i]=e,f)[g]||1,y=this.$d.getTime()+n*v;return x.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),a=this.$H,o=this.$m,u=this.$M,s=r.weekdays,c=r.months,l=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},f=function(e){return x.s(a%12||12,e,"0")},g=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(p,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return u+1;case"MM":return x.s(u+1,2,"0");case"MMM":return d(r.monthsShort,u,c,3);case"MMMM":return d(c,u);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,s,2);case"ddd":return d(r.weekdaysShort,t.$W,s,3);case"dddd":return s[t.$W];case"H":return String(a);case"HH":return x.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return g(a,o,!0);case"A":return g(a,o,!1);case"m":return String(o);case"mm":return x.s(o,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,f,h){var g,p=this,v=x.p(f),y=O(n),m=(y.utcOffset()-this.utcOffset())*t,w=this-y,b=function(){return x.m(p,y)};switch(v){case d:g=b()/12;break;case c:g=b();break;case l:g=b()/3;break;case s:g=(w-m)/6048e5;break;case u:g=(w-m)/864e5;break;case o:g=w/r;break;case a:g=w/t;break;case i:g=w/e;break;default:g=w}return h?g:x.a(g)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=q(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return x.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),A=C.prototype;return O.prototype=A,[["$ms",n],["$s",i],["$m",a],["$H",o],["$W",u],["$M",c],["$y",d],["$D",f]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),O.extend=function(e,t){return e.$i||(e(t,C,O),e.$i=!0),O},O.locale=q,O.isDayjs=I,O.unix=function(e){return O(1e3*e)},O.en=b[w],O.Ls=b,O.p={},O}))}));var C=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,(function(){var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=i.add;i.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var o=i.startOf;i.startOf=function(r,n){var i=this.$utils(),a=!!i.u(n)||n;if(i.p(r)===t){var u=this.quarter()-1;return a?this.month(3*u).startOf(e).startOf("day"):this.month(3*u+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}}))}));var A=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},o=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||e==="Z")return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return r===0?0:t[0]==="+"?-r:r}(e)}],c=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},l=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[i,function(e){this.afternoon=l(e,!1)}],a:[i,function(e){this.afternoon=l(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[r,u("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,u("month")],MM:[r,u("month")],MMM:[i,function(e){var t=c("months"),r=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,u("year")],Z:s,ZZ:s};function f(r){var n,i;n=r,i=a&&a.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),u=o.length,s=0;s<u;s+=1){var c=o[s],l=d[c],f=l&&l[0],h=l&&l[1];o[s]=h?{regex:f,parser:h}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<u;r+=1){var i=o[r];if(typeof i=="string")n+=i.length;else{var a=i.regex,s=i.parser,c=e.slice(n),l=a.exec(c)[0];s.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(t!==void 0){var r=e.hours;t?r<12&&(e.hours+=12):r===12&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,o=e.args;this.$u=n;var u=o[1];if(typeof u=="string"){var s=o[2]===!0,c=o[3]===!0,l=s||c,d=o[2];c&&(d=o[2]),a=this.$locale(),!s&&d&&(a=r.Ls[d]),this.$d=function(e,t,r){try{if(["x","X"].indexOf(t)>-1)return new Date((t==="X"?1e3:1)*e);var n=f(t)(e),i=n.year,a=n.month,o=n.day,u=n.hours,s=n.minutes,c=n.seconds,l=n.milliseconds,d=n.zone,h=new Date,g=o||(i||a?1:h.getDate()),p=i||h.getFullYear(),v=0;i&&!a||(v=a>0?a-1:h.getMonth());var y=u||0,m=s||0,w=c||0,b=l||0;return d?new Date(Date.UTC(p,v,g,y,m,w,b+60*d.offset*1e3)):r?new Date(Date.UTC(p,v,g,y,m,w,b)):new Date(p,v,g,y,m,w,b)}catch{return new Date("")}}(t,u,n),this.init(),d&&d!==!0&&(this.$L=this.locale(d).$L),l&&t!=this.format(u)&&(this.$d=new Date("")),a={}}else if(u instanceof Array)for(var h=u.length,g=1;g<=h;g+=1){o[1]=u[g-1];var p=r.apply(this,o);if(p.isValid()){this.$d=p.$d,this.$L=p.$L,this.init();break}g===h&&(this.$d=new Date(""))}else i.call(this,e)}}}))}));var k=s(((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}));var j=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var a,o=function(e,r,n){n===void 0&&(n={});var i=new Date(e),a=function(e,r){r===void 0&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,a=t[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=a),a}(r,n);return a.formatToParts(i)},u=function(t,r){for(var n=o(t,r),a=[],u=0;u<n.length;u+=1){var s=n[u],c=s.type,l=s.value,d=e[c];d>=0&&(a[d]=parseInt(l,10))}var f=a[3],h=f===24?0:f,g=a[0]+"-"+a[1]+"-"+a[2]+" "+h+":"+a[4]+":"+a[5]+":000",p=+t;return(i.utc(g).valueOf()-(p-=p%1e3))/6e4},s=n.prototype;s.tz=function(e,t){e===void 0&&(e=a);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),u=Math.round((n-new Date(o))/1e3/60),s=i(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-u,!0);if(t){var c=s.utcOffset();s=s.add(r-c,"minute")}return s.$x.$timezone=e,s},s.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return e.type.toLowerCase()==="timezonename"}));return r&&r.value};var c=s.startOf;s.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,o=r||t||a,s=u(+i(),o);if(typeof e!="string")return i(e).tz(o);var c=function(e,t,r){var n=e-60*t*1e3,i=u(n,r);if(t===i)return[n,t];var a=u(n-=60*(i-t)*1e3,r);return i===a?[n,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}(i.utc(e,n).valueOf(),s,o),l=c[0],d=c[1],f=i(l).utcOffset(d);return f.$x.$timezone=o,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){a=e}}}))}));var R=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var o=i.prototype;a.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var s=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=o.utcOffset;o.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if(typeof n=="string"&&(n=function(e){e===void 0&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return o===0?0:a==="+"?o:-o}(n),n===null))return this;var o=Math.abs(n)<=16?60*n:n,u=this;if(i)return u.$offset=o,u.$u=n===0,u;if(n!==0){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(o+s,e)).$offset=o,u.$x.$localOffset=s}else u=this.utc();return u};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return e==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}}))}));var M=s(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=n;function n(e,t,n){var i=n&&n.stringify||r,a=1;if(typeof e=="object"&&e!==null){var o=t.length+a;if(o===1)return e;var u=new Array(o);u[0]=i(e);for(var s=1;s<o;s++)u[s]=i(t[s]);return u.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",d=1-a,f=-1,h=e&&e.length||0,g=0;g<h;){if(e.charCodeAt(g)===37&&g+1<h){switch(f=f>-1?f:0,e.charCodeAt(g+1)){case 100:case 102:if(d>=c||t[d]==null)break;f<g&&(l+=e.slice(f,g)),l+=Number(t[d]),f=g+2,g++;break;case 105:if(d>=c||t[d]==null)break;f<g&&(l+=e.slice(f,g)),l+=Math.floor(Number(t[d])),f=g+2,g++;break;case 79:case 111:case 106:if(d>=c||t[d]===void 0)break;f<g&&(l+=e.slice(f,g));var p=typeof t[d];if(p==="string"){l+="'"+t[d]+"'",f=g+2,g++;break}if(p==="function"){l+=t[d].name||"<anonymous>",f=g+2,g++;break}l+=i(t[d]),f=g+2,g++;break;case 115:if(d>=c)break;f<g&&(l+=e.slice(f,g)),l+=String(t[d]),f=g+2,g++;break;case 37:f<g&&(l+=e.slice(f,g)),l+="%",f=g+2,g++,d--;break}++d}++g}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}}));var E=s(((e,t)=>{var r=M();t.exports=f;var n=D().console||{},i={mapHttpRequest:x,mapHttpResponse:x,wrapRequestSerializer:C,wrapResponseSerializer:C,wrapErrorSerializer:C,req:x,res:x,err:q,errWithCause:q};function a(e,t){return e==="silent"?1/0:t.levels.values[e]}var o=Symbol("pino.logFuncs"),u=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[u]};t[u]=r}function l(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[s[e]||"log"]||A})),e[o]=i}function d(e,t){return Array.isArray(e)?e.filter((function(e){return e!=="!stdSerializers.err"})):e===!0?Object.keys(t):!1}function f(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},o=d(e.browser.serialize,i),u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);let s=Object.keys(e.customLevels||{}),f=["error","fatal","warn","info","debug","trace"].concat(s);typeof r=="function"&&f.forEach((function(e){r[e]=r})),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let g=e.level||"info",p=Object.create(r);p.log||(p.log=A),l(p,f,r),c({},p),Object.defineProperty(p,"levelVal",{get:m}),Object.defineProperty(p,"level",{get:w,set:S});let y={transmit:t,serialize:o,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:f,timestamp:O(e)};p.levels=h(e),p.level=g,p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=A,p.serializers=i,p._serialize=o,p._stdErrSerialize=u,p.child=q,t&&(p._logEvent=I());function m(){return a(this.level,this)}function w(){return this._level}function S(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,v(this,y,p,"error"),v(this,y,p,"fatal"),v(this,y,p,"warn"),v(this,y,p,"info"),v(this,y,p,"debug"),v(this,y,p,"trace"),s.forEach((e=>{v(this,y,p,e)}))}function q(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(o&&a){var u=Object.assign({},i,a),s=e.browser.serialize===!0?Object.keys(u):o;delete r.serializers,b([r],s,u,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,u&&(this.serializers=u,this._serialize=s),t&&(this._logEvent=I([].concat(e._logEvent.bindings,r)))}l.prototype=this;let d=new l(this);return c(this,d),d.level=this.level,d}return p}function h(e){let t=e.customLevels||{},r=Object.assign({},f.levels.values,t),n=Object.assign({},f.levels.labels,g(t));return{values:r,labels:n}}function g(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};f.stdSerializers=i;f.stdTimeFunctions=Object.assign({},{nullTime:k,epochTime:j,unixTime:R,isoTime:E});function p(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[u];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function v(e,t,r,n){if(Object.defineProperty(e,n,{value:a(e.level,r)>a(n,r)?A:r[o][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===A)return;e[n]=m(e,t,r,n);let i=p(e);i.length!==0&&(e[n]=y(i,e[n]))}function y(e,t){return function(){return t.apply(this,[...e,...arguments])}}function m(e,t,r,i){return function(o){return function(){let u=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<s.length;l++)s[l]=arguments[l];if(t.serialize&&!t.asObject&&b(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?o.call(c,w(this,i,s,u,t.formatters)):o.apply(c,s),t.transmit){let n=t.transmit.level||e._level,o=r.levels.values[n],c=r.levels.values[i];if(c<o)return;S(this,{ts:u,methodLevel:i,methodValue:c,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,r)},s)}}}(e[o][i])}function w(e,t,n,i,a={}){let{level:o=(()=>e.levels.values[t]),log:u=(e=>e)}=a;e._serialize&&b(n,e._serialize,e.serializers,e._stdErrSerialize);let s=n.slice(),c=s[0],l={};i&&(l.time=i),l.level=o(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof s[0]=="object";)Object.assign(l,s.shift());c=s.length?r(s.shift(),s):void 0}else typeof c=="string"&&(c=r(s.shift(),s));return c!==void 0&&(l.msg=c),u(l)}function b(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=f.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function S(e,t,r){let n=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,u=t.val,s=e._logEvent.bindings;b(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return s.indexOf(e)===-1})),e._logEvent.level.label=a,e._logEvent.level.value=o,n(a,e._logEvent,u),e._logEvent=I(s)}function I(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function q(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function O(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?k:j}function x(){return{}}function C(e){return e}function A(){}function k(){return!1}function j(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function D(){function e(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=f;t.exports.pino=f}));var D=()=>global.crypto,F=()=>{typeof window<"u"||(D()||(global.crypto=u("crypto")),!D().getRandomValues&&D().webcrypto&&(global.crypto.getRandomValues=D().webcrypto.getRandomValues.bind(D().webcrypto)))};var T=l(f()),P=l(S());var U=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},$=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};l(O());var V=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);var _=new Set(["1",1,"yes",!0]);function L(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>_.has(e)))}function Q(e){let t={};for(let[r,n]of e)t[r]=n;return t}function N(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function z(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function Y(e){return typeof e!="object"||!e?!1:Object.values(e).every(B)}function B(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function H(e){return e===429}var W=class e{static async call(t){let r=X(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:a,...o}=i,u=async()=>{let e=await(0,T.default)(a,o);if(H(e.status))throw e;return e};try{let e=await(0,P.backOff)(u,{retry:e=>{let t=e&&H(e.status);return t&&n.info("Platform retrying request"),t}});if(e.status===419)throw n.info("Platform renewing token"),new U;if(e.status===404)throw new $(a,e.status);return n.info({response:e,requestInfo:i},"Platform response"),e}catch(e){return e.message==="Failed to fetch"?new $(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:a}=t,{signal:o,...u}=e,s=N(u);try{let t=await n(e,r,a);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return s}};function G(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function J(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,o=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:a,admin:o}}function Z(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:G("platform",e)}function K(e){return G("analytics",e)}function X(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,u=e.method==="POST"||e.method==="PUT",s=ee(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...u&&{body:s},signal:o}}function ee(e,t){return t==="application/x-www-form-urlencoded"?Y(e)?z(e):"":JSON.stringify(e)}function te(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function re(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function ne(e,t){if(t&&e.name==="AbortError")return{error:re(e)};if(e instanceof $)return{error:te(e)};throw e}var ie=(e,t)=>({...oe(e,t),requestParams:ae(e)}),ae=e=>{let{trackingId:t,clientId:r,context:n,language:i,country:a,currency:o,page:u,perPage:s,facets:c,sort:l}=e;return{trackingId:t,clientId:r,context:n,language:i,country:a,currency:o,page:u,perPage:s,facets:c,sort:l}},oe=(e,t)=>{let{url:r,organizationId:n,accessToken:i}=e,a=`${r}/rest/organizations/${n}/commerce/v2/${t}`;return{accessToken:i,method:"POST",contentType:"application/json",url:a,origin:"commerceApiFetch"}};var ue=(e,t)=>({...oe(e,t),requestParams:se(e)}),se=e=>{let{slotId:t,trackingId:r,clientId:n,context:i,language:a,country:o,currency:u,page:s}=e;return{slotId:t,trackingId:r,clientId:n,context:i,language:a,country:o,currency:u,page:s}};var ce=e=>({...oe(e,"search/querySuggest"),requestParams:le(e)}),le=e=>{let{trackingId:t,query:r,clientId:n,context:i,language:a,country:o,currency:u}=e;return{trackingId:t,query:r,clientId:n,context:i,language:a,country:o,currency:u}};var de=e=>e.error!==void 0,fe=class{constructor(e){this.options=e}async getProductListing(e){return this.query({...ie(e,"listing"),...this.options})}async getRecommendations(e){return this.query({...ue(e,"recommendations"),...this.options})}async search(e){let t=ie(e,"search");return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async productSuggestions(e){let t=ie(e,"search/productSuggest");return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async querySuggest(e){let t=ce(e);return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async facetSearch(e){let t=ie(e,"facet");return this.query({...t,requestParams:{...t.requestParams,facetId:e?.facetId,facetQuery:e?.facetQuery,query:e?.query},...this.options})}async plan(e){let t=ie(e,"search");return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async query(e){let t=await W.call(e);if(t instanceof Error)return ne(t);let r=await t.json();return t.ok?{success:r}:{error:r}}};var he=e=>e;function ge(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var pe=typeof Symbol=="function"&&Symbol.observable||"@@observable",ve=pe,ye=()=>Math.random().toString(36).substring(7).split("").join("."),me={INIT:`@@redux/INIT${ye()}`,REPLACE:`@@redux/REPLACE${ye()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ye()}`},we=me;function be(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Se(e,t,r){if(typeof e!="function")throw new Error(ge(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ge(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ge(1));return r(Se)(e,t)}let n=e,i=t,a=new Map,o=a,u=0,s=!1;function c(){o===a&&(o=new Map,a.forEach(((e,t)=>{o.set(t,e)})))}function l(){if(s)throw new Error(ge(3));return i}function d(e){if(typeof e!="function")throw new Error(ge(4));if(s)throw new Error(ge(5));let t=!0;c();let r=u++;return o.set(r,e),function(){if(t){if(s)throw new Error(ge(6));t=!1,c(),o.delete(r),a=null}}}function f(e){if(!be(e))throw new Error(ge(7));if(typeof e.type>"u")throw new Error(ge(8));if(typeof e.type!="string")throw new Error(ge(17));if(s)throw new Error(ge(9));try{s=!0,i=n(i,e)}finally{s=!1}return(a=o).forEach((e=>{e()})),e}function h(e){if(typeof e!="function")throw new Error(ge(10));n=e,f({type:we.REPLACE})}function g(){let e=d;return{subscribe(t){if(typeof t!="object"||t===null)throw new Error(ge(11));function r(){let e=t;e.next&&e.next(l())}return r(),{unsubscribe:e(r)}},[ve](){return this}}}return f({type:we.INIT}),{dispatch:f,subscribe:d,getState:l,replaceReducer:h,[ve]:g}}function Ie(e){Object.keys(e).forEach((t=>{let r=e[t];if(typeof r(void 0,{type:we.INIT})>"u")throw new Error(ge(12));if(typeof r(void 0,{type:we.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ge(13))}))}function qe(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}let n=Object.keys(r),i;try{Ie(r)}catch(e){i=e}return function(e={},t){if(i)throw i;let a=!1,o={};for(let i=0;i<n.length;i++){let u=n[i],s=r[u],c=e[u],l=s(c,t);if(typeof l>"u"){throw new Error(ge(14))}o[u]=l,a=a||l!==c}return a=a||n.length!==Object.keys(e).length,a?o:e}}function Oe(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function xe(...e){return t=>(r,n)=>{let i=t(r,n),a=()=>{throw new Error(ge(15))},o={getState:i.getState,dispatch:(e,...t)=>a(e,...t)},u=e.map((e=>e(o)));return a=Oe(...u)(i.dispatch),{...i,dispatch:a}}}function Ce(e){return be(e)&&"type"in e&&typeof e.type=="string"}var Ae=Symbol.for("immer-nothing"),ke=Symbol.for("immer-draftable"),je=Symbol.for("immer-state");function Re(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Me=Object.getPrototypeOf;function Ee(e){return!!e&&!!e[je]}function De(e){return e?Te(e)||Array.isArray(e)||!!e[ke]||!!e.constructor?.[ke]||Le(e)||Qe(e):!1}var Fe=Object.prototype.constructor.toString();function Te(e){if(!e||typeof e!="object")return!1;let t=Me(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Fe}function Pe(e,t){Ue(e)===0?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function Ue(e){let t=e[je];return t?t.type_:Array.isArray(e)?1:Le(e)?2:Qe(e)?3:0}function $e(e,t){return Ue(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ve(e,t,r){let n=Ue(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function _e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Le(e){return e instanceof Map}function Qe(e){return e instanceof Set}function Ne(e){return e.copy_||e.base_}function ze(e,t){if(Le(e))return new Map(e);if(Qe(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Te(e))return Me(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[je];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let i=n[t],a=r[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Me(e),r)}function Ye(e,t=!1){return He(e)||Ee(e)||!De(e)||(Ue(e)>1&&(e.set=e.add=e.clear=e.delete=Be),Object.freeze(e),t&&Pe(e,((e,t)=>Ye(t,!0)))),e}function Be(){Re(2)}function He(e){return Object.isFrozen(e)}var We={};function Ge(e){let t=We[e];return t||Re(0,e),t}var Je;function Ze(){return Je}function Ke(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xe(e,t){t&&(Ge("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function et(e){tt(e),e.drafts_.forEach(nt),e.drafts_=null}function tt(e){e===Je&&(Je=e.parent_)}function rt(e){return Je=Ke(Je,e)}function nt(e){let t=e[je];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function it(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[je].modified_&&(et(t),Re(4)),De(e)&&(e=at(t,e),t.parent_||ut(t,e)),t.patches_&&Ge("Patches").generateReplacementPatches_(r[je].base_,e,t.patches_,t.inversePatches_)):e=at(t,r,[]),et(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ae?e:void 0}function at(e,t,r){if(He(t))return t;let n=t[je];if(!n)return Pe(t,((i,a)=>ot(e,n,t,i,a,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return ut(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,i=t,a=!1;n.type_===3&&(i=new Set(t),t.clear(),a=!0),Pe(i,((i,o)=>ot(e,n,t,i,o,r,a))),ut(e,t,!1),r&&e.patches_&&Ge("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function ot(e,t,r,n,i,a,o){if(Ee(i)){let o=a&&t&&t.type_!==3&&!$e(t.assigned_,n)?a.concat(n):void 0,u=at(e,i,o);if(Ve(r,n,u),Ee(u))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(De(i)&&!He(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;at(e,i),(!t||!t.scope_.parent_)&&ut(e,i)}}function ut(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ye(t,r)}function st(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Ze(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=ct;r&&(i=[n],a=lt);let{revoke:o,proxy:u}=Proxy.revocable(i,a);return n.draft_=u,n.revoke_=o,u}var ct={get(e,t){if(t===je)return e;let r=Ne(e);if(!$e(r,t))return ft(e,r,t);let n=r[t];return e.finalized_||!De(n)?n:n===dt(e.base_,t)?(pt(e),e.copy_[t]=yt(n,e)):n},has(e,t){return t in Ne(e)},ownKeys(e){return Reflect.ownKeys(Ne(e))},set(e,t,r){let n=ht(Ne(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=dt(Ne(e),t),i=n?.[je];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(_e(r,n)&&(r!==void 0||$e(e.base_,t)))return!0;pt(e),gt(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return dt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pt(e),gt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Ne(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Re(11)},getPrototypeOf(e){return Me(e.base_)},setPrototypeOf(){Re(12)}},lt={};Pe(ct,((e,t)=>{lt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}));lt.deleteProperty=function(e,t){return lt.set.call(this,e,t,void 0)};lt.set=function(e,t,r){return ct.set.call(this,e[0],t,r,e[0])};function dt(e,t){let r=e[je];return(r?Ne(r):e)[t]}function ft(e,t,r){let n=ht(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function ht(e,t){if(!(t in e))return;let r=Me(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Me(r)}}function gt(e){e.modified_||(e.modified_=!0,e.parent_&&gt(e.parent_))}function pt(e){e.copy_||(e.copy_=ze(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}typeof t!="function"&&Re(6),r!==void 0&&typeof r!="function"&&Re(7);let n;if(De(e)){let i=rt(this),a=yt(e,void 0),o=!0;try{n=t(a),o=!1}finally{o?et(i):tt(i)}return Xe(i,r),it(n,i)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===Ae&&(n=void 0),this.autoFreeze_&&Ye(n,!0),r){let t=[],i=[];Ge("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}else Re(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){De(e)||Re(8),Ee(e)&&(e=mt(e));let t=rt(this),r=yt(e,void 0);return r[je].isManual_=!0,tt(t),r}finishDraft(e,t){let r=e&&e[je];(!r||!r.isManual_)&&Re(9);let{scope_:n}=r;return Xe(n,t),it(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=Ge("Patches").applyPatches_;return Ee(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function yt(e,t){let r=Le(e)?Ge("MapSet").proxyMap_(e,t):Qe(e)?Ge("MapSet").proxySet_(e,t):st(e,t);return(t?t.scope_:Ze()).drafts_.push(r),r}function mt(e){return Ee(e)||Re(10,e),wt(e)}function wt(e){if(!De(e)||He(e))return e;let t=e[je],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ze(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ze(e,!0);return Pe(r,((e,t)=>{Ve(r,e,wt(t))})),t&&(t.finalized_=!1),r}var bt=new vt,St=bt.produce;bt.produceWithPatches.bind(bt);bt.setAutoFreeze.bind(bt);bt.setUseStrictShallowCopy.bind(bt);bt.applyPatches.bind(bt);bt.createDraft.bind(bt);bt.finishDraft.bind(bt);function It(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function qt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>typeof e=="function"))){let r=e.map((e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}var xt=e=>Array.isArray(e)?e:[e];function Ct(e){let t=Array.isArray(e[0])?e[0]:e;return Ot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function At(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var kt=class{constructor(e){this.value=e}deref(){return this.value}},jt=typeof WeakRef<"u"?WeakRef:kt,Rt=0,Mt=1;function Et(){return{s:Rt,v:void 0,o:null,p:null}}function Dt(e,t={}){let r=Et(),{resultEqualityCheck:n}=t,i,a=0;function o(){let t=r,{length:o}=arguments;for(let e=0,r=o;e<r;e++){let r=arguments[e];if(typeof r=="function"||typeof r=="object"&&r!==null){let e=t.o;e===null&&(t.o=e=new WeakMap);let n=e.get(r);n===void 0?(t=Et(),e.set(r,t)):t=n}else{let e=t.p;e===null&&(t.p=e=new Map);let n=e.get(r);n===void 0?(t=Et(),e.set(r,t)):t=n}}let u=t,s;if(t.s===Mt?s=t.v:(s=e.apply(null,arguments),a++),u.s=Mt,n){let e=i?.deref?.()??i;e!=null&&n(e,s)&&(s=e,a!==0&&a--),i=typeof s=="object"&&s!==null||typeof s=="function"?new jt(s):s}return u.v=s,s}return o.clearCache=()=>{r=Et(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Ft(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t=0,n=0,i,a={},o=e.pop();typeof o=="object"&&(a=o,o=e.pop()),It(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);let u={...r,...a},{memoize:s,memoizeOptions:c=[],argsMemoize:l=Dt,argsMemoizeOptions:d=[],devModeChecks:f={}}=u,h=xt(c),g=xt(d),p=Ct(e),v=s((function(){return t++,o.apply(null,arguments)}),...h),y=l((function(){n++;let e=At(p,arguments);return i=v.apply(null,e),i}),...g);return Object.assign(y,{resultFunc:o,memoizedResultFunc:v,dependencies:p,dependencyRecomputations:()=>n,resetDependencyRecomputations:()=>{n=0},lastResult:()=>i,recomputations:()=>t,resetRecomputations:()=>{t=0},memoize:s,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var Tt=Ft(Dt),Pt=Object.assign(((e,t=Tt)=>{qt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map((t=>e[t]));return t(n,((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>Pt});function Ut(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var $t=Ut(),Vt=Ut;var _t=(...e)=>{let t=Ft(...e),r=Object.assign(((...e)=>{let r=t(...e),n=(e,...t)=>r(Ee(e)?mt(e):e,...t);return Object.assign(n,r),n}),{withTypes:()=>r});return r};_t(Dt);var Lt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Oe:Oe.apply(null,arguments)},Qt=e=>e&&typeof e.match=="function";function Nt(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(Sr(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>Ce(t)&&t.type===e,r}var zt=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Yt(e){return De(e)?St(e,(()=>{})):e}function Bt(e){return typeof e=="boolean"}var Ht=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},a=new zt;return t&&(Bt(t)?a.push($t):a.push(Vt(t.extraArgument))),a},Wt="RTK_autoBatch";var Gt=e=>t=>{setTimeout(t,e)},Jt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Gt(10),Zt=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,a=!1,o=!1,u=new Set,s=e.type==="tick"?queueMicrotask:e.type==="raf"?Jt:e.type==="callback"?e.queueNotification:Gt(e.timeout),c=()=>{o=!1,a&&(a=!1,u.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){let t=()=>i&&e(),r=n.subscribe(t);return u.add(e),()=>{r(),u.delete(e)}},dispatch(e){try{return i=!e?.meta?.[Wt],a=!i,a&&(o||(o=!0,s(c))),n.dispatch(e)}finally{i=!0}}})},Kt=e=>function(t){let{autoBatch:r=!0}=t??{},n=new zt(e);return r&&n.push(Zt(typeof r=="object"?r:void 0)),n},Xt=!0;function er(e){let t=Ht(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{},u;if(typeof r=="function")u=r;else if(be(r))u=qe(r);else throw new Error(Sr(1));let s;if(typeof n=="function"){if(s=n(t),!Xt);}else s=t();let c=Oe;i&&(c=Lt({trace:!Xt,...typeof i=="object"&&i}));let l=xe(...s),d=Kt(l);let f=typeof o=="function"?o(d):d();let h=c(...f);return Se(u,a,h)}function tr(e){let t={},r=[],n,i={addCase(e,r){let n=typeof e=="string"?e:e.type;if(!n)throw new Error(Sr(28));if(n in t)throw new Error(Sr(29));return t[n]=r,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return n=e,i}};return e(i),[t,r,n]}function rr(e){return typeof e=="function"}function nr(e,t){let[r,n,i]=tr(t),a;if(rr(e))a=()=>Yt(e());else{let t=Yt(e);a=()=>t}function o(e=a(),t){let o=[r[t.type],...n.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return o.filter((e=>!!e)).length===0&&(o=[i]),o.reduce(((e,r)=>{if(r)if(Ee(e)){let n=r(e,t);return n===void 0?e:n}else{if(De(e))return St(e,(e=>r(e,t)));{let n=r(e,t);if(n===void 0){if(e===null)return e;throw new Error(Sr(9))}return n}}return e}),e)}return o.getInitialState=a,o}var ir="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ar=(e=21)=>{let t="",r=e;for(;r--;)t+=ir[Math.random()*64|0];return t},or=(e,t)=>Qt(e)?e.match(t):e(t);function ur(...e){return t=>e.some((e=>or(e,t)))}var sr=["name","message","stack","code"],cr=class{constructor(e,t){d(this,"_type");this.payload=e,this.meta=t}},lr=class{constructor(e,t){d(this,"_type");this.payload=e,this.meta=t}},dr=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of sr)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},fr=(()=>{function e(e,t,r){let n=Nt(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),i=Nt(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),a=Nt(e+"/rejected",((e,t,n,i,a)=>({payload:i,error:(r&&r.serializeError||dr)(e||"Rejected"),meta:{...a||{},arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}})));function o(e){return(o,u,s)=>{let c=r?.idGenerator?r.idGenerator(e):ar(),l=new AbortController,d,f;function h(e){f=e,l.abort()}let g=async function(){let g;try{let a=r?.condition?.(e,{getState:u,extra:s});if(gr(a)&&(a=await a),a===!1||l.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let p=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:f||"Aborted"})},l.signal.addEventListener("abort",d)}));o(i(c,e,r?.getPendingMeta?.({requestId:c,arg:e},{getState:u,extra:s}))),g=await Promise.race([p,Promise.resolve(t(e,{dispatch:o,getState:u,extra:s,requestId:c,signal:l.signal,abort:h,rejectWithValue:(e,t)=>new cr(e,t),fulfillWithValue:(e,t)=>new lr(e,t)})).then((t=>{if(t instanceof cr)throw t;return t instanceof lr?n(t.payload,c,e,t.meta):n(t,c,e)}))])}catch(t){g=t instanceof cr?a(null,c,e,t.payload,t.meta):a(t,c,e)}finally{d&&l.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&a.match(g)&&g.meta.condition||o(g),g}();return Object.assign(g,{abort:h,requestId:c,arg:e,unwrap(){return g.then(hr)}})}}return Object.assign(o,{pending:i,rejected:a,fulfilled:n,settled:ur(a,n),typePrefix:e})}return e.withTypes=()=>e,e})();function hr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function gr(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var pr=(e,t)=>{if(typeof e!="function")throw new Error(Sr(32))};var vr="listenerMiddleware";var yr=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=Nt(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Sr(21));return pr(a),{predicate:i,type:t,effect:a}},mr=Object.assign((e=>{let{type:t,predicate:r,effect:n}=yr(e);return{id:ar(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Sr(22))}}}),{withTypes:()=>mr});var wr=Object.assign(Nt(`${vr}/add`),{withTypes:()=>wr});Nt(`${vr}/removeAll`);var br=Object.assign(Nt(`${vr}/remove`),{withTypes:()=>br});function Sr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Ir(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join(`\n\t`)}\n  \n  ${t}\n  `;return new qr(r)}var qr=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Or=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw Ir(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},xr=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&kr(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Cr(e){return e===void 0}function Ar(e){return e===null}function kr(e){return Cr(e)||Ar(e)}var jr=class{constructor(e={}){this.config=e,this.value=new xr(e)}validate(e){let t=this.value.validate(e);return t||(Rr(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Rr(e){return Cr(e)||Mr(e)}function Mr(e){return typeof e=="number"&&!isNaN(e)}var Er=class{constructor(e={}){this.value=new xr(e)}validate(e){let t=this.value.validate(e);return t||(Dr(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Dr(e){return Cr(e)||Fr(e)}function Fr(e){return typeof e=="boolean"}var Tr=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,Pr=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new xr(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,a=this.value.validate(e);return a||(Cr(e)?null:Ur(e)?!t&&!e.length?"value is an empty string.":r&&!Tr.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Ur(e){return Object.prototype.toString.call(e)==="[object String]"}var $r=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Cr(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Vr(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&kr(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Vr(e){return e!==void 0&&typeof e=="object"}var _r=class{constructor(e={}){this.config=e,this.value=new xr(this.config)}validate(e){if(!kr(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(kr(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let t="";return e.forEach((r=>{this.config.each.required&&kr(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);n!==null&&(t+=" "+n)})),t===""?null:t}return null}validatePrimitiveValue(e,t){return Fr(e)||Ur(e)||Mr(e)||Vr(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Lr(e){return Array.isArray(e)}var Qr=class{constructor(e){this.config=e,this.value=new xr(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Cr(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var Nr=new Pr({required:!0,emptyAllowed:!1}),zr=new Pr({required:!1,emptyAllowed:!1}),Yr=new Pr({required:!0,emptyAllowed:!0}),Br=new Pr({required:!1,emptyAllowed:!0});new _r({each:Nr,required:!0});var Hr=new Pr({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Wr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Gr=(e,t)=>{if("required"in t)return{payload:new Or({value:t}).validate({value:e}).value};let r=new $r({options:{required:!0},values:t}).validate(e);if(r)throw new qr(r);return{payload:e}},Jr=(e,t)=>{try{return Gr(e,t)}catch(t){return{payload:e,error:Wr(t)}}},Zr=(e,t,r,n)=>{let i=`Check the initialState of ${n}`;return Xr(e,t,r,i,"Controller initialization error")},Kr=(e,t,r,n)=>{let i=`Check the options of ${n}`;return Xr(e,t,r,i,"Controller initialization error")},Xr=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}};function en(e){return e.currency}var tn=(e,t)=>({currency:en(t.commerceContext),products:nn(t.cart),transaction:e}),rn=Tt((e=>e.cart),(e=>e.cartItems),((e,t)=>t.map((t=>e[t])))),nn=Tt(rn,(e=>e.map((({quantity:e,...t})=>({quantity:e,product:t})))));var an={productId:Nr,quantity:new jr({required:!0,min:0}),name:new Pr({required:!1}),price:new jr({required:!1,min:0})},on=new _r({each:new $r({values:{...an}})}),un={items:on};new Or(un);var sn=fr("commerce/cart/purchase",(async(e,{extra:t,getState:r})=>{let n=tn(e,r()),{relay:i}=t;i.emit("ec.purchase",n)})),cn=Nt("commerce/cart/setItems",(e=>Jr(e,on))),ln=Nt("commerce/cart/updateItemQuantity",(e=>Jr(e,an)));var dn="coveo-headless-internal-state",fn=Symbol.for(dn),hn=e=>new Proxy(e,{ownKeys(e){return Reflect.ownKeys(e).filter((e=>e!==fn))},get(t,r,n){return typeof r=="symbol"&&r.description===dn&&r!==fn&&e.logger.warn(`You might be loading Headless twice. Please check your setup.\nIf you are trying to access the inner state... Don't`),Reflect.get(t,r,n)}});function gn(e){let t,r=new Map,n=()=>r.size===0,i=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(a){a();let o=Symbol(),u;return n()&&(t=JSON.stringify(this.state),u=e.subscribe((()=>{i(this.state)&&r.forEach((e=>e()))}))),r.set(o,a),()=>{r.delete(o),n()&&u&&u()}},get state(){return{}}}}Tt(rn,(e=>e.reduce(((e,t)=>e+t.quantity),0)));Tt(rn,(e=>e.reduce(((e,t)=>e+t.price*t.quantity),0)));function pn(e){return`${e.productId},${e.name},${e.price}`}var vn=()=>({cartItems:[],cart:{},purchasedItems:[],purchased:{}}),yn=e=>wn(e.cartItems,e.cart),mn=e=>wn(e.purchasedItems,e.purchased);function wn(e,t){let r=e.reduce(((e,r)=>{let{productId:n,quantity:i}=t[r];return n in e||(e[n]={productId:n,quantity:0}),e[n].quantity+=i,e}),{});return[...Object.values(r)]}var bn=nr(vn(),(e=>{e.addCase(cn,((e,{payload:t})=>{let{cart:r,cartItems:n}=t.reduce(((e,t)=>{let r=pn(t);return{cartItems:[...e.cartItems,r],cart:{...e.cart,[r]:t},purchasedItems:[],purchased:{}}}),vn());Sn(e,n,r)})).addCase(ln,((e,{payload:t})=>{let r=pn(t);if(!(r in e.cart)){In(t,e);return}if(t.quantity<=0){qn(t,e);return}e.cart[r]=t})).addCase(sn.fulfilled,(e=>{On(e);let{cart:t,cartItems:r}=vn();Sn(e,r,t)}))}));function Sn(e,t,r){e.cartItems=t,e.cart=r}function In(e,t){if(e.quantity<=0)return;let r=pn(e);t.cartItems=[...t.cartItems,r],t.cart[r]=e}function qn(e,t){let r=pn(e);t.cartItems=t.cartItems.filter((e=>e!==r)),delete t.cart[r]}function On(e){for(let t of e.cartItems){if(t in e.purchased){e.purchased[t].quantity+=e.cart[t].quantity;continue}e.purchasedItems=[...e.purchasedItems,t],e.purchased[t]=e.cart[t]}}var xn=Intl.supportedValuesOf("currency"),Cn=new Pr({required:!0,emptyAllowed:!1,constrainTo:xn}),An={url:Nr,referrer:Br},kn={userId:zr,email:zr,userIp:zr,userAgent:zr},jn=new $r({options:{required:!0},values:{productId:zr,sku:zr,name:zr,price:zr,quantity:zr}});({items:new _r({each:jn})});var Rn={language:Nr,country:Nr,currency:Cn,user:new $r({values:kn}),view:new $r({options:{required:!0},values:An})};new Or(Rn);var Mn=Nt("commerce/setContext",(e=>Jr(e,Rn))),En=Nt("commerce/setUser",(e=>kr(e.userId)&&kr(e.email)?{payload:e,error:Wr(new qr("Either userId or email is required"))}:Jr(e,kn))),Dn=Nt("commerce/setView",(e=>Jr(e,An)));var Fn=()=>({language:"",country:"",currency:"",view:{url:""}});var Tn=nr(Fn(),(e=>{e.addCase(Mn,((e,{payload:t})=>t)).addCase(En,((e,{payload:t})=>{e.user=t})).addCase(Dn,((e,{payload:t})=>{e.view=t}))}));var Pn=Nt("breadcrumb/deselectAll"),Un=Nt("breadcrumb/deselectAllNonBreadcrumbs");var $n=Nr;var Vn={state:new xr({required:!0}),numberOfResults:new jr({required:!0,min:0}),value:new Pr({required:!0,emptyAllowed:!0}),path:new _r({required:!0,each:Nr}),moreValuesAvailable:new Er({required:!1})};function _n(e){e.children.forEach((e=>{_n(e)})),Gr({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Vn)}var Ln={facetId:$n,field:Nr,delimitingCharacter:new Pr({required:!1,emptyAllowed:!0}),filterFacetCount:new Er({required:!1}),injectionDepth:new jr({required:!1,min:0}),numberOfValues:new jr({required:!1,min:1}),sortCriteria:new xr({required:!1}),basePath:new _r({required:!1,each:Nr}),filterByBasePath:new Er({required:!1})},Qn=5,Nn=Nt("categoryFacet/register",(e=>Jr(e,Ln))),zn=Nt("categoryFacet/toggleSelectValue",(e=>{try{return Gr(e.facetId,Nr),_n(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Wr(t)}}})),Yn=Nt("categoryFacet/deselectAll",(e=>Jr(e,Ln.facetId))),Bn=Nt("categoryFacet/updateNumberOfValues",(e=>Jr(e,{facetId:Ln.facetId,numberOfValues:Ln.numberOfValues})));Nt("categoryFacet/updateSortCriterion",(e=>Jr(e,{facetId:Ln.facetId,criterion:new xr})));Nt("categoryFacet/updateBasePath",(e=>Jr(e,{facetId:Ln.facetId,basePath:new _r({each:Nr})})));var Hn={facetId:$n,captions:new $r({options:{required:!1}}),numberOfValues:new jr({required:!1,min:1}),query:new Pr({required:!1,emptyAllowed:!0})};var Wn={path:new _r({required:!0,each:Nr}),displayValue:Yr,rawValue:Yr,count:new jr({required:!0,min:0})},Gn=Nt("categoryFacet/selectSearchResult",(e=>Jr(e,{facetId:$n,value:new $r({values:Wn})}))),Jn=Nt("categoryFacetSearch/register",(e=>Jr(e,Hn)));var Zn={facetId:$n,value:new $r({values:{displayValue:Yr,rawValue:Yr,count:new jr({required:!0,min:0})}})},Kn=Nt("facetSearch/register",(e=>Jr(e,Hn))),Xn=Nt("facetSearch/update",(e=>Jr(e,Hn))),ei=Nt("facetSearch/toggleSelectValue",(e=>Jr(e,Zn))),ti=Nt("facetSearch/toggleExcludeValue",(e=>Jr(e,Zn)));var ri=new Pr({regex:/^[a-zA-Z0-9-_]+$/}),ni=new Pr({required:!0});new _r({each:new Pr});new Pr;new Er;var ii=new Er,ai=new jr({min:0}),oi=new jr({min:1}),ui=new Er({required:!0}),si=new $r,ci=new Pr,li={captions:si,numberOfValues:oi,query:ci};new $r({values:li});var di=new $r({options:{required:!1},values:{type:new Pr({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new _r({required:!0,max:25,each:new Pr({emptyAllowed:!1,required:!0})})}});new Er;var fi=new _r({min:1,max:25,required:!1,each:new Pr({emptyAllowed:!1,required:!0})});var hi={value:Nr,numberOfResults:new jr({min:0}),state:Nr};var gi={facetId:$n,field:new Pr({required:!0,emptyAllowed:!0}),filterFacetCount:new Er({required:!1}),injectionDepth:new jr({required:!1,min:0}),numberOfValues:new jr({required:!1,min:1}),sortCriteria:new xr({required:!1}),resultsMustMatch:new xr({required:!1}),allowedValues:di,customSort:fi},pi=Nt("facet/register",(e=>Jr(e,gi))),vi=Nt("facet/toggleSelectValue",(e=>Jr(e,{facetId:$n,selection:new $r({values:hi})}))),yi=Nt("facet/toggleExcludeValue",(e=>Jr(e,{facetId:$n,selection:new $r({values:hi})}))),mi=Nt("facet/deselectAll",(e=>Jr(e,$n))),wi=Nt("facet/updateSortCriterion",(e=>Jr(e,{facetId:$n,criterion:new xr({required:!0})}))),bi=Nt("facet/updateNumberOfValues",(e=>Jr(e,{facetId:$n,numberOfValues:new jr({required:!0,min:1})}))),Si=Nt("facet/updateIsFieldExpanded",(e=>Jr(e,{facetId:$n,isFieldExpanded:new Er({required:!0})}))),Ii=Nt("facet/updateFreezeCurrentValues",(e=>Jr(e,{facetId:$n,freezeCurrentValues:new Er({required:!0})})));var qi=Nt("facetOptions/update",((e={freezeFacetOrder:!0})=>Jr(e,{freezeFacetOrder:new Er({required:!1})}))),Oi=Nt("facetOptions/facet/enable",(e=>Jr(e,$n))),xi=Nt("facetOptions/facet/disable",(e=>Jr(e,$n)));var Ci=Nt("history/undo"),Ai=Nt("history/redo"),ki=Nt("history/snapshot");fr("history/back",(async(e,{dispatch:t})=>{t(Ci()),await t(ji())}));fr("history/forward",(async(e,{dispatch:t})=>{t(Ai()),await t(ji())}));var ji=fr("history/change",(async(e,{getState:t})=>t().history.present));function Ri(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Mi(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))}var Ei;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(Ei||(Ei={}));function Di(){return typeof window<"u"}function Fi(){return typeof navigator<"u"}function Ti(){return typeof document<"u"}function Pi(){try{return typeof localStorage<"u"}catch{return!1}}function Ui(){try{return typeof sessionStorage<"u"}catch{return!1}}function $i(){return Fi()&&navigator.cookieEnabled}var Vi=[Ei.click,Ei.custom,Ei.search,Ei.view],_i=(e,t)=>Vi.indexOf(e)!==-1?Object.assign({language:Ti()?document.documentElement.lang:"unknown",userAgent:Fi()?navigator.userAgent:"unknown"},t):t,Li=class e{static set(e,t,r){var n,i,a,o;r&&(i=new Date,i.setTime(i.getTime()+r)),o=window.location.hostname,o.indexOf(".")===-1?Qi(e,t,i):(a=o.split("."),n=a[a.length-2]+"."+a[a.length-1],Qi(e,t,i,n))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(t,0)===0)return i.substring(t.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function Qi(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Ni(){return Pi()?localStorage:$i()?new zi:Ui()?sessionStorage:new Bi}var zi=class e{getItem(t){return Li.get(`${e.prefix}${t}`)}removeItem(t){Li.erase(`${e.prefix}${t}`)}setItem(t,r,n){Li.set(`${e.prefix}${t}`,r,n)}};zi.prefix="coveo_";var Yi=class{constructor(){this.cookieStorage=new zi}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},Bi=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Hi="__coveo.analytics.history",Wi=20,Gi=1e3*60,Ji=75,Zi=class{constructor(e){this.store=e||Ni()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Mi(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return Mi(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Hi);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Mi(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Hi);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Hi,JSON.stringify(e.slice(0,Wi)))}catch{}}clear(){try{this.store.removeItem(Hi)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Ji)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Gi:!0}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},Ki=Object.freeze({__proto__:null,HistoryStore:Zi,MAX_NUMBER_OF_HISTORY_ELEMENTS:Wi,MAX_VALUE_SIZE:Ji,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Gi,STORE_KEY:Hi,default:Zi}),Xi=(e,t)=>Mi(void 0,void 0,void 0,(function*(){return e===Ei.view?(yield ea(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),ea=e=>Mi(void 0,void 0,void 0,(function*(){let t=new Zi,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),ta,ra=new Uint8Array(16);function na(){if(!ta&&(ta=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ta))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ta(ra)}var ia=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function aa(e){return typeof e=="string"&&ia.test(e)}var oa=[];for(let e=0;e<256;++e)oa.push((e+256).toString(16).slice(1));function ua(e,t=0){return(oa[e[t+0]]+oa[e[t+1]]+oa[e[t+2]]+oa[e[t+3]]+"-"+oa[e[t+4]]+oa[e[t+5]]+"-"+oa[e[t+6]]+oa[e[t+7]]+"-"+oa[e[t+8]]+oa[e[t+9]]+"-"+oa[e[t+10]]+oa[e[t+11]]+oa[e[t+12]]+oa[e[t+13]]+oa[e[t+14]]+oa[e[t+15]]).toLowerCase()}function sa(e){if(!aa(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function ca(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var la="6ba7b810-9dad-11d1-80b4-00c04fd430c8",da="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function fa(e,t,r){function n(e,n,i,a){var o;if(typeof e=="string"&&(e=ca(e)),typeof n=="string"&&(n=sa(n)),((o=n)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=u[e];return i}return ua(u)}try{n.name=e}catch{}return n.DNS=la,n.URL=da,n}var ha=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ga={randomUUID:ha};function pa(e,t,r){if(ga.randomUUID&&!t&&!e)return ga.randomUUID();e=e||{};let n=e.random||(e.rng||na)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return ua(n)}function va(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function ya(e,t){return e<<t|e>>>32-t}function ma(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[t*64+n*4]<<24|e[t*64+n*4+1]<<16|e[t*64+n*4+2]<<8|e[t*64+n*4+3];a[t]=r}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=ya(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],u=r[2],s=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=ya(i,5)+va(r,o,u,s)+c+t[r]+n[e]>>>0;c=s,s=u,u=ya(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var wa=fa("v5",80,ma),ba=wa,Sa="2.30.2",Ia={pageview:"pageview",event:"event"},qa=class e{constructor(e,t){if(!aa(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return aa(a)?new e(a,Number.parseInt(i)*1e3):null}};qa.cvo_cid="cvo_cid";qa.expirationTime=120;var Oa=Object.keys;function xa(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Ca={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Aa=Oa(Ca).map((e=>Ca[e])),ka=[...Aa].join("|"),ja=new RegExp(`^(${ka}$)`),Ra={svcAction:"svc_action",svcActionData:"svc_action_data"},Ma=e=>ja.test(e),Ea=[Ma],Da={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Fa={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ta={action:"pa",list:"pal",listSource:"pls"},Pa={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Ua=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],$a={id:"quoteId",affiliation:"quoteAffiliation"},Va={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},_a={add:Ta,bookmark_add:Ta,bookmark_remove:Ta,click:Ta,checkout:Ta,checkout_option:Ta,detail:Ta,impression:Ta,remove:Ta,refund:Object.assign(Object.assign({},Ta),Pa),purchase:Object.assign(Object.assign({},Ta),Pa),quickview:Ta,quote:Object.assign(Object.assign({},Ta),$a),review:Object.assign(Object.assign({},Ta),Va)},La=Oa(Da).map((e=>Da[e])),Qa=Oa(Fa).map((e=>Fa[e])),Na=Oa(Ta).map((e=>Ta[e])),za=Oa(Pa).map((e=>Pa[e])),Ya=Oa(Va).map((e=>Va[e])),Ba=Oa($a).map((e=>$a[e])),Ha=[...La,"custom"].join("|"),Wa=[...Qa,"custom"].join("|"),Ga="(pr[0-9]+)",Ja="(il[0-9]+pi[0-9]+)",Za=new RegExp(`^${Ga}(${Ha})$`),Ka=new RegExp(`^(${Ja}(${Wa}))|(il[0-9]+nm)$`),Xa=new RegExp(`^(${Na.join("|")})$`),eo=new RegExp(`^(${za.join("|")})$`),to=new RegExp(`^${Ga}custom$`),ro=new RegExp(`^${Ja}custom$`),no=new RegExp(`^(${[...Ua,...Ya,...Ba].join("|")})$`),io=e=>Za.test(e),ao=e=>Ka.test(e),oo=e=>Xa.test(e),uo=e=>eo.test(e),so=e=>no.test(e),co=[ao,io,oo,uo,so],lo=[to,ro],fo={anonymizeIp:"aip"},ho={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},go={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},po=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],vo=Object.assign(Object.assign(Object.assign(Object.assign({},fo),ho),go),po.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),yo=Object.assign(Object.assign({},vo),Ra),mo=e=>{let t=!!e.action&&_a[e.action]||{};return Oa(e).reduce(((r,n)=>{let i=t[n]||yo[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},wo=Oa(yo).map((e=>yo[e])),bo=e=>wo.indexOf(e)!==-1,So=e=>e==="custom",Io=e=>[...co,...Ea,bo,So].some((t=>t(e))),qo=e=>Oa(e).reduce(((t,r)=>{let n=Oo(r);return n?Object.assign(Object.assign({},t),xo(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),Oo=e=>{let t;return[...lo].every((r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t})),t},xo=(e,t)=>Oa(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),Co=class{constructor(e){this.opts=e}sendEvent(e,t){return Mi(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),u=this.encodeForEventType(e,o),s=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,s)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return Mi(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:u}=a;n=o||e;try{i=JSON.parse(u)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return Mi(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return[Ei.click,Ei.custom,Ei.search,Ei.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},Ao=class{sendEvent(e,t){return Mi(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return Mi(this,void 0,void 0,(function*(){return Promise.resolve()}))}},ko=window.fetch,jo=class{constructor(e){this.opts=e}sendEvent(e,t){return Mi(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},u=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:s}=u,c=Ri(u,["url"]),l;try{l=yield ko(s,c)}catch(e){console.error("An error has occured when sending the event.",e);return}if(l.ok){let e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}}))}deleteHttpCookieVisitorId(){return Mi(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield ko(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return[Ei.click,Ei.custom,Ei.search,Ei.view].indexOf(e)!==-1}getVisitorIdParam(){return Mi(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Ro=class{constructor(e,t){Pi()&&$i()?this.storage=new Yi:Pi()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Bi),this.client=new jo(e),this.beaconClient=new Co(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Mo=class{constructor(e,t){this.storage=t||new Bi,this.client=new jo(e)}getClientDependingOnEventType(e){return this.client}},Eo=class{constructor(){this.storage=new Bi,this.client=new Ao}getClientDependingOnEventType(e){return this.client}},Do="xx",Fo=e=>e?.startsWith(Do)||!1,To=`\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the "coveo.analytics/react-native" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;function Po(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Uo=["1",1,"yes",!0];function $o(){return Fi()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>Uo.indexOf(e)!==-1))}var Vo="v15",_o={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Lo(e=_o.default,t=Vo,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var Qo="38824e1f-37f5-42d3-8372-a4b8fa9df946",No=class{get defaultOptions(){return{endpoint:_o.default,isCustomEndpoint:!1,token:"",version:Vo,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Sa}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Xi,_i].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};$o()?this.runtime=new Eo:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(Ei.view,{newEventType:Ei.view,addClientIdParameter:!0}),this.addEventTypeMapping(Ei.click,{newEventType:Ei.click,addClientIdParameter:!0}),this.addEventTypeMapping(Ei.custom,{newEventType:Ei.custom,addClientIdParameter:!0}),this.addEventTypeMapping(Ei.search,{newEventType:Ei.search,addClientIdParameter:!0})}initRuntime(e){return Di()&&Ti()?new Ro(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(Po()&&console.warn(To),new Mo(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Mi(this,void 0,void 0,(function*(){try{return Di()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||pa()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),pa()}}))}getCurrentVisitorId(){return Mi(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Mi(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return Mi(this,void 0,void 0,(function*(){if(aa(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(ba(e,ba(t,Qo)))}}))}getParameters(e,...t){return Mi(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Mi(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(pa()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if($o())return null;try{let t=new URL(e).searchParams.get(qa.cvo_cid);if(t==null)return null;let r=qa.fromString(t);return!r||!Ti()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return Mi(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Mi(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>Mi(this,void 0,void 0,(function*(){return a?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Mi(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Mi(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Mi(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?mo(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>Mi(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return Mi(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>Mi(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return Mi(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Zi).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return Mi(this,void 0,void 0,(function*(){return this.makeEvent(Ei.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Ri(e,["searchQueryUid"]);return Mi(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return Mi(this,void 0,void 0,(function*(){return this.makeEvent(Ei.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Ri(e,["searchQueryUid"]);return Mi(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return Mi(this,void 0,void 0,(function*(){return this.makeEvent(Ei.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Ri(e,["lastSearchQueryUid"]);return Mi(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return Mi(this,void 0,void 0,(function*(){return this.makeEvent(Ei.view,e)}))}sendViewEvent(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return Mi(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Mi(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every((e=>typeof e=="string")))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[Ei.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=e=>typeof e<"u"&&e!==null&&e!=="";return Object.keys(e).filter((n=>this.isKeyAllowedEmpty(t,n)||r(e[n]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(Io(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Ri(e,["custom"]),n={};t&&xa(t)&&(n=this.lowercaseKeys(t));let i=qo(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Ri(e,["custom"]);if(t&&xa(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Ri(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==Ei.view||t==Ei.click||t==Ei.search||t==Ei.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==Ei.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Ri(e,["userId"]);return Fo(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Ri(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&xa(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&xa(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return Lo(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},zo;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(zo||(zo={}));var Yo;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(Yo||(Yo={}));var Bo={[Yo.triggerNotify]:"queryPipelineTriggers",[Yo.triggerExecute]:"queryPipelineTriggers",[Yo.triggerQuery]:"queryPipelineTriggers",[Yo.triggerRedirect]:"queryPipelineTriggers",[Yo.queryError]:"errors",[Yo.queryErrorBack]:"errors",[Yo.queryErrorClear]:"errors",[Yo.queryErrorRetry]:"errors",[Yo.pagerNext]:"getMoreResults",[Yo.pagerPrevious]:"getMoreResults",[Yo.pagerNumber]:"getMoreResults",[Yo.pagerResize]:"getMoreResults",[Yo.pagerScrolling]:"getMoreResults",[Yo.facetSearch]:"facet",[Yo.facetShowLess]:"facet",[Yo.facetShowMore]:"facet",[Yo.recommendation]:"recommendation",[Yo.likeSmartSnippet]:"smartSnippet",[Yo.dislikeSmartSnippet]:"smartSnippet",[Yo.expandSmartSnippet]:"smartSnippet",[Yo.collapseSmartSnippet]:"smartSnippet",[Yo.openSmartSnippetFeedbackModal]:"smartSnippet",[Yo.closeSmartSnippetFeedbackModal]:"smartSnippet",[Yo.sendSmartSnippetReason]:"smartSnippet",[Yo.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.clearRecentQueries]:"recentQueries",[Yo.recentResultClick]:"recentlyClickedDocuments",[Yo.clearRecentResults]:"recentlyClickedDocuments",[Yo.showLessFoldedResults]:"folding",[Yo.caseDetach]:"case",[Yo.likeGeneratedAnswer]:"generatedAnswer",[Yo.dislikeGeneratedAnswer]:"generatedAnswer",[Yo.openGeneratedAnswerSource]:"generatedAnswer",[Yo.generatedAnswerStreamEnd]:"generatedAnswer",[Yo.generatedAnswerSourceHover]:"generatedAnswer",[Yo.generatedAnswerCopyToClipboard]:"generatedAnswer",[Yo.generatedAnswerHideAnswers]:"generatedAnswer",[Yo.generatedAnswerShowAnswers]:"generatedAnswer",[Yo.generatedAnswerExpand]:"generatedAnswer",[Yo.generatedAnswerCollapse]:"generatedAnswer",[Yo.generatedAnswerFeedbackSubmit]:"generatedAnswer",[zo.expandToFullUI]:"interface",[zo.openUserActions]:"User Actions",[zo.showPrecedingSessions]:"User Actions",[zo.showFollowingSessions]:"User Actions",[zo.clickViewedDocument]:"User Actions",[zo.clickPageView]:"User Actions",[zo.createArticle]:"createArticle"},Ho=class{constructor(){this.runtime=new Eo,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(Ei.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(Ei.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(Ei.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(Ei.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Sa}};function Wo(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function Go(e){return e.map((e=>e.replace(/;/g,"")))}function Jo(e){let t=e.join(";");return t.length<=256?t:Jo(e.slice(1))}var Zo=e=>{let t=Go(e),r=Wo(t);return Jo(r)};function Ko(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Zo(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Zo(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Xo=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||$o();this.coveoAnalyticsClient=r?new Ho:new No(e)}disable(){this.coveoAnalyticsClient=new Ho}enable(){this.coveoAnalyticsClient=new No(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(Yo.interfaceLoad)}logInterfaceLoad(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(Yo.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(Yo.recommendation)}logRecommendation(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(Yo.recommendationOpen,e,t)}logRecommendationOpen(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(Yo.staticFilterClearAll,e)}logStaticFilterClearAll(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(Yo.staticFilterSelect,e)}logStaticFilterSelect(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(Yo.staticFilterDeselect,e)}logStaticFilterDeselect(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(Yo.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(Yo.interfaceChange,e)}logInterfaceChange(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(Yo.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(Yo.didyoumeanClick)}logDidYouMeanClick(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(Yo.resultsSort,e)}logResultsSort(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(Yo.searchboxSubmit)}logSearchboxSubmit(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(Yo.searchboxClear)}logSearchboxClear(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(Yo.searchboxAsYouType)}logSearchboxAsYouType(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(Yo.breadcrumbFacet,e)}logBreadcrumbFacet(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(Yo.breadcrumbResetAll)}logBreadcrumbResetAll(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(Yo.documentQuickview,e,t)}logDocumentQuickview(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(Yo.documentOpen,e,t)}logDocumentOpen(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(Yo.omniboxAnalytics,Ko(e))}logOmniboxAnalytics(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(Yo.omniboxFromLink,Ko(e))}logOmniboxFromLink(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(Yo.searchFromLink)}logSearchFromLink(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(Yo.triggerNotify,e)}logTriggerNotify(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(Yo.triggerExecute,e)}logTriggerExecute(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(Yo.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(Yo.undoTriggerQuery,e)}logUndoTriggerQuery(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(Yo.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(Yo.pagerResize,e)}logPagerResize(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(Yo.pagerNumber,e)}logPagerNumber(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(Yo.pagerNext,e)}logPagerNext(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(Yo.pagerPrevious,e)}logPagerPrevious(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(Yo.pagerScrolling)}logPagerScrolling(){return Mi(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(Yo.facetClearAll,e)}logFacetClearAll(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(Yo.facetSearch,e)}logFacetSearch(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(Yo.facetSelect,e)}logFacetSelect(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(Yo.facetDeselect,e)}logFacetDeselect(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(Yo.facetExclude,e)}logFacetExclude(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(Yo.facetUnexclude,e)}logFacetUnexclude(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(Yo.facetSelectAll,e)}logFacetSelectAll(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(Yo.facetUpdateSort,e)}logFacetUpdateSort(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(Yo.facetShowMore,e)}logFacetShowMore(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(Yo.facetShowLess,e)}logFacetShowLess(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(Yo.queryError,e)}logQueryError(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return Mi(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Yo.queryErrorBack);return{description:e.description,log:()=>Mi(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Yo.queryErrorBack)}))}}))}logQueryErrorBack(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return Mi(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Yo.queryErrorRetry);return{description:e.description,log:()=>Mi(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Yo.queryErrorRetry)}))}}))}logQueryErrorRetry(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return Mi(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Yo.queryErrorClear);return{description:e.description,log:()=>Mi(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Yo.queryErrorClear)}))}}))}logQueryErrorClear(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(Yo.likeSmartSnippet)}logLikeSmartSnippet(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(Yo.dislikeSmartSnippet)}logDislikeSmartSnippet(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(Yo.expandSmartSnippet)}logExpandSmartSnippet(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(Yo.collapseSmartSnippet)}logCollapseSmartSnippet(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(Yo.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(Yo.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(Yo.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(Yo.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(Yo.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(Yo.copyToClipboard,e,t)}logCopyToClipboard(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(Yo.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(Yo.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(Yo.recentQueryClick)}logRecentQueryClick(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(Yo.clearRecentQueries)}logClearRecentQueries(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(Yo.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(Yo.clearRecentResults)}logClearRecentResults(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(Yo.noResultsBack)}logNoResultsBack(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(Yo.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(Yo.showLessFoldedResults)}logShowLessFoldedResults(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=Bo[e]){return Mi(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=Bo[e]){return Mi(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return Mi(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return Mi(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return Mi(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return Mi(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return Mi(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return Mi(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return Mi(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return Mi(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof No?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(Yo.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(Yo.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(Yo.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(Yo.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(Yo.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(Yo.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(Yo.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(Yo.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(Yo.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(Yo.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(Yo.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(Yo.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return Mi(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(Yo.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return Mi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},eu=Object.assign({},Ia);Object.keys(eu).map((e=>eu[e]));var tu;(function(e){e.click="click",e.flowStart="flowStart"})(tu||(tu={}));var ru;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(ru||(ru={}));var nu;(function(e){e.quit="Quit",e.solved="Solved"})(nu||(nu={}));var iu=e=>new No(e).getCurrentVisitorId(),au=new Ki.HistoryStore,ou=(e,t)=>typeof t=="function"?(...r)=>{let n=N(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,uu=(e,t)=>(...r)=>{let n=N(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};function su(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let i=Object.values(r);return[...n,...i]}function cu(e){return Object.values(e).map((e=>e.request))}var lu=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function du({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:a,mode:o}=e;o!=="disabled"&&(n.call(r),t.send(i,a,r))}var fu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hu(e){return typeof e=="string"&&fu.test(e)}function gu(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),a=i&&hu(i)?i:r.generateUUID();return n.setItem(t,a),a},clear:()=>{e.get().storage.removeItem(t)}}}var pu="0.7.7";function vu(e){let{trackingId:t}=e;return{trackingId:t}}function yu(e){return(e.source||[]).concat([`relay@${pu}`])}function mu(e,t,r,n){let{getReferrer:i,getLocation:a,getUserAgent:o}=r,u=vu(t),s=n.getClientId();return Object.freeze({type:e,config:u,ts:Date.now(),source:yu(t),clientId:s,userAgent:o(),referrer:i(),location:a()})}function wu(e,t,r,n,i){return{...t,meta:mu(e,r,n,i)}}var bu="*";function Su(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(e,t){return e.type==="*"||t===e.type}function n(r){return t(r)<0&&e.push(r),()=>u(r.type,r.callback)}function i(t){e.forEach((e=>{if(r(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))}function a(t){if(t===bu)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function o(r){let n=t(r);n>=0&&e.splice(n,1)}function u(e,t){t?o({type:e,callback:t}):a(e)}return{add:n,call:i,remove:u}}function Iu({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function qu(e){let t=Iu(e);return{get:()=>t,update:e=>{t=Iu({...t,...e})}}}function Ou(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var xu=Cu();function Cu(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return t.length==2?t.join("."):""};return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(t.lastIndexOf(r,0)===0)return t.substring(r.length,t.length)}return null},setItem(r,n,i){let a=t(window.location.hostname),o=`;expires=${new Date((new Date).getTime()+i).toUTCString()}`,u=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${o}${u};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function Au(){return{getItem(e){return xu.getItem(e)||localStorage.getItem(e)},removeItem(e){xu.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),xu.setItem(e,t,31556952e3)}}}function ku(){let e=document.referrer;return e===""?null:e}function ju(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(Ou().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>ku(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:Au()}}function Ru(){return{getItem(){return null},removeItem(){},setItem(){}}}function Mu(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Ru()}}function Eu(e){return e.get().mode!=="disabled"&&Du()?ju():Mu()}function Du(){try{return typeof window=="object"}catch{return!1}}function Fu(e){return{get:()=>Object.freeze(Eu(e))}}function Tu(e){let t=qu(e),r=Su(),n=Fu(t),i=gu(n);return{emit:(e,a)=>{let o=t.get(),u=n.get(),s=wu(e,a,o,u,i);return du({config:o,environment:u,event:s,listenerManager:r})},getMeta:e=>mu(e,t.get(),n.get(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:pu,clearStorage:()=>{i.clear()}}}var Pu="2.63.3",Uu=["@coveo/atomic","@coveo/quantic"];var $u=Tt((e=>e.source),(e=>[`@coveo/headless@${Pu}`].concat(Object.entries(e).map((([e,t])=>`${e}@${t}`)))));var Vu=Tt((e=>e.configuration.accessToken),(e=>e.configuration.analytics),(e=>$u(e.configuration.analytics)),((e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>Tu({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})));var _u=()=>"default";var Lu=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Qu=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Nu=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return Qu(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=e?.contextValues||{},n={};for(let[e,t]of Object.entries(r)){let r=`context_${e}`;n[r]=t}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=Pu),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||_u()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};function zu(){return{desiredCount:5,numberOfValues:8,set:{}}}function Yu(e){let{activeValue:t,ancestryMap:r}=Bu(e);return t?Hu(t,r):[]}function Bu(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if(e.state==="selected")return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function Hu(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}var Wu=(e,t)=>e.categoryFacetSet[t]?.request;var Gu=(e,t)=>{let r=Wu(e,t);return Yu(r?.currentValues??[])};function Ju(){return{}}function Zu(e){return{request:e}}function Ku(){return{}}function Xu(e){return{request:e}}function es(){return{}}function ts(e){return{request:e,hasBreadcrumbs:!0}}function rs(){return{}}function ns(e){return{facetSet:e.facetSet??rs(),categoryFacetSet:e.categoryFacetSet??Ju(),dateFacetSet:e.dateFacetSet??Ku(),numericFacetSet:e.numericFacetSet??es(),automaticFacetSet:e.automaticFacetSet??zu()}}var is=e=>{let t=[];return us(e).forEach(((r,n)=>{let i=ms(e,r.facetId),a=ps(r,n+1);if(os(r)){if(!!!Gu(e,r.facetId).length)return;t.push({...a,...hs(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach(((e,n)=>{if(e.state==="idle")return;let o=cs(e,n+1,i),u=as(r)?ds(e):ls(e);t.push({...a,...o,...u})}))})),ss(e).forEach(((e,r)=>{let n=gs(e,r+1);e.values.forEach(((e,r)=>{if(e.state==="idle")return;let i=cs(e,r+1,"specific"),a=ds(e);t.push({...n,...i,...a})}))})),t},as=e=>e.type==="specific",os=e=>e.type==="hierarchical",us=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),ss=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),cs=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),ls=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),ds=e=>({displayValue:e.value,value:e.value}),fs=(e,t)=>Gu(e,t).map((e=>e.value)).join(";"),hs=(e,t)=>{let r=fs(e,t);return{value:r,valuePosition:1,displayValue:r}},gs=(e,t)=>({title:vs(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),ps=(e,t)=>({title:vs(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),vs=(e,t)=>`${e}_${t}`,ys=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,ms=(e,t)=>{let r=ys(e,t);return r?r.type:"specific"};var ws=()=>({q:"",enableQuerySyntax:!1});function bs(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ss(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:bs(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:bs(),extendedResults:{}}}var Is=class extends Nu{constructor(){super(...arguments);this.initialState=Lu()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productListing?.responseId||this.initialState.responseId}mapResultsToAnalyticsDocument(){return this.state.productListing?.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},qs=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Is(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Xo({token:o,endpoint:u,runtimeEnvironment:s,preprocessRequest:ou(e,n),beforeSendHooks:[uu(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:o},"Analytics request"),r)]},i);return c||l.disable(),l};var Os=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Os||{}),xs=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(xs||{}),Cs=e=>{if(Lr(e))return e.map((e=>Cs(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},As=()=>({by:"relevancy"});new $r({values:{by:new Qr({enum:xs,required:!0}),order:new Qr({enum:Os}),field:new Pr}});function ks(){return Cs(As())}var js=class e extends Nu{constructor(){super(...arguments);this.getFacetRequest=e=>this.state.facetSet?.[e]?.request||this.state.categoryFacetSet?.[e]?.request||this.state.dateFacetSet?.[e]?.request||this.state.numericFacetSet?.[e]?.request||this.state.automaticFacetSet?.set[e]?.response}getFacetState(){return is(ns(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let e=this.getState();return e.search?.searchResponseId||e.search?.response.searchUid||Ss().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.search?.response.pipeline||this.state.pipeline||e.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){let e=this.getState(),t=super.getBaseMetadata(),r=e.search?.response?.extendedResults?.generativeQuestionAnsweringId;return r&&(t.generativeQuestionAnsweringId=r),t}getFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetValue:t,facetTitle:`${r}_${e}`}}getFacetClearAllMetadata(e){let t=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:t,facetTitle:`${t}_${e}`}}getFacetUpdateSortMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,criteria:t,facetTitle:`${r}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${r}_${e}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??ks()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:r,categoryFacetPath:t,categoryFacetTitle:`${r}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map((e=>e.expression)),i=r.partialQueries.length-1,a=r.partialQueries[i]||"",o=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:a,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){let e=this.getState(),t={};return e.generatedAnswer?.isVisible!==void 0&&(t.showGeneratedAnswer=e.generatedAnswer.isVisible),t}get resultURIs(){return this.results?.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||ws().q}get responseTime(){return this.state.search?.duration||Ss().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||Ss().response.totalCountFiltered}};js.fallbackPipelineName="default";var Rs=js,Ms=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Rs(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Xo({token:o,endpoint:u,runtimeEnvironment:s,preprocessRequest:ou(e,n),beforeSendHooks:[uu(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:o},"Analytics request"),r)]},i);return c||l.disable(),l},Es=()=>{let e=au.getHistory().reverse().find((e=>e.name==="PageView"&&e.value));return e?e.value:""};var Ds=()=>"";function Fs(e,t){return{...new Rs(t).getBaseMetadata(),actionCause:e,type:e}}function Ts(e){return Object.assign(e,{instantlyCallable:!0})}function Ps(e,t){let r=t=>Ts(fr(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:a,logger:o}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:a,logger:o})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a})=>{let{description:o,log:u}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a});return{description:o,action:r((async(e,{getState:t,extra:r})=>await u({state:t(),extra:r})))}}}),n}var Us=(e,t,r)=>{function n(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return _s(i)}return n},$s=e=>e.configuration.analytics.analyticsMode==="legacy",Vs=e=>e.configuration.analytics.analyticsMode==="next",_s=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:o})=>(r??(r=e=>new o(e)),Ps(e,(async({getState:e,analyticsClientMiddleware:o,preprocessRequest:u,logger:s})=>{let c=[],l={log:async({state:e})=>{for(let t of c)await t(e)}},d=e(),f=a({getState:e,logger:s,analyticsClientMiddleware:o,preprocessRequest:u,provider:r(e)}),h=await t(f,e());l.description=h?.description,c.push((async e=>{$s(e)&&await Ls(h,r,e,s,f.coveoAnalyticsClient)}));let{emit:g}=Vu(d);return c.push((async e=>{if(Vs(e)&&i&&n){let t=n(e);await Ys(g,i,t)}})),l})));async function Ls(e,t,r,n,i){t((()=>r));let a=await(e?.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var Qs=Us(Ms,(e=>e),Rs);var Ns=Us(qs,(e=>e),Is);var zs={urihash:new Pr,sourcetype:new Pr,permanentid:new Pr};({uniqueId:Nr,raw:new $r({values:zs}),title:Nr,uri:Nr,clickUri:Nr,rankingModifier:new Pr({required:!1,emptyAllowed:!0})});async function Ys(e,t,r){await e(t,r)}var Bs=()=>Qs("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Hs=e=>Qs("search/queryError",((t,r)=>t.makeQueryError({query:r.query?.q||ws().q,aq:r.advancedSearchQueries?.aq||lu().aq,cq:r.advancedSearchQueries?.cq||lu().cq,dq:r.advancedSearchQueries?.dq||lu().dq,errorType:e.type,errorMessage:e.message})));var Ws=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Ws||{}),Gs=(e=>(e.Ascending="asc",e.Descending="desc",e))(Gs||{}),Js=()=>({by:"relevance"});new $r({options:{required:!1},values:{by:new Qr({enum:Ws,required:!0}),fields:new _r({each:new $r({values:{name:new Pr,direction:new Qr({enum:Gs})}})})}});var Zs=()=>Ns("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new Is(e)));Nt("productlisting/setUrl",(e=>Jr(e,{url:new Pr({required:!0,url:!0})})));Nt("productlisting/setAdditionalFields",(e=>Jr(e,{additionalFields:new _r({required:!0,each:new Pr({required:!0,emptyAllowed:!1})})})));var Ks=fr("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,u=await o.getProducts(await Xs(a));return de(u)?(r(Hs(u.error)),n(u.error)):{response:u.success,analyticsAction:Zs()}})),Xs=async e=>{let t=tc(e),r=await iu(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:e.productListing?.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...e.productListing.additionalFields?.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&ec(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(e.sort?.by||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function ec(e){return e.debug}function tc(e){return su(rc(e),e.facetOrder??[])}function rc(e){return[...cu(e.facetSet??{}),...cu(e.numericFacetSet??{}),...cu(e.dateFacetSet??{}),...cu(e.categoryFacetSet??{})]}var nc={q:new Pr,enableQuerySyntax:new Er,aq:new Pr,cq:new Pr,firstResult:new jr({min:0}),numberOfResults:new jr({min:0}),sortCriteria:new Pr,f:new $r,fExcluded:new $r,cf:new $r,nf:new $r,df:new $r,debug:new Er,sf:new $r,tab:new Pr,af:new $r};var ic=Nt("searchParameters/restore",(e=>Jr(e,nc)));var ac=Nt("facet/updateFacetAutoSelection",(e=>Jr(e,{allow:new Er({required:!0})})));var oc=class extends Rs{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??ws().q}get responseTime(){return this.activeInstantResultCache?.duration??Ss().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??Ss().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var uc=()=>Qs("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new oc(e))),sc=()=>({actionCause:"searchboxAsYouType"});var cc={id:Nr},lc={...cc,q:Yr};Nt("instantResults/register",(e=>Jr(e,cc)));var dc=Nt("instantResults/updateQuery",(e=>Jr(e,lc)));Nt("instantResults/clearExpired",(e=>Jr(e,cc)));var fc=new jr({required:!0,min:0}),hc=Nt("pagination/registerNumberOfResults",(e=>Jr(e,fc))),gc=Nt("pagination/updateNumberOfResults",(e=>Jr(e,fc))),pc=Nt("pagination/registerPage",(e=>Jr(e,fc))),vc=Nt("pagination/updatePage",(e=>Jr(e,fc))),yc=Nt("pagination/nextPage"),mc=Nt("pagination/previousPage");var wc=Nt("query/updateQuery",(e=>Jr(e,{q:new Pr,enableQuerySyntax:new Er})));var bc=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await iu(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Es()&&{pageId:Es()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:$u(e)}}}};var Sc=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await iu(e.configuration.analytics),actionsHistory:au.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await bc(e.configuration.analytics,t),...e.excerptLength&&!kr(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Ic=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await iu(e.configuration.analytics),actionsHistory:au.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await bc(e.configuration.analytics,t),...e.excerptLength&&!kr(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var qc=l(x()),Oc=l(C());var xc=l(x()),Cc=l(A());xc.default.extend(Cc.default);var Ac="YYYY/MM/DD@HH:mm:ss",kc="1401-01-01";function jc(e,t){let r=(0,xc.default)(e,t);return!r.isValid()&&!t?(0,xc.default)(e,Ac):r}function Rc(e){return e.format(Ac)}function Mc(e,t){let r=jc(e,t);if(!r.isValid()){let r=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:r}`)}Ec(r)}function Ec(e){if(e.isBefore(kc))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}qc.default.extend(Oc.default);var Dc=["past","now","next"],Fc=["minute","hour","day","week","month","quarter","year"],Tc=e=>{let t=e==="now";return{amount:new jr({required:!t,min:1}),unit:new Pr({required:!t,constrainTo:Fc}),period:new Pr({required:!0,constrainTo:Dc})}};function Pc(e){if(typeof e=="string"&&!Lc(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Nc(e):e;new Or(Tc(t.period)).validate(t);let r=$c(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Ec(r)}function Uc(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function $c(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,qc.default)().subtract(r,n);case"next":return(0,qc.default)().add(r,n);case"now":return(0,qc.default)()}}function Vc(e){return Rc($c(Nc(e)))}function _c(e){return e.toLocaleLowerCase().split("-")}function Lc(e){let[t,r,n]=_c(e);if(t==="now")return!0;if(!Dc.includes(t)||!Fc.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function Qc(e){return!!e&&typeof e=="object"&&"period"in e}function Nc(e){let[t,r,n]=_c(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function zc(e){return e.type==="dateRange"}function Yc(e){return`start${e}`}function Bc(e){return`end${e}`}var Hc=()=>({dateFacetValueMap:{}});function Wc(e,t,r){let n=e.start,i=e.end;return Lc(n)&&(n=Vc(n),r.dateFacetValueMap[t][Yc(n)]=e.start),Lc(i)&&(i=Vc(i),r.dateFacetValueMap[t][Bc(i)]=e.end),{...e,start:n,end:i}}function Gc(e,t){if(zc(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>Wc(e,r,t)))}}return e}function Jc(e){let t=Hc();return{request:{...e,facets:e.facets?.map((e=>Gc(e,t)))},mappings:t}}function Zc(e,t,r){return{...e,start:r.dateFacetValueMap[t][Yc(e.start)]||e.start,end:r.dateFacetValueMap[t][Bc(e.end)]||e.end}}function Kc(e,t){return e.facetId in t.dateFacetValueMap}function Xc(e,t){return Kc(e,t)?{...e,values:e.values.map((r=>Zc(r,e.facetId,t)))}:e}function el(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map((e=>Xc(e,t)))}}:e}var tl=async(e,t)=>{let r=cl(e),n=rl(e),i=nl(e),a=e.configuration.analytics.analyticsMode==="legacy"?await Ic(e,t):await Sc(e,t),o=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Jc({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:o(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function rl(e){return su(al(e),e.facetOrder??[])}function nl(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(il).filter((e=>e.currentValues.length>0)):void 0}function il(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function al(e){return ol(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function ol(e){return[...ul(e.facetSet??{}),...sl(e.numericFacetSet??{}),...sl(e.dateFacetSet??{}),...cu(e.categoryFacetSet??{})]}function ul(e){return cu(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function sl(e){return cu(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function cl(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=ll(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function ll(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var dl=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),fl=(e,t)=>{let r=hl(e);return r&&r.organizationId===t?r:null},hl=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};var gl=e=>e.success!==void 0,pl=e=>e.error!==void 0;Nt("didYouMean/enable");Nt("didYouMean/disable");Nt("didYouMean/automaticCorrections/disable");Nt("didYouMean/automaticCorrections/enable");var vl=Nt("didYouMean/correction",(e=>Jr(e,Nr)));Nt("didYouMean/automaticCorrections/mode",(e=>Jr(e,new Pr({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))));var yl=()=>Qs("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic()));var ml=()=>({actionCause:"didyoumeanAutomatic"});function wl(){return{contextValues:{}}}var bl=()=>!1;function Sl(){return{contextValues:{}}}function Il(){return{enabled:!0}}function ql(){return{freezeFacetOrder:!1,facets:{}}}function Ol(){return[]}function xl(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Cl(){return{}}function Al(){return{}}function kl(){return{}}function jl(e){return{context:e.context||wl(),dictionaryFieldContext:e.dictionaryFieldContext||Sl(),facetSet:e.facetSet||rs(),numericFacetSet:e.numericFacetSet||es(),dateFacetSet:e.dateFacetSet||Ku(),categoryFacetSet:e.categoryFacetSet||Ju(),automaticFacetSet:e.automaticFacetSet??zu(),pagination:e.pagination||xl(),query:e.query||ws(),tabSet:e.tabSet||kl(),advancedSearchQueries:e.advancedSearchQueries||lu(),staticFilterSet:e.staticFilterSet||Al(),querySet:e.querySet||Cl(),sortCriteria:e.sortCriteria||ks(),pipeline:e.pipeline||Ds(),searchHub:e.searchHub||_u(),facetOptions:e.facetOptions||ql(),facetOrder:e.facetOrder??Ol(),debug:e.debug??bl()}}new $r({values:{undoneQuery:Yr},options:{required:!0}});var Rl=()=>Qs("analytics/trigger/query",((e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null));var Ml=Nt("trigger/query/ignore",(e=>Jr(e,new Pr({emptyAllowed:!0,required:!0})))),El=Nt("trigger/query/modification",(e=>Jr(e,new $r({values:{originalQuery:zr,modification:zr}}))));var Dl=class{constructor(e,t=(e=>{this.dispatch(wc({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=el(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,o=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:o,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return pl(e.response)?(this.dispatch(Hs(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o,queryCorrection:u}=r;if(!n||!i)return null;let s=a.length===0&&o&&o.length!==0,c=!kr(u)&&!kr(u.correctedQuery);if(!s&&!c)return null;let l=s?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(ki(jl(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return pl(i.response)?(this.dispatch(Hs(i.response.error)),this.rejectWithValue(i.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(ki(jl(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:yl()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:yl()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra)}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(Ml("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return pl(i.response)?(this.dispatch(Hs(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ki(jl(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:Rl()})}getStateAfterResponse(e,t,r,n){return{...r,query:{q:e,enableQuerySyntax:r.query?.enableQuerySyntax??ws().enableQuerySyntax},search:{...Ss(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(ki(jl(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return gl(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await tl(this.getState()),{origin:"mainSearch"});return this.dispatch(vl(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(El({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await tl(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};fr("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Jr(e,{q:new Pr,enableQuerySyntax:new Er,clearFilters:new Er}),e.clearFilters&&(r(Pn()),r(Un())),r(ac({allow:!0})),r(wc({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(vc(1))}));var Fl=fr("search/executeSearch",(async(e,t)=>{let r=t.getState();return await Bl(r,t,e)})),Tl=fr("search/fetchPage",(async(e,t)=>{let r=t.getState();return await Nl(r,t,e)})),Pl=fr("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();return await zl(t,r)})),Ul=fr("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();return await Yl(t,e,r)}));fr("search/fetchInstantResults",(async(e,t)=>Ql(e,t)));var $l=async(e,t)=>{let r=await tl(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Vl=async(e,t,r)=>{let n=await Ic(e);return Jc({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},_l=async(e,t)=>{let r=await tl(e,t);return r.request.numberOfResults=0,r},Ll=e=>{e.configuration.analytics.enabled&&au.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Ql(e,t){Jr(e,{id:Nr,q:Nr,maxResultsPerQuery:new jr({required:!0,min:1}),cacheTimeout:new jr});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new Dl({...t,analyticsAction:uc()},(r=>{t.dispatch(dc({q:r,id:e.id}))})),o=await Vl(i,r,n),u=await a.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),s=await a.process(u);return"response"in s?{results:s.response.results,searchUid:s.response.searchUid,analyticsAction:s.analyticsAction,totalCountFiltered:s.response.totalCountFiltered,duration:s.duration}:s}async function Nl(e,t,r){Ll(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=new Dl({...t,analyticsAction:r}),s=await tl(e,o),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}async function zl(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=e.extra,{description:a}=await Bs().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),o=new Dl({...e,analyticsAction:Bs()}),u=await $l(t,a),s=await o.fetchFromAPI(u,{origin:"mainSearch"});return await o.process(s)}async function Yl(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=e.extra,{description:o}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=new Dl({...e,analyticsAction:t}),s=await _l(r,o),c=await u.fetchFromAPI(s,{origin:"facetValues"});return await u.process(c)}async function Bl(e,t,r){Ll(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=await tl(e,o),s=new Dl({...t,analyticsAction:r}),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}var Hl=class{constructor(e,t=(e=>{this.dispatch(wc({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=el(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,o=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:o,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return pl(e.response)?(this.dispatch(Hs(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o,queryCorrection:u}=r;if(!n||!i)return null;let s=a.length===0&&o&&o.length!==0,c=!kr(u)&&!kr(u.correctedQuery);if(!s&&!c)return null;let l=s?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(ki(jl(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return pl(i.response)?(this.dispatch(Hs(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ki(jl(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(Ml("")),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return pl(i.response)?(this.dispatch(Hs(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ki(jl(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n})}processSuccessResponse(e){return this.dispatch(ki(jl(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return gl(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=ml(),n=await this.fetchFromAPI(await tl(t,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(vl(e)),n}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(El({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await tl(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};fr("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Jr(e,{q:new Pr,enableQuerySyntax:new Er,clearFilters:new Er}),e.clearFilters&&(r(Pn()),r(Un())),r(ac({allow:!0})),r(wc({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(vc(1))}));var Wl=fr("search/executeSearch",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Bl(r,t,e.legacy);Xl(r);let n=ed(e.next),i=await tl(r,n),a=new Hl({...t,analyticsAction:n}),o=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(o)}));fr("search/fetchPage",(async(e,t)=>{let r=t.getState();if(Xl(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Nl(r,t,e.legacy);let n=new Hl({...t,analyticsAction:e.next}),i=await tl(r,e.next),a=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(a)}));fr("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return zl(t,r);let n=Fs("pagerScrolling",t.getState),i=new Hl({...t,analyticsAction:n}),a=await Jl(r,n),o=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(o)}));var Gl=fr("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Bl(r,t,e.legacy);let n=ed(e.next),i=new Hl({...t,analyticsAction:n}),a=await Kl(r,n),o=await i.fetchFromAPI(a,{origin:"facetValues"});return await i.process(o)}));fr("search/fetchInstantResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Ql(e,t);Jr(e,{id:Nr,q:Nr,maxResultsPerQuery:new jr({required:!0,min:1}),cacheTimeout:new jr});let{q:n,maxResultsPerQuery:i}=e,a=ed(sc()),o=await Zl(r,n,i,a),u=new Hl({...t,analyticsAction:a},(r=>{t.dispatch(dc({q:r,id:e.id}))})),s=await u.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),c=await u.process(s);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}));var Jl=async(e,t)=>{let r=await tl(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Zl=async(e,t,r,n)=>{let i=await Sc(e,n);return Jc({...i,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Kl=async(e,t)=>{let r=await tl(e,t);return r.request.numberOfResults=0,r},Xl=e=>{e.configuration.analytics.enabled&&au.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},ed=e=>({actionCause:e.actionCause,type:e.actionCause});function td(e,t){let{facetId:r,criterion:n}=t,i=e[r]?.request;i&&(i.sortCriteria=n)}function rd(e){e&&(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function nd(e,t){e&&(e.numberOfValues=t)}nr(rs(),(e=>{e.addCase(pi,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=ts(ud(t.payload)))})).addCase(ji.fulfilled,((e,t)=>{if(t.payload&&Object.keys(t.payload.facetSet).length!==0)return t.payload.facetSet})).addCase(ic,((e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach((t=>{let{request:i}=e[t],a=r[t]||[],o=n[t]||[],u=a.length+o.length,s=i.currentValues.filter((e=>!a.includes(e.value)&&!o.includes(e.value)));i.currentValues=[...a.map(cd),...o.map(ld),...s.map(dd)],i.preventAutoSelect=u>0,i.numberOfValues=Math.max(u,i.numberOfValues)}))})).addCase(vi,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i)return;i.preventAutoSelect=!0;let a=i.currentValues.find((e=>e.value===n.value));if(!a){id(i,n);return}let o=a.state==="selected";a.state=o?"idle":"selected",i.freezeCurrentValues=!0})).addCase(yi,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i)return;i.preventAutoSelect=!0;let a=i.currentValues.find((e=>e.value===n.value));if(!a){id(i,n);return}let o=a.state==="excluded";a.state=o?"idle":"excluded",i.freezeCurrentValues=!0})).addCase(Ii,((e,t)=>{let{facetId:r,freezeCurrentValues:n}=t.payload,i=e[r]?.request;i&&(i.freezeCurrentValues=n)})).addCase(mi,((e,t)=>{rd(e[t.payload]?.request)})).addCase(Pn,(e=>{Object.values(e).filter((e=>e.hasBreadcrumbs)).forEach((({request:e})=>rd(e)))})).addCase(Un,(e=>{Object.values(e).filter((e=>!e.hasBreadcrumbs)).forEach((({request:e})=>rd(e)))})).addCase(ac,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(wi,((e,t)=>{td(e,t.payload)})).addCase(bi,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload;nd(e[r]?.request,n)})).addCase(Si,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,i=e[r]?.request;i&&(i.isFieldExpanded=n)})).addCase(Wl.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>ad(e[t.facetId]?.request,t)))})).addCase(Ks.fulfilled,((e,t)=>{(t.payload.response?.facets?.results||[]).forEach((t=>ad(e[t.facetId]?.request,t)))})).addCase(Gl.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>ad(e[t.facetId]?.request,t)))})).addCase(ei,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i)return;let{rawValue:a}=n,{currentValues:o}=i,u=o.find((e=>e.value===a));if(u){u.state="selected";return}let s=cd(a);id(i,s),i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(ti,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i)return;let{rawValue:a}=n,{currentValues:o}=i,u=o.find((e=>e.value===a));if(u){u.state="excluded";return}let s=ld(a);id(i,s),i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(xi,((e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];rd(r)}))}));function id(e,t){let{currentValues:r}=e,n=r.findIndex((e=>e.state==="idle")),i=n===-1?r.length:n,a=r.slice(0,i),o=r.slice(i+1);e.currentValues=[...a,t,...o],e.numberOfValues=e.currentValues.length}function ad(e,t){e&&(e.currentValues=t.values.map(sd),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var od={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function ud(e){return{...od,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function sd(e){let{value:t,state:r}=e;return{value:t,state:r}}function cd(e){return{value:e,state:"selected"}}function ld(e){return{value:e,state:"excluded"}}function dd(e){return{...e,state:"idle"}}function fd(e){let t=hd(e.start,e),r=hd(e.end,e),n=e.endInclusive??!1,i=e.state??"idle";return{start:t,end:r,endInclusive:n,state:i}}function hd(e,t){let{dateFormat:r}=t;return Qc(e)?(Pc(e),Uc(e)):typeof e=="string"&&Lc(e)?(Pc(e),e):(Mc(e,r),Rc(jc(e,r)))}var gd=Nt("rangeFacet/updateSortCriterion",(e=>Jr(e,{facetId:$n,criterion:new xr({required:!0})})));var pd={state:Nr,start:new jr({required:!0}),end:new jr({required:!0}),endInclusive:new Er({required:!0}),numberOfResults:new jr({required:!0,min:0})},vd={start:Nr,end:Nr,endInclusive:new Er({required:!0}),state:Nr,numberOfResults:new jr({required:!0,min:0})},yd=e=>({facetId:$n,selection:typeof e.start=="string"?new $r({values:vd}):new $r({values:pd})});var md={start:Nr,end:Nr,endInclusive:new Er({required:!0}),state:Nr},wd={facetId:$n,field:Nr,currentValues:new _r({required:!1,each:new $r({values:md})}),generateAutomaticRanges:new Er({required:!0}),filterFacetCount:new Er({required:!1}),injectionDepth:new jr({required:!1,min:0}),numberOfValues:new jr({required:!1,min:1}),sortCriteria:new xr({required:!1}),rangeAlgorithm:new xr({required:!1})};function bd(e){return Lc(e)?Vc(e):e}function Sd(e){e.currentValues&&e.currentValues.forEach((e=>{let{start:t,end:r}=fd(e);if(jc(bd(t)).isAfter(jc(bd(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var Id=Nt("dateFacet/register",(e=>{try{return Gr(e,wd),Sd(e),{payload:e,error:null}}catch(t){return{payload:e,error:Wr(t)}}})),qd=Nt("dateFacet/toggleSelectValue",(e=>Jr(e,{facetId:$n,selection:new $r({values:vd})}))),Od=Nt("dateFacet/toggleExcludeValue",(e=>Jr(e,{facetId:$n,selection:new $r({values:vd})}))),xd=Nt("dateFacet/updateFacetValues",(e=>{try{return Gr(e,{facetId:$n,values:new _r({each:new $r({values:vd})})}),Sd({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Wr(t)}}})),Cd=gd,Ad=mi;var kd={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function jd(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let i=$d(r);r.numberOfValues=i,e[n]=t}function Rd(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=$d(n))}function Md(e,t,r){let n=e[t]?.request;if(!n)return;let i=Pd(n.currentValues,r);if(!i)return;let a=i.state==="selected";i.state=a?"idle":"selected",n.preventAutoSelect=!0}function Ed(e,t,r){let n=e[t]?.request;if(!n)return;let i=Pd(n.currentValues,r);if(!i)return;let a=i.state==="excluded";i.state=a?"idle":"excluded",n.preventAutoSelect=!0}function Dd(e,t){let r=e[t]?.request;r&&r.currentValues.forEach((e=>e.state="idle"))}function Fd(e,t){Object.entries(e).forEach((([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!Pd(n,e);return e.state=t?"selected":"idle",e}));let i=n.filter((e=>!Pd(r.currentValues,e))),a=r.currentValues;a.push(...i),r.numberOfValues=Math.max(r.numberOfValues,a.length)}))}function Td(e,t,r){t.forEach((t=>{let n=t.facetId,i=e[n]?.request;if(!i)return;let a=r(t.values);i.currentValues=a,i.preventAutoSelect=!1}))}function Pd(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function Ud(e,t){let{start:r,end:n,endInclusive:i}=t;return e.find((e=>e.start===r&&e.end===n&&e.endInclusive===i))}function $d(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}nr(Ku(),(e=>{e.addCase(Id,((e,t)=>{let{payload:r}=t,n=Vd(r);jd(e,Zu(n))})).addCase(ji.fulfilled,((e,t)=>t.payload?.dateFacetSet??e)).addCase(ic,((e,t)=>{let r=t.payload.df||{};Fd(e,r)})).addCase(qd,((e,t)=>{let{facetId:r,selection:n}=t.payload;Md(e,r,n)})).addCase(Od,((e,t)=>{let{facetId:r,selection:n}=t.payload;Ed(e,r,n)})).addCase(xd,((e,t)=>{let{facetId:r,values:n}=t.payload;Rd(e,r,n)})).addCase(Ad,((e,t)=>{Dd(e,t.payload)})).addCase(Pn,(e=>{Object.keys(e).forEach((t=>{Dd(e,t)}))})).addCase(Cd,((e,t)=>{td(e,t.payload)})).addCase(Wl.fulfilled,((e,t)=>{let r=t.payload.response.facets;Td(e,r,_d)})).addCase(Ks.fulfilled,((e,t)=>{let r=t.payload.response?.facets?.results||[];Td(e,r,_d)})).addCase(xi,((e,t)=>{Dd(e,t.payload)}))}));function Vd(e){return{...kd,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function _d(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var Ld={state:Nr,start:new jr({required:!0}),end:new jr({required:!0}),endInclusive:new Er({required:!0})},Qd={facetId:$n,field:Nr,currentValues:new _r({required:!1,each:new $r({values:Ld})}),generateAutomaticRanges:new Er({required:!0}),filterFacetCount:new Er({required:!1}),injectionDepth:new jr({required:!1,min:0}),numberOfValues:new jr({required:!1,min:1}),sortCriteria:new xr({required:!1}),rangeAlgorithm:new xr({required:!1})};function Nd(e){e.currentValues&&e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var zd=Nt("numericFacet/register",(e=>{try{return Jr(e,Qd),Nd(e),{payload:e,error:null}}catch(t){return{payload:e,error:Wr(t)}}})),Yd=Nt("numericFacet/toggleSelectValue",(e=>Jr(e,{facetId:$n,selection:new $r({values:pd})}))),Bd=Nt("numericFacet/toggleExcludeValue",(e=>Jr(e,{facetId:$n,selection:new $r({values:pd})}))),Hd=Nt("numericFacet/updateFacetValues",(e=>{try{return Gr(e,{facetId:$n,values:new _r({each:new $r({values:pd})})}),Nd({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Wr(t)}}})),Wd=gd,Gd=mi;nr(es(),(e=>{e.addCase(zd,((e,t)=>{let{payload:r}=t,n=Jd(r);jd(e,Xu(n))})).addCase(ji.fulfilled,((e,t)=>t.payload?.numericFacetSet??e)).addCase(ic,((e,t)=>{let r=t.payload.nf||{};Fd(e,r)})).addCase(Yd,((e,t)=>{let{facetId:r,selection:n}=t.payload;Md(e,r,n)})).addCase(Bd,((e,t)=>{let{facetId:r,selection:n}=t.payload;Ed(e,r,n)})).addCase(Hd,((e,t)=>{let{facetId:r,values:n}=t.payload;Rd(e,r,n)})).addCase(Gd,((e,t)=>{Dd(e,t.payload)})).addCase(Pn,(e=>{Object.keys(e).forEach((t=>{Dd(e,t)}))})).addCase(Wd,((e,t)=>{td(e,t.payload)})).addCase(Wl.fulfilled,((e,t)=>{let r=t.payload.response.facets;Td(e,r,Zd)})).addCase(Ks.fulfilled,((e,t)=>{let r=t.payload.response?.facets?.results||[];Td(e,r,Zd)})).addCase(xi,((e,t)=>{Dd(e,t.payload)}))}));function Jd(e){return{...kd,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Zd(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var Kd=new $r({options:{required:!1},values:{by:new Qr({enum:Ws,required:!0}),fields:new _r({each:new $r({values:{field:new Pr({required:!0}),direction:new Qr({enum:Gs}),displayName:new Pr}})})}});var Xd=async e=>({...await ef(e),facets:rf(e),...e.commerceSort&&{sort:nf(e.commerceSort.appliedSort)}}),ef=async(e,t)=>{let{view:r,user:n,...i}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...i,clientId:await iu(e.configuration.analytics),context:{user:n,view:r,cart:yn(e.cart)},...tf(e,t)}},tf=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function rf(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map((t=>e.commerceFacetSet[t].request)).filter((e=>e.values.length>0))}function nf(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map((({name:e,direction:t})=>({field:e,direction:t})))}}var af=Tt((e=>e.commercePagination?.principal.perPage||0),(e=>e)),of=Tt(((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0),(e=>e)),uf=Tt((e=>e.commercePagination?.principal.totalEntries||0),(e=>e)),sf=Tt(((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0),(e=>e)),cf=Tt((e=>e.commercePagination?.principal.page||0),(e=>e));Tt(((e,t)=>e.commercePagination?.recommendations[t]?.page||0),(e=>e));var lf=Tt((e=>e.productListing.responseId),(e=>e)),df=Tt((e=>e.productListing.requestId),(e=>e)),ff=Tt((e=>e.productListing?.products.length||0),(e=>e)),hf=Tt((e=>({total:uf(e),current:ff(e)})),(({current:e,total:t})=>e<t)),gf=Tt((e=>e.productListing?.isLoading),(e=>kr(e)?!1:e)),pf=Tt((e=>e.productListing?.error),(e=>e));var vf=fr("commerce/productListing/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,u=await o.getProductListing(await Xd(a));return de(u)?(r(Hs(u.error)),n(u.error)):{response:u.success}})),yf=fr("commerce/productListing/fetchMoreProducts",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t();if(!hf(a))return null;let{apiClient:o}=i,u=af(a),s=ff(a)/u,c=await o.getProductListing({...await Xd(a),page:s});return de(c)?(r(Hs(c.error)),n(c.error)):{response:c.success}}));var mf=Nt("query/updateQuery",(e=>Jr(e,{query:new Pr})));var wf=Tt((e=>e.commerceSearch.responseId),(e=>e)),bf=Tt((e=>e.commerceSearch.requestId),(e=>e)),Sf=Tt((e=>e.commerceSearch?.products.length||0),(e=>e)),If=Tt((e=>({total:uf(e),current:Sf(e)})),(({current:e,total:t})=>e<t)),qf=Tt((e=>e.commerceSearch?.isLoading),(e=>kr(e)?!1:e)),Of=Tt((e=>e.commerceSearch?.error),(e=>e)),xf=Tt((e=>e.commerceQuery?.query),(e=>e??"")),Cf=Tt((e=>e.commerceSearch?.queryExecuted),(e=>e)),Af=(e,t)=>t.queryCorrection?.correctedQuery!==void 0?t.queryCorrection?.correctedQuery:xf(e);var kf=fr("commerce/search/executeSearch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,u=xf(a),s=await o.search({...await Xd(a),query:u});return de(s)?(r(Hs(s.error)),n(s.error)):{response:s.success,originalQuery:u,queryExecuted:Af(a,s.success)}})),jf=fr("commerce/search/fetchMoreProducts",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t();if(!If(a))return null;let{apiClient:o}=i,u=af(a),s=Sf(a)/u,c=xf(a),l=await o.search({...await Xd(a),query:c,page:s});return de(l)?(r(Hs(l.error)),n(l.error)):{response:l.success,originalQuery:c,queryExecuted:Af(a,l.success)}})),Rf=fr("commerce/search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Jr(e,{query:new Pr,clearFilters:new Er}),e.clearFilters&&(r(Pn()),r(Un())),r(ac({allow:!0})),r(mf({query:e.query})),r(vc(1))})),Mf=fr("commerce/search/fetchInstantProducts",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{q:o}=e,{apiClient:u}=i,s=await u.productSuggestions({...await Xd(a),query:o});if(de(s))return r(Hs(s.error)),n(s.error);let c=s.success.products.slice(0,5);return{response:{...s.success,products:c}}}));var Ef=async(e,t,r)=>{let n=`*${t.categoryFacetSearchSet[e].options.query}*`,i=t.commerceFacetSet[e]?.request,a=i&&Df(i)?i&&Ff(i):[],o=a.length?[a]:[],u=t.commerceQuery?.query,{url:s,accessToken:c,organizationId:l,trackingId:d,language:f,country:h,currency:g,clientId:p,context:v,...y}=await Xd(t);return{url:s,accessToken:c,organizationId:l,facetId:e,facetQuery:n,ignorePaths:o,trackingId:d,language:f,country:h,currency:g,clientId:p,context:v,...!r&&{...y,query:u}}};function Df(e){return e.type==="hierarchical"}var Ff=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Tf=async(e,t,r)=>{let n=`*${t.facetSearchSet[e].options.query}*`,i=t.commerceQuery?.query;i===void 0&&(i="");let{url:a,accessToken:o,organizationId:u,trackingId:s,language:c,country:l,currency:d,clientId:f,context:h,...g}=await Xd(t);return{url:a,accessToken:o,organizationId:u,facetId:e,facetQuery:n,trackingId:s,language:c,country:l,currency:d,clientId:f,context:h,...!r&&{...g,query:i}}};var Pf=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:i}})=>{let a=r();i(t,Nr);let o=Vf(a,t)||_f(a,t)?Tf(t,a,e):Ef(t,a,e),u=await n.facetSearch(await o);return{facetId:t,response:u}},Uf=fr("commerce/facetSearch/executeSearch",Pf(!1)),$f=fr("commerce/facetSearch/facetFieldSuggest",Pf(!1)),Vf=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,_f=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some((e=>e.facetId===t&&e.type==="regular")):!1;function Lf(e,t){let{facetId:r,numberOfValues:n}=t,i=e[r]?.request.values[0];if(i){for(;i.children.length&&i?.state!=="selected";)i=i.children[0];i.retrieveCount=n}}function Qf(){return{}}var Nf=nr(Qf(),(e=>{e.addCase(vf.fulfilled,Wf).addCase(kf.fulfilled,Wf).addCase($f.fulfilled,Gf).addCase(vi,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!zf(i))return;i.preventAutoSelect=!0;let a=i.values.find((e=>e.value===n.value));if(!a){nh(i,n);return}Xf(a,"select")})).addCase(Yd,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!Yf(i))return;i.preventAutoSelect=!0;let a=Ud(i.values,n);if(!a){nh(i,n);return}if(Xf(a,"select"),i.interval==="continuous"&&a.state==="idle"){i.values=[];return}})).addCase(qd,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!Bf(i))return;i.preventAutoSelect=!0;let a=Ud(i.values,n);if(!a){nh(i,n);return}Xf(a,"select")})).addCase(zn,((e,t)=>{let{facetId:r,selection:n,retrieveCount:i}=t.payload,a=e[r]?.request;if(!a||!Hf(a))return;let{path:o}=n,u=o.slice(0,o.length-1),s=Zf(a,u,i);if(s.length){let e=s[0];e.state="selected",e.children=[];return}let c=Kf(n.value,i);c.state="selected",s.push(c),a.numberOfValues=1})).addCase(yi,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!zf(i))return;i.preventAutoSelect=!0;let a=i.values.find((e=>e.value===n.value));if(!a){nh(i,n);return}Xf(a,"exclude")})).addCase(Bd,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!Yf(i))return;i.preventAutoSelect=!0;let a=Ud(i.values,n);if(!a){nh(i,n);return}if(Xf(a,"exclude"),i.interval==="continuous"&&a.state==="idle"){i.values=[];return}})).addCase(Od,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!Bf(i))return;i.preventAutoSelect=!0;let a=Ud(i.values,n);if(!a){nh(i,n);return}Xf(a,"exclude")})).addCase(Bn,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload,i=e[r]?.request;if(i){if(!i.values.length)return nd(i,n);Lf(e,t.payload)}})).addCase(ei,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i||!zf(i))return;let{rawValue:a}=n;i.preventAutoSelect=!0;let o=i.values.find((e=>e.value===a));if(!o){nh(i,{state:"selected",value:a});return}Xf(o,"select")})).addCase(ti,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i||i.type!=="regular"&&i.type!=="hierarchical")return;let{rawValue:a}=n;i.preventAutoSelect=!0;let o=i.values.find((e=>e.value===a));if(!o){nh(i,{state:"excluded",value:a});return}Xf(o,"exclude")})).addCase(Gn,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r];if(!i||!Hf(i?.request))return;let a=[...n.path,n.rawValue];oh(i.request,a,i.request.initialNumberOfValues)})).addCase(Hd,((e,t)=>{let{facetId:r,values:n}=t.payload,i=e[r]?.request;!i||!Yf(i)||(i.values=Zd(n),i.numberOfValues=n.length)})).addCase(bi,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload,i=e[r]?.request;i&&(i.numberOfValues=n)})).addCase(Si,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,i=e[r]?.request;i&&(i.isFieldExpanded=n)})).addCase(ac,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(mi,((e,t)=>{let r=t.payload,n=e[r]?.request;n&&Jf(n)})).addCase(Pn,ih).addCase(Mn,ah).addCase(Dn,ah).addCase(En,ah)}));function zf(e){return e.type==="regular"}function Yf(e){return e.type==="numericalRange"}function Bf(e){return e.type==="dateRange"}function Hf(e){return e.type==="hierarchical"}function Wf(e,t){let r=new Set(Object.keys(e)),n=t.payload.response.facets;for(let t of n)eh(e,t,r);for(let t of r)delete e[t]}function Gf(e,t){let r=t.payload.facetId,n=e[r]?.request;n||(e[r]={request:{}},n=e[r].request,n.initialNumberOfValues=10)}function Jf(e){e.type==="hierarchical"?(e.numberOfValues=e.initialNumberOfValues,e.values=[],e.preventAutoSelect=!0):e.values.forEach((e=>e.state="idle"))}function Zf(e,t,r){let n=e.values;for(let e of t){let t=n[0];(!t||e!==t.value)&&(t=Kf(e,r),n.length=0,n.push(t)),t.state="idle",n=t.children}return n}function Kf(e,t){return{children:[],state:"idle",value:e,retrieveCount:t}}function Xf(e,t){switch(e.state){case"idle":e.state=t==="exclude"?"excluded":"selected";break;case"excluded":e.state=t==="exclude"?"idle":"selected";break;case"selected":e.state=t==="exclude"?"excluded":"idle";break}}function eh(e,t,r){let n=t.facetId??t.field,i=e[n]?.request;i?r.delete(n):(e[n]={request:{}},i=e[n].request,i.initialNumberOfValues=t.numberOfValues),i.facetId=n,i.displayName=t.displayName,i.numberOfValues=t.numberOfValues,i.field=t.field,i.type=t.type,i.values=th(t)??[],i.preventAutoSelect=!1,t.type==="hierarchical"&&Hf(i)?i.delimitingCharacter=t.delimitingCharacter:t.type==="numericalRange"&&(i.interval=t.interval,t.domain&&(i.domain={min:t.domain.min,max:t.domain.max,increment:t.domain.increment}))}function th(e){switch(e.type){case"numericalRange":return Zd(e.values);case"dateRange":return _d(e.values);case"hierarchical":return e.values.every((e=>e.state==="idle"&&e.children.length===0))?[]:e.values.map(rh);case"regular":return e.values.map(sd);default:return}}function rh(e){let t=e.children.every((e=>e.state==="idle"&&e.children.length===0))?[]:e.children.map(rh),{state:r,value:n}=e;return{children:t,state:r,value:n,retrieveCount:Qn}}function nh(e,t){let{values:r}=e,n=r.findIndex((e=>e.state==="idle")),i=n===-1?r.length:n,a=r.slice(0,i),o=r.slice(i+1);e.values=[...a,t,...o],e.numberOfValues=e.values.length}function ih(e){Object.values(e).forEach((e=>{e.request.values.forEach((e=>e.state="idle"))}))}function ah(e){Object.values(e).forEach((e=>{e.request.values=[]}))}function oh(e,t,r){e.values=uh(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function uh(e,t){if(!e.length)return[];let r=Kf(e[0],t),n=r;for(let r of e.splice(1)){let e=Kf(r,t);n.children.push(e),n=e}return n.state="selected",[r]}var sh={slotId:Nr,productId:new Pr({required:!1,emptyAllowed:!1})},ch=new Or(sh);var lh=Tt(((e,t)=>e.recommendations&&e.recommendations[t]?.products.length||0),(e=>e)),dh=Tt(((e,t)=>({total:sf(e,t),current:lh(e,t)})),(({current:e,total:t})=>e<t));Tt(((e,t)=>e.recommendations?e.recommendations[t]?.isLoading:!1),(e=>kr(e)?!1:e));var fh=async(e,t,r)=>{let n=await ef(t,e);return{...n,context:{...n.context,...r?{product:{productId:r}}:{},purchased:mn(t.cart)},slotId:e}},hh=fr("commerce/recommendations/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let{slotId:i,productId:a}=e,o=await fh(i,t(),a),u=await n.getRecommendations(o);return de(u)?r(u.error):{response:u.success}})),gh=fr("commerce/recommendations/fetchMore",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=e.slotId,a=t();if(dh(a,i))return null;let o=of(a,i),u=lh(a,i)/o,s={...await fh(i,a),page:u},c=await n.getRecommendations(s);return de(c)?r(c.error):{response:c.success}})),ph=Nt("commerce/recommendations/registerSlot",(e=>Jr(e,sh)));var vh={slotId:Br},yh={...vh,pageSize:new jr({required:!0,min:0})},mh=Nt("commerce/pagination/setPageSize",(e=>Jr(e,yh))),wh={...vh,page:new jr({required:!0,min:0})},bh=Nt("commerce/pagination/selectPage",(e=>Jr(e,wh))),Sh=Nt("commerce/pagination/nextPage",(e=>Jr(e,vh))),Ih=Nt("commerce/pagination/previousPage",(e=>Jr(e,vh))),qh=Nt("commerce/pagination/registerRecommendationsSlot",(e=>Jr(e,{slotId:Nr})));function Oh(){return{principal:xh(),recommendations:{}}}function xh(){return{page:0,totalEntries:0,totalPages:0}}var Ch=nr(Oh(),(e=>{e.addCase(Sh,((e,t)=>{let r=Ah(e,t.payload?.slotId);r&&r.page<r.totalPages-1&&++r.page})).addCase(Ih,((e,t)=>{let r=Ah(e,t.payload?.slotId);r&&r.page>0&&--r.page})).addCase(bh,((e,t)=>{let r=Ah(e,t.payload.slotId);r&&t.payload.page>=0&&t.payload.page<r.totalPages&&(r.page=t.payload.page)})).addCase(mh,((e,t)=>{let r=Ah(e,t.payload.slotId);r&&(r.perPage=t.payload.pageSize)})).addCase(vf.fulfilled,((e,t)=>{e.principal=t.payload.response.pagination})).addCase(kf.fulfilled,((e,t)=>{e.principal=t.payload.response.pagination})).addCase(hh.fulfilled,((e,t)=>{e.recommendations[t.meta.arg.slotId]=t.payload.response.pagination})).addCase(qh,((e,t)=>{let r=t.payload.slotId;r in e||(e.recommendations[r]=xh())})).addCase(mi,kh).addCase(vi,kh).addCase(yi,kh).addCase(Yd,kh).addCase(Bd,kh).addCase(Mn,kh).addCase(Dn,kh).addCase(En,kh)}));function Ah(e,t){return t?e.recommendations[t]:e.principal}function kh(e){e.principal.page=xh().page}var jh=()=>({error:null,isLoading:!1,requestId:"",responseId:"",facets:[],products:[]});var Rh=nr(jh(),(e=>{e.addCase(vf.rejected,((e,t)=>{Mh(e,t.payload)})).addCase(yf.rejected,((e,t)=>{Mh(e,t.payload)})).addCase(vf.fulfilled,((e,t)=>{Eh(e,t.payload.response),e.products=t.payload.response.products})).addCase(yf.fulfilled,((e,t)=>{t.payload&&(Eh(e,t.payload.response),e.products=e.products.concat(t.payload.response.products))})).addCase(vf.pending,((e,t)=>{Dh(e,t.meta.requestId)})).addCase(yf.pending,((e,t)=>{Dh(e,t.meta.requestId)}))}));function Mh(e,t){e.error=t||null,e.isLoading=!1}function Eh(e,t){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1}function Dh(e,t){e.isLoading=!0,e.requestId=t}var Fh={q:new Pr},Th={};var Ph=Nt("commerce/searchParameters/restore",(e=>Jr(e,Fh))),Uh=Nt("commerce/productListingParameters/restore",(e=>Jr(e,Th)));var $h=()=>({query:""});var Vh=nr($h(),(e=>{e.addCase(mf,((e,t)=>({...e,...t.payload}))).addCase(Ph,((e,t)=>{e.query=t.payload.q??""}))}));var _h=()=>({}),Lh=()=>({headline:"",error:null,isLoading:!1,responseId:"",products:[]});var Qh=nr(_h(),(e=>{e.addCase(ph,((e,t)=>{let r=t.payload.slotId;r in e||(e[r]=Nh())})).addCase(hh.rejected,((e,t)=>{zh(e,t.meta.arg.slotId,t.payload)})).addCase(gh.rejected,((e,t)=>{zh(e,t.meta.arg.slotId,t.payload)})).addCase(hh.fulfilled,((e,t)=>{let r=t.meta.arg.slotId,n=t.payload.response;Yh(e,r,n);let i=e[r];i&&(i.products=n.products)})).addCase(gh.fulfilled,((e,t)=>{if(!t.payload)return;let r=t.meta.arg.slotId,n=t.payload.response;Yh(e,r,n);let i=e[r];i&&(i.products=i.products.concat(n.products))})).addCase(hh.pending,((e,t)=>{Bh(e,t.meta.arg.slotId)})).addCase(gh.pending,((e,t)=>{Bh(e,t.meta.arg.slotId)}))}));function Nh(e){return{...Lh(),...e}}function zh(e,t,r){let n=e[t];n&&(n.error=r??null,n.isLoading=!1)}function Yh(e,t,r){let n=e[t];n&&(n.error=null,n.headline=r.headline,n.responseId=r.responseId,n.isLoading=!1)}function Bh(e,t){let r=e[t];r&&(r.isLoading=!0)}var Hh=()=>({error:null,isLoading:!1,requestId:"",responseId:"",products:[],facets:[],queryExecuted:""});var Wh=nr(Hh(),(e=>{e.addCase(kf.rejected,((e,t)=>{Gh(e,t.payload)})).addCase(jf.rejected,((e,t)=>{Gh(e,t.payload)})).addCase(kf.fulfilled,((e,t)=>{Zh(e,t.payload.response,t.payload.queryExecuted),e.products=t.payload.response.products})).addCase(jf.fulfilled,((e,t)=>{t.payload&&(Zh(e,t.payload.response,t.payload.queryExecuted),e.products=e.products.concat(t.payload.response.products))})).addCase(kf.pending,((e,t)=>{Jh(e,t.meta.requestId)})).addCase(jf.pending,((e,t)=>{Jh(e,t.meta.requestId)}))}));function Gh(e,t){e.error=t||null,e.isLoading=!1}function Jh(e,t){e.isLoading=!0,e.requestId=t}function Zh(e,t,r){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1,e.queryExecuted=r??""}var Kh=Nt("commerce/sort/apply",(e=>Jr(e,{by:new Qr({enum:Ws,required:!0})})));function Xh(){return{appliedSort:Js(),availableSorts:[Js()]}}var eg=e=>e.sortCriteria==="relevance"?Js():{by:"fields",fields:(e.fields||[]).map((({field:e,direction:t,displayName:r})=>({name:e,direction:t,displayName:r})))},tg=nr(Xh(),(e=>{e.addCase(Kh,((e,t)=>{e.appliedSort=t.payload})).addCase(vf.fulfilled,rg).addCase(kf.fulfilled,rg).addCase(Mn,Xh).addCase(Dn,Xh).addCase(En,Xh)}));function rg(e,t){let r=t.payload.response;e.appliedSort=eg(r.sort.appliedSort),e.availableSorts=r.sort.availableSorts.map(eg)}function ng(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function ig(e,t){let r=[],n=[],i=[],a=[];return t.forEach((e=>{switch(e.type){case"redirect":r.push(e.content);break;case"query":n.push(e.content);break;case"execute":i.push({functionName:e.content.name,params:e.content.params});break;case"notify":a.push(e.content);break}})),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=i,e.notifications=a,e}function ag(e,t){return e.queryModification={...t,queryToIgnore:""},e}function og(e,t){return e.queryModification.queryToIgnore=t,e}var ug=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var sg=Nt("commerce/trigger/query/ignore",(e=>Jr(e,new Pr({emptyAllowed:!0,required:!0})))),cg=Nt("commerce/trigger/query/modification",(e=>Jr(e,new $r({values:{originalQuery:zr,modification:zr}}))));var lg=nr(ug(),(e=>e.addCase(kf.pending,ng).addCase(kf.fulfilled,((e,t)=>ig(e,t.payload.response.triggers))).addCase(cg,((e,t)=>ag(e,t.payload))).addCase(sg,((e,t)=>og(e,t.payload)))));var dg=nr(Ol(),(e=>{e.addCase(Wl.fulfilled,fg).addCase(vf.fulfilled,fg).addCase(kf.fulfilled,fg).addCase(ji.fulfilled,((e,t)=>t.payload?.facetOrder??e))}));function fg(e,t){return t.payload.response.facets.map((e=>e.facetId))}var hg={id:Nr},gg=Nt("querySuggest/register",(e=>Jr(e,{...hg,count:new jr({min:0})}))),pg=Nt("querySuggest/unregister",(e=>Jr(e,hg))),vg=Nt("querySuggest/selectSuggestion",(e=>Jr(e,{...hg,expression:Yr}))),yg=Nt("querySuggest/clear",(e=>Jr(e,hg))),mg=fr("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i}})=>{i(e,hg);let a=e.id,o=await wg(a,t()),u=await n.querySuggest(o);return pl(u)?r(u.error):{id:a,q:o.q,...u.success}})),wg=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?au.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await iu(t.configuration.analytics),...t.configuration.analytics.enabled&&await bc(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var bg=fr("commerce/querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i}})=>{i(e,hg);let a=t(),o=await Sg(e.id,a),u=await n.querySuggest(o);return de(u)?r(u.error):{id:e.id,query:o.query,...u.success}})),Sg=async(e,t)=>{let{view:r,user:n,...i}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...i,clientId:await iu(t.configuration.analytics),context:{user:n,view:r,cart:yn(t.cart)}}};function Ig(e,t,r){let{facetId:n}=t;if(e[n])return;let i=!1,a={...Dg,...t},o=r();e[n]={options:a,isLoading:i,response:o,initialNumberOfValues:a.numberOfValues,requestId:""}}function qg(e,t){let{facetId:r,...n}=t,i=e[r];i&&(i.options={...i.options,...n})}function Og(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function xg(e,t){let r=e[t];r&&(r.isLoading=!1)}function Cg(e,t,r){let{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=i)}function Ag(e,t,r){let{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in i&&(a.response=i.success))}function kg(e,t,r,n){let{facetId:i,response:a}=t,o=e[i];if(!o)Ig(e,{facetId:i},n),o=e[i];else if(o.requestId!==r)return;o.isLoading=!1,"success"in a&&(o.response=a.success)}function jg(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets)i.facetId in e||i.type!=="regular"||(e[i.facetId]={options:{...Dg,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Dg.numberOfValues,requestId:r})}function Rg(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets)i.facetId in e||i.type!=="hierarchical"||(e[i.facetId]={options:{...Dg,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Dg.numberOfValues,requestId:r})}function Mg(e,t,r){let{facetId:n}=t,i=e[n];i&&(i.requestId="",i.isLoading=!1,i.response=r(),i.options.numberOfValues=i.initialNumberOfValues,i.options.query=Dg.query)}function Eg(e,t){Object.keys(e).forEach((r=>Mg(e,{facetId:r},t)))}var Dg={captions:{},numberOfValues:10,query:""};var Fg=async(e,t,r)=>{let n=t.categoryFacetSearchSet[e].options,i=t.categoryFacetSet[e].request,{captions:a,query:o,numberOfValues:u}=n,{field:s,delimitingCharacter:c,basePath:l,filterFacetCount:d}=i,f=Tg(i),h=f.length?[f]:[],g=`*${o}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:a,numberOfValues:u,query:g,field:s,delimitingCharacter:c,ignorePaths:h,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await tl(t)).request}}},Tg=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Pg=async(e,t,r)=>{let{captions:n,query:i,numberOfValues:a}=t.facetSearchSet[e].options,{field:o,currentValues:u,filterFacetCount:s}=t.facetSet[e].request,c=u.filter((e=>e.state!=="idle")).map((e=>e.value)),l=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:a,query:l,field:o,ignoreValues:c,filterFacetCount:s,type:"specific",...r?{}:{searchContext:(await tl(t)).request}}};var Ug=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:i}})=>{let a=r(),o;i(t,Nr),_g(a,t)?o=await Pg(t,a,e):o=await Fg(t,a,e);let u=await n.facetSearch(o);return{facetId:t,response:u}},$g=fr("facetSearch/executeSearch",Ug(!1));fr("facetSearch/executeSearch",Ug(!0));var Vg=Nt("facetSearch/clearResults",(e=>Jr(e,{facetId:$n}))),_g=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;function Lg(){return{}}var Qg=nr(Lg(),(e=>{e.addCase(Jn,((e,t)=>{let r=t.payload;Ig(e,r,Ng)})).addCase(Xn,((e,t)=>{qg(e,t.payload)})).addCase(Uf.pending,((e,t)=>{let r=t.meta.arg;Og(e,r,t.meta.requestId)})).addCase($f.pending,((e,t)=>{let r=t.meta.arg;Og(e,r,t.meta.requestId)})).addCase($g.pending,((e,t)=>{let r=t.meta.arg;Og(e,r,t.meta.requestId)})).addCase(Uf.rejected,((e,t)=>{let r=t.meta.arg;xg(e,r)})).addCase($f.rejected,((e,t)=>{let r=t.meta.arg;xg(e,r)})).addCase($g.rejected,((e,t)=>{let r=t.meta.arg;xg(e,r)})).addCase(Uf.fulfilled,((e,t)=>{Ag(e,t.payload,t.meta.requestId)})).addCase($f.fulfilled,((e,t)=>{kg(e,t.payload,t.meta.requestId,Ng)})).addCase(bg.fulfilled,((e,t)=>{Rg(e,t.payload,t.meta.requestId,Ng)})).addCase($g.fulfilled,((e,t)=>{Cg(e,t.payload,t.meta.requestId)})).addCase(Vg,((e,{payload:{facetId:t}})=>{Mg(e,{facetId:t},Ng)})).addCase(vf.fulfilled,(e=>Eg(e,Ng))).addCase(kf.fulfilled,(e=>Eg(e,Ng))).addCase(Wl.fulfilled,(e=>{Eg(e,Ng)}))}));function Ng(){return{moreValuesAvailable:!1,values:[]}}function zg(){return{}}var Yg=nr(zg(),(e=>{e.addCase(Kn,((e,t)=>{let r=t.payload;Ig(e,r,Bg)})).addCase(Xn,((e,t)=>{qg(e,t.payload)})).addCase(Uf.pending,((e,t)=>{let r=t.meta.arg;Og(e,r,t.meta.requestId)})).addCase($f.pending,((e,t)=>{let r=t.meta.arg;Og(e,r,t.meta.requestId)})).addCase($g.pending,((e,t)=>{let r=t.meta.arg;Og(e,r,t.meta.requestId)})).addCase(Uf.rejected,((e,t)=>{let r=t.meta.arg;xg(e,r)})).addCase($f.rejected,((e,t)=>{let r=t.meta.arg;xg(e,r)})).addCase($g.rejected,((e,t)=>{let r=t.meta.arg;xg(e,r)})).addCase(Uf.fulfilled,((e,t)=>{Ag(e,t.payload,t.meta.requestId)})).addCase($f.fulfilled,((e,t)=>{kg(e,t.payload,t.meta.requestId,Bg)})).addCase(bg.fulfilled,((e,t)=>{jg(e,t.payload,t.meta.requestId,Bg)})).addCase($g.fulfilled,((e,t)=>{Cg(e,t.payload,t.meta.requestId)})).addCase(Vg,((e,{payload:t})=>{Mg(e,t,Bg)})).addCase(Wl.fulfilled,(e=>{Eg(e,Bg)})).addCase(vf.fulfilled,(e=>Eg(e,Bg))).addCase(kf.fulfilled,(e=>Eg(e,Bg))).addCase(Dn,(e=>Eg(e,Bg)))}));function Bg(){return{moreValuesAvailable:!1,values:[]}}var Hg=()=>zr,Wg=()=>Nr,Gg=Nt("configuration/updateBasicConfiguration",(e=>Jr(e,{accessToken:zr,organizationId:zr,platformUrl:zr}))),Jg=Nt("configuration/updateSearchConfiguration",(e=>Jr(e,{apiBaseUrl:zr,pipeline:new Pr({required:!1,emptyAllowed:!0}),searchHub:zr,timezone:zr,locale:zr,authenticationProviders:new _r({required:!1,each:Nr})}))),Zg={enabled:new Er({default:!0}),originContext:Hg(),originLevel2:Hg(),originLevel3:Hg(),apiBaseUrl:zr,nextApiBaseUrl:zr,runtimeEnvironment:new xr,anonymous:new Er({default:!1}),deviceId:zr,userDisplayName:zr,documentLocation:zr,trackingId:zr,analyticsMode:new Pr({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new $r({options:{required:!1},values:Uu.reduce(((e,t)=>(e[t]=Hr,e)),{})})},Kg=Nt("configuration/updateAnalyticsConfiguration",(e=>(L()&&(e.enabled=!1),Jr(e,Zg)))),Xg=Nt("configuration/analytics/disable"),ep=Nt("configuration/analytics/enable"),tp=Nt("configuration/analytics/originlevel2",(e=>Jr(e,{originLevel2:Wg()}))),rp=Nt("configuration/analytics/originlevel3",(e=>Jr(e,{originLevel3:Wg()})));var np=nr(Pu,(e=>e));function ip(){return typeof window<"u"&&typeof document<"u"}function ap(e){let t=e.payload?.analyticsAction;return op(e)&&!kr(t)}function op(e){return"type"in e}var up=e=>t=>r=>{let n;ap(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return op(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};var sp=l(k());Nt("tab/register",(e=>{let t=new $r({values:{id:Nr,expression:Yr}});return Jr(e,t)}));var cp=Nt("tab/updateActiveTab",(e=>Jr(e,Nr)));var lp=l(x()),dp=l(j()),fp=l(R());lp.default.extend(fp.default);lp.default.extend(dp.default);var hp="/rest/search/v2",gp="/rest/ua",pp=()=>({organizationId:"",accessToken:"",platformUrl:Z(),search:{apiBaseUrl:`${Z()}${hp}`,locale:"en-US",timezone:lp.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${K()}${gp}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});function vp(e,t){if(dl(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+gp;let r=fl(e,t);return r?J(t,r.environment).analytics:e}var yp=nr(pp(),(e=>e.addCase(Gg,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${hp}`,e.analytics.apiBaseUrl=vp(t.payload.platformUrl,e.organizationId))})).addCase(Jg,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(Kg,((e,t)=>{kr(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),kr(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),kr(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),kr(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),kr(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),kr(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),kr(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),kr(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),kr(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,sp.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),kr(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),kr(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),kr(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),kr(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),kr(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(Xg,(e=>{e.analytics.enabled=!1})).addCase(ep,(e=>{e.analytics.enabled=!0})).addCase(tp,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(rp,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(cp,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(ic,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}))));var mp=yp;function wp(e){return e.instantlyCallable}var bp=()=>e=>t=>e(wp(t)?t():t);var Sp=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},Ip=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var qp=()=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href}),Op=()=>({referrer:"default",userAgent:"Node.js",location:"default"});function xp(e,t){let r={...e},n,i=e=>(t,r)=>{let i=e(t,r);return n?n(i,r):i};return{get combinedReducer(){let e=Q(Object.entries(t).filter((([e])=>!(e in r))).map((([e,t])=>[e,()=>t])));return i(qe({...e,...r}))},containsAll(e){return Object.keys(e).every((e=>e in r))},add(e){Object.keys(e).filter((e=>!(e in r))).forEach((t=>r[t]=e[t]))},addCrossReducer(e){n=e}}}function Cp(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,u=(i=r.callback)!=null&&i,s=r.maxWait,c=Date.now(),l=[];function d(){if(s!==void 0){var e=Date.now()-c;if(e+t>=s)return s-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var s=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,c=Date.now(),!o){var n=e.apply(r,t);u&&u(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),s){var f=e.apply(r,t);return u&&u(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){a!==void 0&&clearTimeout(a),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}function Ap(e,t){let r=0,n=Cp((()=>r=0),500);return i=>a=>async o=>{if(!(typeof o=="function"))return a(o);let u=await a(o);if(!kp(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let s=await jp(t);i.dispatch(Gg({accessToken:s})),i.dispatch(o)}}function kp(e){return e?.error?.name===(new U).name}async function jp(e){try{return await e()}catch{return""}}function Rp({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return er({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:n}}).prepend(...r).concat(Ip(n.logger))})}var Mp={configuration:mp,version:np};function Ep(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},a={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(L())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!i.trackingId)throw new _p('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function Dp(e,t){let r=Fp(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:a}=e.configuration,o=a?.platform||e.configuration.platformUrl;$p(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Up(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Vp(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Gg({accessToken:n,organizationId:i,platformUrl:o}));let u=Ep(e.configuration,r.logger);return u&&r.dispatch(Kg(u)),r}function Fp(e,t){let{reducers:r}=e,n=xp({...Mp,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,a=e.navigatorContextProvider??ip()?qp:Op,o={...t,get relay(){return Vu(s.state)},get navigatorContext(){return a()}},u=Tp(e,o,n),s={addReducers(e){n.containsAll(e)||(n.add(e),u.replaceReducer(n.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(ep())},disableAnalytics(){u.dispatch(Xg())},get state(){return u.getState()},get relay(){return Vu(this.state)},get navigatorContext(){return a()},logger:i,store:u};return s}function Tp(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=Pp(e,t.logger);return Rp({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}function Pp(e,t){let{renewAccessToken:r}=e.configuration,n=Ap(t,r);return[bp,n,Sp(t),up].concat(e.middlewares||[])}function Up(e){return Cr(e.organizationEndpoints)}function $p(e){return!kr(e.platformUrl)||kr(e.organizationEndpoints?.platform)}function Vp(e){let{platform:t}=e.organizationEndpoints;if(Cr(t))return!1;let r=hl(t);return r&&r.organizationId!==e.organizationId}var _p=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}};var Lp=l(E());function Qp(e){return(0,Lp.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function Np(e,t){let r=zp(e),n=Gr,i=Yp(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function zp(e){let{analytics:t}=e,r=(e,t)=>t;return t?.analyticsClientMiddleware||r}function Yp(e){return e.preprocessRequest||he}var Bp={organizationId:Nr,accessToken:Nr,platformUrl:new Pr({required:!1,emptyAllowed:!1}),name:new Pr({required:!1,emptyAllowed:!1}),analytics:new $r({options:{required:!1},values:{enabled:new Er({required:!1}),originContext:new Pr({required:!1}),originLevel2:new Pr({required:!1}),originLevel3:new Pr({required:!1}),analyticsMode:new Pr({constrainTo:["legacy","next"],required:!1})}})};var Hp=new Or({...Bp,context:new $r({options:{required:!0},values:Rn}),cart:new $r({values:un})});var Wp={productListing:Rh,recommendations:Qh,commerceSearch:Wh,commercePagination:Ch,commerceSort:tg,facetOrder:dg,facetSearchSet:Yg,categoryFacetSearchSet:Qg,commerceFacetSet:Nf,commerceContext:Tn,commerceQuery:Vh,cart:bn,triggers:lg};function Gp(e){let t=Qp(e.loggerOptions);Jp(e.configuration,t);let r=Zp(e.configuration,t),n={...Np(e.configuration,t),apiClient:r},i={...e,reducers:Wp},a=Dp(i,n),{state:o,...u}=a;return u.dispatch(Mn(e.configuration.context)),e.configuration.cart!==void 0&&e.configuration.cart.items!==void 0&&u.dispatch(cn(e.configuration.cart.items)),hn({...u,get[fn](){return a.state},get configuration(){return a.state.configuration},executeFirstSearch(){let e=kf();a.dispatch(e)},executeFirstSearchAfterStandaloneSearchBoxRedirect(){let e=kf();a.dispatch(e)}})}function Jp(e,t){try{Hp.validate(e)}catch(e){throw t.error("Commerce engine configuration error",e),e}}function Zp(e,t){return new fe({logger:t,preprocessRequest:e.preprocessRequest||he})}var Kp={id:Nr,query:Yr},Xp=Nt("querySet/register",(e=>Jr(e,Kp))),ev=Nt("querySet/update",(e=>Jr(e,Kp)));var tv=nr(Cl(),(e=>{e.addCase(Xp,((e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(ev,((e,t)=>{let{id:r,query:n}=t.payload;iv(e,r,n)})).addCase(vg,((e,t)=>{let{id:r,expression:n}=t.payload;iv(e,r,n)})).addCase(Wl.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;nv(e,r)})).addCase(ic,rv).addCase(Ph,rv).addCase(ji.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))iv(e,r,n)}))}));function rv(e,t){kr(t.payload.q)||nv(e,t.payload.q)}function nv(e,t){Object.keys(e).forEach((r=>e[r]=t))}var iv=(e,t,r)=>{t in e&&(e[t]=r)};var av=()=>({});var ov=nr(av(),(e=>e.addCase(gg,((e,t)=>{let r=t.payload.id;r in e||(e[r]=uv(t.payload))})).addCase(pg,((e,t)=>{delete e[t.payload.id]})).addCase(mg.pending,sv).addCase(mg.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(mg.rejected,cv).addCase(bg.pending,sv).addCase(bg.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{query:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions.map((e=>({expression:e.expression,highlighted:e.highlighted,score:0,executableConfidence:0}))),r.isLoading=!1,r.error=null})).addCase(bg.rejected,cv).addCase(yg,((e,t)=>{let r=e[t.payload.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}))));function uv(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function sv(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function cv(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function lv(e){return e.addReducers({querySuggest:ov,querySet:tv}),{clearQuerySuggest:yg,fetchQuerySuggestions:bg,registerQuerySuggest:gg,selectQuerySuggestion:vg}}nr(ql(),(e=>{e.addCase(qi,((e,t)=>({...e,...t.payload}))).addCase(Wl.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(Wl.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(ji.fulfilled,((e,t)=>t.payload?.facetOptions??e)).addCase(Nn,((e,t)=>{e.facets[t.payload.facetId]=Il()})).addCase(pi,((e,t)=>{e.facets[t.payload.facetId]=Il()})).addCase(Id,((e,t)=>{e.facets[t.payload.facetId]=Il()})).addCase(zd,((e,t)=>{e.facets[t.payload.facetId]=Il()})).addCase(Oi,((e,t)=>{e.facets[t.payload].enabled=!0})).addCase(xi,((e,t)=>{e.facets[t.payload].enabled=!1})).addCase(ic,((e,t)=>{[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.fExcluded??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{})].forEach((t=>{t in e||(e.facets[t]=Il()),e.facets[t].enabled=!0}))}))}));var dv=Nt("rangeFacet/executeToggleSelect",(e=>Jr(e,yd(e.selection)))),fv=Nt("rangeFacet/executeToggleExclude",(e=>Jr(e,yd(e.selection))));var hv={facetId:$n,selection:new $r({values:vd})};fr("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hv),t(qd(e)),t(dv(e)),t(qi())}));fr("dateFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hv),t(Od(e)),t(fv(e)),t(qi())}));function gv(e,t){let r=t.payload??null;r&&(e.response=Ss().response,e.results=[],e.questionAnswer=bs()),e.error=r,e.isLoading=!1}function pv(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function vv(e,t){pv(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function yv(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}nr(Ss(),(e=>{e.addCase(Fl.rejected,((e,t)=>gv(e,t))),e.addCase(Pl.rejected,((e,t)=>gv(e,t))),e.addCase(Tl.rejected,((e,t)=>gv(e,t))),e.addCase(Fl.fulfilled,((e,t)=>{vv(e,t)})),e.addCase(Pl.fulfilled,((e,t)=>{pv(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(Tl.fulfilled,((e,t)=>{pv(e,t),e.results=t.payload.response.results})),e.addCase(Ul.fulfilled,((e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid})),e.addCase(Fl.pending,yv),e.addCase(Pl.pending,yv),e.addCase(Tl.pending,yv)}));var mv=["idle","selected","excluded"];var wv=["ascending","descending"],bv=["even","equiprobable"];var Sv={start:new Pr,end:new Pr,endInclusive:new Er,state:new Pr({constrainTo:mv})};new Or({facetId:ri,field:ni,generateAutomaticRanges:ui,filterFacetCount:ii,injectionDepth:ai,numberOfValues:oi,currentValues:new _r({each:new $r({values:Sv})}),sortCriteria:new Pr({constrainTo:wv}),rangeAlgorithm:new Pr({constrainTo:bv})});var Iv={facetId:$n,selection:new $r({values:pd})};fr("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Iv),t(Yd(e)),t(dv(e)),t(qi())}));fr("numericFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Iv),t(Bd(e)),t(fv(e)),t(qi())}));var qv=["allValues","atLeastOneValue"];var Ov={start:new jr,end:new jr,endInclusive:new Er,state:new Pr({constrainTo:mv})};new Or({facetId:ri,field:ni,generateAutomaticRanges:ui,filterFacetCount:ii,injectionDepth:ai,numberOfValues:oi,currentValues:new _r({each:new $r({values:Ov})}),sortCriteria:new Pr({constrainTo:wv}),resultsMustMatch:new Pr({constrainTo:qv}),rangeAlgorithm:new Pr({constrainTo:bv})});var xv="&",Cv="=";var Av=e=>t=>Object.entries(t).map(e).filter((e=>e)).join(xv);function kv(e,t){return`${e}${Cv}${encodeURIComponent(t)}`}function jv(e){let[t,...r]=e.split(Cv),n=r.join(Cv);return[t,n]}var Rv={serialize:Ev,deserialize:Dv},Mv={serialize:()=>"",deserialize:()=>({})};function Ev(e){return Av(Fv)(e)}function Dv(e){return e.split(xv).map(jv).filter(Tv).map(Uv).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:n}}),{})}function Fv(e){let[t,r]=e;return t!=="q"?"":kv(t,r)}function Tv(e){let t=Pv(e[0]),r=e.length===2;return t&&r}function Pv(e){return e in{q:!0}}function Uv(e){let[t,r]=e;return[t,decodeURIComponent(r)]}var $v=()=>({correctedQuery:"",corrections:[],originalQuery:""});var Vv=(e,t)=>{let r={...$v(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};function _v(){return{wasCorrectedTo:"",queryCorrection:$v(),originalQuery:""}}var Lv=nr(_v(),(e=>{e.addCase(kf.pending,(e=>{e.queryCorrection=$v(),e.wasCorrectedTo=""})).addCase(kf.fulfilled,((e,t)=>{let{queryCorrection:r}=t.payload.response;Vv(e,r),e.originalQuery=t.payload.originalQuery}))}));var Qv=Tt((e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!==""),(e=>e));function Nv(e){if(!zv(e));let t=gn(e),r=()=>e[fn].didYouMean,n=()=>Qv(r());return{...t,get state(){let e=r();return{originalQuery:e.originalQuery,wasCorrectedTo:e.wasCorrectedTo,queryCorrection:e.queryCorrection,hasQueryCorrection:n(),wasAutomaticallyCorrected:n()}}}}function zv(e){return e.addReducers({didYouMean:Lv}),!0}var Yv="hierarchical",Bv={regular:{toggleSelectActionCreator:vi,toggleExcludeActionCreator:yi},numericalRange:{toggleSelectActionCreator:Yd,toggleExcludeActionCreator:Bd},dateRange:{toggleSelectActionCreator:qd,toggleExcludeActionCreator:Od},[Yv]:{toggleSelectActionCreator:zn}};function Hv(e,t){if(!Wv(e));let r=gn(e),{dispatch:n}=e,i=e=>({facetId:e.facetId,facetDisplayName:e.displayName,field:e.field,type:e.type,values:e.values.filter((e=>e.state!=="idle")).map((r=>({value:r,deselect:()=>{r.state==="selected"?(n(Bv[e.type].toggleSelectActionCreator({facetId:e.facetId,selection:r})),n(t.fetchProductsActionCreator())):r.state==="excluded"&&e.type!==Yv&&(n(Bv[e.type].toggleExcludeActionCreator({facetId:e.facetId,selection:r})),n(t.fetchProductsActionCreator()))}})))}),a=Tt((e=>e.facetOrder),(r=>{let n=r.map((r=>t.facetResponseSelector(e[fn],r))).filter((e=>e!==void 0)).map(i)??[];return{facetBreadcrumbs:n,hasBreadcrumbs:n.length>0}}));return{...r,deselectAll:()=>{n(Pn())},get state(){return a(e[fn])}}}function Wv(e){return e.addReducers({facetOrder:dg,commerceFacetSet:Nf}),!0}function Gv(e,t){if(!Jv(e));let{dispatch:r}=e,n=gn(e),i=t.options.facetId,a=()=>e[fn].commerceFacetSet[i]?.request,o=()=>t.options.facetResponseSelector(e[fn],i),u=()=>t.options.isFacetLoadingResponseSelector(e[fn]),s=()=>a()?.values?.filter((e=>e.state!=="idle")).length??0;return{...n,toggleSelect:e=>{r(t.options.toggleSelectActionCreator({selection:e,facetId:i})),r(t.options.fetchProductsActionCreator())},toggleExclude:n=>{if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleExclude had no effect.");return}r(t.options.toggleExcludeActionCreator({selection:n,facetId:i})),r(t.options.fetchProductsActionCreator())},toggleSingleSelect:function(e){e.state==="idle"&&r(mi(i)),this.toggleSelect(e)},toggleSingleExclude:function(n){if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleSingleExclude had no effect.");return}n.state==="idle"&&r(mi(i)),this.toggleExclude(n)},isValueSelected:e=>e.state==="selected",isValueExcluded:e=>e.state==="excluded",deselectAll(){r(mi(i)),r(t.options.fetchProductsActionCreator())},showMoreValues(){let e=a()?.numberOfValues??0,n=a()?.initialNumberOfValues??0,o=n-e%n,u=e+o;r(bi({facetId:i,numberOfValues:u})),r(Si({facetId:i,isFieldExpanded:!0})),r(t.options.fetchProductsActionCreator())},showLessValues(){let e=a()?.initialNumberOfValues??0,n=Math.max(e,s());r(bi({facetId:i,numberOfValues:n})),r(Si({facetId:i,isFieldExpanded:!1})),r(t.options.fetchProductsActionCreator())},get state(){let e=o(),t=e?.moreValuesAvailable??!1,r=e?.values??[],n=r.some((e=>e.state!=="idle"));return{facetId:i,type:e?.type??"regular",field:e?.field??"",displayName:e?.displayName??"",values:r,isLoading:u(),canShowMoreValues:t,canShowLessValues:Zv(a()),hasActiveValues:n}}}}function Jv(e){return e.addReducers({commerceFacetSet:Nf}),!0}var Zv=e=>{if(!e)return!1;let t=e.initialNumberOfValues,r=!!e.values.find((e=>e.state==="idle"));return(t??0)<(e.numberOfValues??0)&&r};function Kv(e,t){let r=e.dispatch,{options:n,getFacetSearch:i,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:o}=t,{facetId:u}=n;return{updateText(e){r(Xn({facetId:u,query:e,numberOfValues:i().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=i();r(Xn({facetId:u,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?o(u):a(u))},search(){r(t.isForFieldSuggestions?o(u):a(u))},clear(){r(Vg({facetId:u}))},updateCaptions(e){r(Xn({facetId:u,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=i(),{query:n}=r,a=e.values;return{...e,values:a,isLoading:t,query:n}}}}function Xv(e,t){let{dispatch:r}=e,n={...Dg,...t.options},{facetId:i}=n,a=()=>"state"in e?e.state.categoryFacetSearchSet[i]:e[fn].categoryFacetSearchSet[i];r(Jn(n));let o=Kv(e,{options:n,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...o,select(e){r(Gn({facetId:i,value:e})),t.select(e)},get state(){return o.state}}}function ey(e,t){if(!ty(e));let{showMoreResults:r,updateCaptions:n,...i}=Xv(e,{...t,executeFacetSearchActionCreator:Uf,executeFieldSuggestActionCreator:$f});return i}function ty(e){return e.addReducers({categoryFacetSearchSet:Qg}),!0}function ry(e,t){let r=Gv(e,{options:{...t,toggleSelectActionCreator:zn}}),{deselectAll:n,isValueSelected:i,subscribe:a,toggleSelect:o}=r,{dispatch:u}=e,s=()=>r.state.facetId,c=ey(e,{options:{facetId:s(),...t.facetSearch},select:()=>{u(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),{state:l,...d}=c,f=Tt((e=>e.categoryFacetSearchSet[s()]),(e=>({isLoading:e.isLoading,moreValuesAvailable:e.response.moreValuesAvailable,query:e.options.query,values:e.response.values})));return{deselectAll:n,isValueSelected:i,subscribe:a,toggleSelect:o,showMoreValues(){let{facetId:e}=t,{activeValue:r,values:n}=this.state,i=(r?.children.length??n.length)+Qn;u(Bn({facetId:e,numberOfValues:i})),u(t.fetchProductsActionCreator())},showLessValues(){let{facetId:e}=t;u(Bn({facetId:e,numberOfValues:Qn})),u(t.fetchProductsActionCreator())},facetSearch:d,get state(){let t=Yu(r.state.values),n=t.length?t[t.length-1]:void 0,i=n?n.children.length>Qn:!1,a=n?.moreValuesAvailable??r.state.canShowMoreValues??!1,o=!!n;return{...r.state,activeValue:n,canShowLessValues:i,canShowMoreValues:a,hasActiveValues:o,selectedValueAncestry:t,facetSearch:f(e[fn])}},type:"hierarchical"}}function ny(e,t){return{...Gv(e,{options:{...t,toggleSelectActionCreator:qd,toggleExcludeActionCreator:Od}}),type:"dateRange"}}function iy(e,t){if(!ay(e));let r=gn(e),n=Tt([e=>e.facetOrder,e=>e.commerceFacetSet],((e,t)=>e.map((e=>i(t,e))))),i=Tt(((e,t)=>({facetId:t,type:e[t].request.type})),(({type:r,facetId:n})=>{switch(r){case"dateRange":return t.buildDateFacet(e,{facetId:n});case"hierarchical":return t.buildCategoryFacet(e,{facetId:n});case"numericalRange":return t.buildNumericFacet(e,{facetId:n});case"regular":return t.buildRegularFacet(e,{facetId:n})}}));return{...r,get facets(){return n(e[fn])},get state(){return e[fn].facetOrder}}}function ay(e){return e.addReducers({facetOrder:dg,commerceFacetSet:Nf}),!0}function oy(e,t){let r=Gv(e,{options:{...t,toggleSelectActionCreator:Yd,toggleExcludeActionCreator:Bd}}),{dispatch:n}=e,{facetId:i,fetchProductsActionCreator:a}=t;return{...r,setRanges(e){n(Hd({facetId:i,values:e})),n(a())},get state(){let n=t.facetResponseSelector(e[fn],i);if(n?.type==="numericalRange"&&n.domain){let{min:e,max:t}=n.domain;return{...r.state,domain:{min:e,max:t}}}return{...r.state}},type:"numericalRange"}}function uy(e,t){let{dispatch:r}=e,{options:n,select:i,exclude:a,isForFieldSuggestions:o,executeFacetSearchActionCreator:u,executeFieldSuggestActionCreator:s}=t,{facetId:c}=n,l=()=>"state"in e?e.state.facetSearchSet[c]:e[fn].facetSearchSet[c];r(Kn(n));let d=Kv(e,{options:n,getFacetSearch:l,isForFieldSuggestions:o,executeFacetSearchActionCreator:u,executeFieldSuggestActionCreator:s});return{...d,select(e){r(ei({facetId:c,value:e})),i(e)},exclude(e){r(ti({facetId:c,value:e})),a(e)},singleSelect(e){r(mi(c)),r(ei({facetId:c,value:e})),i(e)},singleExclude(e){r(mi(c)),r(ti({facetId:c,value:e})),a(e)},get state(){let{values:e}=d.state;return{...d.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}function sy(e,t){if(!cy(e));let{showMoreResults:r,updateCaptions:n,...i}=uy(e,{...t,executeFacetSearchActionCreator:Uf,executeFieldSuggestActionCreator:$f});return{...i}}function cy(e){return e.addReducers({facetSearchSet:Yg}),!0}function ly(e,t){let r=Gv(e,{options:{...t,toggleSelectActionCreator:vi,toggleExcludeActionCreator:yi}}),n=()=>r.state.facetId,{dispatch:i}=e,a=sy(e,{options:{facetId:n(),...t.facetSearch},select:()=>{i(t.fetchProductsActionCreator())},exclude:()=>{i(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),{state:o,...u}=a,s=Tt((e=>e.facetSearchSet[n()]),(e=>({facetSearch:{isLoading:e.isLoading,moreValuesAvailable:e.response.moreValuesAvailable,query:e.options.query,values:e.response.values}})));return{...r,facetSearch:u,get state(){return{...r.state,...s(e[fn])}},type:"regular"}}var dy=new Or({pageSize:new jr({min:1,max:1e3,required:!1})});function fy(e,t){if(!hy(e));let r=gn(e),{dispatch:n}=e;Kr(e,dy,t.options,"buildCorePagination");let i=t.options?.slotId;t.options?.pageSize&&n(mh({slotId:i,pageSize:t.options.pageSize})),i&&n(qh({slotId:i}));let a=Tt((e=>i?e.commercePagination.recommendations[i]:e.commercePagination.principal),(({perPage:e,...t})=>({pageSize:e??0,...t})));return{...r,get state(){return a(e[fn])},selectPage(e){n(bh({slotId:i,page:e})),n(t.fetchProductsActionCreator())},nextPage(){n(Sh({slotId:i})),n(t.fetchProductsActionCreator())},previousPage(){n(Ih({slotId:i})),n(t.fetchProductsActionCreator())},setPageSize(e){n(mh({slotId:i,pageSize:e})),n(t.fetchProductsActionCreator())},fetchMoreProducts(){n(t.fetchMoreProductsActionCreator())}}}function hy(e){return e.addReducers({commercePagination:Ch}),!0}fr("commerce/product/view",(async(e,{extra:t,getState:r})=>{let{relay:n}=t,i={currency:en(r().commerceContext),product:e};n.emit("ec.productView",i)}));var gy=fr("commerce/product/click",(async(e,{extra:t,getState:r})=>{let{relay:n}=t,i={currency:en(r().commerceContext),...e};n.emit("ec.productClick",i)}));function py(e,t,r){if(!vy(e));let n=1e3,i={selectionDelay:n,debounceWait:n,...t.options},a;return{select:Cp(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function vy(e){return e.addReducers({configuration:mp}),!0}function yy(e,t){let r=!1;return py(e,t,(()=>{r||(r=!0,e.dispatch(gy({product:t.options.product,position:t.options.position,responseId:t.responseIdSelector(e[fn])})))}))}function my(e,t){if(!t)return;let r=new Or({criterion:Kd});Zr(e,r,t,"buildSort")}function wy(e,t){if(!by(e));let{dispatch:r}=e,n=gn(e);my(e,t.initialState);let i=t.initialState?.criterion;return i&&r(Kh(i)),{...n,get state(){return e[fn].commerceSort},sortBy(e){r(Kh(e)),r(vc(0)),r(t.fetchProductsActionCreator())},isSortedBy(e){return JSON.stringify(this.state.appliedSort)===JSON.stringify(e)},isAvailable(e){return this.state.availableSorts.some((t=>JSON.stringify(t)===JSON.stringify(e)))}}}function by(e){return e.addReducers({commerceSort:tg}),!0}var Sy=Object.getOwnPropertyNames,Iy=Object.getOwnPropertySymbols,qy=Object.prototype.hasOwnProperty;function Oy(e,t){return function(r,n,i){return e(r,n,i)&&t(r,n,i)}}function xy(e){return function(t,r,n){if(!t||!r||typeof t!="object"||typeof r!="object")return e(t,r,n);var i=n.cache,a=i.get(t),o=i.get(r);if(a&&o)return a===r&&o===t;i.set(t,r),i.set(r,t);var u=e(t,r,n);return i.delete(t),i.delete(r),u}}function Cy(e){return Sy(e).concat(Iy(e))}var Ay=Object.hasOwn||function(e,t){return qy.call(e,t)};function ky(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var jy="_owner",Ry=Object.getOwnPropertyDescriptor,My=Object.keys;function Ey(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Dy(e,t){return ky(e.getTime(),t.getTime())}function Fy(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),a=0,o,u;(o=i.next())&&!o.done;){for(var s=t.entries(),c=!1,l=0;(u=s.next())&&!u.done;){var d=o.value,f=d[0],h=d[1],g=u.value,p=g[0],v=g[1];!c&&!n[l]&&(c=r.equals(f,p,a,l,e,t,r)&&r.equals(h,v,f,p,e,t,r))&&(n[l]=!0),l++}if(!c)return!1;a++}return!0}function Ty(e,t,r){var n=My(e),i=n.length;if(My(t).length!==i)return!1;for(var a;i-- >0;)if(a=n[i],a===jy&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Ay(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Py(e,t,r){var n=Cy(e),i=n.length;if(Cy(t).length!==i)return!1;for(var a,o,u;i-- >0;)if(a=n[i],a===jy&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Ay(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(o=Ry(e,a),u=Ry(t,a),(o||u)&&(!o||!u||o.configurable!==u.configurable||o.enumerable!==u.enumerable||o.writable!==u.writable)))return!1;return!0}function Uy(e,t){return ky(e.valueOf(),t.valueOf())}function $y(e,t){return e.source===t.source&&e.flags===t.flags}function Vy(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),a,o;(a=i.next())&&!a.done;){for(var u=t.values(),s=!1,c=0;(o=u.next())&&!o.done;)!s&&!n[c]&&(s=r.equals(a.value,o.value,a.value,o.value,e,t,r))&&(n[c]=!0),c++;if(!s)return!1}return!0}function _y(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Ly="[object Arguments]",Qy="[object Boolean]",Ny="[object Date]",zy="[object Map]",Yy="[object Number]",By="[object Object]",Hy="[object RegExp]",Wy="[object Set]",Gy="[object String]",Jy=Array.isArray,Zy=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ky=Object.assign,Xy=Object.prototype.toString.call.bind(Object.prototype.toString);function em(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,o=e.areRegExpsEqual,u=e.areSetsEqual,s=e.areTypedArraysEqual;return function(e,c,l){if(e===c)return!0;if(e==null||c==null||typeof e!="object"||typeof c!="object")return e!==e&&c!==c;var d=e.constructor;if(d!==c.constructor)return!1;if(d===Object)return i(e,c,l);if(Jy(e))return t(e,c,l);if(Zy!=null&&Zy(e))return s(e,c,l);if(d===Date)return r(e,c,l);if(d===RegExp)return o(e,c,l);if(d===Map)return n(e,c,l);if(d===Set)return u(e,c,l);var f=Xy(e);return f===Ny?r(e,c,l):f===Hy?o(e,c,l):f===zy?n(e,c,l):f===Wy?u(e,c,l):f===By?typeof e.then!="function"&&typeof c.then!="function"&&i(e,c,l):f===Ly?i(e,c,l):f===Qy||f===Yy||f===Gy?a(e,c,l):!1}}function tm(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Py:Ey,areDatesEqual:Dy,areMapsEqual:n?Oy(Fy,Py):Fy,areObjectsEqual:n?Py:Ty,arePrimitiveWrappersEqual:Uy,areRegExpsEqual:$y,areSetsEqual:n?Oy(Vy,Py):Vy,areTypedArraysEqual:n?Py:_y};if(r&&(i=Ky({},i,r(i))),t){var a=xy(i.areArraysEqual),o=xy(i.areMapsEqual),u=xy(i.areObjectsEqual),s=xy(i.areSetsEqual);i=Ky({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:u,areSetsEqual:s})}return i}function rm(e){return function(t,r,n,i,a,o,u){return e(t,r,u)}}function nm(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(e,o){var u=n(),s=u.cache,c=s===void 0?t?new WeakMap:void 0:s,l=u.meta;return r(e,o,{cache:c,equals:i,meta:l,strict:a})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return r(e,t,o)}}im();im({strict:!0});im({circular:!0});im({circular:!0,strict:!0});im({createInternalComparator:function(){return ky}});im({strict:!0,createInternalComparator:function(){return ky}});im({circular:!0,createInternalComparator:function(){return ky}});im({circular:!0,createInternalComparator:function(){return ky},strict:!0});function im(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,u=tm(e),s=em(u),c=n?n(s):rm(s);return nm({circular:r,comparator:s,createState:i,equals:c,strict:o})}function am(e,t){return e.length!==t.length?!1:e.every((e=>t.findIndex((t=>om(e,t)))!==-1))}var om=im({createCustomConfig:e=>({...e,areArraysEqual:am})});var um=new jr({min:1,default:8,required:!1}),sm=new jr({min:1,max:20,default:5,required:!1}),cm={desiredCount:sm,numberOfValues:um};Nt("automaticFacet/setOptions",(e=>Jr(e,cm)));Nt("automaticFacet/deselectAll",(e=>Jr(e,$n)));var lm=Nr,dm=Nt("automaticFacet/toggleSelectValue",(e=>Jr(e,{field:lm,selection:new $r({values:hi})})));nr(xl(),(e=>{e.addCase(hc,((e,t)=>{let r=hm(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=pm(r,n)})).addCase(gc,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(cp,(e=>{e.firstResult=0})).addCase(pc,((e,t)=>{let r=t.payload;e.firstResult=pm(r,e.numberOfResults)})).addCase(vc,((e,t)=>{let r=t.payload;e.firstResult=pm(r,e.numberOfResults)})).addCase(mc,(e=>{let t=hm(e),r=Math.max(t-1,1);e.firstResult=pm(r,e.numberOfResults)})).addCase(yc,(e=>{let t=hm(e),r=gm(e),n=Math.min(t+1,r);e.firstResult=pm(n,e.numberOfResults)})).addCase(ji.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(ic,((e,t)=>{e.firstResult=t.payload.firstResult??e.firstResult,e.numberOfResults=t.payload.numberOfResults??e.defaultNumberOfResults})).addCase(Wl.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Ks.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(mi,(e=>{fm(e)})).addCase(Od,(e=>{fm(e)})).addCase(yi,(e=>{fm(e)})).addCase(Bd,(e=>{fm(e)})).addCase(ti,(e=>{fm(e)})).addCase(vi,(e=>{fm(e)})).addCase(Yn,(e=>{fm(e)})).addCase(zn,(e=>{fm(e)})).addCase(Gn,(e=>{fm(e)})).addCase(qd,(e=>{fm(e)})).addCase(Yd,(e=>{fm(e)})).addCase(Pn,(e=>{fm(e)})).addCase(xd,(e=>{fm(e)})).addCase(Hd,(e=>{fm(e)})).addCase(ei,(e=>{fm(e)})).addCase(dm,(e=>{fm(e)}))}));function fm(e){e.firstResult=xl().firstResult}function hm(e){let{firstResult:t,numberOfResults:r}=e;return vm(t,r)}function gm(e){let{totalCountFiltered:t,numberOfResults:r}=e;return ym(t,r)}function pm(e,t){return(e-1)*t}function vm(e,t){return Math.round(e/t)+1}function ym(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}new Or({parameters:new $r({options:{required:!0},values:nc})});var mm=new Or({fragment:new Pr});function wm(e,t){let r;function n(){r=t.requestIdSelector(e[fn])}function i(){return r!==t.requestIdSelector(e[fn])}Zr(e,mm,t.initialState,"buildUrlManager");let a=gn(e),o=t.initialState.fragment;n();let u=t.parameterManagerBuilder(e,{initialState:{parameters:t.serializer.deserialize(o)}});return{...a,subscribe(r){let a=()=>{let e=this.state.fragment;!bm(t.serializer.deserialize,o,e)&&i()&&(o=e,r()),n()};return a(),e.subscribe(a)},get state(){return{fragment:t.serializer.serialize(u.state.parameters)}},synchronize(e){o=e;let r=t.serializer.deserialize(e);u.synchronize(r)}}}function bm(e,t,r){if(t===r)return!0;let n=e(t),i=e(r);return om(n,i)}function Sm(e,t){return{...qm(e,t),didYouMean(){return Nv(e)}}}function Im(e,t){return qm(e,t)}function qm(e,t){let{fetchProductsActionCreator:r,facetResponseSelector:n,isFacetLoadingResponseSelector:i,requestIdSelector:a,parameterManagerBuilder:o,serializer:u}=t;return{...Om(e,t),sort(t){return wy(e,{...t,fetchProductsActionCreator:r})},facetGenerator(){let t={fetchProductsActionCreator:r,facetResponseSelector:n,isFacetLoadingResponseSelector:i};return iy(e,{buildRegularFacet:(r,n)=>ly(e,{...n,...t}),buildNumericFacet:(r,n)=>oy(e,{...n,...t}),buildDateFacet:(r,n)=>ny(e,{...n,...t}),buildCategoryFacet:(r,n)=>ry(e,{...n,...t})})},breadcrumbManager(){return Hv(e,{facetResponseSelector:n,fetchProductsActionCreator:r})},urlManager(t){return wm(e,{...t,requestIdSelector:a,parameterManagerBuilder:o,serializer:u})}}}function Om(e,t){let{responseIdSelector:r,fetchProductsActionCreator:n,fetchMoreProductsActionCreator:i,slotId:a}=t;return{interactiveProduct(t){return yy(e,{...t,responseIdSelector:r})},pagination(t){return fy(e,{...t,options:{...t?.options,slotId:a},fetchProductsActionCreator:n,fetchMoreProductsActionCreator:i})}}}function xm(e,t){return!!t&&t.facetId in e.commerceFacetSet}var Cm=(e,t)=>{let r=e.productListing.facets.find((e=>e.facetId===t));if(xm(e,r))return r},Am=e=>e.productListing.isLoading;var km=e=>new Or({parameters:new $r({options:{required:!0},values:e})});function jm(e,t){let{dispatch:r}=e,n=gn(e);return Zr(e,km(t.parametersDefinition),t.initialState,"buildCoreParameterManager"),r(t.restoreActionCreator(t.initialState.parameters)),{...n,synchronize(n){let i=t.activeParametersSelector(e[fn]),a=t.enrichParameters(e[fn],i),o=t.enrichParameters(e[fn],n);om(a,o)||(r(t.restoreActionCreator(n)),r(t.fetchProductsActionCreator()))},get state(){return{parameters:t.activeParametersSelector(e[fn])}}}}function Rm(e,t){return jm(e,{...t,parametersDefinition:Th,activeParametersSelector:Mm,restoreActionCreator:Uh,fetchProductsActionCreator:vf,enrichParameters:()=>({})})}function Mm(e){return{}}function Em(e){if(!Dm(e));let t=gn(e),{dispatch:r}=e,n=()=>e[fn],i=Im(e,{responseIdSelector:lf,fetchProductsActionCreator:vf,fetchMoreProductsActionCreator:yf,facetResponseSelector:Cm,isFacetLoadingResponseSelector:Am,requestIdSelector:df,parameterManagerBuilder:Rm,serializer:Mv});return{...t,...i,get state(){let{products:e,error:t,isLoading:r,responseId:i}=n().productListing;return{products:e,error:t,isLoading:r,responseId:i}},refresh:()=>r(vf())}}function Dm(e){return e.addReducers({productListing:Rh,commerceContext:Tn,configuration:mp}),!0}function Fm(e,t){if(!Tm(e));Zr(e,ch,t.options,"buildRecommendations");let r=gn(e),{dispatch:n}=e,{slotId:i,productId:a}=t.options;n(ph({slotId:i}));let o=Tt((e=>e.recommendations[i]),(e=>e)),u=Om(e,{slotId:i,responseIdSelector:e=>e.recommendations[i].responseId,fetchProductsActionCreator:()=>hh({slotId:i}),fetchMoreProductsActionCreator:()=>gh({slotId:i})});return{...r,...u,get state(){return o(e[fn])},refresh:()=>n(hh({slotId:i,productId:a}))}}function Tm(e){return e.addReducers({recommendations:Qh}),!0}var Pm=(e,t)=>{let r=e.commerceSearch.facets.find((e=>e.facetId===t));if(xm(e,r))return r},Um=e=>e.commerceSearch.isLoading;function $m(e,t){if(!Lm(e));return jm(e,{...t,activeParametersSelector:Vm,restoreActionCreator:Ph,parametersDefinition:Fh,fetchProductsActionCreator:kf,enrichParameters:(e,t)=>({q:$h().query,...t})})}function Vm(e){return{..._m(e)}}function _m(e){if(e.commerceQuery===void 0)return{};let t=e.commerceQuery.query;return t!==$h().query?{q:t}:{}}function Lm(e){return e.addReducers({commerceQuery:Vh}),!0}function Qm(e){if(!Nm(e));let t=gn(e),{dispatch:r}=e,n=()=>e[fn],i=Sm(e,{responseIdSelector:wf,fetchProductsActionCreator:kf,fetchMoreProductsActionCreator:jf,facetResponseSelector:Pm,isFacetLoadingResponseSelector:Um,requestIdSelector:bf,parameterManagerBuilder:$m,serializer:Rv});return{...t,...i,get state(){return n().commerceSearch},executeFirstSearch(){wf(n())===""&&r(kf())}}}function Nm(e){return e.addReducers({commerceContext:Tn,configuration:mp,commerceSearch:Wh,commerceQuery:Vh}),!0}nr(ws(),(e=>e.addCase(wc,((e,t)=>({...e,...t.payload}))).addCase(vl,((e,t)=>{e.q=t.payload})).addCase(vg,((e,t)=>{e.q=t.payload.expression})).addCase(ji.fulfilled,((e,t)=>t.payload?.query??e)).addCase(ic,((e,t)=>{e.q=t.payload.q??e.q,e.enableQuerySyntax=t.payload.enableQuerySyntax??e.enableQuerySyntax}))));function zm(e,t){return e=Bm(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,i)=>r?Ym(r,t.notMatchDelimiters):n?Ym(n,t.exactMatchDelimiters):i?Ym(i,t.correctionDelimiters):e))}function Ym(e,t){return t?t.open+e+t.close:e}function Bm(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(e)?e.replace(i,(e=>t[e])):e}var Hm={open:new Pr,close:new Pr},Wm={id:Nr,numberOfSuggestions:new jr({min:0}),enableQuerySyntax:new Er,highlightOptions:new $r({values:{notMatchDelimiters:new $r({values:Hm}),exactMatchDelimiters:new $r({values:Hm}),correctionDelimiters:new $r({values:Hm})}}),clearFilters:new Er};new Or(Wm);function Gm(e,t){return e?e.completions.map((e=>({highlightedValue:zm(e.highlighted,t),rawValue:e.expression}))):[]}var Jm={clearFilters:!0},{id:Zm,highlightOptions:Km,clearFilters:Xm}=Wm,ew={id:Zm,highlightOptions:Km,clearFilters:Xm},tw=new Or(ew);function rw(e,t={}){if(!nw(e));let r=gn(e),{dispatch:n}=e,i=()=>e[fn],a=t.options?.id||V("search_box"),o={id:a,highlightOptions:{...t.options?.highlightOptions},...Jm,...t.options};Kr(e,tw,o,"buildSearchBox"),n(Xp({id:a,query:i().commerceQuery.query??""})),n(gg({id:a}));let u=()=>i().querySet[o.id],s=async()=>{let e={query:u(),clearFilters:o.clearFilters};n(Rf(e)),n(kf())};return{...r,updateText(e){n(ev({id:a,query:e})),this.showSuggestions()},clear(){n(ev({id:a,query:""})),n(yg({id:a}))},showSuggestions(){n(bg({id:a}))},selectSuggestion(e){n(vg({id:a,expression:e})),s().then((()=>{n(yg({id:a}))}))},submit(){s(),n(yg({id:a}))},get state(){let e=i().querySuggest[o.id],t=Gm(e,o.highlightOptions),r=e?e.isLoading:!1;return{value:u(),suggestions:t,isLoading:i().commerceSearch.isLoading,isLoadingSuggestions:r}}}}function nw(e){return e.addReducers({commerceQuery:Vh,querySuggest:ov,configuration:mp,querySet:tv,commerceSearch:Wh}),!0}var iw={queries:new _r({required:!0,each:new Pr({emptyAllowed:!1})}),maxLength:new jr({required:!0,min:1,default:10})},aw=Nt("recentQueries/registerRecentQueries",(e=>Jr(e,iw))),ow=Nt("recentQueries/clearRecentQueries");function uw(){return{queries:[],maxLength:10}}nr(uw(),(e=>{e.addCase(aw,sw).addCase(ow,cw).addCase(Wl.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;!r.length||!n.length||lw(r,e)}))}));function sw(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function cw(e){e.queries=[]}function lw(e,t){t.queries=t.queries.filter((t=>t!==e));let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}var dw=nr(uw(),(e=>{e.addCase(aw,sw).addCase(ow,cw).addCase(kf.fulfilled,((e,t)=>{let r=t.payload.queryExecuted?.trim()||"",n=t.payload.response.products;!r.length||!n.length||lw(r,e)}))}));var fw={queries:[]},hw={maxLength:10,clearFilters:!0},gw=new Or({queries:new _r({required:!0})}),pw=new Or({maxLength:new jr({required:!0,min:1}),clearFilters:new Er});function vw(e,t){Kr(e,pw,t?.options,"buildRecentQueriesList"),Zr(e,gw,t?.initialState,"buildRecentQueriesList")}function yw(e,t){if(!mw(e));let r=gn(e),{dispatch:n}=e,i=()=>e[fn],a={...hw,...t?.options},o={...fw,...t?.initialState};vw(e,{options:a,initialState:o});let u={queries:o.queries,maxLength:a.maxLength};return n(aw(u)),{...r,get state(){let e=i();return{...e.recentQueries,analyticsEnabled:e.configuration.analytics.enabled}},clear(){n(ow())},executeRecentQuery(e){let t=new jr({required:!0,min:0,max:this.state.queries.length}).validate(e);if(t)throw new Error(t);let r={query:this.state.queries[e],clearFilters:a.clearFilters};n(Rf(r)),n(kf())}}}function mw(e){return e.addReducers({search:Wh,recentQueries:dw}),!0}var ww={id:Nr},bw={...ww,query:Yr},Sw=Nt("instantProducts/register",(e=>Jr(e,ww))),Iw=Nt("instantProducts/updateQuery",(e=>Jr(e,bw))),qw=Nt("instantProducts/clearExpired",(e=>Jr(e,ww)));function Ow(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var xw=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},Cw=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},Aw=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach((([e,n])=>{Ow(n)&&delete t[r].cache[e]}))},kw=(e,t,r)=>{for(let e in t)for(let r in t[e].cache)t[e].cache[r].isActive=!1;if(!Mw(e,t)){Ew(e,t,r);return}let n=Mw(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},jw=(e,t,r)=>{let{id:n,q:i,searchUid:a,cacheTimeout:o,totalCountFiltered:u,duration:s}=e;t[n].cache[i]={...Mw(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:o?o+Date.now():0,totalCountFiltered:u,duration:s}},Rw=(e,t)=>{let{id:r,q:n,error:i}=e;t[r].cache[n].error=i||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},Mw=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},Ew=(e,t,r)=>{let{q:n,id:i}=e;t[i].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};function Dw(){return{}}var Fw=nr(Dw(),(e=>{e.addCase(Sw,((e,t)=>{xw(t.payload,e)})).addCase(Iw,((e,t)=>{Cw({...t.payload,q:t.payload.query},e)})).addCase(qw,((e,t)=>{Aw(t.payload,e)})).addCase(Mf.pending,((e,t)=>{kw(t.meta.arg,e,{products:[]})})).addCase(Mf.fulfilled,((e,t)=>{let{response:{products:r,responseId:n,pagination:{totalEntries:i}}}=t.payload;jw({duration:0,searchUid:n,totalCountFiltered:i,...t.meta.arg},e,{products:r})})).addCase(Mf.rejected,((e,t)=>{Rw(t.meta.arg,e)}))}));var Tw={searchBoxId:zr,cacheTimeout:new jr},Pw=new Or(Tw);function Uw(e,t){if(!$w(e));let r=gn(e),{dispatch:n}=e,i=()=>e[fn],a={searchBoxId:t.options.searchBoxId||V("instant-products-"),cacheTimeout:t.options.cacheTimeout||6e4};Kr(e,Pw,a,"buildInstantProducts");let o=a.searchBoxId;n(Sw({id:o}));let u=()=>i().instantProducts[o],s=e=>u().cache[e],c=()=>u().q,l=()=>{let e=s(c());return e?e.isLoading?[]:e.products:[]};return{...r,updateQuery(e){if(!e)return;let t=s(e);(!t||!t.isLoading&&(t.error||Ow(t)))&&n(Mf({id:o,q:e,cacheTimeout:a.cacheTimeout})),n(Iw({id:o,query:e}))},clearExpired(){n(qw({id:o}))},get state(){let e=c(),t=s(e);return{query:e,isLoading:t?.isLoading||!1,error:t?.error||null,products:l()}}}}function $w(e){return e.addReducers({instantProducts:Fw}),!0}function Vw(e){return e.type==="redirect"}var _w=Nt("standaloneSearchBox/register",(e=>Jr(e,{id:Nr,redirectionUrl:Nr}))),Lw=Nt("standaloneSearchBox/reset",(e=>Jr(e,{id:Nr}))),Qw=fr("commerce/standaloneSearchBox/fetchRedirect",(async(e,{getState:t,rejectWithValue:r,extra:n})=>{Jr(e,{id:new Pr({emptyAllowed:!1})});let i=t(),{apiClient:a}=n,o=await Nw(i),u=await a.plan(o);if(de(u))return r(u.error);let s=u.success.triggers.filter(Vw);return s.length?s[0].content:""})),Nw=async e=>({query:e.commerceQuery.query,...await ef(e)});var zw=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(Vw);return e.length?e[0].content:null}};var Yw=Nt("standaloneSearchBox/register",(e=>Jr(e,{id:Nr,redirectionUrl:Nr}))),Bw=Nt("standaloneSearchBox/reset",(e=>Jr(e,{id:Nr})));Nt("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>Jr(e,{id:Nr})));Nt("standaloneSearchBox/updateAnalyticsToOmniboxFromLink");fr("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:i,validatePayload:a}})=>{a(e,{id:new Pr({emptyAllowed:!1})});let o=await Ww(r()),u=await i.plan(o);if(pl(u))return n(u.error);let{redirectionUrl:s}=new zw(u.success);return s&&t(Hw(s)),s||""}));var Hw=e=>Qs("analytics/standaloneSearchBox/redirect",(t=>t.makeTriggerRedirect({redirectedTo:e}))),Ww=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await iu(e.configuration.analytics)},...e.configuration.analytics.enabled&&await bc(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});function Gw(){return{}}var Jw=nr(Gw(),(e=>e.addCase(Yw,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=Zw(n))})).addCase(Bw,((e,t)=>{let{id:r}=t.payload,n=e[r];if(n){e[r]=Zw(n.defaultRedirectionUrl);return}})).addCase(Qw.pending,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!0)})).addCase(Qw.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];n&&(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(Qw.rejected,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!1)}))));function Zw(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1}}var Kw=new Or({...ew,redirectionUrl:new Pr({required:!0,emptyAllowed:!1})});function Xw(e,t){if(!eb(e));let{dispatch:r}=e,n=()=>e[fn],i=t.options.id||V("standalone_search_box"),a={id:i,highlightOptions:{...t.options.highlightOptions},...Jm,...t.options};Kr(e,Kw,a,"buildStandaloneSearchBox");let o=rw(e,{options:a});return r(_w({id:i,redirectionUrl:a.redirectionUrl})),{...o,updateText(e){o.updateText(e)},selectSuggestion(e){r(vg({id:i,expression:e})),this.submit()},afterRedirection(){r(Lw({id:i}))},submit(){r(mf({query:this.state.value})),r(Qw({id:i}))},get state(){let e=n().commerceStandaloneSearchBoxSet[i];return{...o.state,redirectTo:e.redirectTo}}}}function eb(e){return e.addReducers({commerceQuery:Vh,commerceStandaloneSearchBoxSet:Jw,configuration:mp,querySuggest:ov}),!0}var tb=new Or({content:new xr({required:!0}),conditions:new xr({required:!0}),priority:new jr({required:!1,default:0,min:0}),fields:new _r({required:!1,each:Nr})});function rb(){let e=[],t=e=>{let t=tb.validate(e);if(!e.conditions.every((e=>e instanceof Function)))throw new qr("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return t};return{registerTemplates(...r){r.forEach((r=>{let n={...t(r),fields:r.fields||[]};e.push(n)})),e.sort(((e,t)=>t.priority-e.priority))},selectTemplate(t){let r=e.find((e=>e.conditions.every((e=>e(t)))));return r?r.content:null}}}function nb(){return rb()}var ib=(e,t)=>{let r=gn(e),{options:{selectNumProducts:n,selectResponseId:i,selectLoading:a,selectError:o}}=t,u=()=>e[fn],s=()=>cf(u()),c=()=>af(u()),l=()=>uf(u()),d=()=>!!i(u()),f=()=>d()&&l()>0,h=()=>f()?s()*c()+1:0,g=()=>f()?h()+(n(u())-1):0;return{...r,get state(){return{firstSearchExecuted:d(),firstProduct:h(),lastProduct:g(),totalNumberOfProducts:l(),hasProducts:f(),isLoading:a(u()),hasError:o(u())!==null}}}};function ab(e){return e.addReducers({commerceSearch:Wh}),!0}var ob=e=>{if(!ab(e));let t=ib(e,{options:{selectNumProducts:Sf,selectResponseId:wf,selectLoading:qf,selectError:Of}});return{...t,get state(){return{...t.state,query:Cf(e[fn])||""}}}};function ub(e){return e.addReducers({productListing:Rh}),!0}var sb=e=>{if(!ub(e));return ib(e,{options:{selectNumProducts:ff,selectResponseId:lf,selectLoading:gf,selectError:pf}})};var cb=(e,t)=>{let r=e;return kr(r[t])?kr(e.additionalFields[t])?null:e.additionalFields[t]:r[t]},lb=e=>t=>e.every((e=>!kr(cb(t,e)))),db=e=>t=>e.every((e=>kr(cb(t,e)))),fb=(e,t)=>r=>{let n=gb(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},hb=(e,t)=>r=>{let n=gb(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},gb=(e,t)=>{let r=cb(t,e);return Lr(r)?r:[r]},pb={getProductProperty:cb,fieldsMustBeDefined:lb,fieldsMustNotBeDefined:db,fieldMustMatch:fb,fieldMustNotMatch:hb};function vb(){return[]}nr(vb(),(e=>{e.addCase(bg.fulfilled,((e,t)=>t.payload.fieldSuggestionsFacets??[]))}));F();
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */export{ob as E,mf as M,J as N,sb as O,Gp as S,pb as V,Fm as W,Qm as Z,lv as a,Xw as b,yw as f,nb as w,Uw as x,rw as y,Em as z};
//# sourceMappingURL=p-794b93a9.js.map