{"file":"facet-value-checkbox-7e6a54e2.js","mappings":"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","names":["Close","Tick"],"sources":["src/components/common/triStateCheckbox.tsx","src/components/common/facets/facet-value-exclude/facet-value-exclude.tsx","src/components/common/facets/facet-value-checkbox/facet-value-checkbox.tsx"],"sourcesContent":["import {FacetValueState} from '@coveo/headless';\nimport {FunctionalComponent, h} from '@stencil/core';\nimport Tick from '../../images/checkbox.svg';\nimport Close from '../../images/close.svg';\nimport {CheckboxProps} from './checkbox';\n\nexport type TriStateCheckboxProps = Omit<CheckboxProps, 'checked'> & {\n  state: FacetValueState;\n};\n\nexport const TriStateCheckbox: FunctionalComponent<TriStateCheckboxProps> = (\n  props\n) => {\n  const isSelected = props.state === 'selected';\n  const isExcluded = props.state === 'excluded';\n  const partName = props.part ?? 'checkbox';\n\n  const classNames = [\n    'w-4 h-4 grid place-items-center rounded no-outline hover:border-primary-light focus-visible:border-primary-light',\n  ];\n  const parts = [partName];\n  if (isSelected) {\n    classNames.push(\n      'selected bg-primary hover:bg-primary-light focus-visible:bg-primary-light'\n    );\n    parts.push(`${partName}-checked`);\n  } else if (isExcluded) {\n    classNames.push(\n      'excluded bg-error hover:bg-error focus-visible:bg-error hover:border-error focus-visible:border-error'\n    );\n    parts.push(`${partName}-checked`);\n  } else {\n    classNames.push('border border-neutral-dark');\n  }\n  if (props.class) {\n    classNames.push(props.class);\n  }\n\n  const attributes = {\n    key: props.key,\n    id: props.id,\n    class: classNames.join(' '),\n    part: parts.join(' '),\n    'aria-pressed': isSelected ? 'true' : isExcluded ? 'mixed' : 'false',\n    'aria-label': props.ariaLabel ?? props.text,\n    value: props.text,\n    ref: props.ref,\n  };\n\n  return (\n    <button\n      {...attributes}\n      role=\"button\"\n      onClick={() => props.onToggle?.(!isSelected)}\n      onMouseDown={(e) => props.onMouseDown?.(e)}\n    >\n      <atomic-icon\n        style={{stroke: 'white', fill: 'white'}}\n        class={`w-3/5 ${isSelected || isExcluded ? 'block' : 'hidden'}`}\n        icon={isSelected ? Tick : Close}\n        part={props.iconPart}\n      ></atomic-icon>\n    </button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport Tick from '../../../../images/clear.svg';\n\nexport interface ExcludeProps {\n  onClick(): void;\n  key?: string | number;\n  class?: string;\n  text?: string;\n  ariaLabel?: string;\n  ref?(element?: HTMLElement): void;\n  onMouseEnter?(evt: MouseEvent): void;\n}\n\nexport const FacetValueExclude: FunctionalComponent<ExcludeProps> = (props) => {\n  const classNames = [\n    'value-exclude-button',\n    'peer',\n    'order-last',\n    'flex',\n    'ml-auto',\n  ];\n  if (props.class) {\n    classNames.push(props.class);\n  }\n\n  const attributes = {\n    class: classNames.join(' '),\n    part: 'value-exclude-button',\n    ref: props.ref,\n    key: props.key,\n    'aria-label': props.ariaLabel ?? props.text,\n    value: props.text,\n  };\n\n  return (\n    <button\n      {...attributes}\n      onClick={() => props.onClick?.()}\n      onMouseEnter={(e) => props.onMouseEnter?.(e)}\n    >\n      <atomic-icon\n        class={\n          'w-4 p-1 rounded bg-neutral order-last hover:bg-error hover:fill-white invisible group-hover:visible'\n        }\n        icon={Tick}\n      ></atomic-icon>\n    </button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {createRipple} from '../../../../utils/ripple';\nimport {randomID} from '../../../../utils/utils';\nimport {Checkbox} from '../../checkbox';\nimport {TriStateCheckbox} from '../../triStateCheckbox';\nimport {FacetValueProps} from '../facet-common';\nimport {FacetValueExclude} from '../facet-value-exclude/facet-value-exclude';\n\ntype TriStateFacetValueProps = Omit<FacetValueProps, 'isSelected'> & {\n  state: 'idle' | 'selected' | 'excluded';\n  onExclude(): void;\n};\n\nexport const FacetValueCheckbox: FunctionalComponent<\n  FacetValueProps | TriStateFacetValueProps\n> = (props, children) => {\n  const id = randomID('facet-value-');\n  const count = props.numberOfResults.toLocaleString(props.i18n.language);\n  const ariaLabelAttributes = {\n    value: props.displayValue,\n    count: props.numberOfResults,\n    interpolation: {escapeValue: false},\n  };\n  const selectedAriaLabel = props.i18n.t('facet-value', ariaLabelAttributes);\n  const excludedAriaLabel = props.i18n.t(\n    'facet-value-exclude',\n    ariaLabelAttributes\n  );\n  let labelRef: HTMLLabelElement;\n\n  const isTriStateCheckbox = (\n    a: FacetValueProps | TriStateFacetValueProps\n  ): a is TriStateFacetValueProps => {\n    return 'state' in a && 'isSelected' in a;\n  };\n\n  const renderCheckbox = () => {\n    const attributes = {\n      id,\n      onToggle: () => props.onClick(),\n      part: 'value-checkbox',\n      class: 'value-checkbox',\n      ariaLabel: selectedAriaLabel,\n      ref: props.buttonRef,\n      onMouseDown: (e: MouseEvent) =>\n        createRipple(e, {color: 'neutral', parent: labelRef}),\n      iconPart: 'value-checkbox-icon',\n    };\n\n    if (isTriStateCheckbox(props)) {\n      return <TriStateCheckbox {...attributes} state={props.state} />;\n    }\n\n    return <Checkbox {...attributes} checked={props.isSelected} />;\n  };\n\n  const renderExclusion = () => {\n    if (isTriStateCheckbox(props)) {\n      return (\n        <FacetValueExclude\n          onClick={() => props.onExclude?.()}\n          ariaLabel={excludedAriaLabel}\n        ></FacetValueExclude>\n      );\n    }\n  };\n\n  return (\n    <li key={props.displayValue} class=\"relative flex items-center\">\n      {renderCheckbox()}\n      <label\n        ref={(ref) => (labelRef = ref!)}\n        htmlFor={id}\n        part=\"value-checkbox-label\"\n        class=\"group items-center\"\n        onMouseDown={(e) => createRipple(e, {color: 'neutral'})}\n        aria-hidden=\"true\"\n      >\n        {children}\n        {renderExclusion()}\n        <span part=\"value-count\" class=\"value-count\">\n          {props.i18n.t('between-parentheses', {\n            text: count,\n          })}\n        </span>\n      </label>\n    </li>\n  );\n};\n"],"version":3}