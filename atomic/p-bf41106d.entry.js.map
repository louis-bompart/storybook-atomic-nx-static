{"version":3,"names":["atomicInsightQueryErrorCss","AtomicInsightQueryErrorStyle0","AtomicQueryError","this","showMoreInfo","initialize","queryError","buildQueryError","bindings","engine","render","hasError","error","queryErrorState","i18n","state","configuration","organizationId","platformUrl","ariaMessage","getAriaMessageFromErrorType","type","h","QueryErrorGuard","key","QueryErrorContainer","QueryErrorIcon","errorType","QueryErrorTitle","QueryErrorDescription","url","QueryErrorShowMore","link","QueryErrorLink","onShowMore","QueryErrorDetails","show","__decorate","InitializeBindings","BindStateToController","AriaLiveRegion"],"sources":["src/components/insight/atomic-insight-query-error/atomic-insight-query-error.pcss?tag=atomic-insight-query-error&encapsulation=shadow","src/components/insight/atomic-insight-query-error/atomic-insight-query-error.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n","import {\n  QueryError,\n  QueryErrorState,\n  buildQueryError,\n} from '@coveo/headless/insight';\nimport {Component, h, State} from '@stencil/core';\nimport {AriaLiveRegion} from '../../../utils/accessibility-utils';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {QueryErrorContainer} from '../../common/query-error/container';\nimport {QueryErrorDescription} from '../../common/query-error/description';\nimport {QueryErrorDetails} from '../../common/query-error/details';\nimport {QueryErrorGuard} from '../../common/query-error/guard';\nimport {QueryErrorIcon} from '../../common/query-error/icon';\nimport {QueryErrorLink} from '../../common/query-error/link';\nimport {QueryErrorShowMore} from '../../common/query-error/show-more';\nimport {QueryErrorTitle} from '../../common/query-error/title';\nimport {getAriaMessageFromErrorType} from '../../common/query-error/utils';\nimport {InsightBindings} from '../atomic-insight-interface/atomic-insight-interface';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-insight-query-error',\n  styleUrl: 'atomic-insight-query-error.pcss',\n  shadow: true,\n})\nexport class AtomicQueryError\n  implements InitializableComponent<InsightBindings>\n{\n  @InitializeBindings() public bindings!: InsightBindings;\n  public queryError!: QueryError;\n\n  @BindStateToController('queryError')\n  @State()\n  private queryErrorState!: QueryErrorState;\n  @State() public error!: Error;\n  @State() showMoreInfo = false;\n\n  @AriaLiveRegion('query-error')\n  protected ariaMessage!: string;\n\n  public initialize() {\n    this.queryError = buildQueryError(this.bindings.engine);\n  }\n\n  public render() {\n    const {hasError, error} = this.queryErrorState;\n    const {\n      bindings: {\n        i18n,\n        engine: {\n          state: {\n            configuration: {organizationId, platformUrl},\n          },\n        },\n      },\n    } = this;\n    if (hasError) {\n      this.ariaMessage = getAriaMessageFromErrorType(\n        i18n,\n        organizationId,\n        platformUrl,\n        error?.type\n      );\n    }\n    return (\n      <QueryErrorGuard hasError={hasError}>\n        <QueryErrorContainer>\n          <QueryErrorIcon errorType={error?.type} />\n          <QueryErrorTitle i18n={i18n} organizationId={organizationId} />\n          <QueryErrorDescription\n            i18n={i18n}\n            organizationId={organizationId}\n            url={platformUrl}\n          />\n          <QueryErrorShowMore\n            link={<QueryErrorLink i18n={i18n} errorType={error?.type} />}\n            onShowMore={() => (this.showMoreInfo = !this.showMoreInfo)}\n            i18n={i18n}\n          />\n          <QueryErrorDetails error={error} show={this.showMoreInfo} />\n        </QueryErrorContainer>\n      </QueryErrorGuard>\n    );\n  }\n}\n"],"mappings":"qYAAA,MAAMA,EAA6B,w+tCACnC,MAAAC,EAAeD,E,iXC8BFE,EAAgB,M,yBAUlBC,KAAAC,aAAe,M,sEAAA,K,CAKjB,UAAAC,GACLF,KAAKG,WAAaC,EAAgBJ,KAAKK,SAASC,O,CAG3C,MAAAC,GACL,MAAMC,SAACA,EAAQC,MAAEA,GAAST,KAAKU,gBAC/B,MACEL,UAAUM,KACRA,EACAL,QACEM,OACEC,eAAeC,eAACA,EAAcC,YAAEA,OAIpCf,KACJ,GAAIQ,EAAU,CACZR,KAAKgB,YAAcC,EACjBN,EACAG,EACAC,EACAN,IAAK,MAALA,SAAK,SAALA,EAAOS,K,CAGX,OACEC,EAACC,EAAe,CAAAC,IAAA,2CAACb,SAAUA,GACzBW,EAACG,EAAmB,CAAAD,IAAA,4CAClBF,EAACI,EAAc,CAAAF,IAAA,2CAACG,UAAWf,IAAK,MAALA,SAAK,SAALA,EAAOS,OAClCC,EAACM,EAAe,CAAAJ,IAAA,2CAACV,KAAMA,EAAMG,eAAgBA,IAC7CK,EAACO,EAAqB,CAAAL,IAAA,2CACpBV,KAAMA,EACNG,eAAgBA,EAChBa,IAAKZ,IAEPI,EAACS,EAAkB,CAAAP,IAAA,2CACjBQ,KAAMV,EAACW,EAAc,CAACnB,KAAMA,EAAMa,UAAWf,IAAK,MAALA,SAAK,SAALA,EAAOS,OACpDa,WAAY,IAAO/B,KAAKC,cAAgBD,KAAKC,aAC7CU,KAAMA,IAERQ,EAACa,EAAiB,CAAAX,IAAA,2CAACZ,MAAOA,EAAOwB,KAAMjC,KAAKC,gB,GAnDvBiC,EAAA,CAA5BC,K,+BAKOD,EAAA,CAFPE,EAAsB,e,sCAObF,EAAA,CADTG,EAAe,gB"}